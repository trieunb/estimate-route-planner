"use strict";if(function(root,factory){"function"==typeof define&&define.amd?define([],function(){return root.SignaturePad=factory()}):"object"==typeof exports?module.exports=factory():root.SignaturePad=factory()}(this,function(){var SignaturePad=function(document){var SignaturePad=function(canvas,options){var self=this,opts=options||{};this.velocityFilterWeight=opts.velocityFilterWeight||.7,this.minWidth=opts.minWidth||.5,this.maxWidth=opts.maxWidth||2.5,this.dotSize=opts.dotSize||function(){return(this.minWidth+this.maxWidth)/2},this.penColor=opts.penColor||"black",this.backgroundColor=opts.backgroundColor||"rgba(0,0,0,0)",this.onEnd=opts.onEnd,this.onBegin=opts.onBegin,this._canvas=canvas,this._ctx=canvas.getContext("2d"),this.clear(),this._handleMouseDown=function(event){1===event.which&&(self._mouseButtonDown=!0,self._strokeBegin(event))},this._handleMouseMove=function(event){self._mouseButtonDown&&self._strokeUpdate(event)},this._handleMouseUp=function(event){1===event.which&&self._mouseButtonDown&&(self._mouseButtonDown=!1,self._strokeEnd(event))},this._handleTouchStart=function(event){var touch=event.changedTouches[0];self._strokeBegin(touch)},this._handleTouchMove=function(event){event.preventDefault();var touch=event.changedTouches[0];self._strokeUpdate(touch)},this._handleTouchEnd=function(event){var wasCanvasTouched=event.target===self._canvas;wasCanvasTouched&&(event.preventDefault(),self._strokeEnd(event))},this._handleMouseEvents(),this._handleTouchEvents()};SignaturePad.prototype.clear=function(){var ctx=this._ctx,canvas=this._canvas;ctx.fillStyle=this.backgroundColor,ctx.clearRect(0,0,canvas.width,canvas.height),ctx.fillRect(0,0,canvas.width,canvas.height),this._reset()},SignaturePad.prototype.toDataURL=function(imageType,quality){var canvas=this._canvas;return canvas.toDataURL.apply(canvas,arguments)},SignaturePad.prototype.fromDataURL=function(dataUrl){var self=this,image=new Image,ratio=window.devicePixelRatio||1,width=this._canvas.width/ratio,height=this._canvas.height/ratio;this._reset(),image.src=dataUrl,image.onload=function(){self._ctx.drawImage(image,0,0,width,height)},this._isEmpty=!1},SignaturePad.prototype._strokeUpdate=function(event){var point=this._createPoint(event);this._addPoint(point)},SignaturePad.prototype._strokeBegin=function(event){this._reset(),this._strokeUpdate(event),"function"==typeof this.onBegin&&this.onBegin(event)},SignaturePad.prototype._strokeDraw=function(point){var ctx=this._ctx,dotSize="function"==typeof this.dotSize?this.dotSize():this.dotSize;ctx.beginPath(),this._drawPoint(point.x,point.y,dotSize),ctx.closePath(),ctx.fill()},SignaturePad.prototype._strokeEnd=function(event){var canDrawCurve=this.points.length>2,point=this.points[0];!canDrawCurve&&point&&this._strokeDraw(point),"function"==typeof this.onEnd&&this.onEnd(event)},SignaturePad.prototype._handleMouseEvents=function(){this._mouseButtonDown=!1,this._canvas.addEventListener("mousedown",this._handleMouseDown),this._canvas.addEventListener("mousemove",this._handleMouseMove),document.addEventListener("mouseup",this._handleMouseUp)},SignaturePad.prototype._handleTouchEvents=function(){this._canvas.style.msTouchAction="none",this._canvas.addEventListener("touchstart",this._handleTouchStart),this._canvas.addEventListener("touchmove",this._handleTouchMove),document.addEventListener("touchend",this._handleTouchEnd)},SignaturePad.prototype.on=function(){this._handleMouseEvents(),this._handleTouchEvents()},SignaturePad.prototype.off=function(){this._canvas.removeEventListener("mousedown",this._handleMouseDown),this._canvas.removeEventListener("mousemove",this._handleMouseMove),document.removeEventListener("mouseup",this._handleMouseUp),this._canvas.removeEventListener("touchstart",this._handleTouchStart),this._canvas.removeEventListener("touchmove",this._handleTouchMove),document.removeEventListener("touchend",this._handleTouchEnd)},SignaturePad.prototype.isEmpty=function(){return this._isEmpty},SignaturePad.prototype._reset=function(){this.points=[],this._lastVelocity=0,this._lastWidth=(this.minWidth+this.maxWidth)/2,this._isEmpty=!0,this._ctx.fillStyle=this.penColor},SignaturePad.prototype._createPoint=function(event){var rect=this._canvas.getBoundingClientRect();return new Point(event.clientX-rect.left,event.clientY-rect.top)},SignaturePad.prototype._addPoint=function(point){var c2,c3,curve,tmp,points=this.points;points.push(point),points.length>2&&(3===points.length&&points.unshift(points[0]),tmp=this._calculateCurveControlPoints(points[0],points[1],points[2]),c2=tmp.c2,tmp=this._calculateCurveControlPoints(points[1],points[2],points[3]),c3=tmp.c1,curve=new Bezier(points[1],c2,c3,points[2]),this._addCurve(curve),points.shift())},SignaturePad.prototype._calculateCurveControlPoints=function(s1,s2,s3){var dx1=s1.x-s2.x,dy1=s1.y-s2.y,dx2=s2.x-s3.x,dy2=s2.y-s3.y,m1={x:(s1.x+s2.x)/2,y:(s1.y+s2.y)/2},m2={x:(s2.x+s3.x)/2,y:(s2.y+s3.y)/2},l1=Math.sqrt(dx1*dx1+dy1*dy1),l2=Math.sqrt(dx2*dx2+dy2*dy2),dxm=m1.x-m2.x,dym=m1.y-m2.y,k=l2/(l1+l2),cm={x:m2.x+dxm*k,y:m2.y+dym*k},tx=s2.x-cm.x,ty=s2.y-cm.y;return{c1:new Point(m1.x+tx,m1.y+ty),c2:new Point(m2.x+tx,m2.y+ty)}},SignaturePad.prototype._addCurve=function(curve){var velocity,newWidth,startPoint=curve.startPoint,endPoint=curve.endPoint;velocity=endPoint.velocityFrom(startPoint),velocity=this.velocityFilterWeight*velocity+(1-this.velocityFilterWeight)*this._lastVelocity,newWidth=this._strokeWidth(velocity),this._drawCurve(curve,this._lastWidth,newWidth),this._lastVelocity=velocity,this._lastWidth=newWidth},SignaturePad.prototype._drawPoint=function(x,y,size){var ctx=this._ctx;ctx.moveTo(x,y),ctx.arc(x,y,size,0,2*Math.PI,!1),this._isEmpty=!1},SignaturePad.prototype._drawCurve=function(curve,startWidth,endWidth){var drawSteps,width,i,t,tt,ttt,u,uu,uuu,x,y,ctx=this._ctx,widthDelta=endWidth-startWidth;for(drawSteps=Math.floor(curve.length()),ctx.beginPath(),i=0;drawSteps>i;i++)t=i/drawSteps,tt=t*t,ttt=tt*t,u=1-t,uu=u*u,uuu=uu*u,x=uuu*curve.startPoint.x,x+=3*uu*t*curve.control1.x,x+=3*u*tt*curve.control2.x,x+=ttt*curve.endPoint.x,y=uuu*curve.startPoint.y,y+=3*uu*t*curve.control1.y,y+=3*u*tt*curve.control2.y,y+=ttt*curve.endPoint.y,width=startWidth+ttt*widthDelta,this._drawPoint(x,y,width);ctx.closePath(),ctx.fill()},SignaturePad.prototype._strokeWidth=function(velocity){return Math.max(this.maxWidth/(velocity+1),this.minWidth)};var Point=function(x,y,time){this.x=x,this.y=y,this.time=time||(new Date).getTime()};Point.prototype.velocityFrom=function(start){return this.time!==start.time?this.distanceTo(start)/(this.time-start.time):1},Point.prototype.distanceTo=function(start){return Math.sqrt(Math.pow(this.x-start.x,2)+Math.pow(this.y-start.y,2))};var Bezier=function(startPoint,control1,control2,endPoint){this.startPoint=startPoint,this.control1=control1,this.control2=control2,this.endPoint=endPoint};return Bezier.prototype.length=function(){var i,t,cx,cy,px,py,xdiff,ydiff,steps=10,length=0;for(i=0;steps>=i;i++)t=i/steps,cx=this._point(t,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),cy=this._point(t,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y),i>0&&(xdiff=cx-px,ydiff=cy-py,length+=Math.sqrt(xdiff*xdiff+ydiff*ydiff)),px=cx,py=cy;return length},Bezier.prototype._point=function(t,start,c1,c2,end){return start*(1-t)*(1-t)*(1-t)+3*c1*(1-t)*(1-t)*t+3*c2*(1-t)*t*t+end*t*t*t},SignaturePad}(document);return SignaturePad}),function(){var Dropzone,Emitter,camelize,contentLoaded,detectVerticalSquash,drawImageIOSFix,noop,without,__slice=[].slice,__hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};noop=function(){},Emitter=function(){function Emitter(){}return Emitter.prototype.addEventListener=Emitter.prototype.on,Emitter.prototype.on=function(event,fn){return this._callbacks=this._callbacks||{},this._callbacks[event]||(this._callbacks[event]=[]),this._callbacks[event].push(fn),this},Emitter.prototype.emit=function(){var args,callback,callbacks,event,_i,_len;if(event=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],this._callbacks=this._callbacks||{},callbacks=this._callbacks[event])for(_i=0,_len=callbacks.length;_len>_i;_i++)callback=callbacks[_i],callback.apply(this,args);return this},Emitter.prototype.removeListener=Emitter.prototype.off,Emitter.prototype.removeAllListeners=Emitter.prototype.off,Emitter.prototype.removeEventListener=Emitter.prototype.off,Emitter.prototype.off=function(event,fn){var callback,callbacks,i,_i,_len;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(callbacks=this._callbacks[event],!callbacks)return this;if(1===arguments.length)return delete this._callbacks[event],this;for(i=_i=0,_len=callbacks.length;_len>_i;i=++_i)if(callback=callbacks[i],callback===fn){callbacks.splice(i,1);break}return this},Emitter}(),Dropzone=function(_super){function Dropzone(element,options){var elementOptions,fallback,_ref;if(this.element=element,this.version=Dropzone.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(Dropzone.instances.push(this),this.element.dropzone=this,elementOptions=null!=(_ref=Dropzone.optionsForElement(this.element))?_ref:{},this.options=extend({},this.defaultOptions,elementOptions,null!=options?options:{}),this.options.forceFallback||!Dropzone.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(fallback=this.getExistingFallback())&&fallback.parentNode&&fallback.parentNode.removeChild(fallback),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=Dropzone.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=Dropzone.getElements(this.options.clickable,"clickable")),this.init()}var extend,resolveOption;return __extends(Dropzone,_super),Dropzone.prototype.Emitter=Emitter,Dropzone.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],Dropzone.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(file,done){return done()},init:function(){return noop},forceFallback:!1,fallback:function(){var child,messageElement,span,_i,_len,_ref;for(this.element.className=""+this.element.className+" dz-browser-not-supported",_ref=this.element.getElementsByTagName("div"),_i=0,_len=_ref.length;_len>_i;_i++)child=_ref[_i],/(^| )dz-message($| )/.test(child.className)&&(messageElement=child,child.className="dz-message");return messageElement||(messageElement=Dropzone.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(messageElement)),span=messageElement.getElementsByTagName("span")[0],span&&(span.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(file){var info,srcRatio,trgRatio;return info={srcX:0,srcY:0,srcWidth:file.width,srcHeight:file.height},srcRatio=file.width/file.height,info.optWidth=this.options.thumbnailWidth,info.optHeight=this.options.thumbnailHeight,null==info.optWidth&&null==info.optHeight?(info.optWidth=info.srcWidth,info.optHeight=info.srcHeight):null==info.optWidth?info.optWidth=srcRatio*info.optHeight:null==info.optHeight&&(info.optHeight=1/srcRatio*info.optWidth),trgRatio=info.optWidth/info.optHeight,file.height<info.optHeight||file.width<info.optWidth?(info.trgHeight=info.srcHeight,info.trgWidth=info.srcWidth):srcRatio>trgRatio?(info.srcHeight=file.height,info.srcWidth=info.srcHeight*trgRatio):(info.srcWidth=file.width,info.srcHeight=info.srcWidth/trgRatio),info.srcX=(file.width-info.srcWidth)/2,info.srcY=(file.height-info.srcHeight)/2,info},drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:noop,dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:noop,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(file){var node,removeFileEvent,removeLink,_i,_j,_k,_len,_len1,_len2,_ref,_ref1,_ref2,_results;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(file.previewElement=Dropzone.createElement(this.options.previewTemplate.trim()),file.previewTemplate=file.previewElement,this.previewsContainer.appendChild(file.previewElement),_ref=file.previewElement.querySelectorAll("[data-dz-name]"),_i=0,_len=_ref.length;_len>_i;_i++)node=_ref[_i],node.textContent=file.name;for(_ref1=file.previewElement.querySelectorAll("[data-dz-size]"),_j=0,_len1=_ref1.length;_len1>_j;_j++)node=_ref1[_j],node.innerHTML=this.filesize(file.size);for(this.options.addRemoveLinks&&(file._removeLink=Dropzone.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),file.previewElement.appendChild(file._removeLink)),removeFileEvent=function(_this){return function(e){return e.preventDefault(),e.stopPropagation(),file.status===Dropzone.UPLOADING?Dropzone.confirm(_this.options.dictCancelUploadConfirmation,function(){return _this.removeFile(file)}):_this.options.dictRemoveFileConfirmation?Dropzone.confirm(_this.options.dictRemoveFileConfirmation,function(){return _this.removeFile(file)}):_this.removeFile(file)}}(this),_ref2=file.previewElement.querySelectorAll("[data-dz-remove]"),_results=[],_k=0,_len2=_ref2.length;_len2>_k;_k++)removeLink=_ref2[_k],_results.push(removeLink.addEventListener("click",removeFileEvent));return _results}},removedfile:function(file){var _ref;return file.previewElement&&null!=(_ref=file.previewElement)&&_ref.parentNode.removeChild(file.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(file,dataUrl){var thumbnailElement,_i,_len,_ref;if(file.previewElement){for(file.previewElement.classList.remove("dz-file-preview"),_ref=file.previewElement.querySelectorAll("[data-dz-thumbnail]"),_i=0,_len=_ref.length;_len>_i;_i++)thumbnailElement=_ref[_i],thumbnailElement.alt=file.name,thumbnailElement.src=dataUrl;return setTimeout(function(_this){return function(){return file.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(file,message){var node,_i,_len,_ref,_results;if(file.previewElement){for(file.previewElement.classList.add("dz-error"),"String"!=typeof message&&message.error&&(message=message.error),_ref=file.previewElement.querySelectorAll("[data-dz-errormessage]"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)node=_ref[_i],_results.push(node.textContent=message);return _results}},errormultiple:noop,processing:function(file){return file.previewElement&&(file.previewElement.classList.add("dz-processing"),file._removeLink)?file._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:noop,uploadprogress:function(file,progress,bytesSent){var node,_i,_len,_ref,_results;if(file.previewElement){for(_ref=file.previewElement.querySelectorAll("[data-dz-uploadprogress]"),_results=[],_i=0,_len=_ref.length;_len>_i;_i++)node=_ref[_i],"PROGRESS"===node.nodeName?_results.push(node.value=progress):_results.push(node.style.width=""+progress+"%");return _results}},totaluploadprogress:noop,sending:noop,sendingmultiple:noop,success:function(file){return file.previewElement?file.previewElement.classList.add("dz-success"):void 0},successmultiple:noop,canceled:function(file){return this.emit("error",file,"Upload canceled.")},canceledmultiple:noop,complete:function(file){return file._removeLink&&(file._removeLink.textContent=this.options.dictRemoveFile),file.previewElement?file.previewElement.classList.add("dz-complete"):void 0},completemultiple:noop,maxfilesexceeded:noop,maxfilesreached:noop,queuecomplete:noop,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},extend=function(){var key,object,objects,target,val,_i,_len;for(target=arguments[0],objects=2<=arguments.length?__slice.call(arguments,1):[],_i=0,_len=objects.length;_len>_i;_i++){object=objects[_i];for(key in object)val=object[key],target[key]=val}return target},Dropzone.prototype.getAcceptedFiles=function(){var file,_i,_len,_ref,_results;for(_ref=this.files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],file.accepted&&_results.push(file);return _results},Dropzone.prototype.getRejectedFiles=function(){var file,_i,_len,_ref,_results;for(_ref=this.files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],file.accepted||_results.push(file);return _results},Dropzone.prototype.getFilesWithStatus=function(status){var file,_i,_len,_ref,_results;for(_ref=this.files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],file.status===status&&_results.push(file);return _results},Dropzone.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(Dropzone.QUEUED)},Dropzone.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(Dropzone.UPLOADING)},Dropzone.prototype.getActiveFiles=function(){var file,_i,_len,_ref,_results;for(_ref=this.files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],(file.status===Dropzone.UPLOADING||file.status===Dropzone.QUEUED)&&_results.push(file);return _results},Dropzone.prototype.init=function(){var eventName,noPropagation,setupHiddenFileInput,_i,_len,_ref,_ref1;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(Dropzone.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(setupHiddenFileInput=function(_this){return function(){return _this.hiddenFileInput&&document.body.removeChild(_this.hiddenFileInput),_this.hiddenFileInput=document.createElement("input"),_this.hiddenFileInput.setAttribute("type","file"),(null==_this.options.maxFiles||_this.options.maxFiles>1)&&_this.hiddenFileInput.setAttribute("multiple","multiple"),_this.hiddenFileInput.className="dz-hidden-input",null!=_this.options.acceptedFiles&&_this.hiddenFileInput.setAttribute("accept",_this.options.acceptedFiles),null!=_this.options.capture&&_this.hiddenFileInput.setAttribute("capture",_this.options.capture),_this.hiddenFileInput.style.visibility="hidden",_this.hiddenFileInput.style.position="absolute",_this.hiddenFileInput.style.top="0",_this.hiddenFileInput.style.left="0",_this.hiddenFileInput.style.height="0",_this.hiddenFileInput.style.width="0",document.body.appendChild(_this.hiddenFileInput),_this.hiddenFileInput.addEventListener("change",function(){var file,files,_i,_len;if(files=_this.hiddenFileInput.files,files.length)for(_i=0,_len=files.length;_len>_i;_i++)file=files[_i],_this.addFile(file);return setupHiddenFileInput()})}}(this))(),this.URL=null!=(_ref=window.URL)?_ref:window.webkitURL,_ref1=this.events,_i=0,_len=_ref1.length;_len>_i;_i++)eventName=_ref1[_i],this.on(eventName,this.options[eventName]);return this.on("uploadprogress",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(_this){return function(){return _this.updateTotalUploadProgress()}}(this)),this.on("canceled",function(_this){return function(file){return _this.emit("complete",file)}}(this)),this.on("complete",function(_this){return function(file){return 0===_this.getUploadingFiles().length&&0===_this.getQueuedFiles().length?setTimeout(function(){return _this.emit("queuecomplete")},0):void 0}}(this)),noPropagation=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(_this){return function(e){return _this.emit("dragstart",e)}}(this),dragenter:function(_this){return function(e){return noPropagation(e),_this.emit("dragenter",e)}}(this),dragover:function(_this){return function(e){var efct;try{efct=e.dataTransfer.effectAllowed}catch(_error){}return e.dataTransfer.dropEffect="move"===efct||"linkMove"===efct?"move":"copy",noPropagation(e),_this.emit("dragover",e)}}(this),dragleave:function(_this){return function(e){return _this.emit("dragleave",e)}}(this),drop:function(_this){return function(e){return noPropagation(e),_this.drop(e)}}(this),dragend:function(_this){return function(e){return _this.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(_this){return function(clickableElement){return _this.listeners.push({element:clickableElement,events:{click:function(evt){return clickableElement!==_this.element||evt.target===_this.element||Dropzone.elementInside(evt.target,_this.element.querySelector(".dz-message"))?_this.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},Dropzone.prototype.destroy=function(){var _ref;return this.disable(),this.removeAllFiles(!0),(null!=(_ref=this.hiddenFileInput)?_ref.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,Dropzone.instances.splice(Dropzone.instances.indexOf(this),1)},Dropzone.prototype.updateTotalUploadProgress=function(){var activeFiles,file,totalBytes,totalBytesSent,totalUploadProgress,_i,_len,_ref;if(totalBytesSent=0,totalBytes=0,activeFiles=this.getActiveFiles(),activeFiles.length){for(_ref=this.getActiveFiles(),_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],totalBytesSent+=file.upload.bytesSent,totalBytes+=file.upload.total;totalUploadProgress=100*totalBytesSent/totalBytes}else totalUploadProgress=100;return this.emit("totaluploadprogress",totalUploadProgress,totalBytes,totalBytesSent)},Dropzone.prototype._getParamName=function(n){return"function"==typeof this.options.paramName?this.options.paramName(n):""+this.options.paramName+(this.options.uploadMultiple?"["+n+"]":"")},Dropzone.prototype.getFallbackForm=function(){var existingFallback,fields,fieldsString,form;return(existingFallback=this.getExistingFallback())?existingFallback:(fieldsString='<div class="dz-fallback">',this.options.dictFallbackText&&(fieldsString+="<p>"+this.options.dictFallbackText+"</p>"),fieldsString+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',fields=Dropzone.createElement(fieldsString),"FORM"!==this.element.tagName?(form=Dropzone.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),form.appendChild(fields)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=form?form:fields)},Dropzone.prototype.getExistingFallback=function(){var fallback,getFallback,tagName,_i,_len,_ref;for(getFallback=function(elements){var el,_i,_len;for(_i=0,_len=elements.length;_len>_i;_i++)if(el=elements[_i],/(^| )fallback($| )/.test(el.className))return el},_ref=["div","form"],_i=0,_len=_ref.length;_len>_i;_i++)if(tagName=_ref[_i],fallback=getFallback(this.element.getElementsByTagName(tagName)))return fallback},Dropzone.prototype.setupEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;for(_ref=this.listeners,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)elementListeners=_ref[_i],_results.push(function(){var _ref1,_results1;_ref1=elementListeners.events,_results1=[];for(event in _ref1)listener=_ref1[event],_results1.push(elementListeners.element.addEventListener(event,listener,!1));return _results1}());return _results},Dropzone.prototype.removeEventListeners=function(){var elementListeners,event,listener,_i,_len,_ref,_results;for(_ref=this.listeners,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)elementListeners=_ref[_i],_results.push(function(){var _ref1,_results1;_ref1=elementListeners.events,_results1=[];for(event in _ref1)listener=_ref1[event],_results1.push(elementListeners.element.removeEventListener(event,listener,!1));return _results1}());return _results},Dropzone.prototype.disable=function(){var file,_i,_len,_ref,_results;for(this.clickableElements.forEach(function(element){return element.classList.remove("dz-clickable")}),this.removeEventListeners(),_ref=this.files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],_results.push(this.cancelUpload(file));return _results},Dropzone.prototype.enable=function(){return this.clickableElements.forEach(function(element){return element.classList.add("dz-clickable")}),this.setupEventListeners()},Dropzone.prototype.filesize=function(size){var cutoff,i,selectedSize,selectedUnit,unit,units,_i,_len;for(units=["TB","GB","MB","KB","b"],selectedSize=selectedUnit=null,i=_i=0,_len=units.length;_len>_i;i=++_i)if(unit=units[i],cutoff=Math.pow(this.options.filesizeBase,4-i)/10,size>=cutoff){selectedSize=size/Math.pow(this.options.filesizeBase,4-i),selectedUnit=unit;break}return selectedSize=Math.round(10*selectedSize)/10,"<strong>"+selectedSize+"</strong> "+selectedUnit},Dropzone.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},Dropzone.prototype.drop=function(e){var files,items;e.dataTransfer&&(this.emit("drop",e),files=e.dataTransfer.files,files.length&&(items=e.dataTransfer.items,items&&items.length&&null!=items[0].webkitGetAsEntry?this._addFilesFromItems(items):this.handleFiles(files)))},Dropzone.prototype.paste=function(e){var items,_ref;if(null!=(null!=e&&null!=(_ref=e.clipboardData)?_ref.items:void 0))return this.emit("paste",e),items=e.clipboardData.items,items.length?this._addFilesFromItems(items):void 0},Dropzone.prototype.handleFiles=function(files){var file,_i,_len,_results;for(_results=[],_i=0,_len=files.length;_len>_i;_i++)file=files[_i],_results.push(this.addFile(file));return _results},Dropzone.prototype._addFilesFromItems=function(items){var entry,item,_i,_len,_results;for(_results=[],_i=0,_len=items.length;_len>_i;_i++)item=items[_i],null!=item.webkitGetAsEntry&&(entry=item.webkitGetAsEntry())?entry.isFile?_results.push(this.addFile(item.getAsFile())):entry.isDirectory?_results.push(this._addFilesFromDirectory(entry,entry.name)):_results.push(void 0):null!=item.getAsFile&&(null==item.kind||"file"===item.kind)?_results.push(this.addFile(item.getAsFile())):_results.push(void 0);
return _results},Dropzone.prototype._addFilesFromDirectory=function(directory,path){var dirReader,entriesReader;return dirReader=directory.createReader(),entriesReader=function(_this){return function(entries){var entry,_i,_len;for(_i=0,_len=entries.length;_len>_i;_i++)entry=entries[_i],entry.isFile?entry.file(function(file){return _this.options.ignoreHiddenFiles&&"."===file.name.substring(0,1)?void 0:(file.fullPath=""+path+"/"+file.name,_this.addFile(file))}):entry.isDirectory&&_this._addFilesFromDirectory(entry,""+path+"/"+entry.name)}}(this),dirReader.readEntries(entriesReader,function(error){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(error):void 0})},Dropzone.prototype.accept=function(file,done){return file.size>1024*this.options.maxFilesize*1024?done(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(file.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):Dropzone.isValidFile(file,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(done(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",file)):this.options.accept.call(this,file,done):done(this.options.dictInvalidFileType)},Dropzone.prototype.addFile=function(file){return file.upload={progress:0,total:file.size,bytesSent:0},this.files.push(file),file.status=Dropzone.ADDED,this.emit("addedfile",file),this._enqueueThumbnail(file),this.accept(file,function(_this){return function(error){return error?(file.accepted=!1,_this._errorProcessing([file],error)):(file.accepted=!0,_this.options.autoQueue&&_this.enqueueFile(file)),_this._updateMaxFilesReachedClass()}}(this))},Dropzone.prototype.enqueueFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_len>_i;_i++)file=files[_i],this.enqueueFile(file);return null},Dropzone.prototype.enqueueFile=function(file){if(file.status!==Dropzone.ADDED||file.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return file.status=Dropzone.QUEUED,this.options.autoProcessQueue?setTimeout(function(_this){return function(){return _this.processQueue()}}(this),0):void 0},Dropzone.prototype._thumbnailQueue=[],Dropzone.prototype._processingThumbnail=!1,Dropzone.prototype._enqueueThumbnail=function(file){return this.options.createImageThumbnails&&file.type.match(/image.*/)&&file.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(file),setTimeout(function(_this){return function(){return _this._processThumbnailQueue()}}(this),0)):void 0},Dropzone.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(_this){return function(){return _this._processingThumbnail=!1,_this._processThumbnailQueue()}}(this)))},Dropzone.prototype.removeFile=function(file){return file.status===Dropzone.UPLOADING&&this.cancelUpload(file),this.files=without(this.files,file),this.emit("removedfile",file),0===this.files.length?this.emit("reset"):void 0},Dropzone.prototype.removeAllFiles=function(cancelIfNecessary){var file,_i,_len,_ref;for(null==cancelIfNecessary&&(cancelIfNecessary=!1),_ref=this.files.slice(),_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],(file.status!==Dropzone.UPLOADING||cancelIfNecessary)&&this.removeFile(file);return null},Dropzone.prototype.createThumbnail=function(file,callback){var fileReader;return fileReader=new FileReader,fileReader.onload=function(_this){return function(){return"image/svg+xml"===file.type?(_this.emit("thumbnail",file,fileReader.result),void(null!=callback&&callback())):_this.createThumbnailFromUrl(file,fileReader.result,callback)}}(this),fileReader.readAsDataURL(file)},Dropzone.prototype.createThumbnailFromUrl=function(file,imageUrl,callback){var img;return img=document.createElement("img"),img.onload=function(_this){return function(){var canvas,ctx,resizeInfo,thumbnail,_ref,_ref1,_ref2,_ref3;return file.width=img.width,file.height=img.height,resizeInfo=_this.options.resize.call(_this,file),null==resizeInfo.trgWidth&&(resizeInfo.trgWidth=resizeInfo.optWidth),null==resizeInfo.trgHeight&&(resizeInfo.trgHeight=resizeInfo.optHeight),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d"),canvas.width=resizeInfo.trgWidth,canvas.height=resizeInfo.trgHeight,drawImageIOSFix(ctx,img,null!=(_ref=resizeInfo.srcX)?_ref:0,null!=(_ref1=resizeInfo.srcY)?_ref1:0,resizeInfo.srcWidth,resizeInfo.srcHeight,null!=(_ref2=resizeInfo.trgX)?_ref2:0,null!=(_ref3=resizeInfo.trgY)?_ref3:0,resizeInfo.trgWidth,resizeInfo.trgHeight),thumbnail=canvas.toDataURL("image/png"),_this.emit("thumbnail",file,thumbnail),null!=callback?callback():void 0}}(this),null!=callback&&(img.onerror=callback),img.src=imageUrl},Dropzone.prototype.processQueue=function(){var i,parallelUploads,processingLength,queuedFiles;if(parallelUploads=this.options.parallelUploads,processingLength=this.getUploadingFiles().length,i=processingLength,!(processingLength>=parallelUploads)&&(queuedFiles=this.getQueuedFiles(),queuedFiles.length>0)){if(this.options.uploadMultiple)return this.processFiles(queuedFiles.slice(0,parallelUploads-processingLength));for(;parallelUploads>i;){if(!queuedFiles.length)return;this.processFile(queuedFiles.shift()),i++}}},Dropzone.prototype.processFile=function(file){return this.processFiles([file])},Dropzone.prototype.processFiles=function(files){var file,_i,_len;for(_i=0,_len=files.length;_len>_i;_i++)file=files[_i],file.processing=!0,file.status=Dropzone.UPLOADING,this.emit("processing",file);return this.options.uploadMultiple&&this.emit("processingmultiple",files),this.uploadFiles(files)},Dropzone.prototype._getFilesWithXhr=function(xhr){var file,files;return files=function(){var _i,_len,_ref,_results;for(_ref=this.files,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)file=_ref[_i],file.xhr===xhr&&_results.push(file);return _results}.call(this)},Dropzone.prototype.cancelUpload=function(file){var groupedFile,groupedFiles,_i,_j,_len,_len1,_ref;if(file.status===Dropzone.UPLOADING){for(groupedFiles=this._getFilesWithXhr(file.xhr),_i=0,_len=groupedFiles.length;_len>_i;_i++)groupedFile=groupedFiles[_i],groupedFile.status=Dropzone.CANCELED;for(file.xhr.abort(),_j=0,_len1=groupedFiles.length;_len1>_j;_j++)groupedFile=groupedFiles[_j],this.emit("canceled",groupedFile);this.options.uploadMultiple&&this.emit("canceledmultiple",groupedFiles)}else((_ref=file.status)===Dropzone.ADDED||_ref===Dropzone.QUEUED)&&(file.status=Dropzone.CANCELED,this.emit("canceled",file),this.options.uploadMultiple&&this.emit("canceledmultiple",[file]));return this.options.autoProcessQueue?this.processQueue():void 0},resolveOption=function(){var args,option;return option=arguments[0],args=2<=arguments.length?__slice.call(arguments,1):[],"function"==typeof option?option.apply(this,args):option},Dropzone.prototype.uploadFile=function(file){return this.uploadFiles([file])},Dropzone.prototype.uploadFiles=function(files){var file,formData,handleError,headerName,headerValue,headers,i,input,inputName,inputType,key,method,option,progressObj,response,updateProgress,url,value,xhr,_i,_j,_k,_l,_len,_len1,_len2,_len3,_m,_ref,_ref1,_ref2,_ref3,_ref4,_ref5;for(xhr=new XMLHttpRequest,_i=0,_len=files.length;_len>_i;_i++)file=files[_i],file.xhr=xhr;method=resolveOption(this.options.method,files),url=resolveOption(this.options.url,files),xhr.open(method,url,!0),xhr.withCredentials=!!this.options.withCredentials,response=null,handleError=function(_this){return function(){var _j,_len1,_results;for(_results=[],_j=0,_len1=files.length;_len1>_j;_j++)file=files[_j],_results.push(_this._errorProcessing(files,response||_this.options.dictResponseError.replace("{{statusCode}}",xhr.status),xhr));return _results}}(this),updateProgress=function(_this){return function(e){var allFilesFinished,progress,_j,_k,_l,_len1,_len2,_len3,_results;if(null!=e)for(progress=100*e.loaded/e.total,_j=0,_len1=files.length;_len1>_j;_j++)file=files[_j],file.upload={progress:progress,total:e.total,bytesSent:e.loaded};else{for(allFilesFinished=!0,progress=100,_k=0,_len2=files.length;_len2>_k;_k++)file=files[_k],(100!==file.upload.progress||file.upload.bytesSent!==file.upload.total)&&(allFilesFinished=!1),file.upload.progress=progress,file.upload.bytesSent=file.upload.total;if(allFilesFinished)return}for(_results=[],_l=0,_len3=files.length;_len3>_l;_l++)file=files[_l],_results.push(_this.emit("uploadprogress",file,progress,file.upload.bytesSent));return _results}}(this),xhr.onload=function(_this){return function(e){var _ref;if(files[0].status!==Dropzone.CANCELED&&4===xhr.readyState){if(response=xhr.responseText,xhr.getResponseHeader("content-type")&&~xhr.getResponseHeader("content-type").indexOf("application/json"))try{response=JSON.parse(response)}catch(_error){e=_error,response="Invalid JSON response from server."}return updateProgress(),200<=(_ref=xhr.status)&&300>_ref?_this._finished(files,response,e):handleError()}}}(this),xhr.onerror=function(_this){return function(){return files[0].status!==Dropzone.CANCELED?handleError():void 0}}(this),progressObj=null!=(_ref=xhr.upload)?_ref:xhr,progressObj.onprogress=updateProgress,headers={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&extend(headers,this.options.headers);for(headerName in headers)headerValue=headers[headerName],xhr.setRequestHeader(headerName,headerValue);if(formData=new FormData,this.options.params){_ref1=this.options.params;for(key in _ref1)value=_ref1[key],formData.append(key,value)}for(_j=0,_len1=files.length;_len1>_j;_j++)file=files[_j],this.emit("sending",file,xhr,formData);if(this.options.uploadMultiple&&this.emit("sendingmultiple",files,xhr,formData),"FORM"===this.element.tagName)for(_ref2=this.element.querySelectorAll("input, textarea, select, button"),_k=0,_len2=_ref2.length;_len2>_k;_k++)if(input=_ref2[_k],inputName=input.getAttribute("name"),inputType=input.getAttribute("type"),"SELECT"===input.tagName&&input.hasAttribute("multiple"))for(_ref3=input.options,_l=0,_len3=_ref3.length;_len3>_l;_l++)option=_ref3[_l],option.selected&&formData.append(inputName,option.value);else(!inputType||"checkbox"!==(_ref4=inputType.toLowerCase())&&"radio"!==_ref4||input.checked)&&formData.append(inputName,input.value);for(i=_m=0,_ref5=files.length-1;_ref5>=0?_ref5>=_m:_m>=_ref5;i=_ref5>=0?++_m:--_m)formData.append(this._getParamName(i),files[i],files[i].name);return xhr.send(formData)},Dropzone.prototype._finished=function(files,responseText,e){var file,_i,_len;for(_i=0,_len=files.length;_len>_i;_i++)file=files[_i],file.status=Dropzone.SUCCESS,this.emit("success",file,responseText,e),this.emit("complete",file);return this.options.uploadMultiple&&(this.emit("successmultiple",files,responseText,e),this.emit("completemultiple",files)),this.options.autoProcessQueue?this.processQueue():void 0},Dropzone.prototype._errorProcessing=function(files,message,xhr){var file,_i,_len;for(_i=0,_len=files.length;_len>_i;_i++)file=files[_i],file.status=Dropzone.ERROR,this.emit("error",file,message,xhr),this.emit("complete",file);return this.options.uploadMultiple&&(this.emit("errormultiple",files,message,xhr),this.emit("completemultiple",files)),this.options.autoProcessQueue?this.processQueue():void 0},Dropzone}(Emitter),Dropzone.version="4.0.1",Dropzone.options={},Dropzone.optionsForElement=function(element){return element.getAttribute("id")?Dropzone.options[camelize(element.getAttribute("id"))]:void 0},Dropzone.instances=[],Dropzone.forElement=function(element){if("string"==typeof element&&(element=document.querySelector(element)),null==(null!=element?element.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return element.dropzone},Dropzone.autoDiscover=!0,Dropzone.discover=function(){var checkElements,dropzone,dropzones,_i,_len,_results;for(document.querySelectorAll?dropzones=document.querySelectorAll(".dropzone"):(dropzones=[],checkElements=function(elements){var el,_i,_len,_results;for(_results=[],_i=0,_len=elements.length;_len>_i;_i++)el=elements[_i],/(^| )dropzone($| )/.test(el.className)?_results.push(dropzones.push(el)):_results.push(void 0);return _results},checkElements(document.getElementsByTagName("div")),checkElements(document.getElementsByTagName("form"))),_results=[],_i=0,_len=dropzones.length;_len>_i;_i++)dropzone=dropzones[_i],Dropzone.optionsForElement(dropzone)!==!1?_results.push(new Dropzone(dropzone)):_results.push(void 0);return _results},Dropzone.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],Dropzone.isBrowserSupported=function(){var capableBrowser,regex,_i,_len,_ref;if(capableBrowser=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(_ref=Dropzone.blacklistedBrowsers,_i=0,_len=_ref.length;_len>_i;_i++)regex=_ref[_i],regex.test(navigator.userAgent)&&(capableBrowser=!1);else capableBrowser=!1;else capableBrowser=!1;return capableBrowser},without=function(list,rejectedItem){var item,_i,_len,_results;for(_results=[],_i=0,_len=list.length;_len>_i;_i++)item=list[_i],item!==rejectedItem&&_results.push(item);return _results},camelize=function(str){return str.replace(/[\-_](\w)/g,function(match){return match.charAt(1).toUpperCase()})},Dropzone.createElement=function(string){var div;return div=document.createElement("div"),div.innerHTML=string,div.childNodes[0]},Dropzone.elementInside=function(element,container){if(element===container)return!0;for(;element=element.parentNode;)if(element===container)return!0;return!1},Dropzone.getElement=function(el,name){var element;if("string"==typeof el?element=document.querySelector(el):null!=el.nodeType&&(element=el),null==element)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector or a plain HTML element.");return element},Dropzone.getElements=function(els,name){var e,el,elements,_i,_j,_len,_len1,_ref;if(els instanceof Array){elements=[];try{for(_i=0,_len=els.length;_len>_i;_i++)el=els[_i],elements.push(this.getElement(el,name))}catch(_error){e=_error,elements=null}}else if("string"==typeof els)for(elements=[],_ref=document.querySelectorAll(els),_j=0,_len1=_ref.length;_len1>_j;_j++)el=_ref[_j],elements.push(el);else null!=els.nodeType&&(elements=[els]);if(null==elements||!elements.length)throw new Error("Invalid `"+name+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return elements},Dropzone.confirm=function(question,accepted,rejected){return window.confirm(question)?accepted():null!=rejected?rejected():void 0},Dropzone.isValidFile=function(file,acceptedFiles){var baseMimeType,mimeType,validType,_i,_len;if(!acceptedFiles)return!0;for(acceptedFiles=acceptedFiles.split(","),mimeType=file.type,baseMimeType=mimeType.replace(/\/.*$/,""),_i=0,_len=acceptedFiles.length;_len>_i;_i++)if(validType=acceptedFiles[_i],validType=validType.trim(),"."===validType.charAt(0)){if(-1!==file.name.toLowerCase().indexOf(validType.toLowerCase(),file.name.length-validType.length))return!0}else if(/\/\*$/.test(validType)){if(baseMimeType===validType.replace(/\/.*$/,""))return!0}else if(mimeType===validType)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(options){return this.each(function(){return new Dropzone(this,options)})}),"undefined"!=typeof module&&null!==module?module.exports=Dropzone:window.Dropzone=Dropzone,Dropzone.ADDED="added",Dropzone.QUEUED="queued",Dropzone.ACCEPTED=Dropzone.QUEUED,Dropzone.UPLOADING="uploading",Dropzone.PROCESSING=Dropzone.UPLOADING,Dropzone.CANCELED="canceled",Dropzone.ERROR="error",Dropzone.SUCCESS="success",detectVerticalSquash=function(img){var alpha,canvas,ctx,data,ey,ih,iw,py,ratio,sy;for(iw=img.naturalWidth,ih=img.naturalHeight,canvas=document.createElement("canvas"),canvas.width=1,canvas.height=ih,ctx=canvas.getContext("2d"),ctx.drawImage(img,0,0),data=ctx.getImageData(0,0,1,ih).data,sy=0,ey=ih,py=ih;py>sy;)alpha=data[4*(py-1)+3],0===alpha?ey=py:sy=py,py=ey+sy>>1;return ratio=py/ih,0===ratio?1:ratio},drawImageIOSFix=function(ctx,img,sx,sy,sw,sh,dx,dy,dw,dh){var vertSquashRatio;return vertSquashRatio=detectVerticalSquash(img),ctx.drawImage(img,sx,sy,sw,sh,dx,dy,dw,dh/vertSquashRatio)},contentLoaded=function(win,fn){var add,doc,done,init,poll,pre,rem,root,top;if(done=!1,top=!0,doc=win.document,root=doc.documentElement,add=doc.addEventListener?"addEventListener":"attachEvent",rem=doc.addEventListener?"removeEventListener":"detachEvent",pre=doc.addEventListener?"":"on",init=function(e){return"readystatechange"!==e.type||"complete"===doc.readyState?(("load"===e.type?win:doc)[rem](pre+e.type,init,!1),!done&&(done=!0)?fn.call(win,e.type||e):void 0):void 0},poll=function(){var e;try{root.doScroll("left")}catch(_error){return e=_error,void setTimeout(poll,50)}return init("poll")},"complete"!==doc.readyState){if(doc.createEventObject&&root.doScroll){try{top=!win.frameElement}catch(_error){}top&&poll()}return doc[add](pre+"DOMContentLoaded",init,!1),doc[add](pre+"readystatechange",init,!1),win[add](pre+"load",init,!1)}},Dropzone._autoDiscoverFunction=function(){return Dropzone.autoDiscover?Dropzone.discover():void 0},contentLoaded(window,Dropzone._autoDiscoverFunction)}.call(this),function(){function n(n,t){if(n!==t){var r=null===n,e=n===w,u=n===n,o=null===t,i=t===w,f=t===t;if(n>t&&!o||!u||r&&!i&&f||e&&f)return 1;if(t>n&&!r||!f||o&&!e&&u||i&&u)return-1}return 0}function t(n,t,r){for(var e=n.length,u=r?e:-1;r?u--:++u<e;)if(t(n[u],u,n))return u;return-1}function r(n,t,r){if(t!==t)return p(n,r);r-=1;for(var e=n.length;++r<e;)if(n[r]===t)return r;return-1}function e(n){return"function"==typeof n||!1}function u(n){return null==n?"":n+""}function o(n,t){for(var r=-1,e=n.length;++r<e&&-1<t.indexOf(n.charAt(r)););return r}function i(n,t){for(var r=n.length;r--&&-1<t.indexOf(n.charAt(r)););return r}function f(t,r){return n(t.a,r.a)||t.b-r.b}function a(n){return Nn[n]}function c(n){return Tn[n]}function l(n,t,r){return t?n=Bn[n]:r&&(n=Dn[n]),"\\"+n}function s(n){return"\\"+Dn[n]}function p(n,t,r){var e=n.length;for(t+=r?0:-1;r?t--:++t<e;){var u=n[t];if(u!==u)return t}return-1}function h(n){return!!n&&"object"==typeof n}function _(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function v(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;)n[r]===t&&(n[r]=z,o[++u]=r);return o}function g(n){for(var t=-1,r=n.length;++t<r&&_(n.charCodeAt(t)););return t}function y(n){for(var t=n.length;t--&&_(n.charCodeAt(t)););return t}function d(n){return Ln[n]}function m(_){function Nn(n){if(h(n)&&!(Oo(n)||n instanceof zn)){if(n instanceof Ln)return n;if(nu.call(n,"__chain__")&&nu.call(n,"__wrapped__"))return Mr(n)}return new Ln(n)}function Tn(){}function Ln(n,t,r){this.__wrapped__=n,this.__actions__=r||[],this.__chain__=!!t}function zn(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ru,this.__views__=[]}function Bn(){this.__data__={}}function Dn(n){var t=n?n.length:0;for(this.data={hash:gu(null),set:new lu};t--;)this.push(n[t])}function Mn(n,t){var r=n.data;return("string"==typeof t||ge(t)?r.set.has(t):r.hash[t])?0:-1}function qn(n,t){var r=-1,e=n.length;for(t||(t=Be(e));++r<e;)t[r]=n[r];return t}function Pn(n,t){for(var r=-1,e=n.length;++r<e&&!1!==t(n[r],r,n););return n}function Kn(n,t){for(var r=-1,e=n.length;++r<e;)if(!t(n[r],r,n))return!1;return!0}function Vn(n,t){for(var r=-1,e=n.length,u=-1,o=[];++r<e;){var i=n[r];t(i,r,n)&&(o[++u]=i)}return o}function Gn(n,t){for(var r=-1,e=n.length,u=Be(e);++r<e;)u[r]=t(n[r],r,n);return u}function Jn(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function Xn(n,t,r,e){var u=-1,o=n.length;for(e&&o&&(r=n[++u]);++u<o;)r=t(r,n[u],u,n);return r}function Hn(n,t){for(var r=-1,e=n.length;++r<e;)if(t(n[r],r,n))return!0;return!1}function Qn(n,t,r,e){return n!==w&&nu.call(e,r)?n:t}function nt(n,t,r){for(var e=-1,u=zo(t),o=u.length;++e<o;){var i=u[e],f=n[i],a=r(f,t[i],i,n,t);(a===a?a===f:f!==f)&&(f!==w||i in n)||(n[i]=a)}return n}function tt(n,t){return null==t?n:et(t,zo(t),n)}function rt(n,t){for(var r=-1,e=null==n,u=!e&&Er(n),o=u?n.length:0,i=t.length,f=Be(i);++r<i;){var a=t[r];f[r]=u?Cr(a,o)?n[a]:w:e?w:n[a]}return f}function et(n,t,r){r||(r={});for(var e=-1,u=t.length;++e<u;){var o=t[e];r[o]=n[o]}return r}function ut(n,t,r){var e=typeof n;return"function"==e?t===w?n:Bt(n,t,r):null==n?Fe:"object"==e?bt(n):t===w?ze(n):xt(n,t)}function ot(n,t,r,e,u,o,i){var f;if(r&&(f=u?r(n,e,u):r(n)),f!==w)return f;if(!ge(n))return n;if(e=Oo(n)){if(f=kr(n),!t)return qn(n,f)}else{var a=ru.call(n),c=a==K;if(a!=Z&&a!=B&&(!c||u))return Fn[a]?Rr(n,a,t):u?n:{};if(f=Ir(c?{}:n),!t)return tt(f,n)}for(o||(o=[]),i||(i=[]),u=o.length;u--;)if(o[u]==n)return i[u];return o.push(n),i.push(f),(e?Pn:_t)(n,function(e,u){f[u]=ot(e,t,r,u,n,o,i)}),f}function it(n,t,r){if("function"!=typeof n)throw new Ge(L);return su(function(){n.apply(w,r)},t)}function ft(n,t){var e=n?n.length:0,u=[];if(!e)return u;var o=-1,i=xr(),f=i===r,a=f&&t.length>=F&&gu&&lu?new Dn(t):null,c=t.length;a&&(i=Mn,f=!1,t=a);n:for(;++o<e;)if(a=n[o],f&&a===a){for(var l=c;l--;)if(t[l]===a)continue n;u.push(a)}else 0>i(t,a,0)&&u.push(a);return u}function at(n,t){var r=!0;return Su(n,function(n,e,u){return r=!!t(n,e,u)}),r}function ct(n,t,r,e){var u=e,o=u;return Su(n,function(n,i,f){i=+t(n,i,f),(r(i,u)||i===e&&i===o)&&(u=i,o=n)}),o}function lt(n,t){var r=[];return Su(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function st(n,t,r,e){var u;return r(n,function(n,r,o){return t(n,r,o)?(u=e?r:n,!1):void 0}),u}function pt(n,t,r,e){e||(e=[]);for(var u=-1,o=n.length;++u<o;){var i=n[u];h(i)&&Er(i)&&(r||Oo(i)||pe(i))?t?pt(i,t,r,e):Jn(e,i):r||(e[e.length]=i)}return e}function ht(n,t){Nu(n,t,Re)}function _t(n,t){return Nu(n,t,zo)}function vt(n,t){return Tu(n,t,zo)}function gt(n,t){for(var r=-1,e=t.length,u=-1,o=[];++r<e;){var i=t[r];ve(n[i])&&(o[++u]=i)}return o}function yt(n,t,r){if(null!=n){r!==w&&r in Br(n)&&(t=[r]),r=0;for(var e=t.length;null!=n&&e>r;)n=n[t[r++]];return r&&r==e?n:w}}function dt(n,t,r,e,u,o){if(n===t)n=!0;else if(null==n||null==t||!ge(n)&&!h(t))n=n!==n&&t!==t;else n:{var i=dt,f=Oo(n),a=Oo(t),c=D,l=D;f||(c=ru.call(n),c==B?c=Z:c!=Z&&(f=xe(n))),a||(l=ru.call(t),l==B?l=Z:l!=Z&&xe(t));var s=c==Z,a=l==Z,l=c==l;if(!l||f||s){if(!e&&(c=s&&nu.call(n,"__wrapped__"),a=a&&nu.call(t,"__wrapped__"),c||a)){n=i(c?n.value():n,a?t.value():t,r,e,u,o);break n}if(l){for(u||(u=[]),o||(o=[]),c=u.length;c--;)if(u[c]==n){n=o[c]==t;break n}u.push(n),o.push(t),n=(f?yr:mr)(n,t,i,r,e,u,o),u.pop(),o.pop()}else n=!1}else n=dr(n,t,c)}return n}function mt(n,t,r){var e=t.length,u=e,o=!r;if(null==n)return!u;for(n=Br(n);e--;){var i=t[e];if(o&&i[2]?i[1]!==n[i[0]]:!(i[0]in n))return!1}for(;++e<u;){var i=t[e],f=i[0],a=n[f],c=i[1];if(o&&i[2]){if(a===w&&!(f in n))return!1}else if(i=r?r(a,c,f):w,i===w?!dt(c,a,r,!0):!i)return!1}return!0}function wt(n,t){var r=-1,e=Er(n)?Be(n.length):[];return Su(n,function(n,u,o){e[++r]=t(n,u,o)}),e}function bt(n){var t=Ar(n);if(1==t.length&&t[0][2]){var r=t[0][0],e=t[0][1];return function(n){return null==n?!1:n[r]===e&&(e!==w||r in Br(n))}}return function(n){return mt(n,t)}}function xt(n,t){var r=Oo(n),e=Wr(n)&&t===t&&!ge(t),u=n+"";return n=Dr(n),function(o){if(null==o)return!1;var i=u;if(o=Br(o),!(!r&&e||i in o)){if(o=1==n.length?o:yt(o,Et(n,0,-1)),null==o)return!1;i=Zr(n),o=Br(o)}return o[i]===t?t!==w||i in o:dt(t,o[i],w,!0)}}function At(n,t,r,e,u){if(!ge(n))return n;var o=Er(t)&&(Oo(t)||xe(t)),i=o?w:zo(t);return Pn(i||t,function(f,a){if(i&&(a=f,f=t[a]),h(f)){e||(e=[]),u||(u=[]);n:{for(var c=a,l=e,s=u,p=l.length,_=t[c];p--;)if(l[p]==_){n[c]=s[p];break n}var p=n[c],v=r?r(p,_,c,n,t):w,g=v===w;g&&(v=_,Er(_)&&(Oo(_)||xe(_))?v=Oo(p)?p:Er(p)?qn(p):[]:me(_)||pe(_)?v=pe(p)?ke(p):me(p)?p:{}:g=!1),l.push(_),s.push(v),g?n[c]=At(v,_,r,l,s):(v===v?v!==p:p===p)&&(n[c]=v)}}else c=n[a],l=r?r(c,f,a,n,t):w,(s=l===w)&&(l=f),l===w&&(!o||a in n)||!s&&(l===l?l===c:c!==c)||(n[a]=l)}),n}function jt(n){return function(t){return null==t?w:t[n]}}function kt(n){var t=n+"";return n=Dr(n),function(r){return yt(r,n,t)}}function It(n,t){for(var r=n?t.length:0;r--;){var e=t[r];if(e!=u&&Cr(e)){var u=e;pu.call(n,e,1)}}}function Rt(n,t){return n+yu(ku()*(t-n+1))}function Ot(n,t,r,e,u){return u(n,function(n,u,o){r=e?(e=!1,n):t(r,n,u,o)}),r}function Et(n,t,r){var e=-1,u=n.length;for(t=null==t?0:+t||0,0>t&&(t=-t>u?0:u+t),r=r===w||r>u?u:+r||0,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Be(u);++e<u;)r[e]=n[e+t];return r}function Ct(n,t){var r;return Su(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}function Ut(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function Wt(t,r,e){var u=wr(),o=-1;return r=Gn(r,function(n){return u(n)}),t=wt(t,function(n){return{a:Gn(r,function(t){return t(n)}),b:++o,c:n}}),Ut(t,function(t,r){var u;n:{for(var o=-1,i=t.a,f=r.a,a=i.length,c=e.length;++o<a;)if(u=n(i[o],f[o])){if(o>=c)break n;o=e[o],u*="asc"===o||!0===o?1:-1;break n}u=t.b-r.b}return u})}function $t(n,t){var r=0;return Su(n,function(n,e,u){r+=+t(n,e,u)||0}),r}function St(n,t){var e=-1,u=xr(),o=n.length,i=u===r,f=i&&o>=F,a=f&&gu&&lu?new Dn(void 0):null,c=[];a?(u=Mn,i=!1):(f=!1,a=t?[]:c);n:for(;++e<o;){var l=n[e],s=t?t(l,e,n):l;if(i&&l===l){for(var p=a.length;p--;)if(a[p]===s)continue n;t&&a.push(s),c.push(l)}else 0>u(a,s,0)&&((t||f)&&a.push(s),c.push(l))}return c}function Ft(n,t){for(var r=-1,e=t.length,u=Be(e);++r<e;)u[r]=n[t[r]];return u}function Nt(n,t,r,e){for(var u=n.length,o=e?u:-1;(e?o--:++o<u)&&t(n[o],o,n););return r?Et(n,e?0:o,e?o+1:u):Et(n,e?o+1:0,e?u:o)}function Tt(n,t){var r=n;r instanceof zn&&(r=r.value());for(var e=-1,u=t.length;++e<u;)var o=t[e],r=o.func.apply(o.thisArg,Jn([r],o.args));return r}function Lt(n,t,r){var e=0,u=n?n.length:e;if("number"==typeof t&&t===t&&Eu>=u){for(;u>e;){var o=e+u>>>1,i=n[o];(r?t>=i:t>i)&&null!==i?e=o+1:u=o}return u}return zt(n,t,Fe,r)}function zt(n,t,r,e){t=r(t);for(var u=0,o=n?n.length:0,i=t!==t,f=null===t,a=t===w;o>u;){var c=yu((u+o)/2),l=r(n[c]),s=l!==w,p=l===l;(i?p||e:f?p&&s&&(e||null!=l):a?p&&(e||s):null==l?0:e?t>=l:t>l)?u=c+1:o=c}return xu(o,Ou)}function Bt(n,t,r){if("function"!=typeof n)return Fe;if(t===w)return n;switch(r){case 1:return function(r){return n.call(t,r)};case 3:return function(r,e,u){return n.call(t,r,e,u)};case 4:return function(r,e,u,o){return n.call(t,r,e,u,o)};case 5:return function(r,e,u,o,i){return n.call(t,r,e,u,o,i)}}return function(){return n.apply(t,arguments)}}function Dt(n){var t=new ou(n.byteLength);return new hu(t).set(new hu(n)),t}function Mt(n,t,r){for(var e=r.length,u=-1,o=bu(n.length-e,0),i=-1,f=t.length,a=Be(f+o);++i<f;)a[i]=t[i];for(;++u<e;)a[r[u]]=n[u];for(;o--;)a[i++]=n[u++];return a}function qt(n,t,r){for(var e=-1,u=r.length,o=-1,i=bu(n.length-u,0),f=-1,a=t.length,c=Be(i+a);++o<i;)c[o]=n[o];for(i=o;++f<a;)c[i+f]=t[f];for(;++e<u;)c[i+r[e]]=n[o++];return c}function Pt(n,t){return function(r,e,u){var o=t?t():{};if(e=wr(e,u,3),Oo(r)){u=-1;for(var i=r.length;++u<i;){var f=r[u];n(o,f,e(f,u,r),r)}}else Su(r,function(t,r,u){n(o,t,e(t,r,u),u)});return o}}function Kt(n){return le(function(t,r){var e=-1,u=null==t?0:r.length,o=u>2?r[u-2]:w,i=u>2?r[2]:w,f=u>1?r[u-1]:w;for("function"==typeof o?(o=Bt(o,f,5),u-=2):(o="function"==typeof f?f:w,u-=o?1:0),i&&Ur(r[0],r[1],i)&&(o=3>u?w:o,u=1);++e<u;)(i=r[e])&&n(t,i,o);return t})}function Vt(n,t){return function(r,e){var u=r?Bu(r):0;if(!Sr(u))return n(r,e);for(var o=t?u:-1,i=Br(r);(t?o--:++o<u)&&!1!==e(i[o],o,i););return r}}function Zt(n){return function(t,r,e){var u=Br(t);e=e(t);for(var o=e.length,i=n?o:-1;n?i--:++i<o;){var f=e[i];if(!1===r(u[f],f,u))break}return t}}function Yt(n,t){function r(){return(this&&this!==Zn&&this instanceof r?e:n).apply(t,arguments)}var e=Jt(n);return r}function Gt(n){return function(t){var r=-1;t=$e(Ce(t));for(var e=t.length,u="";++r<e;)u=n(u,t[r],r);return u}}function Jt(n){return function(){var t=arguments;switch(t.length){case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=$u(n.prototype),t=n.apply(r,t);return ge(t)?t:r}}function Xt(n){function t(r,e,u){return u&&Ur(r,e,u)&&(e=w),r=gr(r,n,w,w,w,w,w,e),r.placeholder=t.placeholder,r}return t}function Ht(n,t){return le(function(r){var e=r[0];return null==e?e:(r.push(t),n.apply(w,r))})}function Qt(n,t){return function(r,e,u){if(u&&Ur(r,e,u)&&(e=w),e=wr(e,u,3),1==e.length){u=r=Oo(r)?r:zr(r);for(var o=e,i=-1,f=u.length,a=t,c=a;++i<f;){var l=u[i],s=+o(l);n(s,a)&&(a=s,c=l)}if(u=c,!r.length||u!==t)return u}return ct(r,e,n,t)}}function nr(n,r){return function(e,u,o){return u=wr(u,o,3),Oo(e)?(u=t(e,u,r),u>-1?e[u]:w):st(e,u,n)}}function tr(n){return function(r,e,u){return r&&r.length?(e=wr(e,u,3),t(r,e,n)):-1}}function rr(n){return function(t,r,e){return r=wr(r,e,3),st(t,r,n,!0)}}function er(n){return function(){for(var t,r=arguments.length,e=n?r:-1,u=0,o=Be(r);n?e--:++e<r;){var i=o[u++]=arguments[e];if("function"!=typeof i)throw new Ge(L);!t&&Ln.prototype.thru&&"wrapper"==br(i)&&(t=new Ln([],!0))}for(e=t?-1:r;++e<r;){var i=o[e],u=br(i),f="wrapper"==u?zu(i):w;t=f&&$r(f[0])&&f[1]==(E|k|R|C)&&!f[4].length&&1==f[9]?t[br(f[0])].apply(t,f[3]):1==i.length&&$r(i)?t[u]():t.thru(i)}return function(){var n=arguments,e=n[0];if(t&&1==n.length&&Oo(e)&&e.length>=F)return t.plant(e).value();for(var u=0,n=r?o[u].apply(this,n):e;++u<r;)n=o[u].call(this,n);return n}}}function ur(n,t){return function(r,e,u){return"function"==typeof e&&u===w&&Oo(r)?n(r,e):t(r,Bt(e,u,3))}}function or(n){return function(t,r,e){return("function"!=typeof r||e!==w)&&(r=Bt(r,e,3)),n(t,r,Re)}}function ir(n){return function(t,r,e){return("function"!=typeof r||e!==w)&&(r=Bt(r,e,3)),n(t,r)}}function fr(n){return function(t,r,e){var u={};return r=wr(r,e,3),_t(t,function(t,e,o){o=r(t,e,o),e=n?o:e,t=n?t:o,u[e]=t}),u}}function ar(n){return function(t,r,e){return t=u(t),(n?t:"")+pr(t,r,e)+(n?"":t)}}function cr(n){var t=le(function(r,e){var u=v(e,t.placeholder);return gr(r,n,w,e,u)});return t}function lr(n,t){return function(r,e,u,o){var i=3>arguments.length;return"function"==typeof e&&o===w&&Oo(r)?n(r,e,u,i):Ot(r,wr(e,o,4),u,i,t)}}function sr(n,t,r,e,u,o,i,f,a,c){function l(){for(var m=arguments.length,b=m,j=Be(m);b--;)j[b]=arguments[b];if(e&&(j=Mt(j,e,u)),o&&(j=qt(j,o,i)),_||y){var b=l.placeholder,k=v(j,b),m=m-k.length;if(c>m){var I=f?qn(f):w,m=bu(c-m,0),E=_?k:w,k=_?w:k,C=_?j:w,j=_?w:j;return t|=_?R:O,t&=~(_?O:R),g||(t&=~(x|A)),j=[n,t,r,C,E,j,k,I,a,m],I=sr.apply(w,j),$r(n)&&Du(I,j),I.placeholder=b,I}}if(b=p?r:this,I=h?b[n]:n,f)for(m=j.length,E=xu(f.length,m),k=qn(j);E--;)C=f[E],j[E]=Cr(C,m)?k[C]:w;return s&&a<j.length&&(j.length=a),this&&this!==Zn&&this instanceof l&&(I=d||Jt(n)),I.apply(b,j)}var s=t&E,p=t&x,h=t&A,_=t&k,g=t&j,y=t&I,d=h?w:Jt(n);return l}function pr(n,t,r){return n=n.length,t=+t,t>n&&mu(t)?(t-=n,r=null==r?" ":r+"",Ue(r,vu(t/r.length)).slice(0,t)):""}function hr(n,t,r,e){function u(){for(var t=-1,f=arguments.length,a=-1,c=e.length,l=Be(c+f);++a<c;)l[a]=e[a];for(;f--;)l[a++]=arguments[++t];return(this&&this!==Zn&&this instanceof u?i:n).apply(o?r:this,l)}var o=t&x,i=Jt(n);return u}function _r(n){var t=Pe[n];return function(n,r){return(r=r===w?0:+r||0)?(r=au(10,r),t(n*r)/r):t(n)}}function vr(n){return function(t,r,e,u){var o=wr(e);return null==e&&o===ut?Lt(t,r,n):zt(t,r,o(e,u,1),n)}}function gr(n,t,r,e,u,o,i,f){var a=t&A;if(!a&&"function"!=typeof n)throw new Ge(L);
var c=e?e.length:0;if(c||(t&=~(R|O),e=u=w),c-=u?u.length:0,t&O){var l=e,s=u;e=u=w}var p=a?w:zu(n);return r=[n,t,r,e,u,l,s,o,i,f],p&&(e=r[1],t=p[1],f=e|t,u=t==E&&e==k||t==E&&e==C&&r[7].length<=p[8]||t==(E|C)&&e==k,(E>f||u)&&(t&x&&(r[2]=p[2],f|=e&x?0:j),(e=p[3])&&(u=r[3],r[3]=u?Mt(u,e,p[4]):qn(e),r[4]=u?v(r[3],z):qn(p[4])),(e=p[5])&&(u=r[5],r[5]=u?qt(u,e,p[6]):qn(e),r[6]=u?v(r[5],z):qn(p[6])),(e=p[7])&&(r[7]=qn(e)),t&E&&(r[8]=null==r[8]?p[8]:xu(r[8],p[8])),null==r[9]&&(r[9]=p[9]),r[0]=p[0],r[1]=f),t=r[1],f=r[9]),r[9]=null==f?a?0:n.length:bu(f-c,0)||0,(p?Lu:Du)(t==x?Yt(r[0],r[2]):t!=R&&t!=(x|R)||r[4].length?sr.apply(w,r):hr.apply(w,r),r)}function yr(n,t,r,e,u,o,i){var f=-1,a=n.length,c=t.length;if(a!=c&&(!u||a>=c))return!1;for(;++f<a;){var l=n[f],c=t[f],s=e?e(u?c:l,u?l:c,f):w;if(s!==w){if(s)continue;return!1}if(u){if(!Hn(t,function(n){return l===n||r(l,n,e,u,o,i)}))return!1}else if(l!==c&&!r(l,c,e,u,o,i))return!1}return!0}function dr(n,t,r){switch(r){case M:case q:return+n==+t;case P:return n.name==t.name&&n.message==t.message;case V:return n!=+n?t!=+t:n==+t;case Y:case G:return n==t+""}return!1}function mr(n,t,r,e,u,o,i){var f=zo(n),a=f.length,c=zo(t).length;if(a!=c&&!u)return!1;for(c=a;c--;){var l=f[c];if(!(u?l in t:nu.call(t,l)))return!1}for(var s=u;++c<a;){var l=f[c],p=n[l],h=t[l],_=e?e(u?h:p,u?p:h,l):w;if(_===w?!r(p,h,e,u,o,i):!_)return!1;s||(s="constructor"==l)}return s||(r=n.constructor,e=t.constructor,!(r!=e&&"constructor"in n&&"constructor"in t)||"function"==typeof r&&r instanceof r&&"function"==typeof e&&e instanceof e)?!0:!1}function wr(n,t,r){var e=Nn.callback||Se,e=e===Se?ut:e;return r?e(n,t,r):e}function br(n){for(var t=n.name+"",r=Wu[t],e=r?r.length:0;e--;){var u=r[e],o=u.func;if(null==o||o==n)return u.name}return t}function xr(n,t,e){var u=Nn.indexOf||Vr,u=u===Vr?r:u;return n?u(n,t,e):u}function Ar(n){n=Oe(n);for(var t=n.length;t--;){var r=n[t][1];n[t][2]=r===r&&!ge(r)}return n}function jr(n,t){var r=null==n?w:n[t];return ye(r)?r:w}function kr(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&nu.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ir(n){return n=n.constructor,"function"==typeof n&&n instanceof n||(n=Ve),new n}function Rr(n,t,r){var e=n.constructor;switch(t){case J:return Dt(n);case M:case q:return new e(+n);case X:case H:case Q:case nn:case tn:case rn:case en:case un:case on:return t=n.buffer,new e(r?Dt(t):t,n.byteOffset,n.length);case V:case G:return new e(n);case Y:var u=new e(n.source,kn.exec(n));u.lastIndex=n.lastIndex}return u}function Or(n,t,r){return null==n||Wr(t,n)||(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),t=Zr(t)),t=null==n?n:n[t],null==t?w:t.apply(n,r)}function Er(n){return null!=n&&Sr(Bu(n))}function Cr(n,t){return n="number"==typeof n||On.test(n)?+n:-1,t=null==t?Cu:t,n>-1&&0==n%1&&t>n}function Ur(n,t,r){if(!ge(r))return!1;var e=typeof t;return("number"==e?Er(r)&&Cr(t,r.length):"string"==e&&t in r)?(t=r[t],n===n?n===t:t!==t):!1}function Wr(n,t){var r=typeof n;return"string"==r&&dn.test(n)||"number"==r?!0:Oo(n)?!1:!yn.test(n)||null!=t&&n in Br(t)}function $r(n){var t=br(n),r=Nn[t];return"function"==typeof r&&t in zn.prototype?n===r?!0:(t=zu(r),!!t&&n===t[0]):!1}function Sr(n){return"number"==typeof n&&n>-1&&0==n%1&&Cu>=n}function Fr(n,t){return n===w?t:Eo(n,t,Fr)}function Nr(n,t){n=Br(n);for(var r=-1,e=t.length,u={};++r<e;){var o=t[r];o in n&&(u[o]=n[o])}return u}function Tr(n,t){var r={};return ht(n,function(n,e,u){t(n,e,u)&&(r[e]=n)}),r}function Lr(n){for(var t=Re(n),r=t.length,e=r&&n.length,u=!!e&&Sr(e)&&(Oo(n)||pe(n)),o=-1,i=[];++o<r;){var f=t[o];(u&&Cr(f,e)||nu.call(n,f))&&i.push(f)}return i}function zr(n){return null==n?[]:Er(n)?ge(n)?n:Ve(n):Ee(n)}function Br(n){return ge(n)?n:Ve(n)}function Dr(n){if(Oo(n))return n;var t=[];return u(n).replace(mn,function(n,r,e,u){t.push(e?u.replace(An,"$1"):r||n)}),t}function Mr(n){return n instanceof zn?n.clone():new Ln(n.__wrapped__,n.__chain__,qn(n.__actions__))}function qr(n,t,r){return n&&n.length?((r?Ur(n,t,r):null==t)&&(t=1),Et(n,0>t?0:t)):[]}function Pr(n,t,r){var e=n?n.length:0;return e?((r?Ur(n,t,r):null==t)&&(t=1),t=e-(+t||0),Et(n,0,0>t?0:t)):[]}function Kr(n){return n?n[0]:w}function Vr(n,t,e){var u=n?n.length:0;if(!u)return-1;if("number"==typeof e)e=0>e?bu(u+e,0):e;else if(e)return e=Lt(n,t),u>e&&(t===t?t===n[e]:n[e]!==n[e])?e:-1;return r(n,t,e||0)}function Zr(n){var t=n?n.length:0;return t?n[t-1]:w}function Yr(n){return qr(n,1)}function Gr(n,t,e,u){if(!n||!n.length)return[];null!=t&&"boolean"!=typeof t&&(u=e,e=Ur(n,t,u)?w:t,t=!1);var o=wr();if((null!=e||o!==ut)&&(e=o(e,u,3)),t&&xr()===r){t=e;var i;e=-1,u=n.length;for(var o=-1,f=[];++e<u;){var a=n[e],c=t?t(a,e,n):a;e&&i===c||(i=c,f[++o]=a)}n=f}else n=St(n,e);return n}function Jr(n){if(!n||!n.length)return[];var t=-1,r=0;n=Vn(n,function(n){return Er(n)?(r=bu(n.length,r),!0):void 0});for(var e=Be(r);++t<r;)e[t]=Gn(n,jt(t));return e}function Xr(n,t,r){return n&&n.length?(n=Jr(n),null==t?n:(t=Bt(t,r,4),Gn(n,function(n){return Xn(n,t,w,!0)}))):[]}function Hr(n,t){var r=-1,e=n?n.length:0,u={};for(!e||t||Oo(n[0])||(t=[]);++r<e;){var o=n[r];t?u[o]=t[r]:o&&(u[o[0]]=o[1])}return u}function Qr(n){return n=Nn(n),n.__chain__=!0,n}function ne(n,t,r){return t.call(r,n)}function te(n,t,r){var e=Oo(n)?Kn:at;return r&&Ur(n,t,r)&&(t=w),("function"!=typeof t||r!==w)&&(t=wr(t,r,3)),e(n,t)}function re(n,t,r){var e=Oo(n)?Vn:lt;return t=wr(t,r,3),e(n,t)}function ee(n,t,r,e){var u=n?Bu(n):0;return Sr(u)||(n=Ee(n),u=n.length),r="number"!=typeof r||e&&Ur(t,r,e)?0:0>r?bu(u+r,0):r||0,"string"==typeof n||!Oo(n)&&be(n)?u>=r&&-1<n.indexOf(t,r):!!u&&-1<xr(n,t,r)}function ue(n,t,r){var e=Oo(n)?Gn:wt;return t=wr(t,r,3),e(n,t)}function oe(n,t,r){if(r?Ur(n,t,r):null==t){n=zr(n);var e=n.length;return e>0?n[Rt(0,e-1)]:w}r=-1,n=je(n);var e=n.length,u=e-1;for(t=xu(0>t?0:+t||0,e);++r<t;){var e=Rt(r,u),o=n[e];n[e]=n[r],n[r]=o}return n.length=t,n}function ie(n,t,r){var e=Oo(n)?Hn:Ct;return r&&Ur(n,t,r)&&(t=w),("function"!=typeof t||r!==w)&&(t=wr(t,r,3)),e(n,t)}function fe(n,t){var r;if("function"!=typeof t){if("function"!=typeof n)throw new Ge(L);var e=n;n=t,t=e}return function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=w),r}}function ae(n,t,r){function e(t,r){r&&iu(r),a=p=h=w,t&&(_=ho(),c=n.apply(s,f),p||a||(f=s=w))}function u(){var n=t-(ho()-l);0>=n||n>t?e(h,a):p=su(u,n)}function o(){e(g,p)}function i(){if(f=arguments,l=ho(),s=this,h=g&&(p||!y),!1===v)var r=y&&!p;else{a||y||(_=l);var e=v-(l-_),i=0>=e||e>v;i?(a&&(a=iu(a)),_=l,c=n.apply(s,f)):a||(a=su(o,e))}return i&&p?p=iu(p):p||t===v||(p=su(u,t)),r&&(i=!0,c=n.apply(s,f)),!i||p||a||(f=s=w),c}var f,a,c,l,s,p,h,_=0,v=!1,g=!0;if("function"!=typeof n)throw new Ge(L);if(t=0>t?0:+t||0,!0===r)var y=!0,g=!1;else ge(r)&&(y=!!r.leading,v="maxWait"in r&&bu(+r.maxWait||0,t),g="trailing"in r?!!r.trailing:g);return i.cancel=function(){p&&iu(p),a&&iu(a),_=0,a=p=h=w},i}function ce(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],o=r.cache;return o.has(u)?o.get(u):(e=n.apply(this,e),r.cache=o.set(u,e),e)}if("function"!=typeof n||t&&"function"!=typeof t)throw new Ge(L);return r.cache=new ce.Cache,r}function le(n,t){if("function"!=typeof n)throw new Ge(L);return t=bu(t===w?n.length-1:+t||0,0),function(){for(var r=arguments,e=-1,u=bu(r.length-t,0),o=Be(u);++e<u;)o[e]=r[t+e];switch(t){case 0:return n.call(this,o);case 1:return n.call(this,r[0],o);case 2:return n.call(this,r[0],r[1],o)}for(u=Be(t+1),e=-1;++e<t;)u[e]=r[e];return u[t]=o,n.apply(this,u)}}function se(n,t){return n>t}function pe(n){return h(n)&&Er(n)&&nu.call(n,"callee")&&!cu.call(n,"callee")}function he(n,t,r,e){return e=(r="function"==typeof r?Bt(r,e,3):w)?r(n,t):w,e===w?dt(n,t,r):!!e}function _e(n){return h(n)&&"string"==typeof n.message&&ru.call(n)==P}function ve(n){return ge(n)&&ru.call(n)==K}function ge(n){var t=typeof n;return!!n&&("object"==t||"function"==t)}function ye(n){return null==n?!1:ve(n)?uu.test(Qe.call(n)):h(n)&&Rn.test(n)}function de(n){return"number"==typeof n||h(n)&&ru.call(n)==V}function me(n){var t;if(!h(n)||ru.call(n)!=Z||pe(n)||!(nu.call(n,"constructor")||(t=n.constructor,"function"!=typeof t||t instanceof t)))return!1;var r;return ht(n,function(n,t){r=t}),r===w||nu.call(n,r)}function we(n){return ge(n)&&ru.call(n)==Y}function be(n){return"string"==typeof n||h(n)&&ru.call(n)==G}function xe(n){return h(n)&&Sr(n.length)&&!!Sn[ru.call(n)]}function Ae(n,t){return t>n}function je(n){var t=n?Bu(n):0;return Sr(t)?t?qn(n):[]:Ee(n)}function ke(n){return et(n,Re(n))}function Ie(n){return gt(n,Re(n))}function Re(n){if(null==n)return[];ge(n)||(n=Ve(n));for(var t=n.length,t=t&&Sr(t)&&(Oo(n)||pe(n))&&t||0,r=n.constructor,e=-1,r="function"==typeof r&&r.prototype===n,u=Be(t),o=t>0;++e<t;)u[e]=e+"";for(var i in n)o&&Cr(i,t)||"constructor"==i&&(r||!nu.call(n,i))||u.push(i);return u}function Oe(n){n=Br(n);for(var t=-1,r=zo(n),e=r.length,u=Be(e);++t<e;){var o=r[t];u[t]=[o,n[o]]}return u}function Ee(n){return Ft(n,zo(n))}function Ce(n){return(n=u(n))&&n.replace(En,a).replace(xn,"")}function Ue(n,t){var r="";if(n=u(n),t=+t,1>t||!n||!mu(t))return r;do t%2&&(r+=n),t=yu(t/2),n+=n;while(t);return r}function We(n,t,r){var e=n;return(n=u(n))?(r?Ur(e,t,r):null==t)?n.slice(g(n),y(n)+1):(t+="",n.slice(o(n,t),i(n,t)+1)):n}function $e(n,t,r){return r&&Ur(n,t,r)&&(t=w),n=u(n),n.match(t||Wn)||[]}function Se(n,t,r){return r&&Ur(n,t,r)&&(t=w),h(n)?Ne(n):ut(n,t)}function Fe(n){return n}function Ne(n){return bt(ot(n,!0))}function Te(n,t,r){if(null==r){var e=ge(t),u=e?zo(t):w;((u=u&&u.length?gt(t,u):w)?u.length:e)||(u=!1,r=t,t=n,n=this)}u||(u=gt(t,zo(t)));var o=!0,e=-1,i=ve(n),f=u.length;!1===r?o=!1:ge(r)&&"chain"in r&&(o=r.chain);for(;++e<f;){r=u[e];var a=t[r];n[r]=a,i&&(n.prototype[r]=function(t){return function(){var r=this.__chain__;if(o||r){var e=n(this.__wrapped__);return(e.__actions__=qn(this.__actions__)).push({func:t,args:arguments,thisArg:n}),e.__chain__=r,e}return t.apply(n,Jn([this.value()],arguments))}}(a))}return n}function Le(){}function ze(n){return Wr(n)?jt(n):kt(n)}_=_?Yn.defaults(Zn.Object(),_,Yn.pick(Zn,$n)):Zn;var Be=_.Array,De=_.Date,Me=_.Error,qe=_.Function,Pe=_.Math,Ke=_.Number,Ve=_.Object,Ze=_.RegExp,Ye=_.String,Ge=_.TypeError,Je=Be.prototype,Xe=Ve.prototype,He=Ye.prototype,Qe=qe.prototype.toString,nu=Xe.hasOwnProperty,tu=0,ru=Xe.toString,eu=Zn._,uu=Ze("^"+Qe.call(nu).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ou=_.ArrayBuffer,iu=_.clearTimeout,fu=_.parseFloat,au=Pe.pow,cu=Xe.propertyIsEnumerable,lu=jr(_,"Set"),su=_.setTimeout,pu=Je.splice,hu=_.Uint8Array,_u=jr(_,"WeakMap"),vu=Pe.ceil,gu=jr(Ve,"create"),yu=Pe.floor,du=jr(Be,"isArray"),mu=_.isFinite,wu=jr(Ve,"keys"),bu=Pe.max,xu=Pe.min,Au=jr(De,"now"),ju=_.parseInt,ku=Pe.random,Iu=Ke.NEGATIVE_INFINITY,Ru=Ke.POSITIVE_INFINITY,Ou=4294967294,Eu=2147483647,Cu=9007199254740991,Uu=_u&&new _u,Wu={};Nn.support={},Nn.templateSettings={escape:_n,evaluate:vn,interpolate:gn,variable:"",imports:{_:Nn}};var $u=function(){function n(){}return function(t){if(ge(t)){n.prototype=t;var r=new n;n.prototype=w}return r||{}}}(),Su=Vt(_t),Fu=Vt(vt,!0),Nu=Zt(),Tu=Zt(!0),Lu=Uu?function(n,t){return Uu.set(n,t),n}:Fe,zu=Uu?function(n){return Uu.get(n)}:Le,Bu=jt("length"),Du=function(){var n=0,t=0;return function(r,e){var u=ho(),o=S-(u-t);if(t=u,o>0){if(++n>=$)return r}else n=0;return Lu(r,e)}}(),Mu=le(function(n,t){return h(n)&&Er(n)?ft(n,pt(t,!1,!0)):[]}),qu=tr(),Pu=tr(!0),Ku=le(function(n){for(var t=n.length,e=t,u=Be(l),o=xr(),i=o===r,f=[];e--;){var a=n[e]=Er(a=n[e])?a:[];u[e]=i&&120<=a.length&&gu&&lu?new Dn(e&&a):null}var i=n[0],c=-1,l=i?i.length:0,s=u[0];n:for(;++c<l;)if(a=i[c],0>(s?Mn(s,a):o(f,a,0))){for(e=t;--e;){var p=u[e];if(0>(p?Mn(p,a):o(n[e],a,0)))continue n}s&&s.push(a),f.push(a)}return f}),Vu=le(function(t,r){r=pt(r);var e=rt(t,r);return It(t,r.sort(n)),e}),Zu=vr(),Yu=vr(!0),Gu=le(function(n){return St(pt(n,!1,!0))}),Ju=le(function(n,t){return Er(n)?ft(n,t):[]}),Xu=le(Jr),Hu=le(function(n){var t=n.length,r=t>2?n[t-2]:w,e=t>1?n[t-1]:w;return t>2&&"function"==typeof r?t-=2:(r=t>1&&"function"==typeof e?(--t,e):w,e=w),n.length=t,Xr(n,r,e)}),Qu=le(function(n){return n=pt(n),this.thru(function(t){t=Oo(t)?t:[Br(t)];for(var r=n,e=-1,u=t.length,o=-1,i=r.length,f=Be(u+i);++e<u;)f[e]=t[e];for(;++o<i;)f[e++]=r[o];return f})}),no=le(function(n,t){return rt(n,pt(t))}),to=Pt(function(n,t,r){nu.call(n,r)?++n[r]:n[r]=1}),ro=nr(Su),eo=nr(Fu,!0),uo=ur(Pn,Su),oo=ur(function(n,t){for(var r=n.length;r--&&!1!==t(n[r],r,n););return n},Fu),io=Pt(function(n,t,r){nu.call(n,r)?n[r].push(t):n[r]=[t]}),fo=Pt(function(n,t,r){n[r]=t}),ao=le(function(n,t,r){var e=-1,u="function"==typeof t,o=Wr(t),i=Er(n)?Be(n.length):[];return Su(n,function(n){var f=u?t:o&&null!=n?n[t]:w;i[++e]=f?f.apply(n,r):Or(n,t,r)}),i}),co=Pt(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),lo=lr(Xn,Su),so=lr(function(n,t,r,e){var u=n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r},Fu),po=le(function(n,t){if(null==n)return[];var r=t[2];return r&&Ur(t[0],t[1],r)&&(t.length=1),Wt(n,pt(t),[])}),ho=Au||function(){return(new De).getTime()},_o=le(function(n,t,r){var e=x;if(r.length)var u=v(r,_o.placeholder),e=e|R;return gr(n,e,t,r,u)}),vo=le(function(n,t){t=t.length?pt(t):Ie(n);for(var r=-1,e=t.length;++r<e;){var u=t[r];n[u]=gr(n[u],x,n)}return n}),go=le(function(n,t,r){var e=x|A;if(r.length)var u=v(r,go.placeholder),e=e|R;return gr(t,e,n,r,u)}),yo=Xt(k),mo=Xt(I),wo=le(function(n,t){return it(n,1,t)}),bo=le(function(n,t,r){return it(n,t,r)}),xo=er(),Ao=er(!0),jo=le(function(n,t){if(t=pt(t),"function"!=typeof n||!Kn(t,e))throw new Ge(L);var r=t.length;return le(function(e){for(var u=xu(e.length,r);u--;)e[u]=t[u](e[u]);return n.apply(this,e)})}),ko=cr(R),Io=cr(O),Ro=le(function(n,t){return gr(n,C,w,w,w,pt(t))}),Oo=du||function(n){return h(n)&&Sr(n.length)&&ru.call(n)==D},Eo=Kt(At),Co=Kt(function(n,t,r){return r?nt(n,t,r):tt(n,t)}),Uo=Ht(Co,function(n,t){return n===w?t:n}),Wo=Ht(Eo,Fr),$o=rr(_t),So=rr(vt),Fo=or(Nu),No=or(Tu),To=ir(_t),Lo=ir(vt),zo=wu?function(n){var t=null==n?w:n.constructor;return"function"==typeof t&&t.prototype===n||"function"!=typeof n&&Er(n)?Lr(n):ge(n)?wu(n):[]}:Lr,Bo=fr(!0),Do=fr(),Mo=le(function(n,t){if(null==n)return{};if("function"!=typeof t[0])return t=Gn(pt(t),Ye),Nr(n,ft(Re(n),t));var r=Bt(t[0],t[1],3);return Tr(n,function(n,t,e){return!r(n,t,e)})}),qo=le(function(n,t){return null==n?{}:"function"==typeof t[0]?Tr(n,Bt(t[0],t[1],3)):Nr(n,pt(t))}),Po=Gt(function(n,t,r){return t=t.toLowerCase(),n+(r?t.charAt(0).toUpperCase()+t.slice(1):t)}),Ko=Gt(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Vo=ar(),Zo=ar(!0),Yo=Gt(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Go=Gt(function(n,t,r){return n+(r?" ":"")+(t.charAt(0).toUpperCase()+t.slice(1))}),Jo=le(function(n,t){try{return n.apply(w,t)}catch(r){return _e(r)?r:new Me(r)}}),Xo=le(function(n,t){return function(r){return Or(r,n,t)}}),Ho=le(function(n,t){return function(r){return Or(n,r,t)}}),Qo=_r("ceil"),ni=_r("floor"),ti=Qt(se,Iu),ri=Qt(Ae,Ru),ei=_r("round");return Nn.prototype=Tn.prototype,Ln.prototype=$u(Tn.prototype),Ln.prototype.constructor=Ln,zn.prototype=$u(Tn.prototype),zn.prototype.constructor=zn,Bn.prototype["delete"]=function(n){return this.has(n)&&delete this.__data__[n]},Bn.prototype.get=function(n){return"__proto__"==n?w:this.__data__[n]},Bn.prototype.has=function(n){return"__proto__"!=n&&nu.call(this.__data__,n)},Bn.prototype.set=function(n,t){return"__proto__"!=n&&(this.__data__[n]=t),this},Dn.prototype.push=function(n){var t=this.data;"string"==typeof n||ge(n)?t.set.add(n):t.hash[n]=!0},ce.Cache=Bn,Nn.after=function(n,t){if("function"!=typeof t){if("function"!=typeof n)throw new Ge(L);var r=n;n=t,t=r}return n=mu(n=+n)?n:0,function(){return 1>--n?t.apply(this,arguments):void 0}},Nn.ary=function(n,t,r){return r&&Ur(n,t,r)&&(t=w),t=n&&null==t?n.length:bu(+t||0,0),gr(n,E,w,w,w,w,t)},Nn.assign=Co,Nn.at=no,Nn.before=fe,Nn.bind=_o,Nn.bindAll=vo,Nn.bindKey=go,Nn.callback=Se,Nn.chain=Qr,Nn.chunk=function(n,t,r){t=(r?Ur(n,t,r):null==t)?1:bu(yu(t)||1,1),r=0;for(var e=n?n.length:0,u=-1,o=Be(vu(e/t));e>r;)o[++u]=Et(n,r,r+=t);return o},Nn.compact=function(n){for(var t=-1,r=n?n.length:0,e=-1,u=[];++t<r;){var o=n[t];o&&(u[++e]=o)}return u},Nn.constant=function(n){return function(){return n}},Nn.countBy=to,Nn.create=function(n,t,r){var e=$u(n);return r&&Ur(n,t,r)&&(t=w),t?tt(e,t):e},Nn.curry=yo,Nn.curryRight=mo,Nn.debounce=ae,Nn.defaults=Uo,Nn.defaultsDeep=Wo,Nn.defer=wo,Nn.delay=bo,Nn.difference=Mu,Nn.drop=qr,Nn.dropRight=Pr,Nn.dropRightWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),!0,!0):[]},Nn.dropWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),!0):[]},Nn.fill=function(n,t,r,e){var u=n?n.length:0;if(!u)return[];for(r&&"number"!=typeof r&&Ur(n,t,r)&&(r=0,e=u),u=n.length,r=null==r?0:+r||0,0>r&&(r=-r>u?0:u+r),e=e===w||e>u?u:+e||0,0>e&&(e+=u),u=r>e?0:e>>>0,r>>>=0;u>r;)n[r++]=t;return n},Nn.filter=re,Nn.flatten=function(n,t,r){var e=n?n.length:0;return r&&Ur(n,t,r)&&(t=!1),e?pt(n,t):[]},Nn.flattenDeep=function(n){return n&&n.length?pt(n,!0):[]},Nn.flow=xo,Nn.flowRight=Ao,Nn.forEach=uo,Nn.forEachRight=oo,Nn.forIn=Fo,Nn.forInRight=No,Nn.forOwn=To,Nn.forOwnRight=Lo,Nn.functions=Ie,Nn.groupBy=io,Nn.indexBy=fo,Nn.initial=function(n){return Pr(n,1)},Nn.intersection=Ku,Nn.invert=function(n,t,r){r&&Ur(n,t,r)&&(t=w),r=-1;for(var e=zo(n),u=e.length,o={};++r<u;){var i=e[r],f=n[i];t?nu.call(o,f)?o[f].push(i):o[f]=[i]:o[f]=i}return o},Nn.invoke=ao,Nn.keys=zo,Nn.keysIn=Re,Nn.map=ue,Nn.mapKeys=Bo,Nn.mapValues=Do,Nn.matches=Ne,Nn.matchesProperty=function(n,t){return xt(n,ot(t,!0))},Nn.memoize=ce,Nn.merge=Eo,Nn.method=Xo,Nn.methodOf=Ho,Nn.mixin=Te,Nn.modArgs=jo,Nn.negate=function(n){if("function"!=typeof n)throw new Ge(L);return function(){return!n.apply(this,arguments)}},Nn.omit=Mo,Nn.once=function(n){return fe(2,n)},Nn.pairs=Oe,Nn.partial=ko,Nn.partialRight=Io,Nn.partition=co,Nn.pick=qo,Nn.pluck=function(n,t){return ue(n,ze(t))},Nn.property=ze,Nn.propertyOf=function(n){return function(t){return yt(n,Dr(t),t+"")}},Nn.pull=function(){var n=arguments,t=n[0];if(!t||!t.length)return t;for(var r=0,e=xr(),u=n.length;++r<u;)for(var o=0,i=n[r];-1<(o=e(t,i,o));)pu.call(t,o,1);return t},Nn.pullAt=Vu,Nn.range=function(n,t,r){r&&Ur(n,t,r)&&(t=r=w),n=+n||0,r=null==r?1:+r||0,null==t?(t=n,n=0):t=+t||0;var e=-1;t=bu(vu((t-n)/(r||1)),0);for(var u=Be(t);++e<t;)u[e]=n,n+=r;return u},Nn.rearg=Ro,Nn.reject=function(n,t,r){var e=Oo(n)?Vn:lt;return t=wr(t,r,3),e(n,function(n,r,e){return!t(n,r,e)})},Nn.remove=function(n,t,r){var e=[];if(!n||!n.length)return e;var u=-1,o=[],i=n.length;for(t=wr(t,r,3);++u<i;)r=n[u],t(r,u,n)&&(e.push(r),o.push(u));return It(n,o),e},Nn.rest=Yr,Nn.restParam=le,Nn.set=function(n,t,r){if(null==n)return n;var e=t+"";t=null!=n[e]||Wr(t,n)?[e]:Dr(t);for(var e=-1,u=t.length,o=u-1,i=n;null!=i&&++e<u;){var f=t[e];ge(i)&&(e==o?i[f]=r:null==i[f]&&(i[f]=Cr(t[e+1])?[]:{})),i=i[f]}return n},Nn.shuffle=function(n){return oe(n,Ru)},Nn.slice=function(n,t,r){var e=n?n.length:0;return e?(r&&"number"!=typeof r&&Ur(n,t,r)&&(t=0,r=e),Et(n,t,r)):[]},Nn.sortBy=function(n,t,r){if(null==n)return[];r&&Ur(n,t,r)&&(t=w);var e=-1;return t=wr(t,r,3),n=wt(n,function(n,r,u){return{a:t(n,r,u),b:++e,c:n}}),Ut(n,f)},Nn.sortByAll=po,Nn.sortByOrder=function(n,t,r,e){return null==n?[]:(e&&Ur(t,r,e)&&(r=w),Oo(t)||(t=null==t?[]:[t]),Oo(r)||(r=null==r?[]:[r]),Wt(n,t,r))},Nn.spread=function(n){if("function"!=typeof n)throw new Ge(L);return function(t){return n.apply(this,t)}},Nn.take=function(n,t,r){return n&&n.length?((r?Ur(n,t,r):null==t)&&(t=1),Et(n,0,0>t?0:t)):[]},Nn.takeRight=function(n,t,r){var e=n?n.length:0;return e?((r?Ur(n,t,r):null==t)&&(t=1),t=e-(+t||0),Et(n,0>t?0:t)):[]},Nn.takeRightWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3),!1,!0):[]},Nn.takeWhile=function(n,t,r){return n&&n.length?Nt(n,wr(t,r,3)):[]},Nn.tap=function(n,t,r){return t.call(r,n),n},Nn.throttle=function(n,t,r){var e=!0,u=!0;if("function"!=typeof n)throw new Ge(L);return!1===r?e=!1:ge(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),ae(n,t,{leading:e,maxWait:+t,trailing:u})},Nn.thru=ne,Nn.times=function(n,t,r){if(n=yu(n),1>n||!mu(n))return[];var e=-1,u=Be(xu(n,4294967295));for(t=Bt(t,r,1);++e<n;)4294967295>e?u[e]=t(e):t(e);return u},Nn.toArray=je,Nn.toPlainObject=ke,Nn.transform=function(n,t,r,e){var u=Oo(n)||xe(n);return t=wr(t,e,4),null==r&&(u||ge(n)?(e=n.constructor,r=u?Oo(n)?new e:[]:$u(ve(e)?e.prototype:w)):r={}),(u?Pn:_t)(n,function(n,e,u){return t(r,n,e,u)}),r},Nn.union=Gu,Nn.uniq=Gr,Nn.unzip=Jr,Nn.unzipWith=Xr,Nn.values=Ee,Nn.valuesIn=function(n){return Ft(n,Re(n))},Nn.where=function(n,t){return re(n,bt(t))},Nn.without=Ju,Nn.wrap=function(n,t){return t=null==t?Fe:t,gr(t,R,w,[n],[])},Nn.xor=function(){for(var n=-1,t=arguments.length;++n<t;){var r=arguments[n];if(Er(r))var e=e?Jn(ft(e,r),ft(r,e)):r}return e?St(e):[]},Nn.zip=Xu,Nn.zipObject=Hr,Nn.zipWith=Hu,Nn.backflow=Ao,Nn.collect=ue,Nn.compose=Ao,Nn.each=uo,Nn.eachRight=oo,Nn.extend=Co,Nn.iteratee=Se,Nn.methods=Ie,Nn.object=Hr,Nn.select=re,Nn.tail=Yr,Nn.unique=Gr,Te(Nn,Nn),Nn.add=function(n,t){return(+n||0)+(+t||0)},Nn.attempt=Jo,Nn.camelCase=Po,Nn.capitalize=function(n){return(n=u(n))&&n.charAt(0).toUpperCase()+n.slice(1)},Nn.ceil=Qo,Nn.clone=function(n,t,r,e){return t&&"boolean"!=typeof t&&Ur(n,t,r)?t=!1:"function"==typeof t&&(e=r,r=t,t=!1),"function"==typeof r?ot(n,t,Bt(r,e,3)):ot(n,t)},Nn.cloneDeep=function(n,t,r){return"function"==typeof t?ot(n,!0,Bt(t,r,3)):ot(n,!0)},Nn.deburr=Ce,Nn.endsWith=function(n,t,r){n=u(n),t+="";var e=n.length;return r=r===w?e:xu(0>r?0:+r||0,e),r-=t.length,r>=0&&n.indexOf(t,r)==r},Nn.escape=function(n){return(n=u(n))&&hn.test(n)?n.replace(sn,c):n},Nn.escapeRegExp=function(n){return(n=u(n))&&bn.test(n)?n.replace(wn,l):n||"(?:)"},Nn.every=te,Nn.find=ro,Nn.findIndex=qu,Nn.findKey=$o,Nn.findLast=eo,Nn.findLastIndex=Pu,Nn.findLastKey=So,Nn.findWhere=function(n,t){return ro(n,bt(t))},Nn.first=Kr,Nn.floor=ni,Nn.get=function(n,t,r){return n=null==n?w:yt(n,Dr(t),t+""),n===w?r:n},Nn.gt=se,Nn.gte=function(n,t){return n>=t},Nn.has=function(n,t){if(null==n)return!1;var r=nu.call(n,t);if(!r&&!Wr(t)){if(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),null==n)return!1;t=Zr(t),r=nu.call(n,t)}return r||Sr(n.length)&&Cr(t,n.length)&&(Oo(n)||pe(n))},Nn.identity=Fe,Nn.includes=ee,Nn.indexOf=Vr,Nn.inRange=function(n,t,r){return t=+t||0,r===w?(r=t,t=0):r=+r||0,n>=xu(t,r)&&n<bu(t,r)},Nn.isArguments=pe,Nn.isArray=Oo,Nn.isBoolean=function(n){return!0===n||!1===n||h(n)&&ru.call(n)==M},Nn.isDate=function(n){return h(n)&&ru.call(n)==q},Nn.isElement=function(n){return!!n&&1===n.nodeType&&h(n)&&!me(n)},Nn.isEmpty=function(n){return null==n?!0:Er(n)&&(Oo(n)||be(n)||pe(n)||h(n)&&ve(n.splice))?!n.length:!zo(n).length},Nn.isEqual=he,Nn.isError=_e,Nn.isFinite=function(n){return"number"==typeof n&&mu(n)},Nn.isFunction=ve,Nn.isMatch=function(n,t,r,e){return r="function"==typeof r?Bt(r,e,3):w,mt(n,Ar(t),r)},Nn.isNaN=function(n){return de(n)&&n!=+n},Nn.isNative=ye,Nn.isNull=function(n){return null===n},Nn.isNumber=de,Nn.isObject=ge,Nn.isPlainObject=me,Nn.isRegExp=we,Nn.isString=be,Nn.isTypedArray=xe,Nn.isUndefined=function(n){return n===w},Nn.kebabCase=Ko,Nn.last=Zr,Nn.lastIndexOf=function(n,t,r){var e=n?n.length:0;if(!e)return-1;var u=e;if("number"==typeof r)u=(0>r?bu(e+r,0):xu(r||0,e-1))+1;else if(r)return u=Lt(n,t,!0)-1,n=n[u],(t===t?t===n:n!==n)?u:-1;if(t!==t)return p(n,u,!0);for(;u--;)if(n[u]===t)return u;return-1},Nn.lt=Ae,Nn.lte=function(n,t){return t>=n},Nn.max=ti,Nn.min=ri,Nn.noConflict=function(){return Zn._=eu,this},Nn.noop=Le,Nn.now=ho,Nn.pad=function(n,t,r){n=u(n),t=+t;var e=n.length;return t>e&&mu(t)?(e=(t-e)/2,t=yu(e),e=vu(e),r=pr("",e,r),r.slice(0,t)+n+r):n},Nn.padLeft=Vo,Nn.padRight=Zo,Nn.parseInt=function(n,t,r){return(r?Ur(n,t,r):null==t)?t=0:t&&(t=+t),n=We(n),ju(n,t||(In.test(n)?16:10))},Nn.random=function(n,t,r){r&&Ur(n,t,r)&&(t=r=w);var e=null==n,u=null==t;return null==r&&(u&&"boolean"==typeof n?(r=n,n=1):"boolean"==typeof t&&(r=t,u=!0)),e&&u&&(t=1,u=!1),n=+n||0,u?(t=n,n=0):t=+t||0,r||n%1||t%1?(r=ku(),xu(n+r*(t-n+fu("1e-"+((r+"").length-1))),t)):Rt(n,t)},Nn.reduce=lo,Nn.reduceRight=so,Nn.repeat=Ue,Nn.result=function(n,t,r){var e=null==n?w:n[t];return e===w&&(null==n||Wr(t,n)||(t=Dr(t),n=1==t.length?n:yt(n,Et(t,0,-1)),e=null==n?w:n[Zr(t)]),e=e===w?r:e),ve(e)?e.call(n):e},Nn.round=ei,Nn.runInContext=m,Nn.size=function(n){var t=n?Bu(n):0;return Sr(t)?t:zo(n).length},Nn.snakeCase=Yo,Nn.some=ie,Nn.sortedIndex=Zu,Nn.sortedLastIndex=Yu,Nn.startCase=Go,Nn.startsWith=function(n,t,r){return n=u(n),r=null==r?0:xu(0>r?0:+r||0,n.length),n.lastIndexOf(t,r)==r},Nn.sum=function(n,t,r){if(r&&Ur(n,t,r)&&(t=w),t=wr(t,r,3),1==t.length){n=Oo(n)?n:zr(n),r=n.length;for(var e=0;r--;)e+=+t(n[r])||0;n=e}else n=$t(n,t);return n},Nn.template=function(n,t,r){var e=Nn.templateSettings;r&&Ur(n,t,r)&&(t=r=w),n=u(n),t=nt(tt({},r||t),e,Qn),r=nt(tt({},t.imports),e.imports,Qn);var o,i,f=zo(r),a=Ft(r,f),c=0;r=t.interpolate||Cn;var l="__p+='";r=Ze((t.escape||Cn).source+"|"+r.source+"|"+(r===gn?jn:Cn).source+"|"+(t.evaluate||Cn).source+"|$","g");var p="sourceURL"in t?"//# sourceURL="+t.sourceURL+"\n":"";if(n.replace(r,function(t,r,e,u,f,a){return e||(e=u),l+=n.slice(c,a).replace(Un,s),r&&(o=!0,l+="'+__e("+r+")+'"),f&&(i=!0,l+="';"+f+";\n__p+='"),e&&(l+="'+((__t=("+e+"))==null?'':__t)+'"),c=a+t.length,t}),l+="';",(t=t.variable)||(l="with(obj){"+l+"}"),l=(i?l.replace(fn,""):l).replace(an,"$1").replace(cn,"$1;"),l="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+l+"return __p}",t=Jo(function(){return qe(f,p+"return "+l).apply(w,a)}),t.source=l,_e(t))throw t;return t},Nn.trim=We,Nn.trimLeft=function(n,t,r){var e=n;return(n=u(n))?n.slice((r?Ur(e,t,r):null==t)?g(n):o(n,t+"")):n},Nn.trimRight=function(n,t,r){var e=n;return(n=u(n))?(r?Ur(e,t,r):null==t)?n.slice(0,y(n)+1):n.slice(0,i(n,t+"")+1):n},Nn.trunc=function(n,t,r){r&&Ur(n,t,r)&&(t=w);var e=U;if(r=W,null!=t)if(ge(t)){var o="separator"in t?t.separator:o,e="length"in t?+t.length||0:e;r="omission"in t?u(t.omission):r}else e=+t||0;if(n=u(n),e>=n.length)return n;if(e-=r.length,1>e)return r;if(t=n.slice(0,e),null==o)return t+r;if(we(o)){if(n.slice(e).search(o)){var i,f=n.slice(0,e);for(o.global||(o=Ze(o.source,(kn.exec(o)||"")+"g")),o.lastIndex=0;n=o.exec(f);)i=n.index;t=t.slice(0,null==i?e:i)}}else n.indexOf(o,e)!=e&&(o=t.lastIndexOf(o),o>-1&&(t=t.slice(0,o)));return t+r},Nn.unescape=function(n){return(n=u(n))&&pn.test(n)?n.replace(ln,d):n},Nn.uniqueId=function(n){var t=++tu;return u(n)+t},Nn.words=$e,Nn.all=te,Nn.any=ie,Nn.contains=ee,Nn.eq=he,Nn.detect=ro,Nn.foldl=lo,Nn.foldr=so,Nn.head=Kr,Nn.include=ee,Nn.inject=lo,Te(Nn,function(){var n={};return _t(Nn,function(t,r){Nn.prototype[r]||(n[r]=t)}),n}(),!1),Nn.sample=oe,Nn.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(t){return oe(t,n)}):oe(this.value())},Nn.VERSION=b,Pn("bind bindKey curry curryRight partial partialRight".split(" "),function(n){Nn[n].placeholder=Nn}),Pn(["drop","take"],function(n,t){zn.prototype[n]=function(r){var e=this.__filtered__;if(e&&!t)return new zn(this);r=null==r?1:bu(yu(r)||0,0);var u=this.clone();return e?u.__takeCount__=xu(u.__takeCount__,r):u.__views__.push({size:r,type:n+(0>u.__dir__?"Right":"")}),u},zn.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),Pn(["filter","map","takeWhile"],function(n,t){var r=t+1,e=r!=T;zn.prototype[n]=function(n,t){var u=this.clone();return u.__iteratees__.push({iteratee:wr(n,t,1),type:r}),u.__filtered__=u.__filtered__||e,u}}),Pn(["first","last"],function(n,t){var r="take"+(t?"Right":"");zn.prototype[n]=function(){return this[r](1).value()[0]}}),Pn(["initial","rest"],function(n,t){var r="drop"+(t?"":"Right");zn.prototype[n]=function(){return this.__filtered__?new zn(this):this[r](1)}}),Pn(["pluck","where"],function(n,t){var r=t?"filter":"map",e=t?bt:ze;zn.prototype[n]=function(n){return this[r](e(n))}}),zn.prototype.compact=function(){return this.filter(Fe)},zn.prototype.reject=function(n,t){return n=wr(n,t,1),this.filter(function(t){return!n(t)})},zn.prototype.slice=function(n,t){n=null==n?0:+n||0;var r=this;return r.__filtered__&&(n>0||0>t)?new zn(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==w&&(t=+t||0,r=0>t?r.dropRight(-t):r.take(t-n)),r)},zn.prototype.takeRightWhile=function(n,t){return this.reverse().takeWhile(n,t).reverse()},zn.prototype.toArray=function(){return this.take(Ru)},_t(zn.prototype,function(n,t){var r=/^(?:filter|map|reject)|While$/.test(t),e=/^(?:first|last)$/.test(t),u=Nn[e?"take"+("last"==t?"Right":""):t];u&&(Nn.prototype[t]=function(){function t(n){return e&&i?u(n,1)[0]:u.apply(w,Jn([n],o))}var o=e?[1]:arguments,i=this.__chain__,f=this.__wrapped__,a=!!this.__actions__.length,c=f instanceof zn,l=o[0],s=c||Oo(f);return s&&r&&"function"==typeof l&&1!=l.length&&(c=s=!1),l={func:ne,args:[t],thisArg:w},a=c&&!a,e&&!i?a?(f=f.clone(),f.__actions__.push(l),n.call(f)):u.call(w,this.value())[0]:!e&&s?(f=a?f:new zn(this),f=n.apply(f,o),f.__actions__.push(l),new Ln(f,i)):this.thru(t)})}),Pn("join pop push replace shift sort splice split unshift".split(" "),function(n){var t=(/^(?:replace|split)$/.test(n)?He:Je)[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:join|pop|replace|shift)$/.test(n);Nn.prototype[n]=function(){var n=arguments;return e&&!this.__chain__?t.apply(this.value(),n):this[r](function(r){return t.apply(r,n)})}}),_t(zn.prototype,function(n,t){var r=Nn[t];if(r){var e=r.name+"";(Wu[e]||(Wu[e]=[])).push({name:t,func:r})}}),Wu[sr(w,A).name]=[{name:"wrapper",func:w}],zn.prototype.clone=function(){var n=new zn(this.__wrapped__);return n.__actions__=qn(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=qn(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=qn(this.__views__),n},zn.prototype.reverse=function(){if(this.__filtered__){var n=new zn(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n},zn.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=Oo(t),u=0>r,o=e?t.length:0;n=o;for(var i=this.__views__,f=0,a=-1,c=i.length;++a<c;){var l=i[a],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=xu(n,f+s);break;case"takeRight":f=bu(f,n-s)}}if(n={start:f,end:n},i=n.start,f=n.end,n=f-i,u=u?f:i-1,i=this.__iteratees__,f=i.length,a=0,c=xu(n,this.__takeCount__),!e||F>o||o==n&&c==n)return Tt(t,this.__actions__);e=[];n:for(;n--&&c>a;){for(u+=r,o=-1,l=t[u];++o<f;){var p=i[o],s=p.type,p=p.iteratee(l);if(s==T)l=p;else if(!p){if(s==N)continue n;break n}}e[a++]=l}return e},Nn.prototype.chain=function(){return Qr(this)},Nn.prototype.commit=function(){return new Ln(this.value(),this.__chain__)},Nn.prototype.concat=Qu,Nn.prototype.plant=function(n){for(var t,r=this;r instanceof Tn;){var e=Mr(r);t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},Nn.prototype.reverse=function(){function n(n){return n.reverse()}var t=this.__wrapped__;return t instanceof zn?(this.__actions__.length&&(t=new zn(this)),t=t.reverse(),t.__actions__.push({func:ne,args:[n],thisArg:w}),new Ln(t,this.__chain__)):this.thru(n)},Nn.prototype.toString=function(){return this.value()+""},Nn.prototype.run=Nn.prototype.toJSON=Nn.prototype.valueOf=Nn.prototype.value=function(){return Tt(this.__wrapped__,this.__actions__)},Nn.prototype.collect=Nn.prototype.map,Nn.prototype.head=Nn.prototype.first,Nn.prototype.select=Nn.prototype.filter,Nn.prototype.tail=Nn.prototype.rest,Nn}var w,b="3.10.1",x=1,A=2,j=4,k=8,I=16,R=32,O=64,E=128,C=256,U=30,W="...",$=150,S=16,F=200,N=1,T=2,L="Expected a function",z="__lodash_placeholder__",B="[object Arguments]",D="[object Array]",M="[object Boolean]",q="[object Date]",P="[object Error]",K="[object Function]",V="[object Number]",Z="[object Object]",Y="[object RegExp]",G="[object String]",J="[object ArrayBuffer]",X="[object Float32Array]",H="[object Float64Array]",Q="[object Int8Array]",nn="[object Int16Array]",tn="[object Int32Array]",rn="[object Uint8Array]",en="[object Uint8ClampedArray]",un="[object Uint16Array]",on="[object Uint32Array]",fn=/\b__p\+='';/g,an=/\b(__p\+=)''\+/g,cn=/(__e\(.*?\)|\b__t\))\+'';/g,ln=/&(?:amp|lt|gt|quot|#39|#96);/g,sn=/[&<>"'`]/g,pn=RegExp(ln.source),hn=RegExp(sn.source),_n=/<%-([\s\S]+?)%>/g,vn=/<%([\s\S]+?)%>/g,gn=/<%=([\s\S]+?)%>/g,yn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,dn=/^\w*$/,mn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,wn=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,bn=RegExp(wn.source),xn=/[\u0300-\u036f\ufe20-\ufe23]/g,An=/\\(\\)?/g,jn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,kn=/\w*$/,In=/^0[xX]/,Rn=/^\[object .+?Constructor\]$/,On=/^\d+$/,En=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Cn=/($^)/,Un=/['\n\r\u2028\u2029\\]/g,Wn=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),$n="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),Sn={};
Sn[X]=Sn[H]=Sn[Q]=Sn[nn]=Sn[tn]=Sn[rn]=Sn[en]=Sn[un]=Sn[on]=!0,Sn[B]=Sn[D]=Sn[J]=Sn[M]=Sn[q]=Sn[P]=Sn[K]=Sn["[object Map]"]=Sn[V]=Sn[Z]=Sn[Y]=Sn["[object Set]"]=Sn[G]=Sn["[object WeakMap]"]=!1;var Fn={};Fn[B]=Fn[D]=Fn[J]=Fn[M]=Fn[q]=Fn[X]=Fn[H]=Fn[Q]=Fn[nn]=Fn[tn]=Fn[V]=Fn[Z]=Fn[Y]=Fn[G]=Fn[rn]=Fn[en]=Fn[un]=Fn[on]=!0,Fn[P]=Fn[K]=Fn["[object Map]"]=Fn["[object Set]"]=Fn["[object WeakMap]"]=!1;var Nn={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"},Tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ln={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},zn={"function":!0,object:!0},Bn={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Dn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Mn=zn[typeof exports]&&exports&&!exports.nodeType&&exports,qn=zn[typeof module]&&module&&!module.nodeType&&module,Pn=zn[typeof self]&&self&&self.Object&&self,Kn=zn[typeof window]&&window&&window.Object&&window,Vn=qn&&qn.exports===Mn&&Mn,Zn=Mn&&qn&&"object"==typeof global&&global&&global.Object&&global||Kn!==(this&&this.window)&&Kn||Pn||this,Yn=m();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Zn._=Yn,define(function(){return Yn})):Mn&&qn?Vn?(qn.exports=Yn)._=Yn:Mn._=Yn:Zn._=Yn}.call(this),function(root,factory){"function"==typeof define&&define.amd?define(["jquery"],factory):"object"==typeof exports?module.exports=factory(require("jquery")):root.bootbox=factory(root.jQuery)}(this,function init($,undefined){function _t(key){var locale=locales[defaults.locale];return locale?locale[key]:locales.en[key]}function processCallback(e,dialog,callback){e.stopPropagation(),e.preventDefault();var preserveDialog=$.isFunction(callback)&&callback.call(dialog,e)===!1;preserveDialog||dialog.modal("hide")}function getKeyLength(obj){var k,t=0;for(k in obj)t++;return t}function each(collection,iterator){var index=0;$.each(collection,function(key,value){iterator(key,value,index++)})}function sanitize(options){var buttons,total;if("object"!=typeof options)throw new Error("Please supply an object of options");if(!options.message)throw new Error("Please specify a message");return options=$.extend({},defaults,options),options.buttons||(options.buttons={}),buttons=options.buttons,total=getKeyLength(buttons),each(buttons,function(key,button,index){if($.isFunction(button)&&(button=buttons[key]={callback:button}),"object"!==$.type(button))throw new Error("button with key "+key+" must be an object");button.label||(button.label=key),button.className||(2>=total&&index===total-1?button.className="btn-primary":button.className="btn-default")}),options}function mapArguments(args,properties){var argn=args.length,options={};if(1>argn||argn>2)throw new Error("Invalid argument length");return 2===argn||"string"==typeof args[0]?(options[properties[0]]=args[0],options[properties[1]]=args[1]):options=args[0],options}function mergeArguments(defaults,args,properties){return $.extend(!0,{},defaults,mapArguments(args,properties))}function mergeDialogOptions(className,labels,properties,args){var baseOptions={className:"bootbox-"+className,buttons:createLabels.apply(null,labels)};return validateButtons(mergeArguments(baseOptions,args,properties),labels)}function createLabels(){for(var buttons={},i=0,j=arguments.length;j>i;i++){var argument=arguments[i],key=argument.toLowerCase(),value=argument.toUpperCase();buttons[key]={label:_t(value)}}return buttons}function validateButtons(options,buttons){var allowedButtons={};return each(buttons,function(key,value){allowedButtons[value]=!0}),each(options.buttons,function(key){if(allowedButtons[key]===undefined)throw new Error("button key "+key+" is not allowed (options are "+buttons.join("\n")+")")}),options}var templates={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog' aria-hidden='true'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},defaults={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},exports={};exports.alert=function(){var options;if(options=mergeDialogOptions("alert",["ok"],["message","callback"],arguments),options.callback&&!$.isFunction(options.callback))throw new Error("alert requires callback property to be a function when provided");return options.buttons.ok.callback=options.onEscape=function(){return $.isFunction(options.callback)?options.callback.call(this):!0},exports.dialog(options)},exports.confirm=function(){var options;if(options=mergeDialogOptions("confirm",["cancel","confirm"],["message","callback"],arguments),options.buttons.cancel.callback=options.onEscape=function(){return options.callback.call(this,!1)},options.buttons.confirm.callback=function(){return options.callback.call(this,!0)},!$.isFunction(options.callback))throw new Error("confirm requires a callback");return exports.dialog(options)},exports.prompt=function(){var options,defaults,dialog,form,input,shouldShow,inputOptions;if(form=$(templates.form),defaults={className:"bootbox-prompt",buttons:createLabels("cancel","confirm"),value:"",inputType:"text"},options=validateButtons(mergeArguments(defaults,arguments,["title","callback"]),["cancel","confirm"]),shouldShow=options.show===undefined?!0:options.show,options.message=form,options.buttons.cancel.callback=options.onEscape=function(){return options.callback.call(this,null)},options.buttons.confirm.callback=function(){var value;switch(options.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":value=input.val();break;case"checkbox":var checkedItems=input.find("input:checked");value=[],each(checkedItems,function(_,item){value.push($(item).val())})}return options.callback.call(this,value)},options.show=!1,!options.title)throw new Error("prompt requires a title");if(!$.isFunction(options.callback))throw new Error("prompt requires a callback");if(!templates.inputs[options.inputType])throw new Error("invalid prompt type");switch(input=$(templates.inputs[options.inputType]),options.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":input.val(options.value);break;case"select":var groups={};if(inputOptions=options.inputOptions||[],!$.isArray(inputOptions))throw new Error("Please pass an array of input options");if(!inputOptions.length)throw new Error("prompt with select requires options");each(inputOptions,function(_,option){var elem=input;if(option.value===undefined||option.text===undefined)throw new Error("given options in wrong format");option.group&&(groups[option.group]||(groups[option.group]=$("<optgroup/>").attr("label",option.group)),elem=groups[option.group]),elem.append("<option value='"+option.value+"'>"+option.text+"</option>")}),each(groups,function(_,group){input.append(group)}),input.val(options.value);break;case"checkbox":var values=$.isArray(options.value)?options.value:[options.value];if(inputOptions=options.inputOptions||[],!inputOptions.length)throw new Error("prompt with checkbox requires options");if(!inputOptions[0].value||!inputOptions[0].text)throw new Error("given options in wrong format");input=$("<div/>"),each(inputOptions,function(_,option){var checkbox=$(templates.inputs[options.inputType]);checkbox.find("input").attr("value",option.value),checkbox.find("label").append(option.text),each(values,function(_,value){value===option.value&&checkbox.find("input").prop("checked",!0)}),input.append(checkbox)})}return options.placeholder&&input.attr("placeholder",options.placeholder),options.pattern&&input.attr("pattern",options.pattern),options.maxlength&&input.attr("maxlength",options.maxlength),form.append(input),form.on("submit",function(e){e.preventDefault(),e.stopPropagation(),dialog.find(".btn-primary").click()}),dialog=exports.dialog(options),dialog.off("shown.bs.modal"),dialog.on("shown.bs.modal",function(){input.focus()}),shouldShow===!0&&dialog.modal("show"),dialog},exports.dialog=function(options){options=sanitize(options);var dialog=$(templates.dialog),innerDialog=dialog.find(".modal-dialog"),body=dialog.find(".modal-body"),buttons=options.buttons,buttonStr="",callbacks={onEscape:options.onEscape};if($.fn.modal===undefined)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(each(buttons,function(key,button){buttonStr+="<button data-bb-handler='"+key+"' type='button' class='btn "+button.className+"'>"+button.label+"</button>",callbacks[key]=button.callback}),body.find(".bootbox-body").html(options.message),options.animate===!0&&dialog.addClass("fade"),options.className&&dialog.addClass(options.className),"large"===options.size?innerDialog.addClass("modal-lg"):"small"===options.size&&innerDialog.addClass("modal-sm"),options.title&&body.before(templates.header),options.closeButton){var closeButton=$(templates.closeButton);options.title?dialog.find(".modal-header").prepend(closeButton):closeButton.css("margin-top","-10px").prependTo(body)}return options.title&&dialog.find(".modal-title").html(options.title),buttonStr.length&&(body.after(templates.footer),dialog.find(".modal-footer").html(buttonStr)),dialog.on("hidden.bs.modal",function(e){e.target===this&&dialog.remove()}),dialog.on("shown.bs.modal",function(){dialog.find(".btn-primary:first").focus()}),"static"!==options.backdrop&&dialog.on("click.dismiss.bs.modal",function(e){dialog.children(".modal-backdrop").length&&(e.currentTarget=dialog.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&dialog.trigger("escape.close.bb")}),dialog.on("escape.close.bb",function(e){callbacks.onEscape&&processCallback(e,dialog,callbacks.onEscape)}),dialog.on("click",".modal-footer button",function(e){var callbackKey=$(this).data("bb-handler");processCallback(e,dialog,callbacks[callbackKey])}),dialog.on("click",".bootbox-close-button",function(e){processCallback(e,dialog,callbacks.onEscape)}),dialog.on("keyup",function(e){27===e.which&&dialog.trigger("escape.close.bb")}),$(options.container).append(dialog),dialog.modal({backdrop:options.backdrop?"static":!1,keyboard:!1,show:!1}),options.show&&dialog.modal("show"),dialog},exports.setDefaults=function(){var values={};2===arguments.length?values[arguments[0]]=arguments[1]:values=arguments[0],$.extend(defaults,values)},exports.hideAll=function(){return $(".bootbox").modal("hide"),exports};var locales={ar:{OK:"",CANCEL:"",CONFIRM:""},bg_BG:{OK:"",CANCEL:"",CONFIRM:""},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zruit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"",CANCEL:"",CONFIRM:""},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"",CANCEL:"",CONFIRM:""},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"",CANCEL:"",CONFIRM:""},hu:{OK:"OK",CANCEL:"Mgsem",CONFIRM:"Megerst"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"",CONFIRM:""},lt:{OK:"Gerai",CANCEL:"Ataukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprint"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"",CANCEL:"",CONFIRM:""},tr:{OK:"Tamam",CANCEL:"ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"",CONFIRM:""},zh_TW:{OK:"OK",CANCEL:"",CONFIRM:""}};return exports.addLocale=function(name,values){return $.each(["OK","CANCEL","CONFIRM"],function(_,v){if(!values[v])throw new Error("Please supply a translation for '"+v+"'")}),locales[name]={OK:values.OK,CANCEL:values.CANCEL,CONFIRM:values.CONFIRM},exports},exports.removeLocale=function(name){return delete locales[name],exports},exports.setLocale=function(name){return exports.setDefaults("locale",name)},exports.init=function(_$){return init(_$||$)},exports}),function(define){define(["jquery"],function($){return function(){function error(message,title,optionsOverride){return notify({type:toastType.error,iconClass:getOptions().iconClasses.error,message:message,optionsOverride:optionsOverride,title:title})}function getContainer(options,create){return options||(options=getOptions()),$container=$("#"+options.containerId),$container.length?$container:(create&&($container=createContainer(options)),$container)}function info(message,title,optionsOverride){return notify({type:toastType.info,iconClass:getOptions().iconClasses.info,message:message,optionsOverride:optionsOverride,title:title})}function subscribe(callback){listener=callback}function success(message,title,optionsOverride){return notify({type:toastType.success,iconClass:getOptions().iconClasses.success,message:message,optionsOverride:optionsOverride,title:title})}function warning(message,title,optionsOverride){return notify({type:toastType.warning,iconClass:getOptions().iconClasses.warning,message:message,optionsOverride:optionsOverride,title:title})}function clear($toastElement,clearOptions){var options=getOptions();$container||getContainer(options),clearToast($toastElement,options,clearOptions)||clearContainer(options)}function remove($toastElement){var options=getOptions();return $container||getContainer(options),$toastElement&&0===$(":focus",$toastElement).length?void removeToast($toastElement):void($container.children().length&&$container.remove())}function clearContainer(options){for(var toastsToClear=$container.children(),i=toastsToClear.length-1;i>=0;i--)clearToast($(toastsToClear[i]),options)}function clearToast($toastElement,options,clearOptions){var force=clearOptions&&clearOptions.force?clearOptions.force:!1;return $toastElement&&(force||0===$(":focus",$toastElement).length)?($toastElement[options.hideMethod]({duration:options.hideDuration,easing:options.hideEasing,complete:function(){removeToast($toastElement)}}),!0):!1}function createContainer(options){return $container=$("<div/>").attr("id",options.containerId).addClass(options.positionClass).attr("aria-live","polite").attr("role","alert"),$container.appendTo($(options.target)),$container}function getDefaults(){return{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-right",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1}}function publish(args){listener&&listener(args)}function notify(map){function personalizeToast(){setIcon(),setTitle(),setMessage(),setCloseButton(),setProgressBar(),setSequence()}function handleEvents(){$toastElement.hover(stickAround,delayedHideToast),!options.onclick&&options.tapToDismiss&&$toastElement.click(hideToast),options.closeButton&&$closeElement&&$closeElement.click(function(event){event.stopPropagation?event.stopPropagation():void 0!==event.cancelBubble&&event.cancelBubble!==!0&&(event.cancelBubble=!0),hideToast(!0)}),options.onclick&&$toastElement.click(function(){options.onclick(),hideToast()})}function displayToast(){$toastElement.hide(),$toastElement[options.showMethod]({duration:options.showDuration,easing:options.showEasing,complete:options.onShown}),options.timeOut>0&&(intervalId=setTimeout(hideToast,options.timeOut),progressBar.maxHideTime=parseFloat(options.timeOut),progressBar.hideEta=(new Date).getTime()+progressBar.maxHideTime,options.progressBar&&(progressBar.intervalId=setInterval(updateProgress,10)))}function setIcon(){map.iconClass&&$toastElement.addClass(options.toastClass).addClass(iconClass)}function setSequence(){options.newestOnTop?$container.prepend($toastElement):$container.append($toastElement)}function setTitle(){map.title&&($titleElement.append(map.title).addClass(options.titleClass),$toastElement.append($titleElement))}function setMessage(){map.message&&($messageElement.append(map.message).addClass(options.messageClass),$toastElement.append($messageElement))}function setCloseButton(){options.closeButton&&($closeElement.addClass("toast-close-button").attr("role","button"),$toastElement.prepend($closeElement))}function setProgressBar(){options.progressBar&&($progressElement.addClass("toast-progress"),$toastElement.prepend($progressElement))}function shouldExit(options,map){if(options.preventDuplicates){if(map.message===previousToast)return!0;previousToast=map.message}return!1}function hideToast(override){return!$(":focus",$toastElement).length||override?(clearTimeout(progressBar.intervalId),$toastElement[options.hideMethod]({duration:options.hideDuration,easing:options.hideEasing,complete:function(){removeToast($toastElement),options.onHidden&&"hidden"!==response.state&&options.onHidden(),response.state="hidden",response.endTime=new Date,publish(response)}})):void 0}function delayedHideToast(){(options.timeOut>0||options.extendedTimeOut>0)&&(intervalId=setTimeout(hideToast,options.extendedTimeOut),progressBar.maxHideTime=parseFloat(options.extendedTimeOut),progressBar.hideEta=(new Date).getTime()+progressBar.maxHideTime)}function stickAround(){clearTimeout(intervalId),progressBar.hideEta=0,$toastElement.stop(!0,!0)[options.showMethod]({duration:options.showDuration,easing:options.showEasing})}function updateProgress(){var percentage=(progressBar.hideEta-(new Date).getTime())/progressBar.maxHideTime*100;$progressElement.width(percentage+"%")}var options=getOptions(),iconClass=map.iconClass||options.iconClass;if("undefined"!=typeof map.optionsOverride&&(options=$.extend(options,map.optionsOverride),iconClass=map.optionsOverride.iconClass||iconClass),!shouldExit(options,map)){toastId++,$container=getContainer(options,!0);var intervalId=null,$toastElement=$("<div/>"),$titleElement=$("<div/>"),$messageElement=$("<div/>"),$progressElement=$("<div/>"),$closeElement=$(options.closeHtml),progressBar={intervalId:null,hideEta:null,maxHideTime:null},response={toastId:toastId,state:"visible",startTime:new Date,options:options,map:map};return personalizeToast(),displayToast(),handleEvents(),publish(response),options.debug&&console&&console.log(response),$toastElement}}function getOptions(){return $.extend({},getDefaults(),toastr.options)}function removeToast($toastElement){$container||($container=getContainer()),$toastElement.is(":visible")||($toastElement.remove(),$toastElement=null,0===$container.children().length&&($container.remove(),previousToast=void 0))}var $container,listener,previousToast,toastId=0,toastType={error:"error",info:"info",success:"success",warning:"warning"},toastr={clear:clear,remove:remove,error:error,getContainer:getContainer,info:info,options:{},subscribe:subscribe,success:success,version:"2.1.1",warning:warning};return toastr}()})}("function"==typeof define&&define.amd?define:function(deps,factory){"undefined"!=typeof module&&module.exports?module.exports=factory(require("jquery")):window.toastr=factory(window.jQuery)}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function($){var version=$.fn.jquery.split(" ")[0].split(".");if(version[0]<2&&version[1]<9||1==version[0]&&9==version[1]&&version[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function($){function transitionEnd(){var el=document.createElement("bootstrap"),transEndEventNames={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var name in transEndEventNames)if(void 0!==el.style[name])return{end:transEndEventNames[name]};return!1}$.fn.emulateTransitionEnd=function(duration){var called=!1,$el=this;$(this).one("bsTransitionEnd",function(){called=!0});var callback=function(){called||$($el).trigger($.support.transition.end)};return setTimeout(callback,duration),this},$(function(){$.support.transition=transitionEnd(),$.support.transition&&($.event.special.bsTransitionEnd={bindType:$.support.transition.end,delegateType:$.support.transition.end,handle:function(e){return $(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.alert");data||$this.data("bs.alert",data=new Alert(this)),"string"==typeof option&&data[option].call($this)})}var dismiss='[data-dismiss="alert"]',Alert=function(el){$(el).on("click",dismiss,this.close)};Alert.VERSION="3.3.5",Alert.TRANSITION_DURATION=150,Alert.prototype.close=function(e){function removeElement(){$parent.detach().trigger("closed.bs.alert").remove()}var $this=$(this),selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=$(selector);e&&e.preventDefault(),$parent.length||($parent=$this.closest(".alert")),$parent.trigger(e=$.Event("close.bs.alert")),e.isDefaultPrevented()||($parent.removeClass("in"),$.support.transition&&$parent.hasClass("fade")?$parent.one("bsTransitionEnd",removeElement).emulateTransitionEnd(Alert.TRANSITION_DURATION):removeElement())};var old=$.fn.alert;$.fn.alert=Plugin,$.fn.alert.Constructor=Alert,$.fn.alert.noConflict=function(){return $.fn.alert=old,this},$(document).on("click.bs.alert.data-api",dismiss,Alert.prototype.close)}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.button"),options="object"==typeof option&&option;data||$this.data("bs.button",data=new Button(this,options)),"toggle"==option?data.toggle():option&&data.setState(option)})}var Button=function(element,options){this.$element=$(element),this.options=$.extend({},Button.DEFAULTS,options),this.isLoading=!1};Button.VERSION="3.3.5",Button.DEFAULTS={loadingText:"loading..."},Button.prototype.setState=function(state){var d="disabled",$el=this.$element,val=$el.is("input")?"val":"html",data=$el.data();state+="Text",null==data.resetText&&$el.data("resetText",$el[val]()),setTimeout($.proxy(function(){$el[val](null==data[state]?this.options[state]:data[state]),"loadingText"==state?(this.isLoading=!0,$el.addClass(d).attr(d,d)):this.isLoading&&(this.isLoading=!1,$el.removeClass(d).removeAttr(d))},this),0)},Button.prototype.toggle=function(){var changed=!0,$parent=this.$element.closest('[data-toggle="buttons"]');if($parent.length){var $input=this.$element.find("input");"radio"==$input.prop("type")?($input.prop("checked")&&(changed=!1),$parent.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==$input.prop("type")&&($input.prop("checked")!==this.$element.hasClass("active")&&(changed=!1),this.$element.toggleClass("active")),$input.prop("checked",this.$element.hasClass("active")),changed&&$input.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var old=$.fn.button;$.fn.button=Plugin,$.fn.button.Constructor=Button,$.fn.button.noConflict=function(){return $.fn.button=old,this},$(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var $btn=$(e.target);$btn.hasClass("btn")||($btn=$btn.closest(".btn")),Plugin.call($btn,"toggle"),$(e.target).is('input[type="radio"]')||$(e.target).is('input[type="checkbox"]')||e.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){$(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.carousel"),options=$.extend({},Carousel.DEFAULTS,$this.data(),"object"==typeof option&&option),action="string"==typeof option?option:options.slide;data||$this.data("bs.carousel",data=new Carousel(this,options)),"number"==typeof option?data.to(option):action?data[action]():options.interval&&data.pause().cycle()})}var Carousel=function(element,options){this.$element=$(element),this.$indicators=this.$element.find(".carousel-indicators"),this.options=options,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",$.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",$.proxy(this.pause,this)).on("mouseleave.bs.carousel",$.proxy(this.cycle,this))};Carousel.VERSION="3.3.5",Carousel.TRANSITION_DURATION=600,Carousel.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},Carousel.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},Carousel.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval($.proxy(this.next,this),this.options.interval)),this},Carousel.prototype.getItemIndex=function(item){return this.$items=item.parent().children(".item"),this.$items.index(item||this.$active)},Carousel.prototype.getItemForDirection=function(direction,active){var activeIndex=this.getItemIndex(active),willWrap="prev"==direction&&0===activeIndex||"next"==direction&&activeIndex==this.$items.length-1;if(willWrap&&!this.options.wrap)return active;var delta="prev"==direction?-1:1,itemIndex=(activeIndex+delta)%this.$items.length;return this.$items.eq(itemIndex)},Carousel.prototype.to=function(pos){var that=this,activeIndex=this.getItemIndex(this.$active=this.$element.find(".item.active"));return pos>this.$items.length-1||0>pos?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){that.to(pos)}):activeIndex==pos?this.pause().cycle():this.slide(pos>activeIndex?"next":"prev",this.$items.eq(pos))},Carousel.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&$.support.transition&&(this.$element.trigger($.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},Carousel.prototype.next=function(){return this.sliding?void 0:this.slide("next")},Carousel.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},Carousel.prototype.slide=function(type,next){var $active=this.$element.find(".item.active"),$next=next||this.getItemForDirection(type,$active),isCycling=this.interval,direction="next"==type?"left":"right",that=this;if($next.hasClass("active"))return this.sliding=!1;var relatedTarget=$next[0],slideEvent=$.Event("slide.bs.carousel",{relatedTarget:relatedTarget,direction:direction});if(this.$element.trigger(slideEvent),!slideEvent.isDefaultPrevented()){if(this.sliding=!0,isCycling&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var $nextIndicator=$(this.$indicators.children()[this.getItemIndex($next)]);$nextIndicator&&$nextIndicator.addClass("active")}var slidEvent=$.Event("slid.bs.carousel",{relatedTarget:relatedTarget,direction:direction});return $.support.transition&&this.$element.hasClass("slide")?($next.addClass(type),$next[0].offsetWidth,$active.addClass(direction),$next.addClass(direction),$active.one("bsTransitionEnd",function(){$next.removeClass([type,direction].join(" ")).addClass("active"),$active.removeClass(["active",direction].join(" ")),that.sliding=!1,setTimeout(function(){that.$element.trigger(slidEvent)},0)}).emulateTransitionEnd(Carousel.TRANSITION_DURATION)):($active.removeClass("active"),$next.addClass("active"),this.sliding=!1,this.$element.trigger(slidEvent)),isCycling&&this.cycle(),this}};var old=$.fn.carousel;$.fn.carousel=Plugin,$.fn.carousel.Constructor=Carousel,$.fn.carousel.noConflict=function(){return $.fn.carousel=old,this};var clickHandler=function(e){var href,$this=$(this),$target=$($this.attr("data-target")||(href=$this.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,""));if($target.hasClass("carousel")){var options=$.extend({},$target.data(),$this.data()),slideIndex=$this.attr("data-slide-to");slideIndex&&(options.interval=!1),Plugin.call($target,options),slideIndex&&$target.data("bs.carousel").to(slideIndex),e.preventDefault()}};$(document).on("click.bs.carousel.data-api","[data-slide]",clickHandler).on("click.bs.carousel.data-api","[data-slide-to]",clickHandler),$(window).on("load",function(){$('[data-ride="carousel"]').each(function(){var $carousel=$(this);Plugin.call($carousel,$carousel.data())})})}(jQuery),+function($){function getTargetFromTrigger($trigger){var href,target=$trigger.attr("data-target")||(href=$trigger.attr("href"))&&href.replace(/.*(?=#[^\s]+$)/,"");return $(target)}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.collapse"),options=$.extend({},Collapse.DEFAULTS,$this.data(),"object"==typeof option&&option);!data&&options.toggle&&/show|hide/.test(option)&&(options.toggle=!1),data||$this.data("bs.collapse",data=new Collapse(this,options)),"string"==typeof option&&data[option]()})}var Collapse=function(element,options){this.$element=$(element),this.options=$.extend({},Collapse.DEFAULTS,options),this.$trigger=$('[data-toggle="collapse"][href="#'+element.id+'"],[data-toggle="collapse"][data-target="#'+element.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};Collapse.VERSION="3.3.5",
Collapse.TRANSITION_DURATION=350,Collapse.DEFAULTS={toggle:!0},Collapse.prototype.dimension=function(){var hasWidth=this.$element.hasClass("width");return hasWidth?"width":"height"},Collapse.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var activesData,actives=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(actives&&actives.length&&(activesData=actives.data("bs.collapse"),activesData&&activesData.transitioning))){var startEvent=$.Event("show.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){actives&&actives.length&&(Plugin.call(actives,"hide"),activesData||actives.data("bs.collapse",null));var dimension=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[dimension](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var complete=function(){this.$element.removeClass("collapsing").addClass("collapse in")[dimension](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!$.support.transition)return complete.call(this);var scrollSize=$.camelCase(["scroll",dimension].join("-"));this.$element.one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])}}}},Collapse.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var startEvent=$.Event("hide.bs.collapse");if(this.$element.trigger(startEvent),!startEvent.isDefaultPrevented()){var dimension=this.dimension();this.$element[dimension](this.$element[dimension]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var complete=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return $.support.transition?void this.$element[dimension](0).one("bsTransitionEnd",$.proxy(complete,this)).emulateTransitionEnd(Collapse.TRANSITION_DURATION):complete.call(this)}}},Collapse.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},Collapse.prototype.getParent=function(){return $(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each($.proxy(function(i,element){var $element=$(element);this.addAriaAndCollapsedClass(getTargetFromTrigger($element),$element)},this)).end()},Collapse.prototype.addAriaAndCollapsedClass=function($element,$trigger){var isOpen=$element.hasClass("in");$element.attr("aria-expanded",isOpen),$trigger.toggleClass("collapsed",!isOpen).attr("aria-expanded",isOpen)};var old=$.fn.collapse;$.fn.collapse=Plugin,$.fn.collapse.Constructor=Collapse,$.fn.collapse.noConflict=function(){return $.fn.collapse=old,this},$(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var $this=$(this);$this.attr("data-target")||e.preventDefault();var $target=getTargetFromTrigger($this),data=$target.data("bs.collapse"),option=data?"toggle":$this.data();Plugin.call($target,option)})}(jQuery),+function($){function getParent($this){var selector=$this.attr("data-target");selector||(selector=$this.attr("href"),selector=selector&&/#[A-Za-z]/.test(selector)&&selector.replace(/.*(?=#[^\s]*$)/,""));var $parent=selector&&$(selector);return $parent&&$parent.length?$parent:$this.parent()}function clearMenus(e){e&&3===e.which||($(backdrop).remove(),$(toggle).each(function(){var $this=$(this),$parent=getParent($this),relatedTarget={relatedTarget:this};$parent.hasClass("open")&&(e&&"click"==e.type&&/input|textarea/i.test(e.target.tagName)&&$.contains($parent[0],e.target)||($parent.trigger(e=$.Event("hide.bs.dropdown",relatedTarget)),e.isDefaultPrevented()||($this.attr("aria-expanded","false"),$parent.removeClass("open").trigger("hidden.bs.dropdown",relatedTarget))))}))}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.dropdown");data||$this.data("bs.dropdown",data=new Dropdown(this)),"string"==typeof option&&data[option].call($this)})}var backdrop=".dropdown-backdrop",toggle='[data-toggle="dropdown"]',Dropdown=function(element){$(element).on("click.bs.dropdown",this.toggle)};Dropdown.VERSION="3.3.5",Dropdown.prototype.toggle=function(e){var $this=$(this);if(!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(clearMenus(),!isActive){"ontouchstart"in document.documentElement&&!$parent.closest(".navbar-nav").length&&$(document.createElement("div")).addClass("dropdown-backdrop").insertAfter($(this)).on("click",clearMenus);var relatedTarget={relatedTarget:this};if($parent.trigger(e=$.Event("show.bs.dropdown",relatedTarget)),e.isDefaultPrevented())return;$this.trigger("focus").attr("aria-expanded","true"),$parent.toggleClass("open").trigger("shown.bs.dropdown",relatedTarget)}return!1}},Dropdown.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var $this=$(this);if(e.preventDefault(),e.stopPropagation(),!$this.is(".disabled, :disabled")){var $parent=getParent($this),isActive=$parent.hasClass("open");if(!isActive&&27!=e.which||isActive&&27==e.which)return 27==e.which&&$parent.find(toggle).trigger("focus"),$this.trigger("click");var desc=" li:not(.disabled):visible a",$items=$parent.find(".dropdown-menu"+desc);if($items.length){var index=$items.index(e.target);38==e.which&&index>0&&index--,40==e.which&&index<$items.length-1&&index++,~index||(index=0),$items.eq(index).trigger("focus")}}}};var old=$.fn.dropdown;$.fn.dropdown=Plugin,$.fn.dropdown.Constructor=Dropdown,$.fn.dropdown.noConflict=function(){return $.fn.dropdown=old,this},$(document).on("click.bs.dropdown.data-api",clearMenus).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",toggle,Dropdown.prototype.toggle).on("keydown.bs.dropdown.data-api",toggle,Dropdown.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",Dropdown.prototype.keydown)}(jQuery),+function($){function Plugin(option,_relatedTarget){return this.each(function(){var $this=$(this),data=$this.data("bs.modal"),options=$.extend({},Modal.DEFAULTS,$this.data(),"object"==typeof option&&option);data||$this.data("bs.modal",data=new Modal(this,options)),"string"==typeof option?data[option](_relatedTarget):options.show&&data.show(_relatedTarget)})}var Modal=function(element,options){this.options=options,this.$body=$(document.body),this.$element=$(element),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,$.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};Modal.VERSION="3.3.5",Modal.TRANSITION_DURATION=300,Modal.BACKDROP_TRANSITION_DURATION=150,Modal.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},Modal.prototype.toggle=function(_relatedTarget){return this.isShown?this.hide():this.show(_relatedTarget)},Modal.prototype.show=function(_relatedTarget){var that=this,e=$.Event("show.bs.modal",{relatedTarget:_relatedTarget});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',$.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){that.$element.one("mouseup.dismiss.bs.modal",function(e){$(e.target).is(that.$element)&&(that.ignoreBackdropClick=!0)})}),this.backdrop(function(){var transition=$.support.transition&&that.$element.hasClass("fade");that.$element.parent().length||that.$element.appendTo(that.$body),that.$element.show().scrollTop(0),that.adjustDialog(),transition&&that.$element[0].offsetWidth,that.$element.addClass("in"),that.enforceFocus();var e=$.Event("shown.bs.modal",{relatedTarget:_relatedTarget});transition?that.$dialog.one("bsTransitionEnd",function(){that.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(Modal.TRANSITION_DURATION):that.$element.trigger("focus").trigger(e)}))},Modal.prototype.hide=function(e){e&&e.preventDefault(),e=$.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),$(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),$.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",$.proxy(this.hideModal,this)).emulateTransitionEnd(Modal.TRANSITION_DURATION):this.hideModal())},Modal.prototype.enforceFocus=function(){$(document).off("focusin.bs.modal").on("focusin.bs.modal",$.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},Modal.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",$.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},Modal.prototype.resize=function(){this.isShown?$(window).on("resize.bs.modal",$.proxy(this.handleUpdate,this)):$(window).off("resize.bs.modal")},Modal.prototype.hideModal=function(){var that=this;this.$element.hide(),this.backdrop(function(){that.$body.removeClass("modal-open"),that.resetAdjustments(),that.resetScrollbar(),that.$element.trigger("hidden.bs.modal")})},Modal.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},Modal.prototype.backdrop=function(callback){var that=this,animate=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var doAnimate=$.support.transition&&animate;if(this.$backdrop=$(document.createElement("div")).addClass("modal-backdrop "+animate).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",$.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),doAnimate&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!callback)return;doAnimate?this.$backdrop.one("bsTransitionEnd",callback).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callback()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var callbackRemove=function(){that.removeBackdrop(),callback&&callback()};$.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",callbackRemove).emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION):callbackRemove()}else callback&&callback()},Modal.prototype.handleUpdate=function(){this.adjustDialog()},Modal.prototype.adjustDialog=function(){var modalIsOverflowing=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&modalIsOverflowing?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!modalIsOverflowing?this.scrollbarWidth:""})},Modal.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},Modal.prototype.checkScrollbar=function(){var fullWindowWidth=window.innerWidth;if(!fullWindowWidth){var documentElementRect=document.documentElement.getBoundingClientRect();fullWindowWidth=documentElementRect.right-Math.abs(documentElementRect.left)}this.bodyIsOverflowing=document.body.clientWidth<fullWindowWidth,this.scrollbarWidth=this.measureScrollbar()},Modal.prototype.setScrollbar=function(){var bodyPad=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",bodyPad+this.scrollbarWidth)},Modal.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},Modal.prototype.measureScrollbar=function(){var scrollDiv=document.createElement("div");scrollDiv.className="modal-scrollbar-measure",this.$body.append(scrollDiv);var scrollbarWidth=scrollDiv.offsetWidth-scrollDiv.clientWidth;return this.$body[0].removeChild(scrollDiv),scrollbarWidth};var old=$.fn.modal;$.fn.modal=Plugin,$.fn.modal.Constructor=Modal,$.fn.modal.noConflict=function(){return $.fn.modal=old,this},$(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var $this=$(this),href=$this.attr("href"),$target=$($this.attr("data-target")||href&&href.replace(/.*(?=#[^\s]+$)/,"")),option=$target.data("bs.modal")?"toggle":$.extend({remote:!/#/.test(href)&&href},$target.data(),$this.data());$this.is("a")&&e.preventDefault(),$target.one("show.bs.modal",function(showEvent){showEvent.isDefaultPrevented()||$target.one("hidden.bs.modal",function(){$this.is(":visible")&&$this.trigger("focus")})}),Plugin.call($target,option,this)})}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tooltip"),options="object"==typeof option&&option;(data||!/destroy|hide/.test(option))&&(data||$this.data("bs.tooltip",data=new Tooltip(this,options)),"string"==typeof option&&data[option]())})}var Tooltip=function(element,options){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",element,options)};Tooltip.VERSION="3.3.5",Tooltip.TRANSITION_DURATION=150,Tooltip.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},Tooltip.prototype.init=function(type,element,options){if(this.enabled=!0,this.type=type,this.$element=$(element),this.options=this.getOptions(options),this.$viewport=this.options.viewport&&$($.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var triggers=this.options.trigger.split(" "),i=triggers.length;i--;){var trigger=triggers[i];if("click"==trigger)this.$element.on("click."+this.type,this.options.selector,$.proxy(this.toggle,this));else if("manual"!=trigger){var eventIn="hover"==trigger?"mouseenter":"focusin",eventOut="hover"==trigger?"mouseleave":"focusout";this.$element.on(eventIn+"."+this.type,this.options.selector,$.proxy(this.enter,this)),this.$element.on(eventOut+"."+this.type,this.options.selector,$.proxy(this.leave,this))}}this.options.selector?this._options=$.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},Tooltip.prototype.getDefaults=function(){return Tooltip.DEFAULTS},Tooltip.prototype.getOptions=function(options){return options=$.extend({},this.getDefaults(),this.$element.data(),options),options.delay&&"number"==typeof options.delay&&(options.delay={show:options.delay,hide:options.delay}),options},Tooltip.prototype.getDelegateOptions=function(){var options={},defaults=this.getDefaults();return this._options&&$.each(this._options,function(key,value){defaults[key]!=value&&(options[key]=value)}),options},Tooltip.prototype.enter=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),obj instanceof $.Event&&(self.inState["focusin"==obj.type?"focus":"hover"]=!0),self.tip().hasClass("in")||"in"==self.hoverState?void(self.hoverState="in"):(clearTimeout(self.timeout),self.hoverState="in",self.options.delay&&self.options.delay.show?void(self.timeout=setTimeout(function(){"in"==self.hoverState&&self.show()},self.options.delay.show)):self.show())},Tooltip.prototype.isInStateTrue=function(){for(var key in this.inState)if(this.inState[key])return!0;return!1},Tooltip.prototype.leave=function(obj){var self=obj instanceof this.constructor?obj:$(obj.currentTarget).data("bs."+this.type);return self||(self=new this.constructor(obj.currentTarget,this.getDelegateOptions()),$(obj.currentTarget).data("bs."+this.type,self)),obj instanceof $.Event&&(self.inState["focusout"==obj.type?"focus":"hover"]=!1),self.isInStateTrue()?void 0:(clearTimeout(self.timeout),self.hoverState="out",self.options.delay&&self.options.delay.hide?void(self.timeout=setTimeout(function(){"out"==self.hoverState&&self.hide()},self.options.delay.hide)):self.hide())},Tooltip.prototype.show=function(){var e=$.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var inDom=$.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!inDom)return;var that=this,$tip=this.tip(),tipId=this.getUID(this.type);this.setContent(),$tip.attr("id",tipId),this.$element.attr("aria-describedby",tipId),this.options.animation&&$tip.addClass("fade");var placement="function"==typeof this.options.placement?this.options.placement.call(this,$tip[0],this.$element[0]):this.options.placement,autoToken=/\s?auto?\s?/i,autoPlace=autoToken.test(placement);autoPlace&&(placement=placement.replace(autoToken,"")||"top"),$tip.detach().css({top:0,left:0,display:"block"}).addClass(placement).data("bs."+this.type,this),this.options.container?$tip.appendTo(this.options.container):$tip.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var pos=this.getPosition(),actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;if(autoPlace){var orgPlacement=placement,viewportDim=this.getPosition(this.$viewport);placement="bottom"==placement&&pos.bottom+actualHeight>viewportDim.bottom?"top":"top"==placement&&pos.top-actualHeight<viewportDim.top?"bottom":"right"==placement&&pos.right+actualWidth>viewportDim.width?"left":"left"==placement&&pos.left-actualWidth<viewportDim.left?"right":placement,$tip.removeClass(orgPlacement).addClass(placement)}var calculatedOffset=this.getCalculatedOffset(placement,pos,actualWidth,actualHeight);this.applyPlacement(calculatedOffset,placement);var complete=function(){var prevHoverState=that.hoverState;that.$element.trigger("shown.bs."+that.type),that.hoverState=null,"out"==prevHoverState&&that.leave(that)};$.support.transition&&this.$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete()}},Tooltip.prototype.applyPlacement=function(offset,placement){var $tip=this.tip(),width=$tip[0].offsetWidth,height=$tip[0].offsetHeight,marginTop=parseInt($tip.css("margin-top"),10),marginLeft=parseInt($tip.css("margin-left"),10);isNaN(marginTop)&&(marginTop=0),isNaN(marginLeft)&&(marginLeft=0),offset.top+=marginTop,offset.left+=marginLeft,$.offset.setOffset($tip[0],$.extend({using:function(props){$tip.css({top:Math.round(props.top),left:Math.round(props.left)})}},offset),0),$tip.addClass("in");var actualWidth=$tip[0].offsetWidth,actualHeight=$tip[0].offsetHeight;"top"==placement&&actualHeight!=height&&(offset.top=offset.top+height-actualHeight);var delta=this.getViewportAdjustedDelta(placement,offset,actualWidth,actualHeight);delta.left?offset.left+=delta.left:offset.top+=delta.top;var isVertical=/top|bottom/.test(placement),arrowDelta=isVertical?2*delta.left-width+actualWidth:2*delta.top-height+actualHeight,arrowOffsetPosition=isVertical?"offsetWidth":"offsetHeight";$tip.offset(offset),this.replaceArrow(arrowDelta,$tip[0][arrowOffsetPosition],isVertical)},Tooltip.prototype.replaceArrow=function(delta,dimension,isVertical){this.arrow().css(isVertical?"left":"top",50*(1-delta/dimension)+"%").css(isVertical?"top":"left","")},Tooltip.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle();$tip.find(".tooltip-inner")[this.options.html?"html":"text"](title),$tip.removeClass("fade in top bottom left right")},Tooltip.prototype.hide=function(callback){function complete(){"in"!=that.hoverState&&$tip.detach(),that.$element.removeAttr("aria-describedby").trigger("hidden.bs."+that.type),callback&&callback()}var that=this,$tip=$(this.$tip),e=$.Event("hide.bs."+this.type);return this.$element.trigger(e),e.isDefaultPrevented()?void 0:($tip.removeClass("in"),$.support.transition&&$tip.hasClass("fade")?$tip.one("bsTransitionEnd",complete).emulateTransitionEnd(Tooltip.TRANSITION_DURATION):complete(),this.hoverState=null,this)},Tooltip.prototype.fixTitle=function(){var $e=this.$element;($e.attr("title")||"string"!=typeof $e.attr("data-original-title"))&&$e.attr("data-original-title",$e.attr("title")||"").attr("title","")},Tooltip.prototype.hasContent=function(){return this.getTitle()},Tooltip.prototype.getPosition=function($element){$element=$element||this.$element;var el=$element[0],isBody="BODY"==el.tagName,elRect=el.getBoundingClientRect();null==elRect.width&&(elRect=$.extend({},elRect,{width:elRect.right-elRect.left,height:elRect.bottom-elRect.top}));var elOffset=isBody?{top:0,left:0}:$element.offset(),scroll={scroll:isBody?document.documentElement.scrollTop||document.body.scrollTop:$element.scrollTop()},outerDims=isBody?{width:$(window).width(),height:$(window).height()}:null;return $.extend({},elRect,scroll,outerDims,elOffset)},Tooltip.prototype.getCalculatedOffset=function(placement,pos,actualWidth,actualHeight){return"bottom"==placement?{top:pos.top+pos.height,left:pos.left+pos.width/2-actualWidth/2}:"top"==placement?{top:pos.top-actualHeight,left:pos.left+pos.width/2-actualWidth/2}:"left"==placement?{top:pos.top+pos.height/2-actualHeight/2,left:pos.left-actualWidth}:{top:pos.top+pos.height/2-actualHeight/2,left:pos.left+pos.width}},Tooltip.prototype.getViewportAdjustedDelta=function(placement,pos,actualWidth,actualHeight){var delta={top:0,left:0};if(!this.$viewport)return delta;var viewportPadding=this.options.viewport&&this.options.viewport.padding||0,viewportDimensions=this.getPosition(this.$viewport);if(/right|left/.test(placement)){var topEdgeOffset=pos.top-viewportPadding-viewportDimensions.scroll,bottomEdgeOffset=pos.top+viewportPadding-viewportDimensions.scroll+actualHeight;topEdgeOffset<viewportDimensions.top?delta.top=viewportDimensions.top-topEdgeOffset:bottomEdgeOffset>viewportDimensions.top+viewportDimensions.height&&(delta.top=viewportDimensions.top+viewportDimensions.height-bottomEdgeOffset)}else{var leftEdgeOffset=pos.left-viewportPadding,rightEdgeOffset=pos.left+viewportPadding+actualWidth;leftEdgeOffset<viewportDimensions.left?delta.left=viewportDimensions.left-leftEdgeOffset:rightEdgeOffset>viewportDimensions.right&&(delta.left=viewportDimensions.left+viewportDimensions.width-rightEdgeOffset)}return delta},Tooltip.prototype.getTitle=function(){var title,$e=this.$element,o=this.options;return title=$e.attr("data-original-title")||("function"==typeof o.title?o.title.call($e[0]):o.title)},Tooltip.prototype.getUID=function(prefix){do prefix+=~~(1e6*Math.random());while(document.getElementById(prefix));return prefix},Tooltip.prototype.tip=function(){if(!this.$tip&&(this.$tip=$(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},Tooltip.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},Tooltip.prototype.enable=function(){this.enabled=!0},Tooltip.prototype.disable=function(){this.enabled=!1},Tooltip.prototype.toggleEnabled=function(){this.enabled=!this.enabled},Tooltip.prototype.toggle=function(e){var self=this;e&&(self=$(e.currentTarget).data("bs."+this.type),self||(self=new this.constructor(e.currentTarget,this.getDelegateOptions()),$(e.currentTarget).data("bs."+this.type,self))),e?(self.inState.click=!self.inState.click,self.isInStateTrue()?self.enter(self):self.leave(self)):self.tip().hasClass("in")?self.leave(self):self.enter(self)},Tooltip.prototype.destroy=function(){var that=this;clearTimeout(this.timeout),this.hide(function(){that.$element.off("."+that.type).removeData("bs."+that.type),that.$tip&&that.$tip.detach(),that.$tip=null,that.$arrow=null,that.$viewport=null})};var old=$.fn.tooltip;$.fn.tooltip=Plugin,$.fn.tooltip.Constructor=Tooltip,$.fn.tooltip.noConflict=function(){return $.fn.tooltip=old,this}}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.popover"),options="object"==typeof option&&option;(data||!/destroy|hide/.test(option))&&(data||$this.data("bs.popover",data=new Popover(this,options)),"string"==typeof option&&data[option]())})}var Popover=function(element,options){this.init("popover",element,options)};if(!$.fn.tooltip)throw new Error("Popover requires tooltip.js");Popover.VERSION="3.3.5",Popover.DEFAULTS=$.extend({},$.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),Popover.prototype=$.extend({},$.fn.tooltip.Constructor.prototype),Popover.prototype.constructor=Popover,Popover.prototype.getDefaults=function(){return Popover.DEFAULTS},Popover.prototype.setContent=function(){var $tip=this.tip(),title=this.getTitle(),content=this.getContent();$tip.find(".popover-title")[this.options.html?"html":"text"](title),$tip.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof content?"html":"append":"text"](content),$tip.removeClass("fade top bottom left right in"),$tip.find(".popover-title").html()||$tip.find(".popover-title").hide()},Popover.prototype.hasContent=function(){return this.getTitle()||this.getContent()},Popover.prototype.getContent=function(){var $e=this.$element,o=this.options;return $e.attr("data-content")||("function"==typeof o.content?o.content.call($e[0]):o.content)},Popover.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var old=$.fn.popover;$.fn.popover=Plugin,$.fn.popover.Constructor=Popover,$.fn.popover.noConflict=function(){return $.fn.popover=old,this}}(jQuery),+function($){function ScrollSpy(element,options){this.$body=$(document.body),this.$scrollElement=$($(element).is(document.body)?window:element),this.options=$.extend({},ScrollSpy.DEFAULTS,options),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",$.proxy(this.process,this)),this.refresh(),this.process()}function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.scrollspy"),options="object"==typeof option&&option;data||$this.data("bs.scrollspy",data=new ScrollSpy(this,options)),"string"==typeof option&&data[option]()})}ScrollSpy.VERSION="3.3.5",ScrollSpy.DEFAULTS={offset:10},ScrollSpy.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},ScrollSpy.prototype.refresh=function(){var that=this,offsetMethod="offset",offsetBase=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),$.isWindow(this.$scrollElement[0])||(offsetMethod="position",offsetBase=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var $el=$(this),href=$el.data("target")||$el.attr("href"),$href=/^#./.test(href)&&$(href);return $href&&$href.length&&$href.is(":visible")&&[[$href[offsetMethod]().top+offsetBase,href]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){that.offsets.push(this[0]),that.targets.push(this[1])})},ScrollSpy.prototype.process=function(){var i,scrollTop=this.$scrollElement.scrollTop()+this.options.offset,scrollHeight=this.getScrollHeight(),maxScroll=this.options.offset+scrollHeight-this.$scrollElement.height(),offsets=this.offsets,targets=this.targets,activeTarget=this.activeTarget;if(this.scrollHeight!=scrollHeight&&this.refresh(),scrollTop>=maxScroll)return activeTarget!=(i=targets[targets.length-1])&&this.activate(i);if(activeTarget&&scrollTop<offsets[0])return this.activeTarget=null,this.clear();for(i=offsets.length;i--;)activeTarget!=targets[i]&&scrollTop>=offsets[i]&&(void 0===offsets[i+1]||scrollTop<offsets[i+1])&&this.activate(targets[i])},ScrollSpy.prototype.activate=function(target){this.activeTarget=target,this.clear();var selector=this.selector+'[data-target="'+target+'"],'+this.selector+'[href="'+target+'"]',active=$(selector).parents("li").addClass("active");active.parent(".dropdown-menu").length&&(active=active.closest("li.dropdown").addClass("active")),active.trigger("activate.bs.scrollspy")},ScrollSpy.prototype.clear=function(){$(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var old=$.fn.scrollspy;$.fn.scrollspy=Plugin,$.fn.scrollspy.Constructor=ScrollSpy,$.fn.scrollspy.noConflict=function(){return $.fn.scrollspy=old,this},$(window).on("load.bs.scrollspy.data-api",function(){$('[data-spy="scroll"]').each(function(){var $spy=$(this);Plugin.call($spy,$spy.data())})})}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.tab");data||$this.data("bs.tab",data=new Tab(this)),"string"==typeof option&&data[option]()})}var Tab=function(element){this.element=$(element)};Tab.VERSION="3.3.5",Tab.TRANSITION_DURATION=150,Tab.prototype.show=function(){var $this=this.element,$ul=$this.closest("ul:not(.dropdown-menu)"),selector=$this.data("target");if(selector||(selector=$this.attr("href"),selector=selector&&selector.replace(/.*(?=#[^\s]*$)/,"")),!$this.parent("li").hasClass("active")){var $previous=$ul.find(".active:last a"),hideEvent=$.Event("hide.bs.tab",{relatedTarget:$this[0]}),showEvent=$.Event("show.bs.tab",{relatedTarget:$previous[0]});if($previous.trigger(hideEvent),$this.trigger(showEvent),!showEvent.isDefaultPrevented()&&!hideEvent.isDefaultPrevented()){var $target=$(selector);this.activate($this.closest("li"),$ul),this.activate($target,$target.parent(),function(){$previous.trigger({type:"hidden.bs.tab",relatedTarget:$this[0]}),$this.trigger({type:"shown.bs.tab",relatedTarget:$previous[0]})})}}},Tab.prototype.activate=function(element,container,callback){function next(){$active.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),element.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),transition?(element[0].offsetWidth,element.addClass("in")):element.removeClass("fade"),element.parent(".dropdown-menu").length&&element.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),callback&&callback()}var $active=container.find("> .active"),transition=callback&&$.support.transition&&($active.length&&$active.hasClass("fade")||!!container.find("> .fade").length);$active.length&&transition?$active.one("bsTransitionEnd",next).emulateTransitionEnd(Tab.TRANSITION_DURATION):next(),$active.removeClass("in")};var old=$.fn.tab;$.fn.tab=Plugin,$.fn.tab.Constructor=Tab,$.fn.tab.noConflict=function(){return $.fn.tab=old,this};var clickHandler=function(e){e.preventDefault(),Plugin.call($(this),"show")};$(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',clickHandler).on("click.bs.tab.data-api",'[data-toggle="pill"]',clickHandler)}(jQuery),+function($){function Plugin(option){return this.each(function(){var $this=$(this),data=$this.data("bs.affix"),options="object"==typeof option&&option;data||$this.data("bs.affix",data=new Affix(this,options)),"string"==typeof option&&data[option]()})}var Affix=function(element,options){this.options=$.extend({},Affix.DEFAULTS,options),this.$target=$(this.options.target).on("scroll.bs.affix.data-api",$.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",$.proxy(this.checkPositionWithEventLoop,this)),
this.$element=$(element),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};Affix.VERSION="3.3.5",Affix.RESET="affix affix-top affix-bottom",Affix.DEFAULTS={offset:0,target:window},Affix.prototype.getState=function(scrollHeight,height,offsetTop,offsetBottom){var scrollTop=this.$target.scrollTop(),position=this.$element.offset(),targetHeight=this.$target.height();if(null!=offsetTop&&"top"==this.affixed)return offsetTop>scrollTop?"top":!1;if("bottom"==this.affixed)return null!=offsetTop?scrollTop+this.unpin<=position.top?!1:"bottom":scrollHeight-offsetBottom>=scrollTop+targetHeight?!1:"bottom";var initializing=null==this.affixed,colliderTop=initializing?scrollTop:position.top,colliderHeight=initializing?targetHeight:height;return null!=offsetTop&&offsetTop>=scrollTop?"top":null!=offsetBottom&&colliderTop+colliderHeight>=scrollHeight-offsetBottom?"bottom":!1},Affix.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(Affix.RESET).addClass("affix");var scrollTop=this.$target.scrollTop(),position=this.$element.offset();return this.pinnedOffset=position.top-scrollTop},Affix.prototype.checkPositionWithEventLoop=function(){setTimeout($.proxy(this.checkPosition,this),1)},Affix.prototype.checkPosition=function(){if(this.$element.is(":visible")){var height=this.$element.height(),offset=this.options.offset,offsetTop=offset.top,offsetBottom=offset.bottom,scrollHeight=Math.max($(document).height(),$(document.body).height());"object"!=typeof offset&&(offsetBottom=offsetTop=offset),"function"==typeof offsetTop&&(offsetTop=offset.top(this.$element)),"function"==typeof offsetBottom&&(offsetBottom=offset.bottom(this.$element));var affix=this.getState(scrollHeight,height,offsetTop,offsetBottom);if(this.affixed!=affix){null!=this.unpin&&this.$element.css("top","");var affixType="affix"+(affix?"-"+affix:""),e=$.Event(affixType+".bs.affix");if(this.$element.trigger(e),e.isDefaultPrevented())return;this.affixed=affix,this.unpin="bottom"==affix?this.getPinnedOffset():null,this.$element.removeClass(Affix.RESET).addClass(affixType).trigger(affixType.replace("affix","affixed")+".bs.affix")}"bottom"==affix&&this.$element.offset({top:scrollHeight-height-offsetBottom})}};var old=$.fn.affix;$.fn.affix=Plugin,$.fn.affix.Constructor=Affix,$.fn.affix.noConflict=function(){return $.fn.affix=old,this},$(window).on("load",function(){$('[data-spy="affix"]').each(function(){var $spy=$(this),data=$spy.data();data.offset=data.offset||{},null!=data.offsetBottom&&(data.offset.bottom=data.offsetBottom),null!=data.offsetTop&&(data.offset.top=data.offsetTop),Plugin.call($spy,data)})})}(jQuery),function(root,factory){"function"==typeof define&&define.amd?define("sifter",factory):"object"==typeof exports?module.exports=factory():root.Sifter=factory()}(this,function(){var Sifter=function(items,settings){this.items=items,this.settings=settings||{diacritics:!0}};Sifter.prototype.tokenize=function(query){if(query=trim(String(query||"").toLowerCase()),!query||!query.length)return[];var i,n,regex,letter,tokens=[],words=query.split(/ +/);for(i=0,n=words.length;n>i;i++){if(regex=escape_regex(words[i]),this.settings.diacritics)for(letter in DIACRITICS)DIACRITICS.hasOwnProperty(letter)&&(regex=regex.replace(new RegExp(letter,"g"),DIACRITICS[letter]));tokens.push({string:words[i],regex:new RegExp(regex,"i")})}return tokens},Sifter.prototype.iterator=function(object,callback){var iterator;iterator=is_array(object)?Array.prototype.forEach||function(callback){for(var i=0,n=this.length;n>i;i++)callback(this[i],i,this)}:function(callback){for(var key in this)this.hasOwnProperty(key)&&callback(this[key],key,this)},iterator.apply(object,[callback])},Sifter.prototype.getScoreFunction=function(search,options){var self,fields,tokens,token_count;self=this,search=self.prepareSearch(search,options),tokens=search.tokens,fields=search.options.fields,token_count=tokens.length;var scoreValue=function(value,token){var score,pos;return value?(value=String(value||""),pos=value.search(token.regex),-1===pos?0:(score=token.string.length/value.length,0===pos&&(score+=.5),score)):0},scoreObject=function(){var field_count=fields.length;return field_count?1===field_count?function(token,data){return scoreValue(data[fields[0]],token)}:function(token,data){for(var i=0,sum=0;field_count>i;i++)sum+=scoreValue(data[fields[i]],token);return sum/field_count}:function(){return 0}}();return token_count?1===token_count?function(data){return scoreObject(tokens[0],data)}:"and"===search.options.conjunction?function(data){for(var score,i=0,sum=0;token_count>i;i++){if(score=scoreObject(tokens[i],data),0>=score)return 0;sum+=score}return sum/token_count}:function(data){for(var i=0,sum=0;token_count>i;i++)sum+=scoreObject(tokens[i],data);return sum/token_count}:function(){return 0}},Sifter.prototype.getSortFunction=function(search,options){var i,n,self,field,fields,fields_count,multiplier,multipliers,get_field,implicit_score,sort;if(self=this,search=self.prepareSearch(search,options),sort=!search.query&&options.sort_empty||options.sort,get_field=function(name,result){return"$score"===name?result.score:self.items[result.id][name]},fields=[],sort)for(i=0,n=sort.length;n>i;i++)(search.query||"$score"!==sort[i].field)&&fields.push(sort[i]);if(search.query){for(implicit_score=!0,i=0,n=fields.length;n>i;i++)if("$score"===fields[i].field){implicit_score=!1;break}implicit_score&&fields.unshift({field:"$score",direction:"desc"})}else for(i=0,n=fields.length;n>i;i++)if("$score"===fields[i].field){fields.splice(i,1);break}for(multipliers=[],i=0,n=fields.length;n>i;i++)multipliers.push("desc"===fields[i].direction?-1:1);return fields_count=fields.length,fields_count?1===fields_count?(field=fields[0].field,multiplier=multipliers[0],function(a,b){return multiplier*cmp(get_field(field,a),get_field(field,b))}):function(a,b){var i,result,field;for(i=0;fields_count>i;i++)if(field=fields[i].field,result=multipliers[i]*cmp(get_field(field,a),get_field(field,b)))return result;return 0}:null},Sifter.prototype.prepareSearch=function(query,options){if("object"==typeof query)return query;options=extend({},options);var option_fields=options.fields,option_sort=options.sort,option_sort_empty=options.sort_empty;return option_fields&&!is_array(option_fields)&&(options.fields=[option_fields]),option_sort&&!is_array(option_sort)&&(options.sort=[option_sort]),option_sort_empty&&!is_array(option_sort_empty)&&(options.sort_empty=[option_sort_empty]),{options:options,query:String(query||"").toLowerCase(),tokens:this.tokenize(query),total:0,items:[]}},Sifter.prototype.search=function(query,options){var score,search,fn_sort,fn_score,self=this;return search=this.prepareSearch(query,options),options=search.options,query=search.query,fn_score=options.score||self.getScoreFunction(search),query.length?self.iterator(self.items,function(item,id){score=fn_score(item),(options.filter===!1||score>0)&&search.items.push({score:score,id:id})}):self.iterator(self.items,function(item,id){search.items.push({score:1,id:id})}),fn_sort=self.getSortFunction(search,options),fn_sort&&search.items.sort(fn_sort),search.total=search.items.length,"number"==typeof options.limit&&(search.items=search.items.slice(0,options.limit)),search};var cmp=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:b>a?-1:0:(a=String(a||"").toLowerCase(),b=String(b||"").toLowerCase(),a>b?1:b>a?-1:0)},extend=function(a,b){var i,n,k,object;for(i=1,n=arguments.length;n>i;i++)if(object=arguments[i])for(k in object)object.hasOwnProperty(k)&&(a[k]=object[k]);return a},trim=function(str){return(str+"").replace(/^\s+|\s+$|/g,"")},escape_regex=function(str){return(str+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},is_array=Array.isArray||$&&$.isArray||function(object){return"[object Array]"===Object.prototype.toString.call(object)},DIACRITICS={a:"[a]",c:"[c]",d:"[d]",e:"[e]",i:"[i]",n:"[n]",o:"[o]",r:"[r]",s:"[s]",t:"[t]",u:"[u]",y:"[y]",z:"[z]"};return Sifter}),function(root,factory){"function"==typeof define&&define.amd?define("microplugin",factory):"object"==typeof exports?module.exports=factory():root.MicroPlugin=factory()}(this,function(){var MicroPlugin={};MicroPlugin.mixin=function(Interface){Interface.plugins={},Interface.prototype.initializePlugins=function(plugins){var i,n,key,self=this,queue=[];if(self.plugins={names:[],settings:{},requested:{},loaded:{}},utils.isArray(plugins))for(i=0,n=plugins.length;n>i;i++)"string"==typeof plugins[i]?queue.push(plugins[i]):(self.plugins.settings[plugins[i].name]=plugins[i].options,queue.push(plugins[i].name));else if(plugins)for(key in plugins)plugins.hasOwnProperty(key)&&(self.plugins.settings[key]=plugins[key],queue.push(key));for(;queue.length;)self.require(queue.shift())},Interface.prototype.loadPlugin=function(name){var self=this,plugins=self.plugins,plugin=Interface.plugins[name];if(!Interface.plugins.hasOwnProperty(name))throw new Error('Unable to find "'+name+'" plugin');plugins.requested[name]=!0,plugins.loaded[name]=plugin.fn.apply(self,[self.plugins.settings[name]||{}]),plugins.names.push(name)},Interface.prototype.require=function(name){var self=this,plugins=self.plugins;if(!self.plugins.loaded.hasOwnProperty(name)){if(plugins.requested[name])throw new Error('Plugin has circular dependency ("'+name+'")');self.loadPlugin(name)}return plugins.loaded[name]},Interface.define=function(name,fn){Interface.plugins[name]={name:name,fn:fn}}};var utils={isArray:Array.isArray||function(vArg){return"[object Array]"===Object.prototype.toString.call(vArg)}};return MicroPlugin}),function(root,factory){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],factory):"object"==typeof exports?module.exports=factory(require("jquery"),require("sifter"),require("microplugin")):root.Selectize=factory(root.jQuery,root.Sifter,root.MicroPlugin)}(this,function($,Sifter,MicroPlugin){var highlight=function($element,pattern){if("string"!=typeof pattern||pattern.length){var regex="string"==typeof pattern?new RegExp(pattern,"i"):pattern,highlight=function(node){var skip=0;if(3===node.nodeType){var pos=node.data.search(regex);if(pos>=0&&node.data.length>0){var match=node.data.match(regex),spannode=document.createElement("span");spannode.className="highlight";var middlebit=node.splitText(pos),middleclone=(middlebit.splitText(match[0].length),middlebit.cloneNode(!0));spannode.appendChild(middleclone),middlebit.parentNode.replaceChild(spannode,middlebit),skip=1}}else if(1===node.nodeType&&node.childNodes&&!/(script|style)/i.test(node.tagName))for(var i=0;i<node.childNodes.length;++i)i+=highlight(node.childNodes[i]);return skip};return $element.each(function(){highlight(this)})}},MicroEvent=function(){};MicroEvent.prototype={on:function(event,fct){this._events=this._events||{},this._events[event]=this._events[event]||[],this._events[event].push(fct)},off:function(event,fct){var n=arguments.length;return 0===n?delete this._events:1===n?delete this._events[event]:(this._events=this._events||{},void(event in this._events!=!1&&this._events[event].splice(this._events[event].indexOf(fct),1)))},trigger:function(event){if(this._events=this._events||{},event in this._events!=!1)for(var i=0;i<this._events[event].length;i++)this._events[event][i].apply(this,Array.prototype.slice.call(arguments,1))}},MicroEvent.mixin=function(destObject){for(var props=["on","off","trigger"],i=0;i<props.length;i++)destObject.prototype[props[i]]=MicroEvent.prototype[props[i]]};var IS_MAC=/Mac/.test(navigator.userAgent),KEY_A=65,KEY_RETURN=13,KEY_ESC=27,KEY_LEFT=37,KEY_UP=38,KEY_P=80,KEY_RIGHT=39,KEY_DOWN=40,KEY_N=78,KEY_BACKSPACE=8,KEY_DELETE=46,KEY_SHIFT=16,KEY_CMD=IS_MAC?91:17,KEY_CTRL=IS_MAC?18:17,KEY_TAB=9,TAG_SELECT=1,TAG_INPUT=2,isset=function(object){return"undefined"!=typeof object},hash_key=function(value){return"undefined"==typeof value||null===value?"":"boolean"==typeof value?value?"1":"0":value+""},escape_html=function(str){return(str+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},escape_replace=function(str){return(str+"").replace(/\$/g,"$$$$")},hook={};hook.before=function(self,method,fn){var original=self[method];self[method]=function(){return fn.apply(self,arguments),original.apply(self,arguments)}},hook.after=function(self,method,fn){var original=self[method];self[method]=function(){var result=original.apply(self,arguments);return fn.apply(self,arguments),result}};var build_hash_table=function(key,objects){if(!$.isArray(objects))return objects;var i,n,table={};for(i=0,n=objects.length;n>i;i++)objects[i].hasOwnProperty(key)&&(table[objects[i][key]]=objects[i]);return table},once=function(fn){var called=!1;return function(){called||(called=!0,fn.apply(this,arguments))}},debounce=function(fn,delay){var timeout;return function(){var self=this,args=arguments;window.clearTimeout(timeout),timeout=window.setTimeout(function(){fn.apply(self,args)},delay)}},debounce_events=function(self,types,fn){var type,trigger=self.trigger,event_args={};self.trigger=function(){var type=arguments[0];return-1===types.indexOf(type)?trigger.apply(self,arguments):void(event_args[type]=arguments)},fn.apply(self,[]),self.trigger=trigger;for(type in event_args)event_args.hasOwnProperty(type)&&trigger.apply(self,event_args[type])},watchChildEvent=function($parent,event,selector,fn){$parent.on(event,selector,function(e){for(var child=e.target;child&&child.parentNode!==$parent[0];)child=child.parentNode;return e.currentTarget=child,fn.apply(this,[e])})},getSelection=function(input){var result={};if("selectionStart"in input)result.start=input.selectionStart,result.length=input.selectionEnd-result.start;else if(document.selection){input.focus();var sel=document.selection.createRange(),selLen=document.selection.createRange().text.length;sel.moveStart("character",-input.value.length),result.start=sel.text.length-selLen,result.length=selLen}return result},transferStyles=function($from,$to,properties){var i,n,styles={};if(properties)for(i=0,n=properties.length;n>i;i++)styles[properties[i]]=$from.css(properties[i]);else styles=$from.css();$to.css(styles)},measureString=function(str,$parent){if(!str)return 0;var $test=$("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(str).appendTo("body");transferStyles($parent,$test,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var width=$test.width();return $test.remove(),width},autoGrow=function($input){var currentWidth=null,update=function(e,options){var value,keyCode,printable,placeholder,width,shift,character,selection;e=e||window.event||{},options=options||{},e.metaKey||e.altKey||(options.force||$input.data("grow")!==!1)&&(value=$input.val(),e.type&&"keydown"===e.type.toLowerCase()&&(keyCode=e.keyCode,printable=keyCode>=97&&122>=keyCode||keyCode>=65&&90>=keyCode||keyCode>=48&&57>=keyCode||32===keyCode,keyCode===KEY_DELETE||keyCode===KEY_BACKSPACE?(selection=getSelection($input[0]),selection.length?value=value.substring(0,selection.start)+value.substring(selection.start+selection.length):keyCode===KEY_BACKSPACE&&selection.start?value=value.substring(0,selection.start-1)+value.substring(selection.start+1):keyCode===KEY_DELETE&&"undefined"!=typeof selection.start&&(value=value.substring(0,selection.start)+value.substring(selection.start+1))):printable&&(shift=e.shiftKey,character=String.fromCharCode(e.keyCode),character=shift?character.toUpperCase():character.toLowerCase(),value+=character)),placeholder=$input.attr("placeholder"),!value&&placeholder&&(value=placeholder),width=measureString(value,$input)+4,width!==currentWidth&&(currentWidth=width,$input.width(width),$input.triggerHandler("resize")))};$input.on("keydown keyup update blur",update),update()},Selectize=function($input,settings){var dir,input,self=this;input=$input[0],input.selectize=self,dir=window.getComputedStyle?window.getComputedStyle(input,null).getPropertyValue("direction"):input.currentStyle&&input.currentStyle.direction,dir=dir||$input.parents("[dir]:first").attr("dir")||"",$.extend(self,{settings:settings,$input:$input,tagType:"select"===input.tagName.toLowerCase()?TAG_SELECT:TAG_INPUT,rtl:/rtl/i.test(dir),eventNS:".selectize"+ ++Selectize.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:$input.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===settings.loadThrottle?self.onSearchChange:debounce(self.onSearchChange,settings.loadThrottle)}),self.sifter=new Sifter(this.options,{diacritics:settings.diacritics}),$.extend(self.options,build_hash_table(settings.valueField,settings.options)),delete self.settings.options,$.extend(self.optgroups,build_hash_table(settings.optgroupValueField,settings.optgroups)),delete self.settings.optgroups,self.settings.mode=self.settings.mode||(1===self.settings.maxItems?"single":"multi"),"boolean"!=typeof self.settings.hideSelected&&(self.settings.hideSelected="multi"===self.settings.mode),self.settings.create&&(self.canCreate=function(input){var filter=self.settings.createFilter;return input.length&&("function"!=typeof filter||filter.apply(self,[input]))&&("string"!=typeof filter||new RegExp(filter).test(input))&&(!(filter instanceof RegExp)||filter.test(input))}),self.initializePlugins(self.settings.plugins),self.setupCallbacks(),self.setupTemplates(),self.setup()};return MicroEvent.mixin(Selectize),MicroPlugin.mixin(Selectize),$.extend(Selectize.prototype,{setup:function(){var $wrapper,$control,$control_input,$dropdown,$dropdown_content,$dropdown_parent,inputMode,tab_index,classes,classes_plugins,self=this,settings=self.settings,eventNS=self.eventNS,$window=$(window),$document=$(document),$input=self.$input;inputMode=self.settings.mode,tab_index=$input.attr("tabindex")||"",classes=$input.attr("class")||"",$wrapper=$("<div>").addClass(settings.wrapperClass).addClass(classes).addClass(inputMode),$control=$("<div>").addClass(settings.inputClass).addClass("items").appendTo($wrapper),$control_input=$('<input type="text" autocomplete="off" />').appendTo($control).attr("tabindex",tab_index),$dropdown_parent=$(settings.dropdownParent||$wrapper),$dropdown=$("<div>").addClass(settings.dropdownClass).addClass(classes).addClass(inputMode).hide().appendTo($dropdown_parent),$dropdown_content=$("<div>").addClass(settings.dropdownContentClass).appendTo($dropdown),$wrapper.css({width:$input[0].style.width}),self.plugins.names.length&&(classes_plugins="plugin-"+self.plugins.names.join(" plugin-"),$wrapper.addClass(classes_plugins),$dropdown.addClass(classes_plugins)),(null===settings.maxItems||settings.maxItems>1)&&self.tagType===TAG_SELECT&&$input.attr("multiple","multiple"),self.settings.placeholder&&$control_input.attr("placeholder",settings.placeholder),$input.attr("autocorrect")&&$control_input.attr("autocorrect",$input.attr("autocorrect")),$input.attr("autocapitalize")&&$control_input.attr("autocapitalize",$input.attr("autocapitalize")),self.$wrapper=$wrapper,self.$control=$control,self.$control_input=$control_input,self.$dropdown=$dropdown,self.$dropdown_content=$dropdown_content,$dropdown.on("mouseenter","[data-selectable]",function(){return self.onOptionHover.apply(self,arguments)}),$dropdown.on("mousedown","[data-selectable]",function(){return self.onOptionSelect.apply(self,arguments)}),watchChildEvent($control,"mousedown","*:not(input)",function(){return self.onItemSelect.apply(self,arguments)}),autoGrow($control_input),$control.on({mousedown:function(){return self.onMouseDown.apply(self,arguments)},click:function(){return self.onClick.apply(self,arguments)}}),$control_input.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return self.onKeyDown.apply(self,arguments)},keyup:function(){return self.onKeyUp.apply(self,arguments)},keypress:function(){return self.onKeyPress.apply(self,arguments)},resize:function(){self.positionDropdown.apply(self,[])},blur:function(){return self.onBlur.apply(self,arguments)},focus:function(){return self.ignoreBlur=!1,self.onFocus.apply(self,arguments)},paste:function(){return self.onPaste.apply(self,arguments)}}),$document.on("keydown"+eventNS,function(e){self.isCmdDown=e[IS_MAC?"metaKey":"ctrlKey"],self.isCtrlDown=e[IS_MAC?"altKey":"ctrlKey"],self.isShiftDown=e.shiftKey}),$document.on("keyup"+eventNS,function(e){e.keyCode===KEY_CTRL&&(self.isCtrlDown=!1),e.keyCode===KEY_SHIFT&&(self.isShiftDown=!1),e.keyCode===KEY_CMD&&(self.isCmdDown=!1)}),$document.on("mousedown"+eventNS,function(e){if(self.isFocused){if(e.target===self.$dropdown[0]||e.target.parentNode===self.$dropdown[0])return!1;self.$control.has(e.target).length||e.target===self.$control[0]||self.blur()}}),$window.on(["scroll"+eventNS,"resize"+eventNS].join(" "),function(){self.isOpen&&self.positionDropdown.apply(self,arguments)}),$window.on("mousemove"+eventNS,function(){self.ignoreHover=!1}),this.revertSettings={$children:$input.children().detach(),tabindex:$input.attr("tabindex")},$input.attr("tabindex",-1).hide().after(self.$wrapper),$.isArray(settings.items)&&(self.setValue(settings.items),delete settings.items),$input[0].validity&&$input.on("invalid"+eventNS,function(e){e.preventDefault(),self.isInvalid=!0,self.refreshState()}),self.updateOriginalInput(),self.refreshItems(),self.refreshState(),self.updatePlaceholder(),self.isSetup=!0,$input.is(":disabled")&&self.disable(),self.on("change",this.onChange),$input.data("selectize",self),$input.addClass("selectized"),self.trigger("initialize"),settings.preload===!0&&self.onSearchChange("")},setupTemplates:function(){var self=this,field_label=self.settings.labelField,field_optgroup=self.settings.optgroupLabelField,templates={optgroup:function(data){return'<div class="optgroup">'+data.html+"</div>"},optgroup_header:function(data,escape){return'<div class="optgroup-header">'+escape(data[field_optgroup])+"</div>"},option:function(data,escape){return'<div class="option">'+escape(data[field_label])+"</div>"},item:function(data,escape){return'<div class="item">'+escape(data[field_label])+"</div>"},option_create:function(data,escape){return'<div class="create">Add <strong>'+escape(data.input)+"</strong>&hellip;</div>"}};self.settings.render=$.extend({},templates,self.settings.render)},setupCallbacks:function(){var key,fn,callbacks={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType"};for(key in callbacks)callbacks.hasOwnProperty(key)&&(fn=this.settings[callbacks[key]],fn&&this.on(key,fn))},onClick:function(e){var self=this;self.isFocused||(self.focus(),e.preventDefault())},onMouseDown:function(e){var self=this,defaultPrevented=e.isDefaultPrevented();$(e.target);if(self.isFocused){if(e.target!==self.$control_input[0])return"single"===self.settings.mode?self.isOpen?self.close():self.open():defaultPrevented||self.setActiveItem(null),!1}else defaultPrevented||window.setTimeout(function(){self.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(e){var self=this;(self.isFull()||self.isInputHidden||self.isLocked)&&e.preventDefault()},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var character=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&character===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){var self=(e.target===this.$control_input[0],this);if(self.isLocked)return void(e.keyCode!==KEY_TAB&&e.preventDefault());switch(e.keyCode){case KEY_A:if(self.isCmdDown)return void self.selectAll();break;case KEY_ESC:return void self.close();case KEY_N:if(!e.ctrlKey||e.altKey)break;case KEY_DOWN:if(!self.isOpen&&self.hasOptions)self.open();else if(self.$activeOption){self.ignoreHover=!0;var $next=self.getAdjacentOption(self.$activeOption,1);$next.length&&self.setActiveOption($next,!0,!0)}return void e.preventDefault();case KEY_P:if(!e.ctrlKey||e.altKey)break;case KEY_UP:if(self.$activeOption){self.ignoreHover=!0;var $prev=self.getAdjacentOption(self.$activeOption,-1);$prev.length&&self.setActiveOption($prev,!0,!0)}return void e.preventDefault();case KEY_RETURN:return self.isOpen&&self.$activeOption&&self.onOptionSelect({currentTarget:self.$activeOption}),void e.preventDefault();case KEY_LEFT:return void self.advanceSelection(-1,e);case KEY_RIGHT:return void self.advanceSelection(1,e);case KEY_TAB:return self.settings.selectOnTab&&self.isOpen&&self.$activeOption&&(self.onOptionSelect({currentTarget:self.$activeOption}),e.preventDefault()),void(self.settings.create&&self.createItem()&&e.preventDefault());case KEY_BACKSPACE:case KEY_DELETE:return void self.deleteSelection(e)}return!self.isFull()&&!self.isInputHidden||(IS_MAC?e.metaKey:e.ctrlKey)?void 0:void e.preventDefault()},onKeyUp:function(e){var self=this;if(self.isLocked)return e&&e.preventDefault();var value=self.$control_input.val()||"";self.lastValue!==value&&(self.lastValue=value,self.onSearchChange(value),self.refreshOptions(),self.trigger("type",value))},onSearchChange:function(value){var self=this,fn=self.settings.load;fn&&(self.loadedSearches.hasOwnProperty(value)||(self.loadedSearches[value]=!0,self.load(function(callback){fn.apply(self,[value,callback])})))},onFocus:function(e){var self=this;return self.isFocused=!0,self.isDisabled?(self.blur(),e&&e.preventDefault(),!1):void(self.ignoreFocus||("focus"===self.settings.preload&&self.onSearchChange(""),self.$activeItems.length||(self.showInput(),self.setActiveItem(null),self.refreshOptions(!!self.settings.openOnFocus)),self.refreshState()))},onBlur:function(e){var self=this;if(self.isFocused=!1,!self.ignoreFocus){if(!self.ignoreBlur&&document.activeElement===self.$dropdown_content[0])return self.ignoreBlur=!0,void self.onFocus(e);self.settings.create&&self.settings.createOnBlur&&self.createItem(!1),self.close(),self.setTextboxValue(""),self.setActiveItem(null),self.setActiveOption(null),self.setCaret(self.items.length),self.refreshState()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(e){var value,$target,self=this;e.preventDefault&&(e.preventDefault(),e.stopPropagation()),$target=$(e.currentTarget),$target.hasClass("create")?self.createItem():(value=$target.attr("data-value"),value&&(self.lastQuery=null,self.setTextboxValue(""),self.addItem(value),!self.settings.hideSelected&&e.type&&/mouse/.test(e.type)&&self.setActiveOption(self.getOption(value))))},onItemSelect:function(e){var self=this;self.isLocked||"multi"===self.settings.mode&&(e.preventDefault(),self.setActiveItem(e.currentTarget,e))},load:function(fn){var self=this,$wrapper=self.$wrapper.addClass("loading");self.loading++,fn.apply(self,[function(results){self.loading=Math.max(self.loading-1,0),results&&results.length&&(self.addOption(results),self.refreshOptions(self.isFocused&&!self.isInputHidden)),self.loading||$wrapper.removeClass("loading"),self.trigger("load",results)}])},setTextboxValue:function(value){var $input=this.$control_input,changed=$input.val()!==value;changed&&($input.val(value).triggerHandler("update"),this.lastValue=value)},getValue:function(){return this.tagType===TAG_SELECT&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(value){debounce_events(this,["change"],function(){this.clear(),this.addItems(value)})},setActiveItem:function($item,e){var eventName,i,idx,begin,end,item,swap,$last,self=this;if("single"!==self.settings.mode){if($item=$($item),!$item.length)return $(self.$activeItems).removeClass("active"),self.$activeItems=[],void(self.isFocused&&self.showInput());if(eventName=e&&e.type.toLowerCase(),"mousedown"===eventName&&self.isShiftDown&&self.$activeItems.length){for($last=self.$control.children(".active:last"),begin=Array.prototype.indexOf.apply(self.$control[0].childNodes,[$last[0]]),end=Array.prototype.indexOf.apply(self.$control[0].childNodes,[$item[0]]),begin>end&&(swap=begin,begin=end,end=swap),i=begin;end>=i;i++)item=self.$control[0].childNodes[i],-1===self.$activeItems.indexOf(item)&&($(item).addClass("active"),self.$activeItems.push(item));e.preventDefault()}else"mousedown"===eventName&&self.isCtrlDown||"keydown"===eventName&&this.isShiftDown?$item.hasClass("active")?(idx=self.$activeItems.indexOf($item[0]),self.$activeItems.splice(idx,1),$item.removeClass("active")):self.$activeItems.push($item.addClass("active")[0]):($(self.$activeItems).removeClass("active"),self.$activeItems=[$item.addClass("active")[0]]);self.hideInput(),this.isFocused||self.focus()}},setActiveOption:function($option,scroll,animate){var height_menu,height_item,y,scroll_top,scroll_bottom,self=this;self.$activeOption&&self.$activeOption.removeClass("active"),self.$activeOption=null,$option=$($option),$option.length&&(self.$activeOption=$option.addClass("active"),(scroll||!isset(scroll))&&(height_menu=self.$dropdown_content.height(),height_item=self.$activeOption.outerHeight(!0),scroll=self.$dropdown_content.scrollTop()||0,y=self.$activeOption.offset().top-self.$dropdown_content.offset().top+scroll,scroll_top=y,scroll_bottom=y-height_menu+height_item,y+height_item>height_menu+scroll?self.$dropdown_content.stop().animate({scrollTop:scroll_bottom},animate?self.settings.scrollDuration:0):scroll>y&&self.$dropdown_content.stop().animate({scrollTop:scroll_top},animate?self.settings.scrollDuration:0)))},selectAll:function(){var self=this;"single"!==self.settings.mode&&(self.$activeItems=Array.prototype.slice.apply(self.$control.children(":not(input)").addClass("active")),self.$activeItems.length&&(self.hideInput(),self.close()),self.focus())},hideInput:function(){var self=this;self.setTextboxValue(""),self.$control_input.css({opacity:0,position:"absolute",left:self.rtl?1e4:-1e4}),self.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var self=this;self.isDisabled||(self.ignoreFocus=!0,self.$control_input[0].focus(),window.setTimeout(function(){self.ignoreFocus=!1,self.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(query){return this.sifter.getScoreFunction(query,this.getSearchOptions())},getSearchOptions:function(){var settings=this.settings,sort=settings.sortField;return"string"==typeof sort&&(sort={field:sort}),{fields:settings.searchField,conjunction:settings.searchConjunction,sort:sort}},search:function(query){var i,result,calculateScore,self=this,settings=self.settings,options=this.getSearchOptions();if(settings.score&&(calculateScore=self.settings.score.apply(this,[query]),"function"!=typeof calculateScore))throw new Error('Selectize "score" setting must be a function that returns a function');if(query!==self.lastQuery?(self.lastQuery=query,result=self.sifter.search(query,$.extend(options,{score:calculateScore})),self.currentResults=result):result=$.extend(!0,{},self.currentResults),settings.hideSelected)for(i=result.items.length-1;i>=0;i--)-1!==self.items.indexOf(hash_key(result.items[i].id))&&result.items.splice(i,1);return result},refreshOptions:function(triggerDropdown){var i,j,k,n,groups,groups_order,option,option_html,optgroup,optgroups,html,html_children,has_create_option,$active,$active_before,$create;"undefined"==typeof triggerDropdown&&(triggerDropdown=!0);var self=this,query=self.$control_input.val(),results=self.search(query),$dropdown_content=self.$dropdown_content,active_before=self.$activeOption&&hash_key(self.$activeOption.attr("data-value"));
if(n=results.items.length,"number"==typeof self.settings.maxOptions&&(n=Math.min(n,self.settings.maxOptions)),groups={},self.settings.optgroupOrder)for(groups_order=self.settings.optgroupOrder,i=0;i<groups_order.length;i++)groups[groups_order[i]]=[];else groups_order=[];for(i=0;n>i;i++)for(option=self.options[results.items[i].id],option_html=self.render("option",option),optgroup=option[self.settings.optgroupField]||"",optgroups=$.isArray(optgroup)?optgroup:[optgroup],j=0,k=optgroups&&optgroups.length;k>j;j++)optgroup=optgroups[j],self.optgroups.hasOwnProperty(optgroup)||(optgroup=""),groups.hasOwnProperty(optgroup)||(groups[optgroup]=[],groups_order.push(optgroup)),groups[optgroup].push(option_html);for(html=[],i=0,n=groups_order.length;n>i;i++)optgroup=groups_order[i],self.optgroups.hasOwnProperty(optgroup)&&groups[optgroup].length?(html_children=self.render("optgroup_header",self.optgroups[optgroup])||"",html_children+=groups[optgroup].join(""),html.push(self.render("optgroup",$.extend({},self.optgroups[optgroup],{html:html_children})))):html.push(groups[optgroup].join(""));if($dropdown_content.html(html.join("")),self.settings.highlight&&results.query.length&&results.tokens.length)for(i=0,n=results.tokens.length;n>i;i++)highlight($dropdown_content,results.tokens[i].regex);if(!self.settings.hideSelected)for(i=0,n=self.items.length;n>i;i++)self.getOption(self.items[i]).addClass("selected");has_create_option=self.settings.create&&self.canCreate(results.query),has_create_option&&($dropdown_content.prepend(self.render("option_create",{input:query})),$create=$($dropdown_content[0].childNodes[0])),self.hasOptions=results.items.length>0||has_create_option,self.hasOptions?(results.items.length>0?($active_before=active_before&&self.getOption(active_before),$active_before&&$active_before.length?$active=$active_before:"single"===self.settings.mode&&self.items.length&&($active=self.getOption(self.items[0])),$active&&$active.length||($active=$create&&!self.settings.addPrecedence?self.getAdjacentOption($create,1):$dropdown_content.find("[data-selectable]:first"))):$active=$create,self.setActiveOption($active),triggerDropdown&&!self.isOpen&&self.open()):(self.setActiveOption(null),triggerDropdown&&self.isOpen&&self.close())},addOption:function(data){var i,n,value,self=this;if($.isArray(data))for(i=0,n=data.length;n>i;i++)self.addOption(data[i]);else value=hash_key(data[self.settings.valueField]),value&&!self.options.hasOwnProperty(value)&&(self.userOptions[value]=!0,self.options[value]=data,self.lastQuery=null,self.trigger("option_add",value,data))},addOptionGroup:function(id,data){this.optgroups[id]=data,this.trigger("optgroup_add",id,data)},updateOption:function(value,data){var $item,$item_new,value_new,index_item,cache_items,cache_options,self=this;if(value=hash_key(value),value_new=hash_key(data[self.settings.valueField]),self.options.hasOwnProperty(value)){if(!value_new)throw new Error("Value must be set in option data");value_new!==value&&(delete self.options[value],index_item=self.items.indexOf(value),-1!==index_item&&self.items.splice(index_item,1,value_new)),self.options[value_new]=data,cache_items=self.renderCache.item,cache_options=self.renderCache.option,cache_items&&(delete cache_items[value],delete cache_items[value_new]),cache_options&&(delete cache_options[value],delete cache_options[value_new]),-1!==self.items.indexOf(value_new)&&($item=self.getItem(value),$item_new=$(self.render("item",data)),$item.hasClass("active")&&$item_new.addClass("active"),$item.replaceWith($item_new)),self.isOpen&&self.refreshOptions(!1)}},removeOption:function(value){var self=this;value=hash_key(value);var cache_items=self.renderCache.item,cache_options=self.renderCache.option;cache_items&&delete cache_items[value],cache_options&&delete cache_options[value],delete self.userOptions[value],delete self.options[value],self.lastQuery=null,self.trigger("option_remove",value),self.removeItem(value)},clearOptions:function(){var self=this;self.loadedSearches={},self.userOptions={},self.renderCache={},self.options=self.sifter.items={},self.lastQuery=null,self.trigger("option_clear"),self.clear()},getOption:function(value){return this.getElementWithValue(value,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function($option,direction){var $options=this.$dropdown.find("[data-selectable]"),index=$options.index($option)+direction;return index>=0&&index<$options.length?$options.eq(index):$()},getElementWithValue:function(value,$els){if(value=hash_key(value))for(var i=0,n=$els.length;n>i;i++)if($els[i].getAttribute("data-value")===value)return $($els[i]);return $()},getItem:function(value){return this.getElementWithValue(value,this.$control.children())},addItems:function(values){for(var items=$.isArray(values)?values:[values],i=0,n=items.length;n>i;i++)this.isPending=n-1>i,this.addItem(items[i])},addItem:function(value){debounce_events(this,["change"],function(){var $item,$option,$options,value_next,wasFull,self=this,inputMode=self.settings.mode;return value=hash_key(value),-1!==self.items.indexOf(value)?void("single"===inputMode&&self.close()):void(self.options.hasOwnProperty(value)&&("single"===inputMode&&self.clear(),"multi"===inputMode&&self.isFull()||($item=$(self.render("item",self.options[value])),wasFull=self.isFull(),self.items.splice(self.caretPos,0,value),self.insertAtCaret($item),(!self.isPending||!wasFull&&self.isFull())&&self.refreshState(),self.isSetup&&($options=self.$dropdown_content.find("[data-selectable]"),self.isPending||($option=self.getOption(value),value_next=self.getAdjacentOption($option,1).attr("data-value"),self.refreshOptions(self.isFocused&&"single"!==inputMode),value_next&&self.setActiveOption(self.getOption(value_next))),!$options.length||self.isFull()?self.close():self.positionDropdown(),self.updatePlaceholder(),self.trigger("item_add",value,$item),self.updateOriginalInput()))))})},removeItem:function(value){var $item,i,idx,self=this;$item="object"==typeof value?value:self.getItem(value),value=hash_key($item.attr("data-value")),i=self.items.indexOf(value),-1!==i&&($item.remove(),$item.hasClass("active")&&(idx=self.$activeItems.indexOf($item[0]),self.$activeItems.splice(idx,1)),self.items.splice(i,1),self.lastQuery=null,!self.settings.persist&&self.userOptions.hasOwnProperty(value)&&self.removeOption(value),i<self.caretPos&&self.setCaret(self.caretPos-1),self.refreshState(),self.updatePlaceholder(),self.updateOriginalInput(),self.positionDropdown(),self.trigger("item_remove",value))},createItem:function(triggerDropdown){var self=this,input=$.trim(self.$control_input.val()||""),caret=self.caretPos;if(!self.canCreate(input))return!1;self.lock(),"undefined"==typeof triggerDropdown&&(triggerDropdown=!0);var setup="function"==typeof self.settings.create?this.settings.create:function(input){var data={};return data[self.settings.labelField]=input,data[self.settings.valueField]=input,data},create=once(function(data){if(self.unlock(),data&&"object"==typeof data){var value=hash_key(data[self.settings.valueField]);value&&(self.setTextboxValue(""),self.addOption(data),self.setCaret(caret),self.addItem(value),self.refreshOptions(triggerDropdown&&"single"!==self.settings.mode))}}),output=setup.apply(this,[input,create]);return"undefined"!=typeof output&&create(output),!0},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var i=0;i<this.items.length;i++)this.addItem(this.items);this.refreshState(),this.updateOriginalInput()},refreshState:function(){var invalid,self=this;self.isRequired&&(self.items.length&&(self.isInvalid=!1),self.$control_input.prop("required",invalid)),self.refreshClasses()},refreshClasses:function(){var self=this,isFull=self.isFull(),isLocked=self.isLocked;self.$wrapper.toggleClass("rtl",self.rtl),self.$control.toggleClass("focus",self.isFocused).toggleClass("disabled",self.isDisabled).toggleClass("required",self.isRequired).toggleClass("invalid",self.isInvalid).toggleClass("locked",isLocked).toggleClass("full",isFull).toggleClass("not-full",!isFull).toggleClass("input-active",self.isFocused&&!self.isInputHidden).toggleClass("dropdown-active",self.isOpen).toggleClass("has-options",!$.isEmptyObject(self.options)).toggleClass("has-items",self.items.length>0),self.$control_input.data("grow",!isFull&&!isLocked)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var i,n,options,self=this;if(self.tagType===TAG_SELECT){for(options=[],i=0,n=self.items.length;n>i;i++)options.push('<option value="'+escape_html(self.items[i])+'" selected="selected"></option>');options.length||this.$input.attr("multiple")||options.push('<option value="" selected="selected"></option>'),self.$input.html(options.join(""))}else self.$input.val(self.getValue()),self.$input.attr("value",self.$input.val());self.isSetup&&self.trigger("change",self.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var $input=this.$control_input;this.items.length?$input.removeAttr("placeholder"):$input.attr("placeholder",this.settings.placeholder),$input.triggerHandler("update",{force:!0})}},open:function(){var self=this;self.isLocked||self.isOpen||"multi"===self.settings.mode&&self.isFull()||(self.focus(),self.isOpen=!0,self.refreshState(),self.$dropdown.css({visibility:"hidden",display:"block"}),self.positionDropdown(),self.$dropdown.css({visibility:"visible"}),self.trigger("dropdown_open",self.$dropdown))},close:function(){var self=this,trigger=self.isOpen;"single"===self.settings.mode&&self.items.length&&self.hideInput(),self.isOpen=!1,self.$dropdown.hide(),self.setActiveOption(null),self.refreshState(),trigger&&self.trigger("dropdown_close",self.$dropdown)},positionDropdown:function(){var $control=this.$control,offset="body"===this.settings.dropdownParent?$control.offset():$control.position();offset.top+=$control.outerHeight(!0),this.$dropdown.css({width:$control.outerWidth(),top:offset.top,left:offset.left})},clear:function(){var self=this;self.items.length&&(self.$control.children(":not(input)").remove(),self.items=[],self.lastQuery=null,self.setCaret(0),self.setActiveItem(null),self.updatePlaceholder(),self.updateOriginalInput(),self.refreshState(),self.showInput(),self.trigger("clear"))},insertAtCaret:function($el){var caret=Math.min(this.caretPos,this.items.length);0===caret?this.$control.prepend($el):$(this.$control[0].childNodes[caret]).before($el),this.setCaret(caret+1)},deleteSelection:function(e){var i,n,direction,selection,values,caret,option_select,$option_select,$tail,self=this;if(direction=e&&e.keyCode===KEY_BACKSPACE?-1:1,selection=getSelection(self.$control_input[0]),self.$activeOption&&!self.settings.hideSelected&&(option_select=self.getAdjacentOption(self.$activeOption,-1).attr("data-value")),values=[],self.$activeItems.length){for($tail=self.$control.children(".active:"+(direction>0?"last":"first")),caret=self.$control.children(":not(input)").index($tail),direction>0&&caret++,i=0,n=self.$activeItems.length;n>i;i++)values.push($(self.$activeItems[i]).attr("data-value"));e&&(e.preventDefault(),e.stopPropagation())}else(self.isFocused||"single"===self.settings.mode)&&self.items.length&&(0>direction&&0===selection.start&&0===selection.length?values.push(self.items[self.caretPos-1]):direction>0&&selection.start===self.$control_input.val().length&&values.push(self.items[self.caretPos]));if(!values.length||"function"==typeof self.settings.onDelete&&self.settings.onDelete.apply(self,[values])===!1)return!1;for("undefined"!=typeof caret&&self.setCaret(caret);values.length;)self.removeItem(values.pop());return self.showInput(),self.positionDropdown(),self.refreshOptions(!0),option_select&&($option_select=self.getOption(option_select),$option_select.length&&self.setActiveOption($option_select)),!0},advanceSelection:function(direction,e){var tail,selection,idx,valueLength,cursorAtEdge,$tail,self=this;0!==direction&&(self.rtl&&(direction*=-1),tail=direction>0?"last":"first",selection=getSelection(self.$control_input[0]),self.isFocused&&!self.isInputHidden?(valueLength=self.$control_input.val().length,cursorAtEdge=0>direction?0===selection.start&&0===selection.length:selection.start===valueLength,cursorAtEdge&&!valueLength&&self.advanceCaret(direction,e)):($tail=self.$control.children(".active:"+tail),$tail.length&&(idx=self.$control.children(":not(input)").index($tail),self.setActiveItem(null),self.setCaret(direction>0?idx+1:idx))))},advanceCaret:function(direction,e){var fn,$adj,self=this;0!==direction&&(fn=direction>0?"next":"prev",self.isShiftDown?($adj=self.$control_input[fn](),$adj.length&&(self.hideInput(),self.setActiveItem($adj),e&&e.preventDefault())):self.setCaret(self.caretPos+direction))},setCaret:function(i){var self=this;if(i="single"===self.settings.mode?self.items.length:Math.max(0,Math.min(self.items.length,i)),!self.isPending){var j,n,$children,$child;for($children=self.$control.children(":not(input)"),j=0,n=$children.length;n>j;j++)$child=$($children[j]).detach(),i>j?self.$control_input.before($child):self.$control.append($child)}self.caretPos=i},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var self=this;self.$input.prop("disabled",!0),self.isDisabled=!0,self.lock()},enable:function(){var self=this;self.$input.prop("disabled",!1),self.isDisabled=!1,self.unlock()},destroy:function(){var self=this,eventNS=self.eventNS,revertSettings=self.revertSettings;self.trigger("destroy"),self.off(),self.$wrapper.remove(),self.$dropdown.remove(),self.$input.html("").append(revertSettings.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:revertSettings.tabindex}).show(),self.$control_input.removeData("grow"),self.$input.removeData("selectize"),$(window).off(eventNS),$(document).off(eventNS),$(document.body).off(eventNS),delete self.$input[0].selectize},render:function(templateName,data){var value,id,html="",cache=!1,self=this,regex_tag=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===templateName||"item"===templateName)&&(value=hash_key(data[self.settings.valueField]),cache=!!value),cache&&(isset(self.renderCache[templateName])||(self.renderCache[templateName]={}),self.renderCache[templateName].hasOwnProperty(value))?self.renderCache[templateName][value]:(html=self.settings.render[templateName].apply(this,[data,escape_html]),("option"===templateName||"option_create"===templateName)&&(html=html.replace(regex_tag,"<$1 data-selectable")),"optgroup"===templateName&&(id=data[self.settings.optgroupValueField]||"",html=html.replace(regex_tag,'<$1 data-group="'+escape_replace(escape_html(id))+'"')),("option"===templateName||"item"===templateName)&&(html=html.replace(regex_tag,'<$1 data-value="'+escape_replace(escape_html(value||""))+'"')),cache&&(self.renderCache[templateName][value]=html),html)},clearCache:function(templateName){var self=this;"undefined"==typeof templateName?self.renderCache={}:delete self.renderCache[templateName]}}),Selectize.count=0,Selectize.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,render:{}},$.fn.selectize=function(settings_user){var defaults=$.fn.selectize.defaults,settings=$.extend({},defaults,settings_user),attr_data=settings.dataAttr,field_label=settings.labelField,field_value=settings.valueField,field_optgroup=settings.optgroupField,field_optgroup_label=settings.optgroupLabelField,field_optgroup_value=settings.optgroupValueField,init_textbox=function($input,settings_element){var i,n,values,option,value=$.trim($input.val()||"");if(value.length){for(values=value.split(settings.delimiter),i=0,n=values.length;n>i;i++)option={},option[field_label]=values[i],option[field_value]=values[i],settings_element.options[values[i]]=option;settings_element.items=values}},init_select=function($input,settings_element){var i,n,tagName,$children,order=0,options=settings_element.options,readData=function($el){var data=attr_data&&$el.attr(attr_data);return"string"==typeof data&&data.length?JSON.parse(data):null},addOption=function($option,group){var value,option;if($option=$($option),value=$option.attr("value")||"",value.length){if(options.hasOwnProperty(value))return void(group&&(options[value].optgroup?$.isArray(options[value].optgroup)?options[value].optgroup.push(group):options[value].optgroup=[options[value].optgroup,group]:options[value].optgroup=group));option=readData($option)||{},option[field_label]=option[field_label]||$option.text(),option[field_value]=option[field_value]||value,option[field_optgroup]=option[field_optgroup]||group,option.$order=++order,options[value]=option,$option.is(":selected")&&settings_element.items.push(value)}},addGroup=function($optgroup){var i,n,id,optgroup,$options;for($optgroup=$($optgroup),id=$optgroup.attr("label"),id&&(optgroup=readData($optgroup)||{},optgroup[field_optgroup_label]=id,optgroup[field_optgroup_value]=id,settings_element.optgroups[id]=optgroup),$options=$("option",$optgroup),i=0,n=$options.length;n>i;i++)addOption($options[i],id)};for(settings_element.maxItems=$input.attr("multiple")?null:1,$children=$input.children(),i=0,n=$children.length;n>i;i++)tagName=$children[i].tagName.toLowerCase(),"optgroup"===tagName?addGroup($children[i]):"option"===tagName&&addOption($children[i])};return this.each(function(){if(!this.selectize){var instance,$input=$(this),tag_name=this.tagName.toLowerCase(),settings_element={placeholder:$input.children('option[value=""]').text()||$input.attr("placeholder"),options:{},optgroups:{},items:[]};"select"===tag_name?init_select($input,settings_element):init_textbox($input,settings_element),instance=new Selectize($input,$.extend(!0,{},defaults,settings_element,settings_user))}})},$.fn.selectize.defaults=Selectize.defaults,Selectize.define("drag_drop",function(options){if(!$.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var self=this;self.lock=function(){var original=self.lock;return function(){var sortable=self.$control.data("sortable");return sortable&&sortable.disable(),original.apply(self,arguments)}}(),self.unlock=function(){var original=self.unlock;return function(){var sortable=self.$control.data("sortable");return sortable&&sortable.enable(),original.apply(self,arguments)}}(),self.setup=function(){var original=self.setup;return function(){original.apply(this,arguments);var $control=self.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:self.isLocked,start:function(e,ui){ui.placeholder.css("width",ui.helper.css("width")),$control.css({overflow:"visible"})},stop:function(){$control.css({overflow:"hidden"});var active=self.$activeItems?self.$activeItems.slice():null,values=[];$control.children("[data-value]").each(function(){values.push($(this).attr("data-value"))}),self.setValue(values),self.setActiveItem(active)}})}}()}}),Selectize.define("dropdown_header",function(options){var self=this;options=$.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(data){return'<div class="'+data.headerClass+'"><div class="'+data.titleRowClass+'"><span class="'+data.labelClass+'">'+data.title+'</span><a href="javascript:void(0)" class="'+data.closeClass+'">&times;</a></div></div>'}},options),self.setup=function(){var original=self.setup;return function(){original.apply(self,arguments),self.$dropdown_header=$(options.html(options)),self.$dropdown.prepend(self.$dropdown_header)}}()}),Selectize.define("optgroup_columns",function(options){var self=this;options=$.extend({equalizeWidth:!0,equalizeHeight:!0},options),this.getAdjacentOption=function($option,direction){var $options=$option.closest("[data-group]").find("[data-selectable]"),index=$options.index($option)+direction;return index>=0&&index<$options.length?$options.eq(index):$()},this.onKeyDown=function(){var original=self.onKeyDown;return function(e){var index,$option,$options,$optgroup;return!this.isOpen||e.keyCode!==KEY_LEFT&&e.keyCode!==KEY_RIGHT?original.apply(this,arguments):(self.ignoreHover=!0,$optgroup=this.$activeOption.closest("[data-group]"),index=$optgroup.find("[data-selectable]").index(this.$activeOption),$optgroup=e.keyCode===KEY_LEFT?$optgroup.prev("[data-group]"):$optgroup.next("[data-group]"),$options=$optgroup.find("[data-selectable]"),$option=$options.eq(Math.min($options.length-1,index)),void($option.length&&this.setActiveOption($option)))}}();var getScrollbarWidth=function(){var div,width=getScrollbarWidth.width,doc=document;return"undefined"==typeof width&&(div=doc.createElement("div"),div.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',div=div.firstChild,doc.body.appendChild(div),width=getScrollbarWidth.width=div.offsetWidth-div.clientWidth,doc.body.removeChild(div)),width},equalizeSizes=function(){var i,n,height_max,width,width_last,width_parent,$optgroups;if($optgroups=$("[data-group]",self.$dropdown_content),n=$optgroups.length,n&&self.$dropdown_content.width()){if(options.equalizeHeight){for(height_max=0,i=0;n>i;i++)height_max=Math.max(height_max,$optgroups.eq(i).height());$optgroups.css({height:height_max})}options.equalizeWidth&&(width_parent=self.$dropdown_content.innerWidth()-getScrollbarWidth(),width=Math.round(width_parent/n),$optgroups.css({width:width}),n>1&&(width_last=width_parent-width*(n-1),$optgroups.eq(n-1).css({width:width_last})))}};(options.equalizeHeight||options.equalizeWidth)&&(hook.after(this,"positionDropdown",equalizeSizes),hook.after(this,"refreshOptions",equalizeSizes))}),Selectize.define("remove_button",function(options){if("single"!==this.settings.mode){options=$.extend({label:"&times;",title:"Remove",className:"remove",append:!0},options);var self=this,html='<a href="javascript:void(0)" class="'+options.className+'" tabindex="-1" title="'+escape_html(options.title)+'">'+options.label+"</a>",append=function(html_container,html_element){var pos=html_container.search(/(<\/[^>]+>\s*)$/);return html_container.substring(0,pos)+html_element+html_container.substring(pos)};this.setup=function(){var original=self.setup;return function(){if(options.append){var render_item=self.settings.render.item;self.settings.render.item=function(data){return append(render_item.apply(this,arguments),html)}}original.apply(this,arguments),this.$control.on("click","."+options.className,function(e){if(e.preventDefault(),!self.isLocked){var $item=$(e.currentTarget).parent();self.setActiveItem($item),self.deleteSelection()&&self.setCaret(self.items.length)}})}}()}}),Selectize.define("restore_on_backspace",function(options){var self=this;options.text=options.text||function(option){return option[this.settings.labelField]},this.onKeyDown=function(e){var original=self.onKeyDown;return function(e){var index,option;return e.keyCode===KEY_BACKSPACE&&""===this.$control_input.val()&&!this.$activeItems.length&&(index=this.caretPos-1,index>=0&&index<this.items.length)?(option=this.options[this.items[index]],this.deleteSelection(e)&&(this.setTextboxValue(options.text.apply(this,[option])),this.refreshOptions(!0)),void e.preventDefault()):original.apply(this,arguments)}}()}),Selectize}),function(window,document,undefined){function minErr(module,ErrorConstructor){return ErrorConstructor=ErrorConstructor||Error,function(){var message,i,code=arguments[0],prefix="["+(module?module+":":"")+code+"] ",template=arguments[1],templateArgs=arguments;for(message=prefix+template.replace(/\{\d+\}/g,function(match){var index=+match.slice(1,-1);return index+2<templateArgs.length?toDebugString(templateArgs[index+2]):match}),message=message+"\nhttp://errors.angularjs.org/1.3.15/"+(module?module+"/":"")+code,i=2;i<arguments.length;i++)message=message+(2==i?"?":"&")+"p"+(i-2)+"="+encodeURIComponent(toDebugString(arguments[i]));return new ErrorConstructor(message)}}function isArrayLike(obj){if(null==obj||isWindow(obj))return!1;var length=obj.length;return obj.nodeType===NODE_TYPE_ELEMENT&&length?!0:isString(obj)||isArray(obj)||0===length||"number"==typeof length&&length>0&&length-1 in obj}function forEach(obj,iterator,context){var key,length;if(obj)if(isFunction(obj))for(key in obj)"prototype"==key||"length"==key||"name"==key||obj.hasOwnProperty&&!obj.hasOwnProperty(key)||iterator.call(context,obj[key],key,obj);else if(isArray(obj)||isArrayLike(obj)){var isPrimitive="object"!=typeof obj;for(key=0,length=obj.length;length>key;key++)(isPrimitive||key in obj)&&iterator.call(context,obj[key],key,obj)}else if(obj.forEach&&obj.forEach!==forEach)obj.forEach(iterator,context,obj);else for(key in obj)obj.hasOwnProperty(key)&&iterator.call(context,obj[key],key,obj);return obj}function sortedKeys(obj){return Object.keys(obj).sort()}function forEachSorted(obj,iterator,context){for(var keys=sortedKeys(obj),i=0;i<keys.length;i++)iterator.call(context,obj[keys[i]],keys[i]);return keys}function reverseParams(iteratorFn){return function(value,key){iteratorFn(key,value)}}function nextUid(){return++uid}function setHashKey(obj,h){h?obj.$$hashKey=h:delete obj.$$hashKey}function extend(dst){for(var h=dst.$$hashKey,i=1,ii=arguments.length;ii>i;i++){var obj=arguments[i];if(obj)for(var keys=Object.keys(obj),j=0,jj=keys.length;jj>j;j++){var key=keys[j];dst[key]=obj[key]}}return setHashKey(dst,h),dst}function int(str){return parseInt(str,10)}function inherit(parent,extra){return extend(Object.create(parent),extra)}function noop(){}function identity($){return $}function valueFn(value){return function(){return value}}function isUndefined(value){return"undefined"==typeof value}function isDefined(value){return"undefined"!=typeof value}function isObject(value){return null!==value&&"object"==typeof value}function isString(value){return"string"==typeof value}function isNumber(value){return"number"==typeof value}function isDate(value){return"[object Date]"===toString.call(value)}function isFunction(value){return"function"==typeof value}function isRegExp(value){return"[object RegExp]"===toString.call(value)}function isWindow(obj){return obj&&obj.window===obj}function isScope(obj){return obj&&obj.$evalAsync&&obj.$watch}function isFile(obj){return"[object File]"===toString.call(obj)}function isFormData(obj){return"[object FormData]"===toString.call(obj)}function isBlob(obj){return"[object Blob]"===toString.call(obj)}function isBoolean(value){return"boolean"==typeof value}function isPromiseLike(obj){return obj&&isFunction(obj.then)}function isElement(node){return!(!node||!(node.nodeName||node.prop&&node.attr&&node.find))}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function nodeName_(element){return lowercase(element.nodeName||element[0]&&element[0].nodeName)}function arrayRemove(array,value){var index=array.indexOf(value);return index>=0&&array.splice(index,1),value}function copy(source,destination,stackSource,stackDest){if(isWindow(source)||isScope(source))throw ngMinErr("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");if(destination){if(source===destination)throw ngMinErr("cpi","Can't copy! Source and destination are identical.");if(stackSource=stackSource||[],stackDest=stackDest||[],isObject(source)){var index=stackSource.indexOf(source);if(-1!==index)return stackDest[index];stackSource.push(source),stackDest.push(destination)}var result;if(isArray(source)){destination.length=0;for(var i=0;i<source.length;i++)result=copy(source[i],null,stackSource,stackDest),isObject(source[i])&&(stackSource.push(source[i]),stackDest.push(result)),destination.push(result)}else{var h=destination.$$hashKey;isArray(destination)?destination.length=0:forEach(destination,function(value,key){delete destination[key]});for(var key in source)source.hasOwnProperty(key)&&(result=copy(source[key],null,stackSource,stackDest),isObject(source[key])&&(stackSource.push(source[key]),stackDest.push(result)),destination[key]=result);setHashKey(destination,h)}}else if(destination=source,source)if(isArray(source))destination=copy(source,[],stackSource,stackDest);else if(isDate(source))destination=new Date(source.getTime());else if(isRegExp(source))destination=new RegExp(source.source,source.toString().match(/[^\/]*$/)[0]),destination.lastIndex=source.lastIndex;else if(isObject(source)){var emptyObject=Object.create(Object.getPrototypeOf(source));destination=copy(source,emptyObject,stackSource,stackDest)}return destination}function shallowCopy(src,dst){if(isArray(src)){dst=dst||[];for(var i=0,ii=src.length;ii>i;i++)dst[i]=src[i]}else if(isObject(src)){dst=dst||{};for(var key in src)("$"!==key.charAt(0)||"$"!==key.charAt(1))&&(dst[key]=src[key])}return dst||src}function equals(o1,o2){if(o1===o2)return!0;if(null===o1||null===o2)return!1;if(o1!==o1&&o2!==o2)return!0;var length,key,keySet,t1=typeof o1,t2=typeof o2;if(t1==t2&&"object"==t1){if(!isArray(o1)){if(isDate(o1))return isDate(o2)?equals(o1.getTime(),o2.getTime()):!1;if(isRegExp(o1))return isRegExp(o2)?o1.toString()==o2.toString():!1;if(isScope(o1)||isScope(o2)||isWindow(o1)||isWindow(o2)||isArray(o2)||isDate(o2)||isRegExp(o2))return!1;keySet={};for(key in o1)if("$"!==key.charAt(0)&&!isFunction(o1[key])){if(!equals(o1[key],o2[key]))return!1;keySet[key]=!0}for(key in o2)if(!keySet.hasOwnProperty(key)&&"$"!==key.charAt(0)&&o2[key]!==undefined&&!isFunction(o2[key]))return!1;return!0}if(!isArray(o2))return!1;if((length=o1.length)==o2.length){for(key=0;length>key;key++)if(!equals(o1[key],o2[key]))return!1;return!0}}return!1}function concat(array1,array2,index){return array1.concat(slice.call(array2,index))}function sliceArgs(args,startIndex){return slice.call(args,startIndex||0)}function bind(self,fn){var curryArgs=arguments.length>2?sliceArgs(arguments,2):[];return!isFunction(fn)||fn instanceof RegExp?fn:curryArgs.length?function(){return arguments.length?fn.apply(self,concat(curryArgs,arguments,0)):fn.apply(self,curryArgs)}:function(){return arguments.length?fn.apply(self,arguments):fn.call(self)}}function toJsonReplacer(key,value){var val=value;return"string"==typeof key&&"$"===key.charAt(0)&&"$"===key.charAt(1)?val=undefined:isWindow(value)?val="$WINDOW":value&&document===value?val="$DOCUMENT":isScope(value)&&(val="$SCOPE"),val}function toJson(obj,pretty){return"undefined"==typeof obj?undefined:(isNumber(pretty)||(pretty=pretty?2:null),JSON.stringify(obj,toJsonReplacer,pretty))}function fromJson(json){return isString(json)?JSON.parse(json):json}function startingTag(element){element=jqLite(element).clone();try{element.empty()}catch(e){}var elemHtml=jqLite("<div>").append(element).html();try{return element[0].nodeType===NODE_TYPE_TEXT?lowercase(elemHtml):elemHtml.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(match,nodeName){return"<"+lowercase(nodeName)})}catch(e){return lowercase(elemHtml)}}function tryDecodeURIComponent(value){try{return decodeURIComponent(value)}catch(e){}}function parseKeyValue(keyValue){var key_value,key,obj={};return forEach((keyValue||"").split("&"),function(keyValue){if(keyValue&&(key_value=keyValue.replace(/\+/g,"%20").split("="),key=tryDecodeURIComponent(key_value[0]),isDefined(key))){var val=isDefined(key_value[1])?tryDecodeURIComponent(key_value[1]):!0;hasOwnProperty.call(obj,key)?isArray(obj[key])?obj[key].push(val):obj[key]=[obj[key],val]:obj[key]=val;
}}),obj}function toKeyValue(obj){var parts=[];return forEach(obj,function(value,key){isArray(value)?forEach(value,function(arrayValue){parts.push(encodeUriQuery(key,!0)+(arrayValue===!0?"":"="+encodeUriQuery(arrayValue,!0)))}):parts.push(encodeUriQuery(key,!0)+(value===!0?"":"="+encodeUriQuery(value,!0)))}),parts.length?parts.join("&"):""}function encodeUriSegment(val){return encodeUriQuery(val,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function encodeUriQuery(val,pctEncodeSpaces){return encodeURIComponent(val).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,pctEncodeSpaces?"%20":"+")}function getNgAttribute(element,ngAttr){var attr,i,ii=ngAttrPrefixes.length;for(element=jqLite(element),i=0;ii>i;++i)if(attr=ngAttrPrefixes[i]+ngAttr,isString(attr=element.attr(attr)))return attr;return null}function angularInit(element,bootstrap){var appElement,module,config={};forEach(ngAttrPrefixes,function(prefix){var name=prefix+"app";!appElement&&element.hasAttribute&&element.hasAttribute(name)&&(appElement=element,module=element.getAttribute(name))}),forEach(ngAttrPrefixes,function(prefix){var candidate,name=prefix+"app";!appElement&&(candidate=element.querySelector("["+name.replace(":","\\:")+"]"))&&(appElement=candidate,module=candidate.getAttribute(name))}),appElement&&(config.strictDi=null!==getNgAttribute(appElement,"strict-di"),bootstrap(appElement,module?[module]:[],config))}function bootstrap(element,modules,config){isObject(config)||(config={});var defaultConfig={strictDi:!1};config=extend(defaultConfig,config);var doBootstrap=function(){if(element=jqLite(element),element.injector()){var tag=element[0]===document?"document":startingTag(element);throw ngMinErr("btstrpd","App Already Bootstrapped with this Element '{0}'",tag.replace(/</,"&lt;").replace(/>/,"&gt;"))}modules=modules||[],modules.unshift(["$provide",function($provide){$provide.value("$rootElement",element)}]),config.debugInfoEnabled&&modules.push(["$compileProvider",function($compileProvider){$compileProvider.debugInfoEnabled(!0)}]),modules.unshift("ng");var injector=createInjector(modules,config.strictDi);return injector.invoke(["$rootScope","$rootElement","$compile","$injector",function(scope,element,compile,injector){scope.$apply(function(){element.data("$injector",injector),compile(element)(scope)})}]),injector},NG_ENABLE_DEBUG_INFO=/^NG_ENABLE_DEBUG_INFO!/,NG_DEFER_BOOTSTRAP=/^NG_DEFER_BOOTSTRAP!/;return window&&NG_ENABLE_DEBUG_INFO.test(window.name)&&(config.debugInfoEnabled=!0,window.name=window.name.replace(NG_ENABLE_DEBUG_INFO,"")),window&&!NG_DEFER_BOOTSTRAP.test(window.name)?doBootstrap():(window.name=window.name.replace(NG_DEFER_BOOTSTRAP,""),angular.resumeBootstrap=function(extraModules){return forEach(extraModules,function(module){modules.push(module)}),doBootstrap()},void(isFunction(angular.resumeDeferredBootstrap)&&angular.resumeDeferredBootstrap()))}function reloadWithDebugInfo(){window.name="NG_ENABLE_DEBUG_INFO!"+window.name,window.location.reload()}function getTestability(rootElement){var injector=angular.element(rootElement).injector();if(!injector)throw ngMinErr("test","no injector found for element argument to getTestability");return injector.get("$$testability")}function snake_case(name,separator){return separator=separator||"_",name.replace(SNAKE_CASE_REGEXP,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}function bindJQuery(){var originalCleanData;bindJQueryFired||(jQuery=window.jQuery,jQuery&&jQuery.fn.on?(jqLite=jQuery,extend(jQuery.fn,{scope:JQLitePrototype.scope,isolateScope:JQLitePrototype.isolateScope,controller:JQLitePrototype.controller,injector:JQLitePrototype.injector,inheritedData:JQLitePrototype.inheritedData}),originalCleanData=jQuery.cleanData,jQuery.cleanData=function(elems){var events;if(skipDestroyOnNextJQueryCleanData)skipDestroyOnNextJQueryCleanData=!1;else for(var elem,i=0;null!=(elem=elems[i]);i++)events=jQuery._data(elem,"events"),events&&events.$destroy&&jQuery(elem).triggerHandler("$destroy");originalCleanData(elems)}):jqLite=JQLite,angular.element=jqLite,bindJQueryFired=!0)}function assertArg(arg,name,reason){if(!arg)throw ngMinErr("areq","Argument '{0}' is {1}",name||"?",reason||"required");return arg}function assertArgFn(arg,name,acceptArrayAnnotation){return acceptArrayAnnotation&&isArray(arg)&&(arg=arg[arg.length-1]),assertArg(isFunction(arg),name,"not a function, got "+(arg&&"object"==typeof arg?arg.constructor.name||"Object":typeof arg)),arg}function assertNotHasOwnProperty(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)}function getter(obj,path,bindFnToScope){if(!path)return obj;for(var key,keys=path.split("."),lastInstance=obj,len=keys.length,i=0;len>i;i++)key=keys[i],obj&&(obj=(lastInstance=obj)[key]);return!bindFnToScope&&isFunction(obj)?bind(lastInstance,obj):obj}function getBlockNodes(nodes){var node=nodes[0],endNode=nodes[nodes.length-1],blockNodes=[node];do{if(node=node.nextSibling,!node)break;blockNodes.push(node)}while(node!==endNode);return jqLite(blockNodes)}function createMap(){return Object.create(null)}function setupModuleLoader(window){function ensure(obj,name,factory){return obj[name]||(obj[name]=factory())}var $injectorMinErr=minErr("$injector"),ngMinErr=minErr("ng"),angular=ensure(window,"angular",Object);return angular.$$minErr=angular.$$minErr||minErr,ensure(angular,"module",function(){var modules={};return function(name,requires,configFn){var assertNotHasOwnProperty=function(name,context){if("hasOwnProperty"===name)throw ngMinErr("badname","hasOwnProperty is not a valid {0} name",context)};return assertNotHasOwnProperty(name,"module"),requires&&modules.hasOwnProperty(name)&&(modules[name]=null),ensure(modules,name,function(){function invokeLater(provider,method,insertMethod,queue){return queue||(queue=invokeQueue),function(){return queue[insertMethod||"push"]([provider,method,arguments]),moduleInstance}}if(!requires)throw $injectorMinErr("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",name);var invokeQueue=[],configBlocks=[],runBlocks=[],config=invokeLater("$injector","invoke","push",configBlocks),moduleInstance={_invokeQueue:invokeQueue,_configBlocks:configBlocks,_runBlocks:runBlocks,requires:requires,name:name,provider:invokeLater("$provide","provider"),factory:invokeLater("$provide","factory"),service:invokeLater("$provide","service"),value:invokeLater("$provide","value"),constant:invokeLater("$provide","constant","unshift"),animation:invokeLater("$animateProvider","register"),filter:invokeLater("$filterProvider","register"),controller:invokeLater("$controllerProvider","register"),directive:invokeLater("$compileProvider","directive"),config:config,run:function(block){return runBlocks.push(block),this}};return configFn&&config(configFn),moduleInstance})}})}function serializeObject(obj){var seen=[];return JSON.stringify(obj,function(key,val){if(val=toJsonReplacer(key,val),isObject(val)){if(seen.indexOf(val)>=0)return"<<already seen>>";seen.push(val)}return val})}function toDebugString(obj){return"function"==typeof obj?obj.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof obj?"undefined":"string"!=typeof obj?serializeObject(obj):obj}function publishExternalAPI(angular){extend(angular,{bootstrap:bootstrap,copy:copy,extend:extend,equals:equals,element:jqLite,forEach:forEach,injector:createInjector,noop:noop,bind:bind,toJson:toJson,fromJson:fromJson,identity:identity,isUndefined:isUndefined,isDefined:isDefined,isString:isString,isFunction:isFunction,isObject:isObject,isNumber:isNumber,isElement:isElement,isArray:isArray,version:version,isDate:isDate,lowercase:lowercase,uppercase:uppercase,callbacks:{counter:0},getTestability:getTestability,$$minErr:minErr,$$csp:csp,reloadWithDebugInfo:reloadWithDebugInfo}),angularModule=setupModuleLoader(window);try{angularModule("ngLocale")}catch(e){angularModule("ngLocale",[]).provider("$locale",$LocaleProvider)}angularModule("ng",["ngLocale"],["$provide",function($provide){$provide.provider({$$sanitizeUri:$$SanitizeUriProvider}),$provide.provider("$compile",$CompileProvider).directive({a:htmlAnchorDirective,input:inputDirective,textarea:inputDirective,form:formDirective,script:scriptDirective,select:selectDirective,style:styleDirective,option:optionDirective,ngBind:ngBindDirective,ngBindHtml:ngBindHtmlDirective,ngBindTemplate:ngBindTemplateDirective,ngClass:ngClassDirective,ngClassEven:ngClassEvenDirective,ngClassOdd:ngClassOddDirective,ngCloak:ngCloakDirective,ngController:ngControllerDirective,ngForm:ngFormDirective,ngHide:ngHideDirective,ngIf:ngIfDirective,ngInclude:ngIncludeDirective,ngInit:ngInitDirective,ngNonBindable:ngNonBindableDirective,ngPluralize:ngPluralizeDirective,ngRepeat:ngRepeatDirective,ngShow:ngShowDirective,ngStyle:ngStyleDirective,ngSwitch:ngSwitchDirective,ngSwitchWhen:ngSwitchWhenDirective,ngSwitchDefault:ngSwitchDefaultDirective,ngOptions:ngOptionsDirective,ngTransclude:ngTranscludeDirective,ngModel:ngModelDirective,ngList:ngListDirective,ngChange:ngChangeDirective,pattern:patternDirective,ngPattern:patternDirective,required:requiredDirective,ngRequired:requiredDirective,minlength:minlengthDirective,ngMinlength:minlengthDirective,maxlength:maxlengthDirective,ngMaxlength:maxlengthDirective,ngValue:ngValueDirective,ngModelOptions:ngModelOptionsDirective}).directive({ngInclude:ngIncludeFillContentDirective}).directive(ngAttributeAliasDirectives).directive(ngEventDirectives),$provide.provider({$anchorScroll:$AnchorScrollProvider,$animate:$AnimateProvider,$browser:$BrowserProvider,$cacheFactory:$CacheFactoryProvider,$controller:$ControllerProvider,$document:$DocumentProvider,$exceptionHandler:$ExceptionHandlerProvider,$filter:$FilterProvider,$interpolate:$InterpolateProvider,$interval:$IntervalProvider,$http:$HttpProvider,$httpBackend:$HttpBackendProvider,$location:$LocationProvider,$log:$LogProvider,$parse:$ParseProvider,$rootScope:$RootScopeProvider,$q:$QProvider,$$q:$$QProvider,$sce:$SceProvider,$sceDelegate:$SceDelegateProvider,$sniffer:$SnifferProvider,$templateCache:$TemplateCacheProvider,$templateRequest:$TemplateRequestProvider,$$testability:$$TestabilityProvider,$timeout:$TimeoutProvider,$window:$WindowProvider,$$rAF:$$RAFProvider,$$asyncCallback:$$AsyncCallbackProvider,$$jqLite:$$jqLiteProvider})}])}function jqNextId(){return++jqId}function camelCase(name){return name.replace(SPECIAL_CHARS_REGEXP,function(_,separator,letter,offset){return offset?letter.toUpperCase():letter}).replace(MOZ_HACK_REGEXP,"Moz$1")}function jqLiteIsTextNode(html){return!HTML_REGEXP.test(html)}function jqLiteAcceptsData(node){var nodeType=node.nodeType;return nodeType===NODE_TYPE_ELEMENT||!nodeType||nodeType===NODE_TYPE_DOCUMENT}function jqLiteBuildFragment(html,context){var tmp,tag,wrap,i,fragment=context.createDocumentFragment(),nodes=[];if(jqLiteIsTextNode(html))nodes.push(context.createTextNode(html));else{for(tmp=tmp||fragment.appendChild(context.createElement("div")),tag=(TAG_NAME_REGEXP.exec(html)||["",""])[1].toLowerCase(),wrap=wrapMap[tag]||wrapMap._default,tmp.innerHTML=wrap[1]+html.replace(XHTML_TAG_REGEXP,"<$1></$2>")+wrap[2],i=wrap[0];i--;)tmp=tmp.lastChild;nodes=concat(nodes,tmp.childNodes),tmp=fragment.firstChild,tmp.textContent=""}return fragment.textContent="",fragment.innerHTML="",forEach(nodes,function(node){fragment.appendChild(node)}),fragment}function jqLiteParseHTML(html,context){context=context||document;var parsed;return(parsed=SINGLE_TAG_REGEXP.exec(html))?[context.createElement(parsed[1])]:(parsed=jqLiteBuildFragment(html,context))?parsed.childNodes:[]}function JQLite(element){if(element instanceof JQLite)return element;var argIsString;if(isString(element)&&(element=trim(element),argIsString=!0),!(this instanceof JQLite)){if(argIsString&&"<"!=element.charAt(0))throw jqLiteMinErr("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new JQLite(element)}argIsString?jqLiteAddNodes(this,jqLiteParseHTML(element)):jqLiteAddNodes(this,element)}function jqLiteClone(element){return element.cloneNode(!0)}function jqLiteDealoc(element,onlyDescendants){if(onlyDescendants||jqLiteRemoveData(element),element.querySelectorAll)for(var descendants=element.querySelectorAll("*"),i=0,l=descendants.length;l>i;i++)jqLiteRemoveData(descendants[i])}function jqLiteOff(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("offargs","jqLite#off() does not support the `selector` argument");var expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,handle=expandoStore&&expandoStore.handle;if(handle)if(type)forEach(type.split(" "),function(type){if(isDefined(fn)){var listenerFns=events[type];if(arrayRemove(listenerFns||[],fn),listenerFns&&listenerFns.length>0)return}removeEventListenerFn(element,type,handle),delete events[type]});else for(type in events)"$destroy"!==type&&removeEventListenerFn(element,type,handle),delete events[type]}function jqLiteRemoveData(element,name){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];if(expandoStore){if(name)return void delete expandoStore.data[name];expandoStore.handle&&(expandoStore.events.$destroy&&expandoStore.handle({},"$destroy"),jqLiteOff(element)),delete jqCache[expandoId],element.ng339=undefined}}function jqLiteExpandoStore(element,createIfNecessary){var expandoId=element.ng339,expandoStore=expandoId&&jqCache[expandoId];return createIfNecessary&&!expandoStore&&(element.ng339=expandoId=jqNextId(),expandoStore=jqCache[expandoId]={events:{},data:{},handle:undefined}),expandoStore}function jqLiteData(element,key,value){if(jqLiteAcceptsData(element)){var isSimpleSetter=isDefined(value),isSimpleGetter=!isSimpleSetter&&key&&!isObject(key),massGetter=!key,expandoStore=jqLiteExpandoStore(element,!isSimpleGetter),data=expandoStore&&expandoStore.data;if(isSimpleSetter)data[key]=value;else{if(massGetter)return data;if(isSimpleGetter)return data&&data[key];extend(data,key)}}}function jqLiteHasClass(element,selector){return element.getAttribute?(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+selector+" ")>-1:!1}function jqLiteRemoveClass(element,cssClasses){cssClasses&&element.setAttribute&&forEach(cssClasses.split(" "),function(cssClass){element.setAttribute("class",trim((" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+trim(cssClass)+" "," ")))})}function jqLiteAddClass(element,cssClasses){if(cssClasses&&element.setAttribute){var existingClasses=(" "+(element.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");forEach(cssClasses.split(" "),function(cssClass){cssClass=trim(cssClass),-1===existingClasses.indexOf(" "+cssClass+" ")&&(existingClasses+=cssClass+" ")}),element.setAttribute("class",trim(existingClasses))}}function jqLiteAddNodes(root,elements){if(elements)if(elements.nodeType)root[root.length++]=elements;else{var length=elements.length;if("number"==typeof length&&elements.window!==elements){if(length)for(var i=0;length>i;i++)root[root.length++]=elements[i]}else root[root.length++]=elements}}function jqLiteController(element,name){return jqLiteInheritedData(element,"$"+(name||"ngController")+"Controller")}function jqLiteInheritedData(element,name,value){element.nodeType==NODE_TYPE_DOCUMENT&&(element=element.documentElement);for(var names=isArray(name)?name:[name];element;){for(var i=0,ii=names.length;ii>i;i++)if((value=jqLite.data(element,names[i]))!==undefined)return value;element=element.parentNode||element.nodeType===NODE_TYPE_DOCUMENT_FRAGMENT&&element.host}}function jqLiteEmpty(element){for(jqLiteDealoc(element,!0);element.firstChild;)element.removeChild(element.firstChild)}function jqLiteRemove(element,keepData){keepData||jqLiteDealoc(element);var parent=element.parentNode;parent&&parent.removeChild(element)}function jqLiteDocumentLoaded(action,win){win=win||window,"complete"===win.document.readyState?win.setTimeout(action):jqLite(win).on("load",action)}function getBooleanAttrName(element,name){var booleanAttr=BOOLEAN_ATTR[name.toLowerCase()];return booleanAttr&&BOOLEAN_ELEMENTS[nodeName_(element)]&&booleanAttr}function getAliasedAttrName(element,name){var nodeName=element.nodeName;return("INPUT"===nodeName||"TEXTAREA"===nodeName)&&ALIASED_ATTR[name]}function createEventHandler(element,events){var eventHandler=function(event,type){event.isDefaultPrevented=function(){return event.defaultPrevented};var eventFns=events[type||event.type],eventFnsLength=eventFns?eventFns.length:0;if(eventFnsLength){if(isUndefined(event.immediatePropagationStopped)){var originalStopImmediatePropagation=event.stopImmediatePropagation;event.stopImmediatePropagation=function(){event.immediatePropagationStopped=!0,event.stopPropagation&&event.stopPropagation(),originalStopImmediatePropagation&&originalStopImmediatePropagation.call(event)}}event.isImmediatePropagationStopped=function(){return event.immediatePropagationStopped===!0},eventFnsLength>1&&(eventFns=shallowCopy(eventFns));for(var i=0;eventFnsLength>i;i++)event.isImmediatePropagationStopped()||eventFns[i].call(element,event)}};return eventHandler.elem=element,eventHandler}function $$jqLiteProvider(){this.$get=function(){return extend(JQLite,{hasClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteHasClass(node,classes)},addClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteAddClass(node,classes)},removeClass:function(node,classes){return node.attr&&(node=node[0]),jqLiteRemoveClass(node,classes)}})}}function hashKey(obj,nextUidFn){var key=obj&&obj.$$hashKey;if(key)return"function"==typeof key&&(key=obj.$$hashKey()),key;var objType=typeof obj;return key="function"==objType||"object"==objType&&null!==obj?obj.$$hashKey=objType+":"+(nextUidFn||nextUid)():objType+":"+obj}function HashMap(array,isolatedUid){if(isolatedUid){var uid=0;this.nextUid=function(){return++uid}}forEach(array,this.put,this)}function anonFn(fn){var fnText=fn.toString().replace(STRIP_COMMENTS,""),args=fnText.match(FN_ARGS);return args?"function("+(args[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function annotate(fn,strictDi,name){var $inject,fnText,argDecl,last;if("function"==typeof fn){if(!($inject=fn.$inject)){if($inject=[],fn.length){if(strictDi)throw isString(name)&&name||(name=fn.name||anonFn(fn)),$injectorMinErr("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",name);fnText=fn.toString().replace(STRIP_COMMENTS,""),argDecl=fnText.match(FN_ARGS),forEach(argDecl[1].split(FN_ARG_SPLIT),function(arg){arg.replace(FN_ARG,function(all,underscore,name){$inject.push(name)})})}fn.$inject=$inject}}else isArray(fn)?(last=fn.length-1,assertArgFn(fn[last],"fn"),$inject=fn.slice(0,last)):assertArgFn(fn,"fn",!0);return $inject}function createInjector(modulesToLoad,strictDi){function supportObject(delegate){return function(key,value){return isObject(key)?void forEach(key,reverseParams(delegate)):delegate(key,value)}}function provider(name,provider_){if(assertNotHasOwnProperty(name,"service"),(isFunction(provider_)||isArray(provider_))&&(provider_=providerInjector.instantiate(provider_)),!provider_.$get)throw $injectorMinErr("pget","Provider '{0}' must define $get factory method.",name);return providerCache[name+providerSuffix]=provider_}function enforceReturnValue(name,factory){return function(){var result=instanceInjector.invoke(factory,this);if(isUndefined(result))throw $injectorMinErr("undef","Provider '{0}' must return a value from $get factory method.",name);return result}}function factory(name,factoryFn,enforce){return provider(name,{$get:enforce!==!1?enforceReturnValue(name,factoryFn):factoryFn})}function service(name,constructor){return factory(name,["$injector",function($injector){return $injector.instantiate(constructor)}])}function value(name,val){return factory(name,valueFn(val),!1)}function constant(name,value){assertNotHasOwnProperty(name,"constant"),providerCache[name]=value,instanceCache[name]=value}function decorator(serviceName,decorFn){var origProvider=providerInjector.get(serviceName+providerSuffix),orig$get=origProvider.$get;origProvider.$get=function(){var origInstance=instanceInjector.invoke(orig$get,origProvider);return instanceInjector.invoke(decorFn,null,{$delegate:origInstance})}}function loadModules(modulesToLoad){var moduleFn,runBlocks=[];return forEach(modulesToLoad,function(module){function runInvokeQueue(queue){var i,ii;for(i=0,ii=queue.length;ii>i;i++){var invokeArgs=queue[i],provider=providerInjector.get(invokeArgs[0]);provider[invokeArgs[1]].apply(provider,invokeArgs[2])}}if(!loadedModules.get(module)){loadedModules.put(module,!0);try{isString(module)?(moduleFn=angularModule(module),runBlocks=runBlocks.concat(loadModules(moduleFn.requires)).concat(moduleFn._runBlocks),runInvokeQueue(moduleFn._invokeQueue),runInvokeQueue(moduleFn._configBlocks)):isFunction(module)?runBlocks.push(providerInjector.invoke(module)):isArray(module)?runBlocks.push(providerInjector.invoke(module)):assertArgFn(module,"module")}catch(e){throw isArray(module)&&(module=module[module.length-1]),e.message&&e.stack&&-1==e.stack.indexOf(e.message)&&(e=e.message+"\n"+e.stack),$injectorMinErr("modulerr","Failed to instantiate module {0} due to:\n{1}",module,e.stack||e.message||e)}}}),runBlocks}function createInternalInjector(cache,factory){function getService(serviceName,caller){if(cache.hasOwnProperty(serviceName)){if(cache[serviceName]===INSTANTIATING)throw $injectorMinErr("cdep","Circular dependency found: {0}",serviceName+" <- "+path.join(" <- "));return cache[serviceName]}try{return path.unshift(serviceName),cache[serviceName]=INSTANTIATING,cache[serviceName]=factory(serviceName,caller)}catch(err){throw cache[serviceName]===INSTANTIATING&&delete cache[serviceName],err}finally{path.shift()}}function invoke(fn,self,locals,serviceName){"string"==typeof locals&&(serviceName=locals,locals=null);var length,i,key,args=[],$inject=createInjector.$$annotate(fn,strictDi,serviceName);for(i=0,length=$inject.length;length>i;i++){if(key=$inject[i],"string"!=typeof key)throw $injectorMinErr("itkn","Incorrect injection token! Expected service name as string, got {0}",key);args.push(locals&&locals.hasOwnProperty(key)?locals[key]:getService(key,serviceName))}return isArray(fn)&&(fn=fn[length]),fn.apply(self,args)}function instantiate(Type,locals,serviceName){var instance=Object.create((isArray(Type)?Type[Type.length-1]:Type).prototype||null),returnedValue=invoke(Type,instance,locals,serviceName);return isObject(returnedValue)||isFunction(returnedValue)?returnedValue:instance}return{invoke:invoke,instantiate:instantiate,get:getService,annotate:createInjector.$$annotate,has:function(name){return providerCache.hasOwnProperty(name+providerSuffix)||cache.hasOwnProperty(name)}}}strictDi=strictDi===!0;var INSTANTIATING={},providerSuffix="Provider",path=[],loadedModules=new HashMap([],!0),providerCache={$provide:{provider:supportObject(provider),factory:supportObject(factory),service:supportObject(service),value:supportObject(value),constant:supportObject(constant),decorator:decorator}},providerInjector=providerCache.$injector=createInternalInjector(providerCache,function(serviceName,caller){throw angular.isString(caller)&&path.push(caller),$injectorMinErr("unpr","Unknown provider: {0}",path.join(" <- "))}),instanceCache={},instanceInjector=instanceCache.$injector=createInternalInjector(instanceCache,function(serviceName,caller){var provider=providerInjector.get(serviceName+providerSuffix,caller);return instanceInjector.invoke(provider.$get,provider,undefined,serviceName)});return forEach(loadModules(modulesToLoad),function(fn){instanceInjector.invoke(fn||noop)}),instanceInjector}function $AnchorScrollProvider(){var autoScrollingEnabled=!0;this.disableAutoScrolling=function(){autoScrollingEnabled=!1},this.$get=["$window","$location","$rootScope",function($window,$location,$rootScope){function getFirstAnchor(list){var result=null;return Array.prototype.some.call(list,function(element){return"a"===nodeName_(element)?(result=element,!0):void 0}),result}function getYOffset(){var offset=scroll.yOffset;if(isFunction(offset))offset=offset();else if(isElement(offset)){var elem=offset[0],style=$window.getComputedStyle(elem);offset="fixed"!==style.position?0:elem.getBoundingClientRect().bottom}else isNumber(offset)||(offset=0);return offset}function scrollTo(elem){if(elem){elem.scrollIntoView();var offset=getYOffset();if(offset){var elemTop=elem.getBoundingClientRect().top;$window.scrollBy(0,elemTop-offset)}}else $window.scrollTo(0,0)}function scroll(){var elm,hash=$location.hash();hash?(elm=document.getElementById(hash))?scrollTo(elm):(elm=getFirstAnchor(document.getElementsByName(hash)))?scrollTo(elm):"top"===hash&&scrollTo(null):scrollTo(null)}var document=$window.document;return autoScrollingEnabled&&$rootScope.$watch(function(){return $location.hash()},function(newVal,oldVal){(newVal!==oldVal||""!==newVal)&&jqLiteDocumentLoaded(function(){$rootScope.$evalAsync(scroll)})}),scroll}]}function $$AsyncCallbackProvider(){this.$get=["$$rAF","$timeout",function($$rAF,$timeout){return $$rAF.supported?function(fn){return $$rAF(fn)}:function(fn){return $timeout(fn,0,!1)}}]}function Browser(window,document,$log,$sniffer){function completeOutstandingRequest(fn){try{fn.apply(null,sliceArgs(arguments,1))}finally{if(outstandingRequestCount--,0===outstandingRequestCount)for(;outstandingRequestCallbacks.length;)try{outstandingRequestCallbacks.pop()()}catch(e){$log.error(e)}}}function getHash(url){var index=url.indexOf("#");return-1===index?"":url.substr(index+1)}function startPoller(interval,setTimeout){!function check(){forEach(pollFns,function(pollFn){pollFn()}),pollTimeout=setTimeout(check,interval)}()}function cacheStateAndFireUrlChange(){cacheState(),fireUrlChange()}function getCurrentState(){try{return history.state}catch(e){}}function cacheState(){cachedState=getCurrentState(),cachedState=isUndefined(cachedState)?null:cachedState,equals(cachedState,lastCachedState)&&(cachedState=lastCachedState),lastCachedState=cachedState}function fireUrlChange(){(lastBrowserUrl!==self.url()||lastHistoryState!==cachedState)&&(lastBrowserUrl=self.url(),lastHistoryState=cachedState,forEach(urlChangeListeners,function(listener){listener(self.url(),cachedState)}))}function safeDecodeURIComponent(str){try{return decodeURIComponent(str)}catch(e){return str}}var self=this,rawDocument=document[0],location=window.location,history=window.history,setTimeout=window.setTimeout,clearTimeout=window.clearTimeout,pendingDeferIds={};self.isMock=!1;var outstandingRequestCount=0,outstandingRequestCallbacks=[];self.$$completeOutstandingRequest=completeOutstandingRequest,self.$$incOutstandingRequestCount=function(){outstandingRequestCount++},self.notifyWhenNoOutstandingRequests=function(callback){forEach(pollFns,function(pollFn){pollFn()}),0===outstandingRequestCount?callback():outstandingRequestCallbacks.push(callback)};var pollTimeout,pollFns=[];self.addPollFn=function(fn){return isUndefined(pollTimeout)&&startPoller(100,setTimeout),pollFns.push(fn),fn};var cachedState,lastHistoryState,lastBrowserUrl=location.href,baseElement=document.find("base"),reloadLocation=null;cacheState(),lastHistoryState=cachedState,self.url=function(url,replace,state){if(isUndefined(state)&&(state=null),location!==window.location&&(location=window.location),history!==window.history&&(history=window.history),url){var sameState=lastHistoryState===state;if(lastBrowserUrl===url&&(!$sniffer.history||sameState))return self;var sameBase=lastBrowserUrl&&stripHash(lastBrowserUrl)===stripHash(url);return lastBrowserUrl=url,lastHistoryState=state,!$sniffer.history||sameBase&&sameState?(sameBase||(reloadLocation=url),replace?location.replace(url):sameBase?location.hash=getHash(url):location.href=url):(history[replace?"replaceState":"pushState"](state,"",url),cacheState(),lastHistoryState=cachedState),self}return reloadLocation||location.href.replace(/%27/g,"'")},self.state=function(){return cachedState};var urlChangeListeners=[],urlChangeInit=!1,lastCachedState=null;self.onUrlChange=function(callback){return urlChangeInit||($sniffer.history&&jqLite(window).on("popstate",cacheStateAndFireUrlChange),jqLite(window).on("hashchange",cacheStateAndFireUrlChange),urlChangeInit=!0),urlChangeListeners.push(callback),callback},self.$$checkUrlChange=fireUrlChange,self.baseHref=function(){var href=baseElement.attr("href");return href?href.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var lastCookies={},lastCookieString="",cookiePath=self.baseHref();self.cookies=function(name,value){var cookieLength,cookieArray,cookie,i,index;if(!name){if(rawDocument.cookie!==lastCookieString)for(lastCookieString=rawDocument.cookie,cookieArray=lastCookieString.split("; "),lastCookies={},i=0;i<cookieArray.length;i++)cookie=cookieArray[i],index=cookie.indexOf("="),index>0&&(name=safeDecodeURIComponent(cookie.substring(0,index)),lastCookies[name]===undefined&&(lastCookies[name]=safeDecodeURIComponent(cookie.substring(index+1))));return lastCookies}value===undefined?rawDocument.cookie=encodeURIComponent(name)+"=;path="+cookiePath+";expires=Thu, 01 Jan 1970 00:00:00 GMT":isString(value)&&(cookieLength=(rawDocument.cookie=encodeURIComponent(name)+"="+encodeURIComponent(value)+";path="+cookiePath).length+1,cookieLength>4096&&$log.warn("Cookie '"+name+"' possibly not set or overflowed because it was too large ("+cookieLength+" > 4096 bytes)!"))},self.defer=function(fn,delay){var timeoutId;return outstandingRequestCount++,timeoutId=setTimeout(function(){delete pendingDeferIds[timeoutId],completeOutstandingRequest(fn)},delay||0),pendingDeferIds[timeoutId]=!0,timeoutId},self.defer.cancel=function(deferId){return pendingDeferIds[deferId]?(delete pendingDeferIds[deferId],clearTimeout(deferId),completeOutstandingRequest(noop),!0):!1}}function $BrowserProvider(){this.$get=["$window","$log","$sniffer","$document",function($window,$log,$sniffer,$document){return new Browser($window,$document,$log,$sniffer)}]}function $CacheFactoryProvider(){this.$get=function(){function cacheFactory(cacheId,options){function refresh(entry){entry!=freshEnd&&(staleEnd?staleEnd==entry&&(staleEnd=entry.n):staleEnd=entry,link(entry.n,entry.p),link(entry,freshEnd),freshEnd=entry,freshEnd.n=null)}function link(nextEntry,prevEntry){nextEntry!=prevEntry&&(nextEntry&&(nextEntry.p=prevEntry),prevEntry&&(prevEntry.n=nextEntry))}if(cacheId in caches)throw minErr("$cacheFactory")("iid","CacheId '{0}' is already taken!",cacheId);var size=0,stats=extend({},options,{id:cacheId}),data={},capacity=options&&options.capacity||Number.MAX_VALUE,lruHash={},freshEnd=null,staleEnd=null;return caches[cacheId]={put:function(key,value){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key]||(lruHash[key]={key:key});refresh(lruEntry)}if(!isUndefined(value))return key in data||size++,data[key]=value,size>capacity&&this.remove(staleEnd.key),value},get:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;refresh(lruEntry)}return data[key]},remove:function(key){if(capacity<Number.MAX_VALUE){var lruEntry=lruHash[key];if(!lruEntry)return;lruEntry==freshEnd&&(freshEnd=lruEntry.p),lruEntry==staleEnd&&(staleEnd=lruEntry.n),link(lruEntry.n,lruEntry.p),delete lruHash[key]}delete data[key],size--},removeAll:function(){data={},size=0,lruHash={},freshEnd=staleEnd=null},destroy:function(){data=null,stats=null,lruHash=null,delete caches[cacheId]},info:function(){return extend({},stats,{size:size})}}}var caches={};return cacheFactory.info=function(){var info={};return forEach(caches,function(cache,cacheId){info[cacheId]=cache.info()}),info},cacheFactory.get=function(cacheId){return caches[cacheId]},cacheFactory}}function $TemplateCacheProvider(){this.$get=["$cacheFactory",function($cacheFactory){
return $cacheFactory("templates")}]}function $CompileProvider($provide,$$sanitizeUriProvider){function parseIsolateBindings(scope,directiveName){var LOCAL_REGEXP=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,bindings={};return forEach(scope,function(definition,scopeName){var match=definition.match(LOCAL_REGEXP);if(!match)throw $compileMinErr("iscp","Invalid isolate scope definition for directive '{0}'. Definition: {... {1}: '{2}' ...}",directiveName,scopeName,definition);bindings[scopeName]={mode:match[1][0],collection:"*"===match[2],optional:"?"===match[3],attrName:match[4]||scopeName}}),bindings}var hasDirectives={},Suffix="Directive",COMMENT_DIRECTIVE_REGEXP=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,CLASS_DIRECTIVE_REGEXP=/(([\w\-]+)(?:\:([^;]+))?;?)/,ALL_OR_NOTHING_ATTRS=makeMap("ngSrc,ngSrcset,src,srcset"),REQUIRE_PREFIX_REGEXP=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,EVENT_HANDLER_ATTR_REGEXP=/^(on[a-z]+|formaction)$/;this.directive=function registerDirective(name,directiveFactory){return assertNotHasOwnProperty(name,"directive"),isString(name)?(assertArg(directiveFactory,"directiveFactory"),hasDirectives.hasOwnProperty(name)||(hasDirectives[name]=[],$provide.factory(name+Suffix,["$injector","$exceptionHandler",function($injector,$exceptionHandler){var directives=[];return forEach(hasDirectives[name],function(directiveFactory,index){try{var directive=$injector.invoke(directiveFactory);isFunction(directive)?directive={compile:valueFn(directive)}:!directive.compile&&directive.link&&(directive.compile=valueFn(directive.link)),directive.priority=directive.priority||0,directive.index=index,directive.name=directive.name||name,directive.require=directive.require||directive.controller&&directive.name,directive.restrict=directive.restrict||"EA",isObject(directive.scope)&&(directive.$$isolateBindings=parseIsolateBindings(directive.scope,directive.name)),directives.push(directive)}catch(e){$exceptionHandler(e)}}),directives}])),hasDirectives[name].push(directiveFactory)):forEach(name,reverseParams(registerDirective)),this},this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.aHrefSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?($$sanitizeUriProvider.imgSrcSanitizationWhitelist(regexp),this):$$sanitizeUriProvider.imgSrcSanitizationWhitelist()};var debugInfoEnabled=!0;this.debugInfoEnabled=function(enabled){return isDefined(enabled)?(debugInfoEnabled=enabled,this):debugInfoEnabled},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function($injector,$interpolate,$exceptionHandler,$templateRequest,$parse,$controller,$rootScope,$document,$sce,$animate,$$sanitizeUri){function safeAddClass($element,className){try{$element.addClass(className)}catch(e){}}function compile($compileNodes,transcludeFn,maxPriority,ignoreDirective,previousCompileContext){$compileNodes instanceof jqLite||($compileNodes=jqLite($compileNodes)),forEach($compileNodes,function(node,index){node.nodeType==NODE_TYPE_TEXT&&node.nodeValue.match(/\S+/)&&($compileNodes[index]=jqLite(node).wrap("<span></span>").parent()[0])});var compositeLinkFn=compileNodes($compileNodes,transcludeFn,$compileNodes,maxPriority,ignoreDirective,previousCompileContext);compile.$$addScopeClass($compileNodes);var namespace=null;return function(scope,cloneConnectFn,options){assertArg(scope,"scope"),options=options||{};var parentBoundTranscludeFn=options.parentBoundTranscludeFn,transcludeControllers=options.transcludeControllers,futureParentElement=options.futureParentElement;parentBoundTranscludeFn&&parentBoundTranscludeFn.$$boundTransclude&&(parentBoundTranscludeFn=parentBoundTranscludeFn.$$boundTransclude),namespace||(namespace=detectNamespaceForChildElements(futureParentElement));var $linkNode;if($linkNode="html"!==namespace?jqLite(wrapTemplate(namespace,jqLite("<div>").append($compileNodes).html())):cloneConnectFn?JQLitePrototype.clone.call($compileNodes):$compileNodes,transcludeControllers)for(var controllerName in transcludeControllers)$linkNode.data("$"+controllerName+"Controller",transcludeControllers[controllerName].instance);return compile.$$addScopeInfo($linkNode,scope),cloneConnectFn&&cloneConnectFn($linkNode,scope),compositeLinkFn&&compositeLinkFn(scope,$linkNode,$linkNode,parentBoundTranscludeFn),$linkNode}}function detectNamespaceForChildElements(parentElement){var node=parentElement&&parentElement[0];return node&&"foreignobject"!==nodeName_(node)&&node.toString().match(/SVG/)?"svg":"html"}function compileNodes(nodeList,transcludeFn,$rootElement,maxPriority,ignoreDirective,previousCompileContext){function compositeLinkFn(scope,nodeList,$rootElement,parentBoundTranscludeFn){var nodeLinkFn,childLinkFn,node,childScope,i,ii,idx,childBoundTranscludeFn,stableNodeList;if(nodeLinkFnFound){var nodeListLength=nodeList.length;for(stableNodeList=new Array(nodeListLength),i=0;i<linkFns.length;i+=3)idx=linkFns[i],stableNodeList[idx]=nodeList[idx]}else stableNodeList=nodeList;for(i=0,ii=linkFns.length;ii>i;)node=stableNodeList[linkFns[i++]],nodeLinkFn=linkFns[i++],childLinkFn=linkFns[i++],nodeLinkFn?(nodeLinkFn.scope?(childScope=scope.$new(),compile.$$addScopeInfo(jqLite(node),childScope)):childScope=scope,childBoundTranscludeFn=nodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,nodeLinkFn.transclude,parentBoundTranscludeFn,nodeLinkFn.elementTranscludeOnThisElement):!nodeLinkFn.templateOnThisElement&&parentBoundTranscludeFn?parentBoundTranscludeFn:!parentBoundTranscludeFn&&transcludeFn?createBoundTranscludeFn(scope,transcludeFn):null,nodeLinkFn(childLinkFn,childScope,node,$rootElement,childBoundTranscludeFn)):childLinkFn&&childLinkFn(scope,node.childNodes,undefined,parentBoundTranscludeFn)}for(var attrs,directives,nodeLinkFn,childNodes,childLinkFn,linkFnFound,nodeLinkFnFound,linkFns=[],i=0;i<nodeList.length;i++)attrs=new Attributes,directives=collectDirectives(nodeList[i],[],attrs,0===i?maxPriority:undefined,ignoreDirective),nodeLinkFn=directives.length?applyDirectivesToNode(directives,nodeList[i],attrs,transcludeFn,$rootElement,null,[],[],previousCompileContext):null,nodeLinkFn&&nodeLinkFn.scope&&compile.$$addScopeClass(attrs.$$element),childLinkFn=nodeLinkFn&&nodeLinkFn.terminal||!(childNodes=nodeList[i].childNodes)||!childNodes.length?null:compileNodes(childNodes,nodeLinkFn?(nodeLinkFn.transcludeOnThisElement||!nodeLinkFn.templateOnThisElement)&&nodeLinkFn.transclude:transcludeFn),(nodeLinkFn||childLinkFn)&&(linkFns.push(i,nodeLinkFn,childLinkFn),linkFnFound=!0,nodeLinkFnFound=nodeLinkFnFound||nodeLinkFn),previousCompileContext=null;return linkFnFound?compositeLinkFn:null}function createBoundTranscludeFn(scope,transcludeFn,previousBoundTranscludeFn,elementTransclusion){var boundTranscludeFn=function(transcludedScope,cloneFn,controllers,futureParentElement,containingScope){return transcludedScope||(transcludedScope=scope.$new(!1,containingScope),transcludedScope.$$transcluded=!0),transcludeFn(transcludedScope,cloneFn,{parentBoundTranscludeFn:previousBoundTranscludeFn,transcludeControllers:controllers,futureParentElement:futureParentElement})};return boundTranscludeFn}function collectDirectives(node,directives,attrs,maxPriority,ignoreDirective){var match,className,nodeType=node.nodeType,attrsMap=attrs.$attr;switch(nodeType){case NODE_TYPE_ELEMENT:addDirective(directives,directiveNormalize(nodeName_(node)),"E",maxPriority,ignoreDirective);for(var attr,name,nName,ngAttrName,value,isNgAttr,nAttrs=node.attributes,j=0,jj=nAttrs&&nAttrs.length;jj>j;j++){var attrStartName=!1,attrEndName=!1;attr=nAttrs[j],name=attr.name,value=trim(attr.value),ngAttrName=directiveNormalize(name),(isNgAttr=NG_ATTR_BINDING.test(ngAttrName))&&(name=name.replace(PREFIX_REGEXP,"").substr(8).replace(/_(.)/g,function(match,letter){return letter.toUpperCase()}));var directiveNName=ngAttrName.replace(/(Start|End)$/,"");directiveIsMultiElement(directiveNName)&&ngAttrName===directiveNName+"Start"&&(attrStartName=name,attrEndName=name.substr(0,name.length-5)+"end",name=name.substr(0,name.length-6)),nName=directiveNormalize(name.toLowerCase()),attrsMap[nName]=name,(isNgAttr||!attrs.hasOwnProperty(nName))&&(attrs[nName]=value,getBooleanAttrName(node,nName)&&(attrs[nName]=!0)),addAttrInterpolateDirective(node,directives,value,nName,isNgAttr),addDirective(directives,nName,"A",maxPriority,ignoreDirective,attrStartName,attrEndName)}if(className=node.className,isObject(className)&&(className=className.animVal),isString(className)&&""!==className)for(;match=CLASS_DIRECTIVE_REGEXP.exec(className);)nName=directiveNormalize(match[2]),addDirective(directives,nName,"C",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[3])),className=className.substr(match.index+match[0].length);break;case NODE_TYPE_TEXT:addTextInterpolateDirective(directives,node.nodeValue);break;case NODE_TYPE_COMMENT:try{match=COMMENT_DIRECTIVE_REGEXP.exec(node.nodeValue),match&&(nName=directiveNormalize(match[1]),addDirective(directives,nName,"M",maxPriority,ignoreDirective)&&(attrs[nName]=trim(match[2])))}catch(e){}}return directives.sort(byPriority),directives}function groupScan(node,attrStart,attrEnd){var nodes=[],depth=0;if(attrStart&&node.hasAttribute&&node.hasAttribute(attrStart)){do{if(!node)throw $compileMinErr("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",attrStart,attrEnd);node.nodeType==NODE_TYPE_ELEMENT&&(node.hasAttribute(attrStart)&&depth++,node.hasAttribute(attrEnd)&&depth--),nodes.push(node),node=node.nextSibling}while(depth>0)}else nodes.push(node);return jqLite(nodes)}function groupElementsLinkFnWrapper(linkFn,attrStart,attrEnd){return function(scope,element,attrs,controllers,transcludeFn){return element=groupScan(element[0],attrStart,attrEnd),linkFn(scope,element,attrs,controllers,transcludeFn)}}function applyDirectivesToNode(directives,compileNode,templateAttrs,transcludeFn,jqCollection,originalReplaceDirective,preLinkFns,postLinkFns,previousCompileContext){function addLinkFns(pre,post,attrStart,attrEnd){pre&&(attrStart&&(pre=groupElementsLinkFnWrapper(pre,attrStart,attrEnd)),pre.require=directive.require,pre.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(pre=cloneAndAnnotateFn(pre,{isolateScope:!0})),preLinkFns.push(pre)),post&&(attrStart&&(post=groupElementsLinkFnWrapper(post,attrStart,attrEnd)),post.require=directive.require,post.directiveName=directiveName,(newIsolateScopeDirective===directive||directive.$$isolateScope)&&(post=cloneAndAnnotateFn(post,{isolateScope:!0})),postLinkFns.push(post))}function getControllers(directiveName,require,$element,elementControllers){var value,match,retrievalMethod="data",optional=!1,$searchElement=$element;if(isString(require)){if(match=require.match(REQUIRE_PREFIX_REGEXP),require=require.substring(match[0].length),match[3]&&(match[1]?match[3]=null:match[1]=match[3]),"^"===match[1]?retrievalMethod="inheritedData":"^^"===match[1]&&(retrievalMethod="inheritedData",$searchElement=$element.parent()),"?"===match[2]&&(optional=!0),value=null,elementControllers&&"data"===retrievalMethod&&(value=elementControllers[require])&&(value=value.instance),value=value||$searchElement[retrievalMethod]("$"+require+"Controller"),!value&&!optional)throw $compileMinErr("ctreq","Controller '{0}', required by directive '{1}', can't be found!",require,directiveName);return value||null}return isArray(require)&&(value=[],forEach(require,function(require){value.push(getControllers(directiveName,require,$element,elementControllers))})),value}function nodeLinkFn(childLinkFn,scope,linkNode,$rootElement,boundTranscludeFn){function controllersBoundTransclude(scope,cloneAttachFn,futureParentElement){var transcludeControllers;return isScope(scope)||(futureParentElement=cloneAttachFn,cloneAttachFn=scope,scope=undefined),hasElementTranscludeDirective&&(transcludeControllers=elementControllers),futureParentElement||(futureParentElement=hasElementTranscludeDirective?$element.parent():$element),boundTranscludeFn(scope,cloneAttachFn,transcludeControllers,futureParentElement,scopeToChild)}var i,ii,linkFn,controller,isolateScope,elementControllers,transcludeFn,$element,attrs;if(compileNode===linkNode?(attrs=templateAttrs,$element=templateAttrs.$$element):($element=jqLite(linkNode),attrs=new Attributes($element,templateAttrs)),newIsolateScopeDirective&&(isolateScope=scope.$new(!0)),boundTranscludeFn&&(transcludeFn=controllersBoundTransclude,transcludeFn.$$boundTransclude=boundTranscludeFn),controllerDirectives&&(controllers={},elementControllers={},forEach(controllerDirectives,function(directive){var controllerInstance,locals={$scope:directive===newIsolateScopeDirective||directive.$$isolateScope?isolateScope:scope,$element:$element,$attrs:attrs,$transclude:transcludeFn};controller=directive.controller,"@"==controller&&(controller=attrs[directive.name]),controllerInstance=$controller(controller,locals,!0,directive.controllerAs),elementControllers[directive.name]=controllerInstance,hasElementTranscludeDirective||$element.data("$"+directive.name+"Controller",controllerInstance.instance),controllers[directive.name]=controllerInstance})),newIsolateScopeDirective){compile.$$addScopeInfo($element,isolateScope,!0,!(templateDirective&&(templateDirective===newIsolateScopeDirective||templateDirective===newIsolateScopeDirective.$$originalDirective))),compile.$$addScopeClass($element,!0);var isolateScopeController=controllers&&controllers[newIsolateScopeDirective.name],isolateBindingContext=isolateScope;isolateScopeController&&isolateScopeController.identifier&&newIsolateScopeDirective.bindToController===!0&&(isolateBindingContext=isolateScopeController.instance),forEach(isolateScope.$$isolateBindings=newIsolateScopeDirective.$$isolateBindings,function(definition,scopeName){var lastValue,parentGet,parentSet,compare,attrName=definition.attrName,optional=definition.optional,mode=definition.mode;switch(mode){case"@":attrs.$observe(attrName,function(value){isolateBindingContext[scopeName]=value}),attrs.$$observers[attrName].$$scope=scope,attrs[attrName]&&(isolateBindingContext[scopeName]=$interpolate(attrs[attrName])(scope));break;case"=":if(optional&&!attrs[attrName])return;parentGet=$parse(attrs[attrName]),compare=parentGet.literal?equals:function(a,b){return a===b||a!==a&&b!==b},parentSet=parentGet.assign||function(){throw lastValue=isolateBindingContext[scopeName]=parentGet(scope),$compileMinErr("nonassign","Expression '{0}' used with directive '{1}' is non-assignable!",attrs[attrName],newIsolateScopeDirective.name)},lastValue=isolateBindingContext[scopeName]=parentGet(scope);var parentValueWatch=function(parentValue){return compare(parentValue,isolateBindingContext[scopeName])||(compare(parentValue,lastValue)?parentSet(scope,parentValue=isolateBindingContext[scopeName]):isolateBindingContext[scopeName]=parentValue),lastValue=parentValue};parentValueWatch.$stateful=!0;var unwatch;unwatch=definition.collection?scope.$watchCollection(attrs[attrName],parentValueWatch):scope.$watch($parse(attrs[attrName],parentValueWatch),null,parentGet.literal),isolateScope.$on("$destroy",unwatch);break;case"&":parentGet=$parse(attrs[attrName]),isolateBindingContext[scopeName]=function(locals){return parentGet(scope,locals)}}})}for(controllers&&(forEach(controllers,function(controller){controller()}),controllers=null),i=0,ii=preLinkFns.length;ii>i;i++)linkFn=preLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn);var scopeToChild=scope;for(newIsolateScopeDirective&&(newIsolateScopeDirective.template||null===newIsolateScopeDirective.templateUrl)&&(scopeToChild=isolateScope),childLinkFn&&childLinkFn(scopeToChild,linkNode.childNodes,undefined,boundTranscludeFn),i=postLinkFns.length-1;i>=0;i--)linkFn=postLinkFns[i],invokeLinkFn(linkFn,linkFn.isolateScope?isolateScope:scope,$element,attrs,linkFn.require&&getControllers(linkFn.directiveName,linkFn.require,$element,elementControllers),transcludeFn)}previousCompileContext=previousCompileContext||{};for(var newScopeDirective,controllers,directive,directiveName,$template,linkFn,directiveValue,terminalPriority=-Number.MAX_VALUE,controllerDirectives=previousCompileContext.controllerDirectives,newIsolateScopeDirective=previousCompileContext.newIsolateScopeDirective,templateDirective=previousCompileContext.templateDirective,nonTlbTranscludeDirective=previousCompileContext.nonTlbTranscludeDirective,hasTranscludeDirective=!1,hasTemplate=!1,hasElementTranscludeDirective=previousCompileContext.hasElementTranscludeDirective,$compileNode=templateAttrs.$$element=jqLite(compileNode),replaceDirective=originalReplaceDirective,childTranscludeFn=transcludeFn,i=0,ii=directives.length;ii>i;i++){directive=directives[i];var attrStart=directive.$$start,attrEnd=directive.$$end;if(attrStart&&($compileNode=groupScan(compileNode,attrStart,attrEnd)),$template=undefined,terminalPriority>directive.priority)break;if((directiveValue=directive.scope)&&(directive.templateUrl||(isObject(directiveValue)?(assertNoDuplicate("new/isolated scope",newIsolateScopeDirective||newScopeDirective,directive,$compileNode),newIsolateScopeDirective=directive):assertNoDuplicate("new/isolated scope",newIsolateScopeDirective,directive,$compileNode)),newScopeDirective=newScopeDirective||directive),directiveName=directive.name,!directive.templateUrl&&directive.controller&&(directiveValue=directive.controller,controllerDirectives=controllerDirectives||{},assertNoDuplicate("'"+directiveName+"' controller",controllerDirectives[directiveName],directive,$compileNode),controllerDirectives[directiveName]=directive),(directiveValue=directive.transclude)&&(hasTranscludeDirective=!0,directive.$$tlb||(assertNoDuplicate("transclusion",nonTlbTranscludeDirective,directive,$compileNode),nonTlbTranscludeDirective=directive),"element"==directiveValue?(hasElementTranscludeDirective=!0,terminalPriority=directive.priority,$template=$compileNode,$compileNode=templateAttrs.$$element=jqLite(document.createComment(" "+directiveName+": "+templateAttrs[directiveName]+" ")),compileNode=$compileNode[0],replaceWith(jqCollection,sliceArgs($template),compileNode),childTranscludeFn=compile($template,transcludeFn,terminalPriority,replaceDirective&&replaceDirective.name,{nonTlbTranscludeDirective:nonTlbTranscludeDirective})):($template=jqLite(jqLiteClone(compileNode)).contents(),$compileNode.empty(),childTranscludeFn=compile($template,transcludeFn))),directive.template)if(hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directiveValue=isFunction(directive.template)?directive.template($compileNode,templateAttrs):directive.template,directiveValue=denormalizeTemplate(directiveValue),directive.replace){if(replaceDirective=directive,$template=jqLiteIsTextNode(directiveValue)?[]:removeComments(wrapTemplate(directive.templateNamespace,trim(directiveValue))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",directiveName,"");replaceWith(jqCollection,$compileNode,compileNode);var newTemplateAttrs={$attr:{}},templateDirectives=collectDirectives(compileNode,[],newTemplateAttrs),unprocessedDirectives=directives.splice(i+1,directives.length-(i+1));newIsolateScopeDirective&&markDirectivesAsIsolate(templateDirectives),directives=directives.concat(templateDirectives).concat(unprocessedDirectives),mergeTemplateAttributes(templateAttrs,newTemplateAttrs),ii=directives.length}else $compileNode.html(directiveValue);if(directive.templateUrl)hasTemplate=!0,assertNoDuplicate("template",templateDirective,directive,$compileNode),templateDirective=directive,directive.replace&&(replaceDirective=directive),nodeLinkFn=compileTemplateUrl(directives.splice(i,directives.length-i),$compileNode,templateAttrs,jqCollection,hasTranscludeDirective&&childTranscludeFn,preLinkFns,postLinkFns,{controllerDirectives:controllerDirectives,newIsolateScopeDirective:newIsolateScopeDirective,templateDirective:templateDirective,nonTlbTranscludeDirective:nonTlbTranscludeDirective}),ii=directives.length;else if(directive.compile)try{linkFn=directive.compile($compileNode,templateAttrs,childTranscludeFn),isFunction(linkFn)?addLinkFns(null,linkFn,attrStart,attrEnd):linkFn&&addLinkFns(linkFn.pre,linkFn.post,attrStart,attrEnd)}catch(e){$exceptionHandler(e,startingTag($compileNode))}directive.terminal&&(nodeLinkFn.terminal=!0,terminalPriority=Math.max(terminalPriority,directive.priority))}return nodeLinkFn.scope=newScopeDirective&&newScopeDirective.scope===!0,nodeLinkFn.transcludeOnThisElement=hasTranscludeDirective,nodeLinkFn.elementTranscludeOnThisElement=hasElementTranscludeDirective,nodeLinkFn.templateOnThisElement=hasTemplate,nodeLinkFn.transclude=childTranscludeFn,previousCompileContext.hasElementTranscludeDirective=hasElementTranscludeDirective,nodeLinkFn}function markDirectivesAsIsolate(directives){for(var j=0,jj=directives.length;jj>j;j++)directives[j]=inherit(directives[j],{$$isolateScope:!0})}function addDirective(tDirectives,name,location,maxPriority,ignoreDirective,startAttrName,endAttrName){if(name===ignoreDirective)return null;var match=null;if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)try{directive=directives[i],(maxPriority===undefined||maxPriority>directive.priority)&&-1!=directive.restrict.indexOf(location)&&(startAttrName&&(directive=inherit(directive,{$$start:startAttrName,$$end:endAttrName})),tDirectives.push(directive),match=directive)}catch(e){$exceptionHandler(e)}return match}function directiveIsMultiElement(name){if(hasDirectives.hasOwnProperty(name))for(var directive,directives=$injector.get(name+Suffix),i=0,ii=directives.length;ii>i;i++)if(directive=directives[i],directive.multiElement)return!0;return!1}function mergeTemplateAttributes(dst,src){var srcAttr=src.$attr,dstAttr=dst.$attr,$element=dst.$$element;forEach(dst,function(value,key){"$"!=key.charAt(0)&&(src[key]&&src[key]!==value&&(value+=("style"===key?";":" ")+src[key]),dst.$set(key,value,!0,srcAttr[key]))}),forEach(src,function(value,key){"class"==key?(safeAddClass($element,value),dst["class"]=(dst["class"]?dst["class"]+" ":"")+value):"style"==key?($element.attr("style",$element.attr("style")+";"+value),dst.style=(dst.style?dst.style+";":"")+value):"$"==key.charAt(0)||dst.hasOwnProperty(key)||(dst[key]=value,dstAttr[key]=srcAttr[key])})}function compileTemplateUrl(directives,$compileNode,tAttrs,$rootElement,childTranscludeFn,preLinkFns,postLinkFns,previousCompileContext){var afterTemplateNodeLinkFn,afterTemplateChildLinkFn,linkQueue=[],beforeTemplateCompileNode=$compileNode[0],origAsyncDirective=directives.shift(),derivedSyncDirective=inherit(origAsyncDirective,{templateUrl:null,transclude:null,replace:null,$$originalDirective:origAsyncDirective}),templateUrl=isFunction(origAsyncDirective.templateUrl)?origAsyncDirective.templateUrl($compileNode,tAttrs):origAsyncDirective.templateUrl,templateNamespace=origAsyncDirective.templateNamespace;return $compileNode.empty(),$templateRequest($sce.getTrustedResourceUrl(templateUrl)).then(function(content){var compileNode,tempTemplateAttrs,$template,childBoundTranscludeFn;if(content=denormalizeTemplate(content),origAsyncDirective.replace){if($template=jqLiteIsTextNode(content)?[]:removeComments(wrapTemplate(templateNamespace,trim(content))),compileNode=$template[0],1!=$template.length||compileNode.nodeType!==NODE_TYPE_ELEMENT)throw $compileMinErr("tplrt","Template for directive '{0}' must have exactly one root element. {1}",origAsyncDirective.name,templateUrl);tempTemplateAttrs={$attr:{}},replaceWith($rootElement,$compileNode,compileNode);var templateDirectives=collectDirectives(compileNode,[],tempTemplateAttrs);isObject(origAsyncDirective.scope)&&markDirectivesAsIsolate(templateDirectives),directives=templateDirectives.concat(directives),mergeTemplateAttributes(tAttrs,tempTemplateAttrs)}else compileNode=beforeTemplateCompileNode,$compileNode.html(content);for(directives.unshift(derivedSyncDirective),afterTemplateNodeLinkFn=applyDirectivesToNode(directives,compileNode,tAttrs,childTranscludeFn,$compileNode,origAsyncDirective,preLinkFns,postLinkFns,previousCompileContext),forEach($rootElement,function(node,i){node==compileNode&&($rootElement[i]=$compileNode[0])}),afterTemplateChildLinkFn=compileNodes($compileNode[0].childNodes,childTranscludeFn);linkQueue.length;){var scope=linkQueue.shift(),beforeTemplateLinkNode=linkQueue.shift(),linkRootElement=linkQueue.shift(),boundTranscludeFn=linkQueue.shift(),linkNode=$compileNode[0];if(!scope.$$destroyed){if(beforeTemplateLinkNode!==beforeTemplateCompileNode){var oldClasses=beforeTemplateLinkNode.className;previousCompileContext.hasElementTranscludeDirective&&origAsyncDirective.replace||(linkNode=jqLiteClone(compileNode)),replaceWith(linkRootElement,jqLite(beforeTemplateLinkNode),linkNode),safeAddClass(jqLite(linkNode),oldClasses)}childBoundTranscludeFn=afterTemplateNodeLinkFn.transcludeOnThisElement?createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn):boundTranscludeFn,afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,linkNode,$rootElement,childBoundTranscludeFn)}}linkQueue=null}),function(ignoreChildLinkFn,scope,node,rootElement,boundTranscludeFn){var childBoundTranscludeFn=boundTranscludeFn;scope.$$destroyed||(linkQueue?linkQueue.push(scope,node,rootElement,childBoundTranscludeFn):(afterTemplateNodeLinkFn.transcludeOnThisElement&&(childBoundTranscludeFn=createBoundTranscludeFn(scope,afterTemplateNodeLinkFn.transclude,boundTranscludeFn)),afterTemplateNodeLinkFn(afterTemplateChildLinkFn,scope,node,rootElement,childBoundTranscludeFn)))}}function byPriority(a,b){var diff=b.priority-a.priority;return 0!==diff?diff:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function assertNoDuplicate(what,previousDirective,directive,element){if(previousDirective)throw $compileMinErr("multidir","Multiple directives [{0}, {1}] asking for {2} on: {3}",previousDirective.name,directive.name,what,startingTag(element))}function addTextInterpolateDirective(directives,text){var interpolateFn=$interpolate(text,!0);interpolateFn&&directives.push({priority:0,compile:function(templateNode){var templateNodeParent=templateNode.parent(),hasCompileParent=!!templateNodeParent.length;return hasCompileParent&&compile.$$addBindingClass(templateNodeParent),function(scope,node){var parent=node.parent();hasCompileParent||compile.$$addBindingClass(parent),compile.$$addBindingInfo(parent,interpolateFn.expressions),scope.$watch(interpolateFn,function(value){node[0].nodeValue=value})}}})}function wrapTemplate(type,template){switch(type=lowercase(type||"html")){case"svg":case"math":var wrapper=document.createElement("div");return wrapper.innerHTML="<"+type+">"+template+"</"+type+">",wrapper.childNodes[0].childNodes;default:return template}}function getTrustedContext(node,attrNormalizedName){if("srcdoc"==attrNormalizedName)return $sce.HTML;var tag=nodeName_(node);return"xlinkHref"==attrNormalizedName||"form"==tag&&"action"==attrNormalizedName||"img"!=tag&&("src"==attrNormalizedName||"ngSrc"==attrNormalizedName)?$sce.RESOURCE_URL:void 0}function addAttrInterpolateDirective(node,directives,value,name,allOrNothing){var trustedContext=getTrustedContext(node,name);allOrNothing=ALL_OR_NOTHING_ATTRS[name]||allOrNothing;var interpolateFn=$interpolate(value,!0,trustedContext,allOrNothing);if(interpolateFn){if("multiple"===name&&"select"===nodeName_(node))throw $compileMinErr("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",startingTag(node));directives.push({priority:100,compile:function(){return{pre:function(scope,element,attr){var $$observers=attr.$$observers||(attr.$$observers={});if(EVENT_HANDLER_ATTR_REGEXP.test(name))throw $compileMinErr("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var newValue=attr[name];newValue!==value&&(interpolateFn=newValue&&$interpolate(newValue,!0,trustedContext,allOrNothing),value=newValue),interpolateFn&&(attr[name]=interpolateFn(scope),($$observers[name]||($$observers[name]=[])).$$inter=!0,(attr.$$observers&&attr.$$observers[name].$$scope||scope).$watch(interpolateFn,function(newValue,oldValue){"class"===name&&newValue!=oldValue?attr.$updateClass(newValue,oldValue):attr.$set(name,newValue)}))}}}})}}function replaceWith($rootElement,elementsToRemove,newNode){var i,ii,firstElementToRemove=elementsToRemove[0],removeCount=elementsToRemove.length,parent=firstElementToRemove.parentNode;if($rootElement)for(i=0,ii=$rootElement.length;ii>i;i++)if($rootElement[i]==firstElementToRemove){$rootElement[i++]=newNode;for(var j=i,j2=j+removeCount-1,jj=$rootElement.length;jj>j;j++,j2++)jj>j2?$rootElement[j]=$rootElement[j2]:delete $rootElement[j];$rootElement.length-=removeCount-1,$rootElement.context===firstElementToRemove&&($rootElement.context=newNode);break}parent&&parent.replaceChild(newNode,firstElementToRemove);var fragment=document.createDocumentFragment();fragment.appendChild(firstElementToRemove),jqLite(newNode).data(jqLite(firstElementToRemove).data()),jQuery?(skipDestroyOnNextJQueryCleanData=!0,jQuery.cleanData([firstElementToRemove])):delete jqLite.cache[firstElementToRemove[jqLite.expando]];for(var k=1,kk=elementsToRemove.length;kk>k;k++){var element=elementsToRemove[k];jqLite(element).remove(),fragment.appendChild(element),delete elementsToRemove[k]}elementsToRemove[0]=newNode,elementsToRemove.length=1}function cloneAndAnnotateFn(fn,annotation){return extend(function(){return fn.apply(null,arguments)},fn,annotation)}function invokeLinkFn(linkFn,scope,$element,attrs,controllers,transcludeFn){try{linkFn(scope,$element,attrs,controllers,transcludeFn)}catch(e){$exceptionHandler(e,startingTag($element))}}var Attributes=function(element,attributesToCopy){if(attributesToCopy){var i,l,key,keys=Object.keys(attributesToCopy);for(i=0,l=keys.length;l>i;i++)key=keys[i],this[key]=attributesToCopy[key]}else this.$attr={};this.$$element=element};Attributes.prototype={$normalize:directiveNormalize,$addClass:function(classVal){classVal&&classVal.length>0&&$animate.addClass(this.$$element,classVal)},$removeClass:function(classVal){classVal&&classVal.length>0&&$animate.removeClass(this.$$element,classVal)},$updateClass:function(newClasses,oldClasses){var toAdd=tokenDifference(newClasses,oldClasses);toAdd&&toAdd.length&&$animate.addClass(this.$$element,toAdd);var toRemove=tokenDifference(oldClasses,newClasses);toRemove&&toRemove.length&&$animate.removeClass(this.$$element,toRemove)},$set:function(key,value,writeAttr,attrName){var nodeName,node=this.$$element[0],booleanKey=getBooleanAttrName(node,key),aliasedKey=getAliasedAttrName(node,key),observer=key;if(booleanKey?(this.$$element.prop(key,value),attrName=booleanKey):aliasedKey&&(this[aliasedKey]=value,observer=aliasedKey),this[key]=value,attrName?this.$attr[key]=attrName:(attrName=this.$attr[key],attrName||(this.$attr[key]=attrName=snake_case(key,"-"))),nodeName=nodeName_(this.$$element),"a"===nodeName&&"href"===key||"img"===nodeName&&"src"===key)this[key]=value=$$sanitizeUri(value,"src"===key);else if("img"===nodeName&&"srcset"===key){for(var result="",trimmedSrcset=trim(value),srcPattern=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,pattern=/\s/.test(trimmedSrcset)?srcPattern:/(,)/,rawUris=trimmedSrcset.split(pattern),nbrUrisWith2parts=Math.floor(rawUris.length/2),i=0;nbrUrisWith2parts>i;i++){var innerIdx=2*i;result+=$$sanitizeUri(trim(rawUris[innerIdx]),!0),result+=" "+trim(rawUris[innerIdx+1])}var lastTuple=trim(rawUris[2*i]).split(/\s/);result+=$$sanitizeUri(trim(lastTuple[0]),!0),
2===lastTuple.length&&(result+=" "+trim(lastTuple[1])),this[key]=value=result}writeAttr!==!1&&(null===value||value===undefined?this.$$element.removeAttr(attrName):this.$$element.attr(attrName,value));var $$observers=this.$$observers;$$observers&&forEach($$observers[observer],function(fn){try{fn(value)}catch(e){$exceptionHandler(e)}})},$observe:function(key,fn){var attrs=this,$$observers=attrs.$$observers||(attrs.$$observers=createMap()),listeners=$$observers[key]||($$observers[key]=[]);return listeners.push(fn),$rootScope.$evalAsync(function(){!listeners.$$inter&&attrs.hasOwnProperty(key)&&fn(attrs[key])}),function(){arrayRemove(listeners,fn)}}};var startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),denormalizeTemplate="{{"==startSymbol||"}}"==endSymbol?identity:function(template){return template.replace(/\{\{/g,startSymbol).replace(/}}/g,endSymbol)},NG_ATTR_BINDING=/^ngAttr[A-Z]/;return compile.$$addBindingInfo=debugInfoEnabled?function($element,binding){var bindings=$element.data("$binding")||[];isArray(binding)?bindings=bindings.concat(binding):bindings.push(binding),$element.data("$binding",bindings)}:noop,compile.$$addBindingClass=debugInfoEnabled?function($element){safeAddClass($element,"ng-binding")}:noop,compile.$$addScopeInfo=debugInfoEnabled?function($element,scope,isolated,noTemplate){var dataName=isolated?noTemplate?"$isolateScopeNoTemplate":"$isolateScope":"$scope";$element.data(dataName,scope)}:noop,compile.$$addScopeClass=debugInfoEnabled?function($element,isolated){safeAddClass($element,isolated?"ng-isolate-scope":"ng-scope")}:noop,compile}]}function directiveNormalize(name){return camelCase(name.replace(PREFIX_REGEXP,""))}function tokenDifference(str1,str2){var values="",tokens1=str1.split(/\s+/),tokens2=str2.split(/\s+/);outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values+=(values.length>0?" ":"")+token}return values}function removeComments(jqNodes){jqNodes=jqLite(jqNodes);var i=jqNodes.length;if(1>=i)return jqNodes;for(;i--;){var node=jqNodes[i];node.nodeType===NODE_TYPE_COMMENT&&splice.call(jqNodes,i,1)}return jqNodes}function $ControllerProvider(){var controllers={},globals=!1,CNTRL_REG=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(name,constructor){assertNotHasOwnProperty(name,"controller"),isObject(name)?extend(controllers,name):controllers[name]=constructor},this.allowGlobals=function(){globals=!0},this.$get=["$injector","$window",function($injector,$window){function addIdentifier(locals,identifier,instance,name){if(!locals||!isObject(locals.$scope))throw minErr("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",name,identifier);locals.$scope[identifier]=instance}return function(expression,locals,later,ident){var instance,match,constructor,identifier;if(later=later===!0,ident&&isString(ident)&&(identifier=ident),isString(expression)){if(match=expression.match(CNTRL_REG),!match)throw $controllerMinErr("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",expression);constructor=match[1],identifier=identifier||match[3],expression=controllers.hasOwnProperty(constructor)?controllers[constructor]:getter(locals.$scope,constructor,!0)||(globals?getter($window,constructor,!0):undefined),assertArgFn(expression,constructor,!0)}if(later){var controllerPrototype=(isArray(expression)?expression[expression.length-1]:expression).prototype;return instance=Object.create(controllerPrototype||null),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),extend(function(){return $injector.invoke(expression,instance,locals,constructor),instance},{instance:instance,identifier:identifier})}return instance=$injector.instantiate(expression,locals,constructor),identifier&&addIdentifier(locals,identifier,instance,constructor||expression.name),instance}}]}function $DocumentProvider(){this.$get=["$window",function(window){return jqLite(window.document)}]}function $ExceptionHandlerProvider(){this.$get=["$log",function($log){return function(exception,cause){$log.error.apply($log,arguments)}}]}function defaultHttpResponseTransform(data,headers){if(isString(data)){var tempData=data.replace(JSON_PROTECTION_PREFIX,"").trim();if(tempData){var contentType=headers("Content-Type");(contentType&&0===contentType.indexOf(APPLICATION_JSON)||isJsonLike(tempData))&&(data=fromJson(tempData))}}return data}function isJsonLike(str){var jsonStart=str.match(JSON_START);return jsonStart&&JSON_ENDS[jsonStart[0]].test(str)}function parseHeaders(headers){var key,val,i,parsed=createMap();return headers?(forEach(headers.split("\n"),function(line){i=line.indexOf(":"),key=lowercase(trim(line.substr(0,i))),val=trim(line.substr(i+1)),key&&(parsed[key]=parsed[key]?parsed[key]+", "+val:val)}),parsed):parsed}function headersGetter(headers){var headersObj=isObject(headers)?headers:undefined;return function(name){if(headersObj||(headersObj=parseHeaders(headers)),name){var value=headersObj[lowercase(name)];return void 0===value&&(value=null),value}return headersObj}}function transformData(data,headers,status,fns){return isFunction(fns)?fns(data,headers,status):(forEach(fns,function(fn){data=fn(data,headers,status)}),data)}function isSuccess(status){return status>=200&&300>status}function $HttpProvider(){var defaults=this.defaults={transformResponse:[defaultHttpResponseTransform],transformRequest:[function(d){return!isObject(d)||isFile(d)||isBlob(d)||isFormData(d)?d:toJson(d)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),put:shallowCopy(CONTENT_TYPE_APPLICATION_JSON),patch:shallowCopy(CONTENT_TYPE_APPLICATION_JSON)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},useApplyAsync=!1;this.useApplyAsync=function(value){return isDefined(value)?(useApplyAsync=!!value,this):useApplyAsync};var interceptorFactories=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function($httpBackend,$browser,$cacheFactory,$rootScope,$q,$injector){function $http(requestConfig){function transformResponse(response){var resp=extend({},response);return response.data?resp.data=transformData(response.data,response.headers,response.status,config.transformResponse):resp.data=response.data,isSuccess(response.status)?resp:$q.reject(resp)}function executeHeaderFns(headers){var headerContent,processedHeaders={};return forEach(headers,function(headerFn,header){isFunction(headerFn)?(headerContent=headerFn(),null!=headerContent&&(processedHeaders[header]=headerContent)):processedHeaders[header]=headerFn}),processedHeaders}function mergeHeaders(config){var defHeaderName,lowercaseDefHeaderName,reqHeaderName,defHeaders=defaults.headers,reqHeaders=extend({},config.headers);defHeaders=extend({},defHeaders.common,defHeaders[lowercase(config.method)]);defaultHeadersIteration:for(defHeaderName in defHeaders){lowercaseDefHeaderName=lowercase(defHeaderName);for(reqHeaderName in reqHeaders)if(lowercase(reqHeaderName)===lowercaseDefHeaderName)continue defaultHeadersIteration;reqHeaders[defHeaderName]=defHeaders[defHeaderName]}return executeHeaderFns(reqHeaders)}if(!angular.isObject(requestConfig))throw minErr("$http")("badreq","Http request configuration must be an object.  Received: {0}",requestConfig);var config=extend({method:"get",transformRequest:defaults.transformRequest,transformResponse:defaults.transformResponse},requestConfig);config.headers=mergeHeaders(requestConfig),config.method=uppercase(config.method);var serverRequest=function(config){var headers=config.headers,reqData=transformData(config.data,headersGetter(headers),undefined,config.transformRequest);return isUndefined(reqData)&&forEach(headers,function(value,header){"content-type"===lowercase(header)&&delete headers[header]}),isUndefined(config.withCredentials)&&!isUndefined(defaults.withCredentials)&&(config.withCredentials=defaults.withCredentials),sendReq(config,reqData).then(transformResponse,transformResponse)},chain=[serverRequest,undefined],promise=$q.when(config);for(forEach(reversedInterceptors,function(interceptor){(interceptor.request||interceptor.requestError)&&chain.unshift(interceptor.request,interceptor.requestError),(interceptor.response||interceptor.responseError)&&chain.push(interceptor.response,interceptor.responseError)});chain.length;){var thenFn=chain.shift(),rejectFn=chain.shift();promise=promise.then(thenFn,rejectFn)}return promise.success=function(fn){return promise.then(function(response){fn(response.data,response.status,response.headers,config)}),promise},promise.error=function(fn){return promise.then(null,function(response){fn(response.data,response.status,response.headers,config)}),promise},promise}function createShortMethods(names){forEach(arguments,function(name){$http[name]=function(url,config){return $http(extend(config||{},{method:name,url:url}))}})}function createShortMethodsWithData(name){forEach(arguments,function(name){$http[name]=function(url,data,config){return $http(extend(config||{},{method:name,url:url,data:data}))}})}function sendReq(config,reqData){function done(status,response,headersString,statusText){function resolveHttpPromise(){resolvePromise(response,status,headersString,statusText)}cache&&(isSuccess(status)?cache.put(url,[status,response,parseHeaders(headersString),statusText]):cache.remove(url)),useApplyAsync?$rootScope.$applyAsync(resolveHttpPromise):(resolveHttpPromise(),$rootScope.$$phase||$rootScope.$apply())}function resolvePromise(response,status,headers,statusText){status=Math.max(status,0),(isSuccess(status)?deferred.resolve:deferred.reject)({data:response,status:status,headers:headersGetter(headers),config:config,statusText:statusText})}function resolvePromiseWithResult(result){resolvePromise(result.data,result.status,shallowCopy(result.headers()),result.statusText)}function removePendingReq(){var idx=$http.pendingRequests.indexOf(config);-1!==idx&&$http.pendingRequests.splice(idx,1)}var cache,cachedResp,deferred=$q.defer(),promise=deferred.promise,reqHeaders=config.headers,url=buildUrl(config.url,config.params);if($http.pendingRequests.push(config),promise.then(removePendingReq,removePendingReq),!config.cache&&!defaults.cache||config.cache===!1||"GET"!==config.method&&"JSONP"!==config.method||(cache=isObject(config.cache)?config.cache:isObject(defaults.cache)?defaults.cache:defaultCache),cache&&(cachedResp=cache.get(url),isDefined(cachedResp)?isPromiseLike(cachedResp)?cachedResp.then(resolvePromiseWithResult,resolvePromiseWithResult):isArray(cachedResp)?resolvePromise(cachedResp[1],cachedResp[0],shallowCopy(cachedResp[2]),cachedResp[3]):resolvePromise(cachedResp,200,{},"OK"):cache.put(url,promise)),isUndefined(cachedResp)){var xsrfValue=urlIsSameOrigin(config.url)?$browser.cookies()[config.xsrfCookieName||defaults.xsrfCookieName]:undefined;xsrfValue&&(reqHeaders[config.xsrfHeaderName||defaults.xsrfHeaderName]=xsrfValue),$httpBackend(config.method,url,reqData,done,reqHeaders,config.timeout,config.withCredentials,config.responseType)}return promise}function buildUrl(url,params){if(!params)return url;var parts=[];return forEachSorted(params,function(value,key){null===value||isUndefined(value)||(isArray(value)||(value=[value]),forEach(value,function(v){isObject(v)&&(v=isDate(v)?v.toISOString():toJson(v)),parts.push(encodeUriQuery(key)+"="+encodeUriQuery(v))}))}),parts.length>0&&(url+=(-1==url.indexOf("?")?"?":"&")+parts.join("&")),url}var defaultCache=$cacheFactory("$http"),reversedInterceptors=[];return forEach(interceptorFactories,function(interceptorFactory){reversedInterceptors.unshift(isString(interceptorFactory)?$injector.get(interceptorFactory):$injector.invoke(interceptorFactory))}),$http.pendingRequests=[],createShortMethods("get","delete","head","jsonp"),createShortMethodsWithData("post","put","patch"),$http.defaults=defaults,$http}]}function createXhr(){return new window.XMLHttpRequest}function $HttpBackendProvider(){this.$get=["$browser","$window","$document",function($browser,$window,$document){return createHttpBackend($browser,createXhr,$browser.defer,$window.angular.callbacks,$document[0])}]}function createHttpBackend($browser,createXhr,$browserDefer,callbacks,rawDocument){function jsonpReq(url,callbackId,done){var script=rawDocument.createElement("script"),callback=null;return script.type="text/javascript",script.src=url,script.async=!0,callback=function(event){removeEventListenerFn(script,"load",callback),removeEventListenerFn(script,"error",callback),rawDocument.body.removeChild(script),script=null;var status=-1,text="unknown";event&&("load"!==event.type||callbacks[callbackId].called||(event={type:"error"}),text=event.type,status="error"===event.type?404:200),done&&done(status,text)},addEventListenerFn(script,"load",callback),addEventListenerFn(script,"error",callback),rawDocument.body.appendChild(script),callback}return function(method,url,post,callback,headers,timeout,withCredentials,responseType){function timeoutRequest(){jsonpDone&&jsonpDone(),xhr&&xhr.abort()}function completeRequest(callback,status,response,headersString,statusText){timeoutId!==undefined&&$browserDefer.cancel(timeoutId),jsonpDone=xhr=null,callback(status,response,headersString,statusText),$browser.$$completeOutstandingRequest(noop)}if($browser.$$incOutstandingRequestCount(),url=url||$browser.url(),"jsonp"==lowercase(method)){var callbackId="_"+(callbacks.counter++).toString(36);callbacks[callbackId]=function(data){callbacks[callbackId].data=data,callbacks[callbackId].called=!0};var jsonpDone=jsonpReq(url.replace("JSON_CALLBACK","angular.callbacks."+callbackId),callbackId,function(status,text){completeRequest(callback,status,callbacks[callbackId].data,"",text),callbacks[callbackId]=noop})}else{var xhr=createXhr();xhr.open(method,url,!0),forEach(headers,function(value,key){isDefined(value)&&xhr.setRequestHeader(key,value)}),xhr.onload=function(){var statusText=xhr.statusText||"",response="response"in xhr?xhr.response:xhr.responseText,status=1223===xhr.status?204:xhr.status;0===status&&(status=response?200:"file"==urlResolve(url).protocol?404:0),completeRequest(callback,status,response,xhr.getAllResponseHeaders(),statusText)};var requestError=function(){completeRequest(callback,-1,null,null,"")};if(xhr.onerror=requestError,xhr.onabort=requestError,withCredentials&&(xhr.withCredentials=!0),responseType)try{xhr.responseType=responseType}catch(e){if("json"!==responseType)throw e}xhr.send(post||null)}if(timeout>0)var timeoutId=$browserDefer(timeoutRequest,timeout);else isPromiseLike(timeout)&&timeout.then(timeoutRequest)}}function $InterpolateProvider(){var startSymbol="{{",endSymbol="}}";this.startSymbol=function(value){return value?(startSymbol=value,this):startSymbol},this.endSymbol=function(value){return value?(endSymbol=value,this):endSymbol},this.$get=["$parse","$exceptionHandler","$sce",function($parse,$exceptionHandler,$sce){function escape(ch){return"\\\\\\"+ch}function $interpolate(text,mustHaveExpression,trustedContext,allOrNothing){function unescapeText(text){return text.replace(escapedStartRegexp,startSymbol).replace(escapedEndRegexp,endSymbol)}function parseStringifyInterceptor(value){try{return value=getValue(value),allOrNothing&&!isDefined(value)?value:stringify(value)}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}}allOrNothing=!!allOrNothing;for(var startIndex,endIndex,exp,index=0,expressions=[],parseFns=[],textLength=text.length,concat=[],expressionPositions=[];textLength>index;){if(-1==(startIndex=text.indexOf(startSymbol,index))||-1==(endIndex=text.indexOf(endSymbol,startIndex+startSymbolLength))){index!==textLength&&concat.push(unescapeText(text.substring(index)));break}index!==startIndex&&concat.push(unescapeText(text.substring(index,startIndex))),exp=text.substring(startIndex+startSymbolLength,endIndex),expressions.push(exp),parseFns.push($parse(exp,parseStringifyInterceptor)),index=endIndex+endSymbolLength,expressionPositions.push(concat.length),concat.push("")}if(trustedContext&&concat.length>1)throw $interpolateMinErr("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",text);if(!mustHaveExpression||expressions.length){var compute=function(values){for(var i=0,ii=expressions.length;ii>i;i++){if(allOrNothing&&isUndefined(values[i]))return;concat[expressionPositions[i]]=values[i]}return concat.join("")},getValue=function(value){return trustedContext?$sce.getTrusted(trustedContext,value):$sce.valueOf(value)},stringify=function(value){if(null==value)return"";switch(typeof value){case"string":break;case"number":value=""+value;break;default:value=toJson(value)}return value};return extend(function(context){var i=0,ii=expressions.length,values=new Array(ii);try{for(;ii>i;i++)values[i]=parseFns[i](context);return compute(values)}catch(err){var newErr=$interpolateMinErr("interr","Can't interpolate: {0}\n{1}",text,err.toString());$exceptionHandler(newErr)}},{exp:text,expressions:expressions,$$watchDelegate:function(scope,listener,objectEquality){var lastValue;return scope.$watchGroup(parseFns,function(values,oldValues){var currValue=compute(values);isFunction(listener)&&listener.call(this,currValue,values!==oldValues?lastValue:currValue,scope),lastValue=currValue},objectEquality)}})}}var startSymbolLength=startSymbol.length,endSymbolLength=endSymbol.length,escapedStartRegexp=new RegExp(startSymbol.replace(/./g,escape),"g"),escapedEndRegexp=new RegExp(endSymbol.replace(/./g,escape),"g");return $interpolate.startSymbol=function(){return startSymbol},$interpolate.endSymbol=function(){return endSymbol},$interpolate}]}function $IntervalProvider(){this.$get=["$rootScope","$window","$q","$$q",function($rootScope,$window,$q,$$q){function interval(fn,delay,count,invokeApply){var setInterval=$window.setInterval,clearInterval=$window.clearInterval,iteration=0,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return count=isDefined(count)?count:0,promise.then(null,null,fn),promise.$$intervalId=setInterval(function(){deferred.notify(iteration++),count>0&&iteration>=count&&(deferred.resolve(iteration),clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId]),skipApply||$rootScope.$apply()},delay),intervals[promise.$$intervalId]=deferred,promise}var intervals={};return interval.cancel=function(promise){return promise&&promise.$$intervalId in intervals?(intervals[promise.$$intervalId].reject("canceled"),$window.clearInterval(promise.$$intervalId),delete intervals[promise.$$intervalId],!0):!1},interval}]}function $LocaleProvider(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"",posSuf:"",negPre:"(",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),SHORTMONTH:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),DAY:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),SHORTDAY:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a",ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"]},pluralCat:function(num){return 1===num?"one":"other"}}}}function encodePath(path){for(var segments=path.split("/"),i=segments.length;i--;)segments[i]=encodeUriSegment(segments[i]);return segments.join("/")}function parseAbsoluteUrl(absoluteUrl,locationObj){var parsedUrl=urlResolve(absoluteUrl);locationObj.$$protocol=parsedUrl.protocol,locationObj.$$host=parsedUrl.hostname,locationObj.$$port=int(parsedUrl.port)||DEFAULT_PORTS[parsedUrl.protocol]||null}function parseAppUrl(relativeUrl,locationObj){var prefixed="/"!==relativeUrl.charAt(0);prefixed&&(relativeUrl="/"+relativeUrl);var match=urlResolve(relativeUrl);locationObj.$$path=decodeURIComponent(prefixed&&"/"===match.pathname.charAt(0)?match.pathname.substring(1):match.pathname),locationObj.$$search=parseKeyValue(match.search),locationObj.$$hash=decodeURIComponent(match.hash),locationObj.$$path&&"/"!=locationObj.$$path.charAt(0)&&(locationObj.$$path="/"+locationObj.$$path)}function beginsWith(begin,whole){return 0===whole.indexOf(begin)?whole.substr(begin.length):void 0}function stripHash(url){var index=url.indexOf("#");return-1==index?url:url.substr(0,index)}function trimEmptyHash(url){return url.replace(/(#.+)|#$/,"$1")}function stripFile(url){return url.substr(0,stripHash(url).lastIndexOf("/")+1)}function serverBase(url){return url.substring(0,url.indexOf("/",url.indexOf("//")+2))}function LocationHtml5Url(appBase,basePrefix){this.$$html5=!0,basePrefix=basePrefix||"";var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){var pathUrl=beginsWith(appBaseNoFile,url);if(!isString(pathUrl))throw $locationMinErr("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',url,appBaseNoFile);parseAppUrl(pathUrl,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBaseNoFile+this.$$url.substr(1)},this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var appUrl,prevAppUrl,rewrittenUrl;return(appUrl=beginsWith(appBase,url))!==undefined?(prevAppUrl=appUrl,rewrittenUrl=(appUrl=beginsWith(basePrefix,appUrl))!==undefined?appBaseNoFile+(beginsWith("/",appUrl)||appUrl):appBase+prevAppUrl):(appUrl=beginsWith(appBaseNoFile,url))!==undefined?rewrittenUrl=appBaseNoFile+appUrl:appBaseNoFile==url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl}}function LocationHashbangUrl(appBase,hashPrefix){var appBaseNoFile=stripFile(appBase);parseAbsoluteUrl(appBase,this),this.$$parse=function(url){function removeWindowsDriveName(path,url,base){var firstPathSegmentMatch,windowsFilePathExp=/^\/[A-Z]:(\/.*)/;return 0===url.indexOf(base)&&(url=url.replace(base,"")),windowsFilePathExp.exec(url)?path:(firstPathSegmentMatch=windowsFilePathExp.exec(path),firstPathSegmentMatch?firstPathSegmentMatch[1]:path)}var withoutHashUrl,withoutBaseUrl=beginsWith(appBase,url)||beginsWith(appBaseNoFile,url);"#"===withoutBaseUrl.charAt(0)?(withoutHashUrl=beginsWith(hashPrefix,withoutBaseUrl),isUndefined(withoutHashUrl)&&(withoutHashUrl=withoutBaseUrl)):withoutHashUrl=this.$$html5?withoutBaseUrl:"",parseAppUrl(withoutHashUrl,this),this.$$path=removeWindowsDriveName(this.$$path,withoutHashUrl,appBase),this.$$compose()},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+(this.$$url?hashPrefix+this.$$url:"")},this.$$parseLinkUrl=function(url,relHref){return stripHash(appBase)==stripHash(url)?(this.$$parse(url),!0):!1}}function LocationHashbangInHtml5Url(appBase,hashPrefix){this.$$html5=!0,LocationHashbangUrl.apply(this,arguments);var appBaseNoFile=stripFile(appBase);this.$$parseLinkUrl=function(url,relHref){if(relHref&&"#"===relHref[0])return this.hash(relHref.slice(1)),!0;var rewrittenUrl,appUrl;return appBase==stripHash(url)?rewrittenUrl=url:(appUrl=beginsWith(appBaseNoFile,url))?rewrittenUrl=appBase+hashPrefix+appUrl:appBaseNoFile===url+"/"&&(rewrittenUrl=appBaseNoFile),rewrittenUrl&&this.$$parse(rewrittenUrl),!!rewrittenUrl},this.$$compose=function(){var search=toKeyValue(this.$$search),hash=this.$$hash?"#"+encodeUriSegment(this.$$hash):"";this.$$url=encodePath(this.$$path)+(search?"?"+search:"")+hash,this.$$absUrl=appBase+hashPrefix+this.$$url}}function locationGetter(property){return function(){return this[property]}}function locationGetterSetter(property,preprocess){return function(value){return isUndefined(value)?this[property]:(this[property]=preprocess(value),this.$$compose(),this)}}function $LocationProvider(){var hashPrefix="",html5Mode={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(prefix){return isDefined(prefix)?(hashPrefix=prefix,this):hashPrefix},this.html5Mode=function(mode){return isBoolean(mode)?(html5Mode.enabled=mode,this):isObject(mode)?(isBoolean(mode.enabled)&&(html5Mode.enabled=mode.enabled),isBoolean(mode.requireBase)&&(html5Mode.requireBase=mode.requireBase),isBoolean(mode.rewriteLinks)&&(html5Mode.rewriteLinks=mode.rewriteLinks),this):html5Mode},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function($rootScope,$browser,$sniffer,$rootElement,$window){function setBrowserUrlWithFallback(url,replace,state){var oldUrl=$location.url(),oldState=$location.$$state;try{$browser.url(url,replace,state),$location.$$state=$browser.state()}catch(e){throw $location.url(oldUrl),$location.$$state=oldState,e}}function afterLocationChange(oldUrl,oldState){$rootScope.$broadcast("$locationChangeSuccess",$location.absUrl(),oldUrl,$location.$$state,oldState)}var $location,LocationMode,appBase,baseHref=$browser.baseHref(),initialUrl=$browser.url();if(html5Mode.enabled){if(!baseHref&&html5Mode.requireBase)throw $locationMinErr("nobase","$location in HTML5 mode requires a <base> tag to be present!");appBase=serverBase(initialUrl)+(baseHref||"/"),LocationMode=$sniffer.history?LocationHtml5Url:LocationHashbangInHtml5Url}else appBase=stripHash(initialUrl),LocationMode=LocationHashbangUrl;$location=new LocationMode(appBase,"#"+hashPrefix),$location.$$parseLinkUrl(initialUrl,initialUrl),$location.$$state=$browser.state();var IGNORE_URI_REGEXP=/^\s*(javascript|mailto):/i;$rootElement.on("click",function(event){if(html5Mode.rewriteLinks&&!event.ctrlKey&&!event.metaKey&&!event.shiftKey&&2!=event.which&&2!=event.button){for(var elm=jqLite(event.target);"a"!==nodeName_(elm[0]);)if(elm[0]===$rootElement[0]||!(elm=elm.parent())[0])return;var absHref=elm.prop("href"),relHref=elm.attr("href")||elm.attr("xlink:href");isObject(absHref)&&"[object SVGAnimatedString]"===absHref.toString()&&(absHref=urlResolve(absHref.animVal).href),IGNORE_URI_REGEXP.test(absHref)||!absHref||elm.attr("target")||event.isDefaultPrevented()||$location.$$parseLinkUrl(absHref,relHref)&&(event.preventDefault(),$location.absUrl()!=$browser.url()&&($rootScope.$apply(),$window.angular["ff-684208-preventDefault"]=!0))}}),trimEmptyHash($location.absUrl())!=trimEmptyHash(initialUrl)&&$browser.url($location.absUrl(),!0);var initializing=!0;return $browser.onUrlChange(function(newUrl,newState){$rootScope.$evalAsync(function(){var defaultPrevented,oldUrl=$location.absUrl(),oldState=$location.$$state;$location.$$parse(newUrl),$location.$$state=newState,defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,newState,oldState).defaultPrevented,$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState,setBrowserUrlWithFallback(oldUrl,!1,oldState)):(initializing=!1,afterLocationChange(oldUrl,oldState)))}),$rootScope.$$phase||$rootScope.$digest()}),$rootScope.$watch(function(){var oldUrl=trimEmptyHash($browser.url()),newUrl=trimEmptyHash($location.absUrl()),oldState=$browser.state(),currentReplace=$location.$$replace,urlOrStateChanged=oldUrl!==newUrl||$location.$$html5&&$sniffer.history&&oldState!==$location.$$state;(initializing||urlOrStateChanged)&&(initializing=!1,$rootScope.$evalAsync(function(){var newUrl=$location.absUrl(),defaultPrevented=$rootScope.$broadcast("$locationChangeStart",newUrl,oldUrl,$location.$$state,oldState).defaultPrevented;$location.absUrl()===newUrl&&(defaultPrevented?($location.$$parse(oldUrl),$location.$$state=oldState):(urlOrStateChanged&&setBrowserUrlWithFallback(newUrl,currentReplace,oldState===$location.$$state?null:$location.$$state),afterLocationChange(oldUrl,oldState)))})),$location.$$replace=!1}),$location}]}function $LogProvider(){var debug=!0,self=this;this.debugEnabled=function(flag){return isDefined(flag)?(debug=flag,this):debug},this.$get=["$window",function($window){function formatError(arg){return arg instanceof Error&&(arg.stack?arg=arg.message&&-1===arg.stack.indexOf(arg.message)?"Error: "+arg.message+"\n"+arg.stack:arg.stack:arg.sourceURL&&(arg=arg.message+"\n"+arg.sourceURL+":"+arg.line)),arg}function consoleLog(type){var console=$window.console||{},logFn=console[type]||console.log||noop,hasApply=!1;try{hasApply=!!logFn.apply}catch(e){}return hasApply?function(){var args=[];return forEach(arguments,function(arg){args.push(formatError(arg))}),logFn.apply(console,args)}:function(arg1,arg2){logFn(arg1,null==arg2?"":arg2)}}return{log:consoleLog("log"),info:consoleLog("info"),warn:consoleLog("warn"),error:consoleLog("error"),debug:function(){var fn=consoleLog("debug");return function(){debug&&fn.apply(self,arguments)}}()}}]}function ensureSafeMemberName(name,fullExpression){if("__defineGetter__"===name||"__defineSetter__"===name||"__lookupGetter__"===name||"__lookupSetter__"===name||"__proto__"===name)throw $parseMinErr("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",fullExpression);return name}function ensureSafeObject(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.window===obj)throw $parseMinErr("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj.children&&(obj.nodeName||obj.prop&&obj.attr&&obj.find))throw $parseMinErr("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===Object)throw $parseMinErr("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",fullExpression)}return obj}function ensureSafeFunction(obj,fullExpression){if(obj){if(obj.constructor===obj)throw $parseMinErr("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",fullExpression);if(obj===CALL||obj===APPLY||obj===BIND)throw $parseMinErr("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",fullExpression)}}function isConstant(exp){return exp.constant}function setter(obj,locals,path,setValue,fullExp){ensureSafeObject(obj,fullExp),ensureSafeObject(locals,fullExp);for(var key,element=path.split("."),i=0;element.length>1;i++){key=ensureSafeMemberName(element.shift(),fullExp);var propertyObj=0===i&&locals&&locals[key]||obj[key];propertyObj||(propertyObj={},obj[key]=propertyObj),obj=ensureSafeObject(propertyObj,fullExp)}return key=ensureSafeMemberName(element.shift(),fullExp),ensureSafeObject(obj[key],fullExp),obj[key]=setValue,setValue}function isPossiblyDangerousMemberName(name){return"constructor"==name}function cspSafeGetterFn(key0,key1,key2,key3,key4,fullExp,expensiveChecks){ensureSafeMemberName(key0,fullExp),ensureSafeMemberName(key1,fullExp),ensureSafeMemberName(key2,fullExp),ensureSafeMemberName(key3,fullExp),ensureSafeMemberName(key4,fullExp);var eso=function(o){return ensureSafeObject(o,fullExp)},eso0=expensiveChecks||isPossiblyDangerousMemberName(key0)?eso:identity,eso1=expensiveChecks||isPossiblyDangerousMemberName(key1)?eso:identity,eso2=expensiveChecks||isPossiblyDangerousMemberName(key2)?eso:identity,eso3=expensiveChecks||isPossiblyDangerousMemberName(key3)?eso:identity,eso4=expensiveChecks||isPossiblyDangerousMemberName(key4)?eso:identity;return function(scope,locals){var pathVal=locals&&locals.hasOwnProperty(key0)?locals:scope;
return null==pathVal?pathVal:(pathVal=eso0(pathVal[key0]),key1?null==pathVal?undefined:(pathVal=eso1(pathVal[key1]),key2?null==pathVal?undefined:(pathVal=eso2(pathVal[key2]),key3?null==pathVal?undefined:(pathVal=eso3(pathVal[key3]),key4?null==pathVal?undefined:pathVal=eso4(pathVal[key4]):pathVal):pathVal):pathVal):pathVal)}}function getterFnWithEnsureSafeObject(fn,fullExpression){return function(s,l){return fn(s,l,ensureSafeObject,fullExpression)}}function getterFn(path,options,fullExp){var expensiveChecks=options.expensiveChecks,getterFnCache=expensiveChecks?getterFnCacheExpensive:getterFnCacheDefault,fn=getterFnCache[path];if(fn)return fn;var pathKeys=path.split("."),pathKeysLength=pathKeys.length;if(options.csp)fn=6>pathKeysLength?cspSafeGetterFn(pathKeys[0],pathKeys[1],pathKeys[2],pathKeys[3],pathKeys[4],fullExp,expensiveChecks):function(scope,locals){var val,i=0;do val=cspSafeGetterFn(pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],pathKeys[i++],fullExp,expensiveChecks)(scope,locals),locals=undefined,scope=val;while(pathKeysLength>i);return val};else{var code="";expensiveChecks&&(code+="s = eso(s, fe);\nl = eso(l, fe);\n");var needsEnsureSafeObject=expensiveChecks;forEach(pathKeys,function(key,index){ensureSafeMemberName(key,fullExp);var lookupJs=(index?"s":'((l&&l.hasOwnProperty("'+key+'"))?l:s)')+"."+key;(expensiveChecks||isPossiblyDangerousMemberName(key))&&(lookupJs="eso("+lookupJs+", fe)",needsEnsureSafeObject=!0),code+="if(s == null) return undefined;\ns="+lookupJs+";\n"}),code+="return s;";var evaledFnGetter=new Function("s","l","eso","fe",code);evaledFnGetter.toString=valueFn(code),needsEnsureSafeObject&&(evaledFnGetter=getterFnWithEnsureSafeObject(evaledFnGetter,fullExp)),fn=evaledFnGetter}return fn.sharedGetter=!0,fn.assign=function(self,value,locals){return setter(self,locals,path,value,path)},getterFnCache[path]=fn,fn}function getValueOf(value){return isFunction(value.valueOf)?value.valueOf():objectValueOf.call(value)}function $ParseProvider(){var cacheDefault=createMap(),cacheExpensive=createMap();this.$get=["$filter","$sniffer",function($filter,$sniffer){function wrapSharedExpression(exp){var wrapped=exp;return exp.sharedGetter&&(wrapped=function(self,locals){return exp(self,locals)},wrapped.literal=exp.literal,wrapped.constant=exp.constant,wrapped.assign=exp.assign),wrapped}function collectExpressionInputs(inputs,list){for(var i=0,ii=inputs.length;ii>i;i++){var input=inputs[i];input.constant||(input.inputs?collectExpressionInputs(input.inputs,list):-1===list.indexOf(input)&&list.push(input))}return list}function expressionInputDirtyCheck(newValue,oldValueOfValue){return null==newValue||null==oldValueOfValue?newValue===oldValueOfValue:"object"==typeof newValue&&(newValue=getValueOf(newValue),"object"==typeof newValue)?!1:newValue===oldValueOfValue||newValue!==newValue&&oldValueOfValue!==oldValueOfValue}function inputsWatchDelegate(scope,listener,objectEquality,parsedExpression){var lastResult,inputExpressions=parsedExpression.$$inputs||(parsedExpression.$$inputs=collectExpressionInputs(parsedExpression.inputs,[]));if(1===inputExpressions.length){var oldInputValue=expressionInputDirtyCheck;return inputExpressions=inputExpressions[0],scope.$watch(function(scope){var newInputValue=inputExpressions(scope);return expressionInputDirtyCheck(newInputValue,oldInputValue)||(lastResult=parsedExpression(scope),oldInputValue=newInputValue&&getValueOf(newInputValue)),lastResult},listener,objectEquality)}for(var oldInputValueOfValues=[],i=0,ii=inputExpressions.length;ii>i;i++)oldInputValueOfValues[i]=expressionInputDirtyCheck;return scope.$watch(function(scope){for(var changed=!1,i=0,ii=inputExpressions.length;ii>i;i++){var newInputValue=inputExpressions[i](scope);(changed||(changed=!expressionInputDirtyCheck(newInputValue,oldInputValueOfValues[i])))&&(oldInputValueOfValues[i]=newInputValue&&getValueOf(newInputValue))}return changed&&(lastResult=parsedExpression(scope)),lastResult},listener,objectEquality)}function oneTimeWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.apply(this,arguments),isDefined(value)&&scope.$$postDigest(function(){isDefined(lastValue)&&unwatch()})},objectEquality)}function oneTimeLiteralWatchDelegate(scope,listener,objectEquality,parsedExpression){function isAllDefined(value){var allDefined=!0;return forEach(value,function(val){isDefined(val)||(allDefined=!1)}),allDefined}var unwatch,lastValue;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){lastValue=value,isFunction(listener)&&listener.call(this,value,old,scope),isAllDefined(value)&&scope.$$postDigest(function(){isAllDefined(lastValue)&&unwatch()})},objectEquality)}function constantWatchDelegate(scope,listener,objectEquality,parsedExpression){var unwatch;return unwatch=scope.$watch(function(scope){return parsedExpression(scope)},function(value,old,scope){isFunction(listener)&&listener.apply(this,arguments),unwatch()},objectEquality)}function addInterceptor(parsedExpression,interceptorFn){if(!interceptorFn)return parsedExpression;var watchDelegate=parsedExpression.$$watchDelegate,regularWatch=watchDelegate!==oneTimeLiteralWatchDelegate&&watchDelegate!==oneTimeWatchDelegate,fn=regularWatch?function(scope,locals){var value=parsedExpression(scope,locals);return interceptorFn(value,scope,locals)}:function(scope,locals){var value=parsedExpression(scope,locals),result=interceptorFn(value,scope,locals);return isDefined(value)?result:value};return parsedExpression.$$watchDelegate&&parsedExpression.$$watchDelegate!==inputsWatchDelegate?fn.$$watchDelegate=parsedExpression.$$watchDelegate:interceptorFn.$stateful||(fn.$$watchDelegate=inputsWatchDelegate,fn.inputs=[parsedExpression]),fn}var $parseOptions={csp:$sniffer.csp,expensiveChecks:!1},$parseOptionsExpensive={csp:$sniffer.csp,expensiveChecks:!0};return function(exp,interceptorFn,expensiveChecks){var parsedExpression,oneTime,cacheKey;switch(typeof exp){case"string":cacheKey=exp=exp.trim();var cache=expensiveChecks?cacheExpensive:cacheDefault;if(parsedExpression=cache[cacheKey],!parsedExpression){":"===exp.charAt(0)&&":"===exp.charAt(1)&&(oneTime=!0,exp=exp.substring(2));var parseOptions=expensiveChecks?$parseOptionsExpensive:$parseOptions,lexer=new Lexer(parseOptions),parser=new Parser(lexer,$filter,parseOptions);parsedExpression=parser.parse(exp),parsedExpression.constant?parsedExpression.$$watchDelegate=constantWatchDelegate:oneTime?(parsedExpression=wrapSharedExpression(parsedExpression),parsedExpression.$$watchDelegate=parsedExpression.literal?oneTimeLiteralWatchDelegate:oneTimeWatchDelegate):parsedExpression.inputs&&(parsedExpression.$$watchDelegate=inputsWatchDelegate),cache[cacheKey]=parsedExpression}return addInterceptor(parsedExpression,interceptorFn);case"function":return addInterceptor(exp,interceptorFn);default:return addInterceptor(noop,interceptorFn)}}}]}function $QProvider(){this.$get=["$rootScope","$exceptionHandler",function($rootScope,$exceptionHandler){return qFactory(function(callback){$rootScope.$evalAsync(callback)},$exceptionHandler)}]}function $$QProvider(){this.$get=["$browser","$exceptionHandler",function($browser,$exceptionHandler){return qFactory(function(callback){$browser.defer(callback)},$exceptionHandler)}]}function qFactory(nextTick,exceptionHandler){function callOnce(self,resolveFn,rejectFn){function wrap(fn){return function(value){called||(called=!0,fn.call(self,value))}}var called=!1;return[wrap(resolveFn),wrap(rejectFn)]}function Promise(){this.$$state={status:0}}function simpleBind(context,fn){return function(value){fn.call(context,value)}}function processQueue(state){var fn,promise,pending;pending=state.pending,state.processScheduled=!1,state.pending=undefined;for(var i=0,ii=pending.length;ii>i;++i){promise=pending[i][0],fn=pending[i][state.status];try{isFunction(fn)?promise.resolve(fn(state.value)):1===state.status?promise.resolve(state.value):promise.reject(state.value)}catch(e){promise.reject(e),exceptionHandler(e)}}}function scheduleProcessQueue(state){!state.processScheduled&&state.pending&&(state.processScheduled=!0,nextTick(function(){processQueue(state)}))}function Deferred(){this.promise=new Promise,this.resolve=simpleBind(this,this.resolve),this.reject=simpleBind(this,this.reject),this.notify=simpleBind(this,this.notify)}function all(promises){var deferred=new Deferred,counter=0,results=isArray(promises)?[]:{};return forEach(promises,function(promise,key){counter++,when(promise).then(function(value){results.hasOwnProperty(key)||(results[key]=value,--counter||deferred.resolve(results))},function(reason){results.hasOwnProperty(key)||deferred.reject(reason)})}),0===counter&&deferred.resolve(results),deferred.promise}var $qMinErr=minErr("$q",TypeError),defer=function(){return new Deferred};Promise.prototype={then:function(onFulfilled,onRejected,progressBack){var result=new Deferred;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([result,onFulfilled,onRejected,progressBack]),this.$$state.status>0&&scheduleProcessQueue(this.$$state),result.promise},"catch":function(callback){return this.then(null,callback)},"finally":function(callback,progressBack){return this.then(function(value){return handleCallback(value,!0,callback)},function(error){return handleCallback(error,!1,callback)},progressBack)}},Deferred.prototype={resolve:function(val){this.promise.$$state.status||(val===this.promise?this.$$reject($qMinErr("qcycle","Expected promise to be resolved with value other than itself '{0}'",val)):this.$$resolve(val))},$$resolve:function(val){var then,fns;fns=callOnce(this,this.$$resolve,this.$$reject);try{(isObject(val)||isFunction(val))&&(then=val&&val.then),isFunction(then)?(this.promise.$$state.status=-1,then.call(val,fns[0],fns[1],this.notify)):(this.promise.$$state.value=val,this.promise.$$state.status=1,scheduleProcessQueue(this.promise.$$state))}catch(e){fns[1](e),exceptionHandler(e)}},reject:function(reason){this.promise.$$state.status||this.$$reject(reason)},$$reject:function(reason){this.promise.$$state.value=reason,this.promise.$$state.status=2,scheduleProcessQueue(this.promise.$$state)},notify:function(progress){var callbacks=this.promise.$$state.pending;this.promise.$$state.status<=0&&callbacks&&callbacks.length&&nextTick(function(){for(var callback,result,i=0,ii=callbacks.length;ii>i;i++){result=callbacks[i][0],callback=callbacks[i][3];try{result.notify(isFunction(callback)?callback(progress):progress)}catch(e){exceptionHandler(e)}}})}};var reject=function(reason){var result=new Deferred;return result.reject(reason),result.promise},makePromise=function(value,resolved){var result=new Deferred;return resolved?result.resolve(value):result.reject(value),result.promise},handleCallback=function(value,isResolved,callback){var callbackOutput=null;try{isFunction(callback)&&(callbackOutput=callback())}catch(e){return makePromise(e,!1)}return isPromiseLike(callbackOutput)?callbackOutput.then(function(){return makePromise(value,isResolved)},function(error){return makePromise(error,!1)}):makePromise(value,isResolved)},when=function(value,callback,errback,progressBack){var result=new Deferred;return result.resolve(value),result.promise.then(callback,errback,progressBack)},$Q=function Q(resolver){function resolveFn(value){deferred.resolve(value)}function rejectFn(reason){deferred.reject(reason)}if(!isFunction(resolver))throw $qMinErr("norslvr","Expected resolverFn, got '{0}'",resolver);if(!(this instanceof Q))return new Q(resolver);var deferred=new Deferred;return resolver(resolveFn,rejectFn),deferred.promise};return $Q.defer=defer,$Q.reject=reject,$Q.when=when,$Q.all=all,$Q}function $$RAFProvider(){this.$get=["$window","$timeout",function($window,$timeout){var requestAnimationFrame=$window.requestAnimationFrame||$window.webkitRequestAnimationFrame,cancelAnimationFrame=$window.cancelAnimationFrame||$window.webkitCancelAnimationFrame||$window.webkitCancelRequestAnimationFrame,rafSupported=!!requestAnimationFrame,raf=rafSupported?function(fn){var id=requestAnimationFrame(fn);return function(){cancelAnimationFrame(id)}}:function(fn){var timer=$timeout(fn,16.66,!1);return function(){$timeout.cancel(timer)}};return raf.supported=rafSupported,raf}]}function $RootScopeProvider(){function createChildScopeClass(parent){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=nextUid(),this.$$ChildScope=null}return ChildScope.prototype=parent,ChildScope}var TTL=10,$rootScopeMinErr=minErr("$rootScope"),lastDirtyWatch=null,applyAsyncId=null;this.digestTtl=function(value){return arguments.length&&(TTL=value),TTL},this.$get=["$injector","$exceptionHandler","$parse","$browser",function($injector,$exceptionHandler,$parse,$browser){function destroyChildScope($event){$event.currentScope.$$destroyed=!0}function Scope(){this.$id=nextUid(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function beginPhase(phase){if($rootScope.$$phase)throw $rootScopeMinErr("inprog","{0} already in progress",$rootScope.$$phase);$rootScope.$$phase=phase}function clearPhase(){$rootScope.$$phase=null}function decrementListenerCount(current,count,name){do current.$$listenerCount[name]-=count,0===current.$$listenerCount[name]&&delete current.$$listenerCount[name];while(current=current.$parent)}function initWatchVal(){}function flushApplyAsync(){for(;applyAsyncQueue.length;)try{applyAsyncQueue.shift()()}catch(e){$exceptionHandler(e)}applyAsyncId=null}function scheduleApplyAsync(){null===applyAsyncId&&(applyAsyncId=$browser.defer(function(){$rootScope.$apply(flushApplyAsync)}))}Scope.prototype={constructor:Scope,$new:function(isolate,parent){var child;return parent=parent||this,isolate?(child=new Scope,child.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=createChildScopeClass(this)),child=new this.$$ChildScope),child.$parent=parent,child.$$prevSibling=parent.$$childTail,parent.$$childHead?(parent.$$childTail.$$nextSibling=child,parent.$$childTail=child):parent.$$childHead=parent.$$childTail=child,(isolate||parent!=this)&&child.$on("$destroy",destroyChildScope),child},$watch:function(watchExp,listener,objectEquality){var get=$parse(watchExp);if(get.$$watchDelegate)return get.$$watchDelegate(this,listener,objectEquality,get);var scope=this,array=scope.$$watchers,watcher={fn:listener,last:initWatchVal,get:get,exp:watchExp,eq:!!objectEquality};return lastDirtyWatch=null,isFunction(listener)||(watcher.fn=noop),array||(array=scope.$$watchers=[]),array.unshift(watcher),function(){arrayRemove(array,watcher),lastDirtyWatch=null}},$watchGroup:function(watchExpressions,listener){function watchGroupAction(){changeReactionScheduled=!1,firstRun?(firstRun=!1,listener(newValues,newValues,self)):listener(newValues,oldValues,self)}var oldValues=new Array(watchExpressions.length),newValues=new Array(watchExpressions.length),deregisterFns=[],self=this,changeReactionScheduled=!1,firstRun=!0;if(!watchExpressions.length){var shouldCall=!0;return self.$evalAsync(function(){shouldCall&&listener(newValues,newValues,self)}),function(){shouldCall=!1}}return 1===watchExpressions.length?this.$watch(watchExpressions[0],function(value,oldValue,scope){newValues[0]=value,oldValues[0]=oldValue,listener(newValues,value===oldValue?newValues:oldValues,scope)}):(forEach(watchExpressions,function(expr,i){var unwatchFn=self.$watch(expr,function(value,oldValue){newValues[i]=value,oldValues[i]=oldValue,changeReactionScheduled||(changeReactionScheduled=!0,self.$evalAsync(watchGroupAction))});deregisterFns.push(unwatchFn)}),function(){for(;deregisterFns.length;)deregisterFns.shift()()})},$watchCollection:function(obj,listener){function $watchCollectionInterceptor(_value){newValue=_value;var newLength,key,bothNaN,newItem,oldItem;if(!isUndefined(newValue)){if(isObject(newValue))if(isArrayLike(newValue)){oldValue!==internalArray&&(oldValue=internalArray,oldLength=oldValue.length=0,changeDetected++),newLength=newValue.length,oldLength!==newLength&&(changeDetected++,oldValue.length=oldLength=newLength);for(var i=0;newLength>i;i++)oldItem=oldValue[i],newItem=newValue[i],bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[i]=newItem)}else{oldValue!==internalObject&&(oldValue=internalObject={},oldLength=0,changeDetected++),newLength=0;for(key in newValue)newValue.hasOwnProperty(key)&&(newLength++,newItem=newValue[key],oldItem=oldValue[key],key in oldValue?(bothNaN=oldItem!==oldItem&&newItem!==newItem,bothNaN||oldItem===newItem||(changeDetected++,oldValue[key]=newItem)):(oldLength++,oldValue[key]=newItem,changeDetected++));if(oldLength>newLength){changeDetected++;for(key in oldValue)newValue.hasOwnProperty(key)||(oldLength--,delete oldValue[key])}}else oldValue!==newValue&&(oldValue=newValue,changeDetected++);return changeDetected}}function $watchCollectionAction(){if(initRun?(initRun=!1,listener(newValue,newValue,self)):listener(newValue,veryOldValue,self),trackVeryOldValue)if(isObject(newValue))if(isArrayLike(newValue)){veryOldValue=new Array(newValue.length);for(var i=0;i<newValue.length;i++)veryOldValue[i]=newValue[i]}else{veryOldValue={};for(var key in newValue)hasOwnProperty.call(newValue,key)&&(veryOldValue[key]=newValue[key])}else veryOldValue=newValue}$watchCollectionInterceptor.$stateful=!0;var newValue,oldValue,veryOldValue,self=this,trackVeryOldValue=listener.length>1,changeDetected=0,changeDetector=$parse(obj,$watchCollectionInterceptor),internalArray=[],internalObject={},initRun=!0,oldLength=0;return this.$watch(changeDetector,$watchCollectionAction)},$digest:function(){var watch,value,last,watchers,length,dirty,next,current,logIdx,asyncTask,ttl=TTL,target=this,watchLog=[];beginPhase("$digest"),$browser.$$checkUrlChange(),this===$rootScope&&null!==applyAsyncId&&($browser.defer.cancel(applyAsyncId),flushApplyAsync()),lastDirtyWatch=null;do{for(dirty=!1,current=target;asyncQueue.length;){try{asyncTask=asyncQueue.shift(),asyncTask.scope.$eval(asyncTask.expression,asyncTask.locals)}catch(e){$exceptionHandler(e)}lastDirtyWatch=null}traverseScopesLoop:do{if(watchers=current.$$watchers)for(length=watchers.length;length--;)try{if(watch=watchers[length])if((value=watch.get(current))===(last=watch.last)||(watch.eq?equals(value,last):"number"==typeof value&&"number"==typeof last&&isNaN(value)&&isNaN(last))){if(watch===lastDirtyWatch){dirty=!1;break traverseScopesLoop}}else dirty=!0,lastDirtyWatch=watch,watch.last=watch.eq?copy(value,null):value,watch.fn(value,last===initWatchVal?value:last,current),5>ttl&&(logIdx=4-ttl,watchLog[logIdx]||(watchLog[logIdx]=[]),watchLog[logIdx].push({msg:isFunction(watch.exp)?"fn: "+(watch.exp.name||watch.exp.toString()):watch.exp,newVal:value,oldVal:last}))}catch(e){$exceptionHandler(e)}if(!(next=current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}while(current=next);if((dirty||asyncQueue.length)&&!ttl--)throw clearPhase(),$rootScopeMinErr("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",TTL,watchLog)}while(dirty||asyncQueue.length);for(clearPhase();postDigestQueue.length;)try{postDigestQueue.shift()()}catch(e){$exceptionHandler(e)}},$destroy:function(){if(!this.$$destroyed){var parent=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==$rootScope){for(var eventName in this.$$listenerCount)decrementListenerCount(this,this.$$listenerCount[eventName],eventName);parent.$$childHead==this&&(parent.$$childHead=this.$$nextSibling),parent.$$childTail==this&&(parent.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=noop,this.$on=this.$watch=this.$watchGroup=function(){return noop},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(expr,locals){return $parse(expr)(this,locals)},$evalAsync:function(expr,locals){$rootScope.$$phase||asyncQueue.length||$browser.defer(function(){asyncQueue.length&&$rootScope.$digest()}),asyncQueue.push({scope:this,expression:expr,locals:locals})},$$postDigest:function(fn){postDigestQueue.push(fn)},$apply:function(expr){try{return beginPhase("$apply"),this.$eval(expr)}catch(e){$exceptionHandler(e)}finally{clearPhase();try{$rootScope.$digest()}catch(e){throw $exceptionHandler(e),e}}},$applyAsync:function(expr){function $applyAsyncExpression(){scope.$eval(expr)}var scope=this;expr&&applyAsyncQueue.push($applyAsyncExpression),scheduleApplyAsync()},$on:function(name,listener){var namedListeners=this.$$listeners[name];namedListeners||(this.$$listeners[name]=namedListeners=[]),namedListeners.push(listener);var current=this;do current.$$listenerCount[name]||(current.$$listenerCount[name]=0),current.$$listenerCount[name]++;while(current=current.$parent);var self=this;return function(){var indexOfListener=namedListeners.indexOf(listener);-1!==indexOfListener&&(namedListeners[indexOfListener]=null,decrementListenerCount(self,1,name))}},$emit:function(name,args){var namedListeners,i,length,empty=[],scope=this,stopPropagation=!1,event={name:name,targetScope:scope,stopPropagation:function(){stopPropagation=!0},preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1},listenerArgs=concat([event],arguments,1);do{for(namedListeners=scope.$$listeners[name]||empty,event.currentScope=scope,i=0,length=namedListeners.length;length>i;i++)if(namedListeners[i])try{namedListeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else namedListeners.splice(i,1),i--,length--;if(stopPropagation)return event.currentScope=null,event;scope=scope.$parent}while(scope);return event.currentScope=null,event},$broadcast:function(name,args){var target=this,current=target,next=target,event={name:name,targetScope:target,preventDefault:function(){event.defaultPrevented=!0},defaultPrevented:!1};if(!target.$$listenerCount[name])return event;for(var listeners,i,length,listenerArgs=concat([event],arguments,1);current=next;){for(event.currentScope=current,listeners=current.$$listeners[name]||[],i=0,length=listeners.length;length>i;i++)if(listeners[i])try{listeners[i].apply(null,listenerArgs)}catch(e){$exceptionHandler(e)}else listeners.splice(i,1),i--,length--;if(!(next=current.$$listenerCount[name]&&current.$$childHead||current!==target&&current.$$nextSibling))for(;current!==target&&!(next=current.$$nextSibling);)current=current.$parent}return event.currentScope=null,event}};var $rootScope=new Scope,asyncQueue=$rootScope.$$asyncQueue=[],postDigestQueue=$rootScope.$$postDigestQueue=[],applyAsyncQueue=$rootScope.$$applyAsyncQueue=[];return $rootScope}]}function $$SanitizeUriProvider(){var aHrefSanitizationWhitelist=/^\s*(https?|ftp|mailto|tel|file):/,imgSrcSanitizationWhitelist=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(regexp){return isDefined(regexp)?(aHrefSanitizationWhitelist=regexp,this):aHrefSanitizationWhitelist},this.imgSrcSanitizationWhitelist=function(regexp){return isDefined(regexp)?(imgSrcSanitizationWhitelist=regexp,this):imgSrcSanitizationWhitelist},this.$get=function(){return function(uri,isImage){var normalizedVal,regex=isImage?imgSrcSanitizationWhitelist:aHrefSanitizationWhitelist;return normalizedVal=urlResolve(uri).href,""===normalizedVal||normalizedVal.match(regex)?uri:"unsafe:"+normalizedVal}}}function adjustMatcher(matcher){if("self"===matcher)return matcher;if(isString(matcher)){if(matcher.indexOf("***")>-1)throw $sceMinErr("iwcard","Illegal sequence *** in string matcher.  String: {0}",matcher);return matcher=escapeForRegexp(matcher).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+matcher+"$")}if(isRegExp(matcher))return new RegExp("^"+matcher.source+"$");throw $sceMinErr("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function adjustMatchers(matchers){var adjustedMatchers=[];return isDefined(matchers)&&forEach(matchers,function(matcher){adjustedMatchers.push(adjustMatcher(matcher))}),adjustedMatchers}function $SceDelegateProvider(){this.SCE_CONTEXTS=SCE_CONTEXTS;var resourceUrlWhitelist=["self"],resourceUrlBlacklist=[];this.resourceUrlWhitelist=function(value){return arguments.length&&(resourceUrlWhitelist=adjustMatchers(value)),resourceUrlWhitelist},this.resourceUrlBlacklist=function(value){return arguments.length&&(resourceUrlBlacklist=adjustMatchers(value)),resourceUrlBlacklist},this.$get=["$injector",function($injector){function matchUrl(matcher,parsedUrl){return"self"===matcher?urlIsSameOrigin(parsedUrl):!!matcher.exec(parsedUrl.href)}function isResourceUrlAllowedByPolicy(url){var i,n,parsedUrl=urlResolve(url.toString()),allowed=!1;for(i=0,n=resourceUrlWhitelist.length;n>i;i++)if(matchUrl(resourceUrlWhitelist[i],parsedUrl)){allowed=!0;break}if(allowed)for(i=0,n=resourceUrlBlacklist.length;n>i;i++)if(matchUrl(resourceUrlBlacklist[i],parsedUrl)){allowed=!1;break}return allowed}function generateHolderType(Base){var holderType=function(trustedValue){this.$$unwrapTrustedValue=function(){return trustedValue}};return Base&&(holderType.prototype=new Base),holderType.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},holderType.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},holderType}function trustAs(type,trustedValue){var Constructor=byType.hasOwnProperty(type)?byType[type]:null;if(!Constructor)throw $sceMinErr("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",type,trustedValue);if(null===trustedValue||trustedValue===undefined||""===trustedValue)return trustedValue;if("string"!=typeof trustedValue)throw $sceMinErr("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",type);return new Constructor(trustedValue)}function valueOf(maybeTrusted){return maybeTrusted instanceof trustedValueHolderBase?maybeTrusted.$$unwrapTrustedValue():maybeTrusted}function getTrusted(type,maybeTrusted){if(null===maybeTrusted||maybeTrusted===undefined||""===maybeTrusted)return maybeTrusted;var constructor=byType.hasOwnProperty(type)?byType[type]:null;if(constructor&&maybeTrusted instanceof constructor)return maybeTrusted.$$unwrapTrustedValue();if(type===SCE_CONTEXTS.RESOURCE_URL){if(isResourceUrlAllowedByPolicy(maybeTrusted))return maybeTrusted;throw $sceMinErr("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",maybeTrusted.toString())}if(type===SCE_CONTEXTS.HTML)return htmlSanitizer(maybeTrusted);throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")}var htmlSanitizer=function(html){throw $sceMinErr("unsafe","Attempting to use an unsafe value in a safe context.")};$injector.has("$sanitize")&&(htmlSanitizer=$injector.get("$sanitize"));var trustedValueHolderBase=generateHolderType(),byType={};return byType[SCE_CONTEXTS.HTML]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.CSS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.URL]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.JS]=generateHolderType(trustedValueHolderBase),byType[SCE_CONTEXTS.RESOURCE_URL]=generateHolderType(byType[SCE_CONTEXTS.URL]),{trustAs:trustAs,getTrusted:getTrusted,valueOf:valueOf}}]}function $SceProvider(){var enabled=!0;this.enabled=function(value){return arguments.length&&(enabled=!!value),enabled},this.$get=["$parse","$sceDelegate",function($parse,$sceDelegate){if(enabled&&8>msie)throw $sceMinErr("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var sce=shallowCopy(SCE_CONTEXTS);sce.isEnabled=function(){return enabled},sce.trustAs=$sceDelegate.trustAs,sce.getTrusted=$sceDelegate.getTrusted,sce.valueOf=$sceDelegate.valueOf,enabled||(sce.trustAs=sce.getTrusted=function(type,value){return value},sce.valueOf=identity),sce.parseAs=function(type,expr){var parsed=$parse(expr);return parsed.literal&&parsed.constant?parsed:$parse(expr,function(value){return sce.getTrusted(type,value)})};var parse=sce.parseAs,getTrusted=sce.getTrusted,trustAs=sce.trustAs;return forEach(SCE_CONTEXTS,function(enumValue,name){var lName=lowercase(name);sce[camelCase("parse_as_"+lName)]=function(expr){return parse(enumValue,expr)},sce[camelCase("get_trusted_"+lName)]=function(value){return getTrusted(enumValue,value)},sce[camelCase("trust_as_"+lName)]=function(value){return trustAs(enumValue,value)}}),sce}]}function $SnifferProvider(){this.$get=["$window","$document",function($window,$document){var vendorPrefix,match,eventSupport={},android=int((/android (\d+)/.exec(lowercase(($window.navigator||{}).userAgent))||[])[1]),boxee=/Boxee/i.test(($window.navigator||{}).userAgent),document=$document[0]||{},vendorRegex=/^(Moz|webkit|ms)(?=[A-Z])/,bodyStyle=document.body&&document.body.style,transitions=!1,animations=!1;if(bodyStyle){for(var prop in bodyStyle)if(match=vendorRegex.exec(prop)){vendorPrefix=match[0],vendorPrefix=vendorPrefix.substr(0,1).toUpperCase()+vendorPrefix.substr(1);break}vendorPrefix||(vendorPrefix="WebkitOpacity"in bodyStyle&&"webkit"),transitions=!!("transition"in bodyStyle||vendorPrefix+"Transition"in bodyStyle),animations=!!("animation"in bodyStyle||vendorPrefix+"Animation"in bodyStyle),!android||transitions&&animations||(transitions=isString(document.body.style.webkitTransition),animations=isString(document.body.style.webkitAnimation))}return{history:!(!$window.history||!$window.history.pushState||4>android||boxee),hasEvent:function(event){if("input"===event&&11>=msie)return!1;if(isUndefined(eventSupport[event])){var divElm=document.createElement("div");eventSupport[event]="on"+event in divElm}return eventSupport[event]},csp:csp(),vendorPrefix:vendorPrefix,transitions:transitions,animations:animations,android:android}}]}function $TemplateRequestProvider(){this.$get=["$templateCache","$http","$q",function($templateCache,$http,$q){function handleRequestFn(tpl,ignoreRequestError){function handleError(resp){if(!ignoreRequestError)throw $compileMinErr("tpload","Failed to load template: {0}",tpl);return $q.reject(resp)}handleRequestFn.totalPendingRequests++;var transformResponse=$http.defaults&&$http.defaults.transformResponse;isArray(transformResponse)?transformResponse=transformResponse.filter(function(transformer){return transformer!==defaultHttpResponseTransform}):transformResponse===defaultHttpResponseTransform&&(transformResponse=null);var httpOptions={cache:$templateCache,transformResponse:transformResponse};return $http.get(tpl,httpOptions)["finally"](function(){handleRequestFn.totalPendingRequests--}).then(function(response){return response.data},handleError)}return handleRequestFn.totalPendingRequests=0,handleRequestFn}]}function $$TestabilityProvider(){this.$get=["$rootScope","$browser","$location",function($rootScope,$browser,$location){var testability={};return testability.findBindings=function(element,expression,opt_exactMatch){var bindings=element.getElementsByClassName("ng-binding"),matches=[];return forEach(bindings,function(binding){var dataBinding=angular.element(binding).data("$binding");dataBinding&&forEach(dataBinding,function(bindingName){if(opt_exactMatch){var matcher=new RegExp("(^|\\s)"+escapeForRegexp(expression)+"(\\s|\\||$)");
matcher.test(bindingName)&&matches.push(binding)}else-1!=bindingName.indexOf(expression)&&matches.push(binding)})}),matches},testability.findModels=function(element,expression,opt_exactMatch){for(var prefixes=["ng-","data-ng-","ng\\:"],p=0;p<prefixes.length;++p){var attributeEquals=opt_exactMatch?"=":"*=",selector="["+prefixes[p]+"model"+attributeEquals+'"'+expression+'"]',elements=element.querySelectorAll(selector);if(elements.length)return elements}},testability.getLocation=function(){return $location.url()},testability.setLocation=function(url){url!==$location.url()&&($location.url(url),$rootScope.$digest())},testability.whenStable=function(callback){$browser.notifyWhenNoOutstandingRequests(callback)},testability}]}function $TimeoutProvider(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function($rootScope,$browser,$q,$$q,$exceptionHandler){function timeout(fn,delay,invokeApply){var timeoutId,skipApply=isDefined(invokeApply)&&!invokeApply,deferred=(skipApply?$$q:$q).defer(),promise=deferred.promise;return timeoutId=$browser.defer(function(){try{deferred.resolve(fn())}catch(e){deferred.reject(e),$exceptionHandler(e)}finally{delete deferreds[promise.$$timeoutId]}skipApply||$rootScope.$apply()},delay),promise.$$timeoutId=timeoutId,deferreds[timeoutId]=deferred,promise}var deferreds={};return timeout.cancel=function(promise){return promise&&promise.$$timeoutId in deferreds?(deferreds[promise.$$timeoutId].reject("canceled"),delete deferreds[promise.$$timeoutId],$browser.defer.cancel(promise.$$timeoutId)):!1},timeout}]}function urlResolve(url){var href=url;return msie&&(urlParsingNode.setAttribute("href",href),href=urlParsingNode.href),urlParsingNode.setAttribute("href",href),{href:urlParsingNode.href,protocol:urlParsingNode.protocol?urlParsingNode.protocol.replace(/:$/,""):"",host:urlParsingNode.host,search:urlParsingNode.search?urlParsingNode.search.replace(/^\?/,""):"",hash:urlParsingNode.hash?urlParsingNode.hash.replace(/^#/,""):"",hostname:urlParsingNode.hostname,port:urlParsingNode.port,pathname:"/"===urlParsingNode.pathname.charAt(0)?urlParsingNode.pathname:"/"+urlParsingNode.pathname}}function urlIsSameOrigin(requestUrl){var parsed=isString(requestUrl)?urlResolve(requestUrl):requestUrl;return parsed.protocol===originUrl.protocol&&parsed.host===originUrl.host}function $WindowProvider(){this.$get=valueFn(window)}function $FilterProvider($provide){function register(name,factory){if(isObject(name)){var filters={};return forEach(name,function(filter,key){filters[key]=register(key,filter)}),filters}return $provide.factory(name+suffix,factory)}var suffix="Filter";this.register=register,this.$get=["$injector",function($injector){return function(name){return $injector.get(name+suffix)}}],register("currency",currencyFilter),register("date",dateFilter),register("filter",filterFilter),register("json",jsonFilter),register("limitTo",limitToFilter),register("lowercase",lowercaseFilter),register("number",numberFilter),register("orderBy",orderByFilter),register("uppercase",uppercaseFilter)}function filterFilter(){return function(array,expression,comparator){if(!isArray(array))return array;var predicateFn,matchAgainstAnyProp;switch(typeof expression){case"function":predicateFn=expression;break;case"boolean":case"number":case"string":matchAgainstAnyProp=!0;case"object":predicateFn=createPredicateFn(expression,comparator,matchAgainstAnyProp);break;default:return array}return array.filter(predicateFn)}}function createPredicateFn(expression,comparator,matchAgainstAnyProp){var predicateFn,shouldMatchPrimitives=isObject(expression)&&"$"in expression;return comparator===!0?comparator=equals:isFunction(comparator)||(comparator=function(actual,expected){return isObject(actual)||isObject(expected)?!1:(actual=lowercase(""+actual),expected=lowercase(""+expected),-1!==actual.indexOf(expected))}),predicateFn=function(item){return shouldMatchPrimitives&&!isObject(item)?deepCompare(item,expression.$,comparator,!1):deepCompare(item,expression,comparator,matchAgainstAnyProp)}}function deepCompare(actual,expected,comparator,matchAgainstAnyProp,dontMatchWholeObject){var actualType=null!==actual?typeof actual:"null",expectedType=null!==expected?typeof expected:"null";if("string"===expectedType&&"!"===expected.charAt(0))return!deepCompare(actual,expected.substring(1),comparator,matchAgainstAnyProp);if(isArray(actual))return actual.some(function(item){return deepCompare(item,expected,comparator,matchAgainstAnyProp)});switch(actualType){case"object":var key;if(matchAgainstAnyProp){for(key in actual)if("$"!==key.charAt(0)&&deepCompare(actual[key],expected,comparator,!0))return!0;return dontMatchWholeObject?!1:deepCompare(actual,expected,comparator,!1)}if("object"===expectedType){for(key in expected){var expectedVal=expected[key];if(!isFunction(expectedVal)&&!isUndefined(expectedVal)){var matchAnyProperty="$"===key,actualVal=matchAnyProperty?actual:actual[key];if(!deepCompare(actualVal,expectedVal,comparator,matchAnyProperty,matchAnyProperty))return!1}}return!0}return comparator(actual,expected);case"function":return!1;default:return comparator(actual,expected)}}function currencyFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(amount,currencySymbol,fractionSize){return isUndefined(currencySymbol)&&(currencySymbol=formats.CURRENCY_SYM),isUndefined(fractionSize)&&(fractionSize=formats.PATTERNS[1].maxFrac),null==amount?amount:formatNumber(amount,formats.PATTERNS[1],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize).replace(/\u00A4/g,currencySymbol)}}function numberFilter($locale){var formats=$locale.NUMBER_FORMATS;return function(number,fractionSize){return null==number?number:formatNumber(number,formats.PATTERNS[0],formats.GROUP_SEP,formats.DECIMAL_SEP,fractionSize)}}function formatNumber(number,pattern,groupSep,decimalSep,fractionSize){if(!isFinite(number)||isObject(number))return"";var isNegative=0>number;number=Math.abs(number);var numStr=number+"",formatedText="",parts=[],hasExponent=!1;if(-1!==numStr.indexOf("e")){var match=numStr.match(/([\d\.]+)e(-?)(\d+)/);match&&"-"==match[2]&&match[3]>fractionSize+1?number=0:(formatedText=numStr,hasExponent=!0)}if(hasExponent)fractionSize>0&&1>number&&(formatedText=number.toFixed(fractionSize),number=parseFloat(formatedText));else{var fractionLen=(numStr.split(DECIMAL_SEP)[1]||"").length;isUndefined(fractionSize)&&(fractionSize=Math.min(Math.max(pattern.minFrac,fractionLen),pattern.maxFrac)),number=+(Math.round(+(number.toString()+"e"+fractionSize)).toString()+"e"+-fractionSize);var fraction=(""+number).split(DECIMAL_SEP),whole=fraction[0];fraction=fraction[1]||"";var i,pos=0,lgroup=pattern.lgSize,group=pattern.gSize;if(whole.length>=lgroup+group)for(pos=whole.length-lgroup,i=0;pos>i;i++)(pos-i)%group===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(i=pos;i<whole.length;i++)(whole.length-i)%lgroup===0&&0!==i&&(formatedText+=groupSep),formatedText+=whole.charAt(i);for(;fraction.length<fractionSize;)fraction+="0";fractionSize&&"0"!==fractionSize&&(formatedText+=decimalSep+fraction.substr(0,fractionSize))}return 0===number&&(isNegative=!1),parts.push(isNegative?pattern.negPre:pattern.posPre,formatedText,isNegative?pattern.negSuf:pattern.posSuf),parts.join("")}function padNumber(num,digits,trim){var neg="";for(0>num&&(neg="-",num=-num),num=""+num;num.length<digits;)num="0"+num;return trim&&(num=num.substr(num.length-digits)),neg+num}function dateGetter(name,size,offset,trim){return offset=offset||0,function(date){var value=date["get"+name]();return(offset>0||value>-offset)&&(value+=offset),0===value&&-12==offset&&(value=12),padNumber(value,size,trim)}}function dateStrGetter(name,shortForm){return function(date,formats){var value=date["get"+name](),get=uppercase(shortForm?"SHORT"+name:name);return formats[get][value]}}function timeZoneGetter(date){var zone=-1*date.getTimezoneOffset(),paddedZone=zone>=0?"+":"";return paddedZone+=padNumber(Math[zone>0?"floor":"ceil"](zone/60),2)+padNumber(Math.abs(zone%60),2)}function getFirstThursdayOfYear(year){var dayOfWeekOnFirst=new Date(year,0,1).getDay();return new Date(year,0,(4>=dayOfWeekOnFirst?5:12)-dayOfWeekOnFirst)}function getThursdayThisWeek(datetime){return new Date(datetime.getFullYear(),datetime.getMonth(),datetime.getDate()+(4-datetime.getDay()))}function weekGetter(size){return function(date){var firstThurs=getFirstThursdayOfYear(date.getFullYear()),thisThurs=getThursdayThisWeek(date),diff=+thisThurs-+firstThurs,result=1+Math.round(diff/6048e5);return padNumber(result,size)}}function ampmGetter(date,formats){return date.getHours()<12?formats.AMPMS[0]:formats.AMPMS[1]}function eraGetter(date,formats){return date.getFullYear()<=0?formats.ERAS[0]:formats.ERAS[1]}function longEraGetter(date,formats){return date.getFullYear()<=0?formats.ERANAMES[0]:formats.ERANAMES[1]}function dateFilter($locale){function jsonStringToDate(string){var match;if(match=string.match(R_ISO8601_STR)){var date=new Date(0),tzHour=0,tzMin=0,dateSetter=match[8]?date.setUTCFullYear:date.setFullYear,timeSetter=match[8]?date.setUTCHours:date.setHours;match[9]&&(tzHour=int(match[9]+match[10]),tzMin=int(match[9]+match[11])),dateSetter.call(date,int(match[1]),int(match[2])-1,int(match[3]));var h=int(match[4]||0)-tzHour,m=int(match[5]||0)-tzMin,s=int(match[6]||0),ms=Math.round(1e3*parseFloat("0."+(match[7]||0)));return timeSetter.call(date,h,m,s,ms),date}return string}var R_ISO8601_STR=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(date,format,timezone){var fn,match,text="",parts=[];if(format=format||"mediumDate",format=$locale.DATETIME_FORMATS[format]||format,isString(date)&&(date=NUMBER_STRING.test(date)?int(date):jsonStringToDate(date)),isNumber(date)&&(date=new Date(date)),!isDate(date))return date;for(;format;)match=DATE_FORMATS_SPLIT.exec(format),match?(parts=concat(parts,match,1),format=parts.pop()):(parts.push(format),format=null);return timezone&&"UTC"===timezone&&(date=new Date(date.getTime()),date.setMinutes(date.getMinutes()+date.getTimezoneOffset())),forEach(parts,function(value){fn=DATE_FORMATS[value],text+=fn?fn(date,$locale.DATETIME_FORMATS):value.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),text}}function jsonFilter(){return function(object,spacing){return isUndefined(spacing)&&(spacing=2),toJson(object,spacing)}}function limitToFilter(){return function(input,limit){return isNumber(input)&&(input=input.toString()),isArray(input)||isString(input)?(limit=Math.abs(Number(limit))===1/0?Number(limit):int(limit),limit?limit>0?input.slice(0,limit):input.slice(limit):isString(input)?"":[]):input}}function orderByFilter($parse){return function(array,sortPredicate,reverseOrder){function comparator(o1,o2){for(var i=0;i<sortPredicate.length;i++){var comp=sortPredicate[i](o1,o2);if(0!==comp)return comp}return 0}function reverseComparator(comp,descending){return descending?function(a,b){return comp(b,a)}:comp}function isPrimitive(value){switch(typeof value){case"number":case"boolean":case"string":return!0;default:return!1}}function objectToString(value){return null===value?"null":"function"==typeof value.valueOf&&(value=value.valueOf(),isPrimitive(value))?value:"function"==typeof value.toString&&(value=value.toString(),isPrimitive(value))?value:""}function compare(v1,v2){var t1=typeof v1,t2=typeof v2;return t1===t2&&"object"===t1&&(v1=objectToString(v1),v2=objectToString(v2)),t1===t2?("string"===t1&&(v1=v1.toLowerCase(),v2=v2.toLowerCase()),v1===v2?0:v2>v1?-1:1):t2>t1?-1:1}return isArrayLike(array)?(sortPredicate=isArray(sortPredicate)?sortPredicate:[sortPredicate],0===sortPredicate.length&&(sortPredicate=["+"]),sortPredicate=sortPredicate.map(function(predicate){var descending=!1,get=predicate||identity;if(isString(predicate)){if(("+"==predicate.charAt(0)||"-"==predicate.charAt(0))&&(descending="-"==predicate.charAt(0),predicate=predicate.substring(1)),""===predicate)return reverseComparator(compare,descending);if(get=$parse(predicate),get.constant){var key=get();return reverseComparator(function(a,b){return compare(a[key],b[key])},descending)}}return reverseComparator(function(a,b){return compare(get(a),get(b))},descending)}),slice.call(array).sort(reverseComparator(comparator,reverseOrder))):array}}function ngDirective(directive){return isFunction(directive)&&(directive={link:directive}),directive.restrict=directive.restrict||"AC",valueFn(directive)}function nullFormRenameControl(control,name){control.$name=name}function FormController(element,attrs,$scope,$animate,$interpolate){var form=this,controls=[],parentForm=form.$$parentForm=element.parent().controller("form")||nullFormCtrl;form.$error={},form.$$success={},form.$pending=undefined,form.$name=$interpolate(attrs.name||attrs.ngForm||"")($scope),form.$dirty=!1,form.$pristine=!0,form.$valid=!0,form.$invalid=!1,form.$submitted=!1,parentForm.$addControl(form),form.$rollbackViewValue=function(){forEach(controls,function(control){control.$rollbackViewValue()})},form.$commitViewValue=function(){forEach(controls,function(control){control.$commitViewValue()})},form.$addControl=function(control){assertNotHasOwnProperty(control.$name,"input"),controls.push(control),control.$name&&(form[control.$name]=control)},form.$$renameControl=function(control,newName){var oldName=control.$name;form[oldName]===control&&delete form[oldName],form[newName]=control,control.$name=newName},form.$removeControl=function(control){control.$name&&form[control.$name]===control&&delete form[control.$name],forEach(form.$pending,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$error,function(value,name){form.$setValidity(name,null,control)}),forEach(form.$$success,function(value,name){form.$setValidity(name,null,control)}),arrayRemove(controls,control)},addSetValidityMethod({ctrl:this,$element:element,set:function(object,property,controller){var list=object[property];if(list){var index=list.indexOf(controller);-1===index&&list.push(controller)}else object[property]=[controller]},unset:function(object,property,controller){var list=object[property];list&&(arrayRemove(list,controller),0===list.length&&delete object[property])},parentForm:parentForm,$animate:$animate}),form.$setDirty=function(){$animate.removeClass(element,PRISTINE_CLASS),$animate.addClass(element,DIRTY_CLASS),form.$dirty=!0,form.$pristine=!1,parentForm.$setDirty()},form.$setPristine=function(){$animate.setClass(element,PRISTINE_CLASS,DIRTY_CLASS+" "+SUBMITTED_CLASS),form.$dirty=!1,form.$pristine=!0,form.$submitted=!1,forEach(controls,function(control){control.$setPristine()})},form.$setUntouched=function(){forEach(controls,function(control){control.$setUntouched()})},form.$setSubmitted=function(){$animate.addClass(element,SUBMITTED_CLASS),form.$submitted=!0,parentForm.$setSubmitted()}}function stringBasedInputType(ctrl){ctrl.$formatters.push(function(value){return ctrl.$isEmpty(value)?value:value.toString()})}function textInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl)}function baseInputType(scope,element,attr,ctrl,$sniffer,$browser){var type=lowercase(element[0].type);if(!$sniffer.android){var composing=!1;element.on("compositionstart",function(data){composing=!0}),element.on("compositionend",function(){composing=!1,listener()})}var listener=function(ev){if(timeout&&($browser.defer.cancel(timeout),timeout=null),!composing){var value=element.val(),event=ev&&ev.type;"password"===type||attr.ngTrim&&"false"===attr.ngTrim||(value=trim(value)),(ctrl.$viewValue!==value||""===value&&ctrl.$$hasNativeValidators)&&ctrl.$setViewValue(value,event)}};if($sniffer.hasEvent("input"))element.on("input",listener);else{var timeout,deferListener=function(ev,input,origValue){timeout||(timeout=$browser.defer(function(){timeout=null,input&&input.value===origValue||listener(ev)}))};element.on("keydown",function(event){var key=event.keyCode;91===key||key>15&&19>key||key>=37&&40>=key||deferListener(event,this,this.value)}),$sniffer.hasEvent("paste")&&element.on("paste cut",deferListener)}element.on("change",listener),ctrl.$render=function(){element.val(ctrl.$isEmpty(ctrl.$viewValue)?"":ctrl.$viewValue)}}function weekParser(isoWeek,existingDate){if(isDate(isoWeek))return isoWeek;if(isString(isoWeek)){WEEK_REGEXP.lastIndex=0;var parts=WEEK_REGEXP.exec(isoWeek);if(parts){var year=+parts[1],week=+parts[2],hours=0,minutes=0,seconds=0,milliseconds=0,firstThurs=getFirstThursdayOfYear(year),addDays=7*(week-1);return existingDate&&(hours=existingDate.getHours(),minutes=existingDate.getMinutes(),seconds=existingDate.getSeconds(),milliseconds=existingDate.getMilliseconds()),new Date(year,0,firstThurs.getDate()+addDays,hours,minutes,seconds,milliseconds)}}return NaN}function createDateParser(regexp,mapping){return function(iso,date){var parts,map;if(isDate(iso))return iso;if(isString(iso)){if('"'==iso.charAt(0)&&'"'==iso.charAt(iso.length-1)&&(iso=iso.substring(1,iso.length-1)),ISO_DATE_REGEXP.test(iso))return new Date(iso);if(regexp.lastIndex=0,parts=regexp.exec(iso))return parts.shift(),map=date?{yyyy:date.getFullYear(),MM:date.getMonth()+1,dd:date.getDate(),HH:date.getHours(),mm:date.getMinutes(),ss:date.getSeconds(),sss:date.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},forEach(parts,function(part,index){index<mapping.length&&(map[mapping[index]]=+part)}),new Date(map.yyyy,map.MM-1,map.dd,map.HH,map.mm,map.ss||0,1e3*map.sss||0)}return NaN}}function createDateInputType(type,regexp,parseDate,format){return function(scope,element,attr,ctrl,$sniffer,$browser,$filter){function isValidDate(value){return value&&!(value.getTime&&value.getTime()!==value.getTime())}function parseObservedDateValue(val){return isDefined(val)?isDate(val)?val:parseDate(val):undefined}badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser);var previousDate,timezone=ctrl&&ctrl.$options&&ctrl.$options.timezone;if(ctrl.$$parserName=type,ctrl.$parsers.push(function(value){if(ctrl.$isEmpty(value))return null;if(regexp.test(value)){var parsedDate=parseDate(value,previousDate);return"UTC"===timezone&&parsedDate.setMinutes(parsedDate.getMinutes()-parsedDate.getTimezoneOffset()),parsedDate}return undefined}),ctrl.$formatters.push(function(value){if(value&&!isDate(value))throw $ngModelMinErr("datefmt","Expected `{0}` to be a date",value);if(isValidDate(value)){if(previousDate=value,previousDate&&"UTC"===timezone){var timezoneOffset=6e4*previousDate.getTimezoneOffset();previousDate=new Date(previousDate.getTime()+timezoneOffset)}return $filter("date")(value,format,timezone)}return previousDate=null,""}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return!isValidDate(value)||isUndefined(minVal)||parseDate(value)>=minVal},attr.$observe("min",function(val){minVal=parseObservedDateValue(val),ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return!isValidDate(value)||isUndefined(maxVal)||parseDate(value)<=maxVal},attr.$observe("max",function(val){maxVal=parseObservedDateValue(val),ctrl.$validate()})}}}function badInputChecker(scope,element,attr,ctrl){var node=element[0],nativeValidation=ctrl.$$hasNativeValidators=isObject(node.validity);nativeValidation&&ctrl.$parsers.push(function(value){var validity=element.prop(VALIDITY_STATE_PROPERTY)||{};return validity.badInput&&!validity.typeMismatch?undefined:value})}function numberInputType(scope,element,attr,ctrl,$sniffer,$browser){if(badInputChecker(scope,element,attr,ctrl),baseInputType(scope,element,attr,ctrl,$sniffer,$browser),ctrl.$$parserName="number",ctrl.$parsers.push(function(value){return ctrl.$isEmpty(value)?null:NUMBER_REGEXP.test(value)?parseFloat(value):undefined}),ctrl.$formatters.push(function(value){if(!ctrl.$isEmpty(value)){if(!isNumber(value))throw $ngModelMinErr("numfmt","Expected `{0}` to be a number",value);value=value.toString()}return value}),isDefined(attr.min)||attr.ngMin){var minVal;ctrl.$validators.min=function(value){return ctrl.$isEmpty(value)||isUndefined(minVal)||value>=minVal},attr.$observe("min",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),minVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}if(isDefined(attr.max)||attr.ngMax){var maxVal;ctrl.$validators.max=function(value){return ctrl.$isEmpty(value)||isUndefined(maxVal)||maxVal>=value},attr.$observe("max",function(val){isDefined(val)&&!isNumber(val)&&(val=parseFloat(val,10)),maxVal=isNumber(val)&&!isNaN(val)?val:undefined,ctrl.$validate()})}}function urlInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="url",ctrl.$validators.url=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||URL_REGEXP.test(value)}}function emailInputType(scope,element,attr,ctrl,$sniffer,$browser){baseInputType(scope,element,attr,ctrl,$sniffer,$browser),stringBasedInputType(ctrl),ctrl.$$parserName="email",ctrl.$validators.email=function(modelValue,viewValue){var value=modelValue||viewValue;return ctrl.$isEmpty(value)||EMAIL_REGEXP.test(value)}}function radioInputType(scope,element,attr,ctrl){isUndefined(attr.name)&&element.attr("name",nextUid());var listener=function(ev){element[0].checked&&ctrl.$setViewValue(attr.value,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){var value=attr.value;element[0].checked=value==ctrl.$viewValue},attr.$observe("value",ctrl.$render)}function parseConstantExpr($parse,context,name,expression,fallback){var parseFn;if(isDefined(expression)){if(parseFn=$parse(expression),!parseFn.constant)throw minErr("ngModel")("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",name,expression);return parseFn(context)}return fallback}function checkboxInputType(scope,element,attr,ctrl,$sniffer,$browser,$filter,$parse){var trueValue=parseConstantExpr($parse,scope,"ngTrueValue",attr.ngTrueValue,!0),falseValue=parseConstantExpr($parse,scope,"ngFalseValue",attr.ngFalseValue,!1),listener=function(ev){ctrl.$setViewValue(element[0].checked,ev&&ev.type)};element.on("click",listener),ctrl.$render=function(){element[0].checked=ctrl.$viewValue},ctrl.$isEmpty=function(value){return value===!1},ctrl.$formatters.push(function(value){return equals(value,trueValue)}),ctrl.$parsers.push(function(value){return value?trueValue:falseValue})}function classDirective(name,selector){return name="ngClass"+name,["$animate",function($animate){function arrayDifference(tokens1,tokens2){var values=[];outer:for(var i=0;i<tokens1.length;i++){for(var token=tokens1[i],j=0;j<tokens2.length;j++)if(token==tokens2[j])continue outer;values.push(token)}return values}function arrayClasses(classVal){if(isArray(classVal))return classVal;if(isString(classVal))return classVal.split(" ");if(isObject(classVal)){var classes=[];return forEach(classVal,function(v,k){v&&(classes=classes.concat(k.split(" ")))}),classes}return classVal}return{restrict:"AC",link:function(scope,element,attr){function addClasses(classes){var newClasses=digestClassCounts(classes,1);attr.$addClass(newClasses)}function removeClasses(classes){var newClasses=digestClassCounts(classes,-1);attr.$removeClass(newClasses)}function digestClassCounts(classes,count){var classCounts=element.data("$classCounts")||{},classesToUpdate=[];return forEach(classes,function(className){(count>0||classCounts[className])&&(classCounts[className]=(classCounts[className]||0)+count,classCounts[className]===+(count>0)&&classesToUpdate.push(className))}),element.data("$classCounts",classCounts),classesToUpdate.join(" ")}function updateClasses(oldClasses,newClasses){var toAdd=arrayDifference(newClasses,oldClasses),toRemove=arrayDifference(oldClasses,newClasses);toAdd=digestClassCounts(toAdd,1),toRemove=digestClassCounts(toRemove,-1),toAdd&&toAdd.length&&$animate.addClass(element,toAdd),toRemove&&toRemove.length&&$animate.removeClass(element,toRemove)}function ngClassWatchAction(newVal){if(selector===!0||scope.$index%2===selector){var newClasses=arrayClasses(newVal||[]);if(oldVal){if(!equals(newVal,oldVal)){var oldClasses=arrayClasses(oldVal);updateClasses(oldClasses,newClasses)}}else addClasses(newClasses)}oldVal=shallowCopy(newVal)}var oldVal;scope.$watch(attr[name],ngClassWatchAction,!0),attr.$observe("class",function(value){ngClassWatchAction(scope.$eval(attr[name]))}),"ngClass"!==name&&scope.$watch("$index",function($index,old$index){var mod=1&$index;if(mod!==(1&old$index)){var classes=arrayClasses(scope.$eval(attr[name]));mod===selector?addClasses(classes):removeClasses(classes)}})}}}]}function addSetValidityMethod(context){function setValidity(validationErrorKey,state,controller){state===undefined?createAndSet("$pending",validationErrorKey,controller):unsetAndCleanup("$pending",validationErrorKey,controller),isBoolean(state)?state?(unset(ctrl.$error,validationErrorKey,controller),set(ctrl.$$success,validationErrorKey,controller)):(set(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)):(unset(ctrl.$error,validationErrorKey,controller),unset(ctrl.$$success,validationErrorKey,controller)),ctrl.$pending?(cachedToggleClass(PENDING_CLASS,!0),ctrl.$valid=ctrl.$invalid=undefined,toggleValidationCss("",null)):(cachedToggleClass(PENDING_CLASS,!1),ctrl.$valid=isObjectEmpty(ctrl.$error),ctrl.$invalid=!ctrl.$valid,toggleValidationCss("",ctrl.$valid));var combinedState;combinedState=ctrl.$pending&&ctrl.$pending[validationErrorKey]?undefined:ctrl.$error[validationErrorKey]?!1:ctrl.$$success[validationErrorKey]?!0:null,toggleValidationCss(validationErrorKey,combinedState),parentForm.$setValidity(validationErrorKey,combinedState,ctrl)}function createAndSet(name,value,controller){ctrl[name]||(ctrl[name]={}),set(ctrl[name],value,controller)}function unsetAndCleanup(name,value,controller){ctrl[name]&&unset(ctrl[name],value,controller),isObjectEmpty(ctrl[name])&&(ctrl[name]=undefined)}function cachedToggleClass(className,switchValue){switchValue&&!classCache[className]?($animate.addClass($element,className),classCache[className]=!0):!switchValue&&classCache[className]&&($animate.removeClass($element,className),classCache[className]=!1)}function toggleValidationCss(validationErrorKey,isValid){validationErrorKey=validationErrorKey?"-"+snake_case(validationErrorKey,"-"):"",cachedToggleClass(VALID_CLASS+validationErrorKey,isValid===!0),cachedToggleClass(INVALID_CLASS+validationErrorKey,isValid===!1)}var ctrl=context.ctrl,$element=context.$element,classCache={},set=context.set,unset=context.unset,parentForm=context.parentForm,$animate=context.$animate;classCache[INVALID_CLASS]=!(classCache[VALID_CLASS]=$element.hasClass(VALID_CLASS)),ctrl.$setValidity=setValidity}function isObjectEmpty(obj){if(obj)for(var prop in obj)return!1;return!0}var REGEX_STRING_REGEXP=/^\/(.+)\/([a-z]*)$/,VALIDITY_STATE_PROPERTY="validity",lowercase=function(string){return isString(string)?string.toLowerCase():string},hasOwnProperty=Object.prototype.hasOwnProperty,uppercase=function(string){return isString(string)?string.toUpperCase():string},manualLowercase=function(s){return isString(s)?s.replace(/[A-Z]/g,function(ch){return String.fromCharCode(32|ch.charCodeAt(0))}):s},manualUppercase=function(s){return isString(s)?s.replace(/[a-z]/g,function(ch){return String.fromCharCode(-33&ch.charCodeAt(0))}):s};"i"!=="I".toLowerCase()&&(lowercase=manualLowercase,uppercase=manualUppercase);var msie,jqLite,jQuery,angularModule,slice=[].slice,splice=[].splice,push=[].push,toString=Object.prototype.toString,ngMinErr=minErr("ng"),angular=window.angular||(window.angular={}),uid=0;msie=document.documentMode,noop.$inject=[],identity.$inject=[];var skipDestroyOnNextJQueryCleanData,isArray=Array.isArray,trim=function(value){return isString(value)?value.trim():value},escapeForRegexp=function(s){return s.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},csp=function(){if(isDefined(csp.isActive_))return csp.isActive_;var active=!(!document.querySelector("[ng-csp]")&&!document.querySelector("[data-ng-csp]"));if(!active)try{new Function("")}catch(e){active=!0}return csp.isActive_=active},ngAttrPrefixes=["ng-","data-ng-","ng:","x-ng-"],SNAKE_CASE_REGEXP=/[A-Z]/g,bindJQueryFired=!1,NODE_TYPE_ELEMENT=1,NODE_TYPE_TEXT=3,NODE_TYPE_COMMENT=8,NODE_TYPE_DOCUMENT=9,NODE_TYPE_DOCUMENT_FRAGMENT=11,version={full:"1.3.15",major:1,minor:3,dot:15,codeName:"locality-filtration"};JQLite.expando="ng339";var jqCache=JQLite.cache={},jqId=1,addEventListenerFn=function(element,type,fn){element.addEventListener(type,fn,!1)},removeEventListenerFn=function(element,type,fn){element.removeEventListener(type,fn,!1)};JQLite._data=function(node){return this.cache[node[this.expando]]||{}};var SPECIAL_CHARS_REGEXP=/([\:\-\_]+(.))/g,MOZ_HACK_REGEXP=/^moz([A-Z])/,MOUSE_EVENT_MAP={mouseleave:"mouseout",mouseenter:"mouseover"},jqLiteMinErr=minErr("jqLite"),SINGLE_TAG_REGEXP=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,HTML_REGEXP=/<|&#?\w+;/,TAG_NAME_REGEXP=/<([\w:]+)/,XHTML_TAG_REGEXP=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,wrapMap={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wrapMap.optgroup=wrapMap.option,wrapMap.tbody=wrapMap.tfoot=wrapMap.colgroup=wrapMap.caption=wrapMap.thead,wrapMap.th=wrapMap.td;var JQLitePrototype=JQLite.prototype={ready:function(fn){function trigger(){fired||(fired=!0,fn())}var fired=!1;"complete"===document.readyState?setTimeout(trigger):(this.on("DOMContentLoaded",trigger),JQLite(window).on("load",trigger))},toString:function(){var value=[];return forEach(this,function(e){value.push(""+e)}),"["+value.join(", ")+"]"},eq:function(index){return jqLite(index>=0?this[index]:this[this.length+index])},length:0,push:push,sort:[].sort,splice:[].splice},BOOLEAN_ATTR={};forEach("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(value){BOOLEAN_ATTR[lowercase(value)]=value});var BOOLEAN_ELEMENTS={};forEach("input,select,option,textarea,button,form,details".split(","),function(value){BOOLEAN_ELEMENTS[value]=!0});var ALIASED_ATTR={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};forEach({data:jqLiteData,removeData:jqLiteRemoveData},function(fn,name){JQLite[name]=fn}),forEach({data:jqLiteData,inheritedData:jqLiteInheritedData,scope:function(element){return jqLite.data(element,"$scope")||jqLiteInheritedData(element.parentNode||element,["$isolateScope","$scope"])},isolateScope:function(element){return jqLite.data(element,"$isolateScope")||jqLite.data(element,"$isolateScopeNoTemplate")},controller:jqLiteController,injector:function(element){return jqLiteInheritedData(element,"$injector")},removeAttr:function(element,name){element.removeAttribute(name)},hasClass:jqLiteHasClass,css:function(element,name,value){return name=camelCase(name),isDefined(value)?void(element.style[name]=value):element.style[name]},attr:function(element,name,value){var lowercasedName=lowercase(name);if(BOOLEAN_ATTR[lowercasedName]){if(!isDefined(value))return element[name]||(element.attributes.getNamedItem(name)||noop).specified?lowercasedName:undefined;value?(element[name]=!0,element.setAttribute(name,lowercasedName)):(element[name]=!1,element.removeAttribute(lowercasedName))}else if(isDefined(value))element.setAttribute(name,value);else if(element.getAttribute){var ret=element.getAttribute(name,2);return null===ret?undefined:ret}},prop:function(element,name,value){return isDefined(value)?void(element[name]=value):element[name]},text:function(){function getText(element,value){if(isUndefined(value)){var nodeType=element.nodeType;return nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_TEXT?element.textContent:"";
}element.textContent=value}return getText.$dv="",getText}(),val:function(element,value){if(isUndefined(value)){if(element.multiple&&"select"===nodeName_(element)){var result=[];return forEach(element.options,function(option){option.selected&&result.push(option.value||option.text)}),0===result.length?null:result}return element.value}element.value=value},html:function(element,value){return isUndefined(value)?element.innerHTML:(jqLiteDealoc(element,!0),void(element.innerHTML=value))},empty:jqLiteEmpty},function(fn,name){JQLite.prototype[name]=function(arg1,arg2){var i,key,nodeCount=this.length;if(fn!==jqLiteEmpty&&(2==fn.length&&fn!==jqLiteHasClass&&fn!==jqLiteController?arg1:arg2)===undefined){if(isObject(arg1)){for(i=0;nodeCount>i;i++)if(fn===jqLiteData)fn(this[i],arg1);else for(key in arg1)fn(this[i],key,arg1[key]);return this}for(var value=fn.$dv,jj=value===undefined?Math.min(nodeCount,1):nodeCount,j=0;jj>j;j++){var nodeValue=fn(this[j],arg1,arg2);value=value?value+nodeValue:nodeValue}return value}for(i=0;nodeCount>i;i++)fn(this[i],arg1,arg2);return this}}),forEach({removeData:jqLiteRemoveData,on:function jqLiteOn(element,type,fn,unsupported){if(isDefined(unsupported))throw jqLiteMinErr("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(jqLiteAcceptsData(element)){var expandoStore=jqLiteExpandoStore(element,!0),events=expandoStore.events,handle=expandoStore.handle;handle||(handle=expandoStore.handle=createEventHandler(element,events));for(var types=type.indexOf(" ")>=0?type.split(" "):[type],i=types.length;i--;){type=types[i];var eventFns=events[type];eventFns||(events[type]=[],"mouseenter"===type||"mouseleave"===type?jqLiteOn(element,MOUSE_EVENT_MAP[type],function(event){var target=this,related=event.relatedTarget;(!related||related!==target&&!target.contains(related))&&handle(event,type)}):"$destroy"!==type&&addEventListenerFn(element,type,handle),eventFns=events[type]),eventFns.push(fn)}}},off:jqLiteOff,one:function(element,type,fn){element=jqLite(element),element.on(type,function onFn(){element.off(type,fn),element.off(type,onFn)}),element.on(type,fn)},replaceWith:function(element,replaceNode){var index,parent=element.parentNode;jqLiteDealoc(element),forEach(new JQLite(replaceNode),function(node){index?parent.insertBefore(node,index.nextSibling):parent.replaceChild(node,element),index=node})},children:function(element){var children=[];return forEach(element.childNodes,function(element){element.nodeType===NODE_TYPE_ELEMENT&&children.push(element)}),children},contents:function(element){return element.contentDocument||element.childNodes||[]},append:function(element,node){var nodeType=element.nodeType;if(nodeType===NODE_TYPE_ELEMENT||nodeType===NODE_TYPE_DOCUMENT_FRAGMENT){node=new JQLite(node);for(var i=0,ii=node.length;ii>i;i++){var child=node[i];element.appendChild(child)}}},prepend:function(element,node){if(element.nodeType===NODE_TYPE_ELEMENT){var index=element.firstChild;forEach(new JQLite(node),function(child){element.insertBefore(child,index)})}},wrap:function(element,wrapNode){wrapNode=jqLite(wrapNode).eq(0).clone()[0];var parent=element.parentNode;parent&&parent.replaceChild(wrapNode,element),wrapNode.appendChild(element)},remove:jqLiteRemove,detach:function(element){jqLiteRemove(element,!0)},after:function(element,newElement){var index=element,parent=element.parentNode;newElement=new JQLite(newElement);for(var i=0,ii=newElement.length;ii>i;i++){var node=newElement[i];parent.insertBefore(node,index.nextSibling),index=node}},addClass:jqLiteAddClass,removeClass:jqLiteRemoveClass,toggleClass:function(element,selector,condition){selector&&forEach(selector.split(" "),function(className){var classCondition=condition;isUndefined(classCondition)&&(classCondition=!jqLiteHasClass(element,className)),(classCondition?jqLiteAddClass:jqLiteRemoveClass)(element,className)})},parent:function(element){var parent=element.parentNode;return parent&&parent.nodeType!==NODE_TYPE_DOCUMENT_FRAGMENT?parent:null},next:function(element){return element.nextElementSibling},find:function(element,selector){return element.getElementsByTagName?element.getElementsByTagName(selector):[]},clone:jqLiteClone,triggerHandler:function(element,event,extraParameters){var dummyEvent,eventFnsCopy,handlerArgs,eventName=event.type||event,expandoStore=jqLiteExpandoStore(element),events=expandoStore&&expandoStore.events,eventFns=events&&events[eventName];eventFns&&(dummyEvent={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:noop,type:eventName,target:element},event.type&&(dummyEvent=extend(dummyEvent,event)),eventFnsCopy=shallowCopy(eventFns),handlerArgs=extraParameters?[dummyEvent].concat(extraParameters):[dummyEvent],forEach(eventFnsCopy,function(fn){dummyEvent.isImmediatePropagationStopped()||fn.apply(element,handlerArgs)}))}},function(fn,name){JQLite.prototype[name]=function(arg1,arg2,arg3){for(var value,i=0,ii=this.length;ii>i;i++)isUndefined(value)?(value=fn(this[i],arg1,arg2,arg3),isDefined(value)&&(value=jqLite(value))):jqLiteAddNodes(value,fn(this[i],arg1,arg2,arg3));return isDefined(value)?value:this},JQLite.prototype.bind=JQLite.prototype.on,JQLite.prototype.unbind=JQLite.prototype.off}),HashMap.prototype={put:function(key,value){this[hashKey(key,this.nextUid)]=value},get:function(key){return this[hashKey(key,this.nextUid)]},remove:function(key){var value=this[key=hashKey(key,this.nextUid)];return delete this[key],value}};var FN_ARGS=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,FN_ARG_SPLIT=/,/,FN_ARG=/^\s*(_?)(\S+?)\1\s*$/,STRIP_COMMENTS=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,$injectorMinErr=minErr("$injector");createInjector.$$annotate=annotate;var $animateMinErr=minErr("$animate"),$AnimateProvider=["$provide",function($provide){this.$$selectors={},this.register=function(name,factory){var key=name+"-animation";if(name&&"."!=name.charAt(0))throw $animateMinErr("notcsel","Expecting class selector starting with '.' got '{0}'.",name);this.$$selectors[name.substr(1)]=key,$provide.factory(key,factory)},this.classNameFilter=function(expression){return 1===arguments.length&&(this.$$classNameFilter=expression instanceof RegExp?expression:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function($$q,$$asyncCallback,$rootScope){function runAnimationPostDigest(fn){var cancelFn,defer=$$q.defer();return defer.promise.$$cancelFn=function(){cancelFn&&cancelFn()},$rootScope.$$postDigest(function(){cancelFn=fn(function(){defer.resolve()})}),defer.promise}function resolveElementClasses(element,classes){var toAdd=[],toRemove=[],hasClasses=createMap();return forEach((element.attr("class")||"").split(/\s+/),function(className){hasClasses[className]=!0}),forEach(classes,function(status,className){var hasClass=hasClasses[className];status===!1&&hasClass?toRemove.push(className):status!==!0||hasClass||toAdd.push(className)}),toAdd.length+toRemove.length>0&&[toAdd.length?toAdd:null,toRemove.length?toRemove:null]}function cachedClassManipulation(cache,classes,op){for(var i=0,ii=classes.length;ii>i;++i){var className=classes[i];cache[className]=op}}function asyncPromise(){return currentDefer||(currentDefer=$$q.defer(),$$asyncCallback(function(){currentDefer.resolve(),currentDefer=null})),currentDefer.promise}function applyStyles(element,options){if(angular.isObject(options)){var styles=extend(options.from||{},options.to||{});element.css(styles)}}var currentDefer;return{animate:function(element,from,to){return applyStyles(element,{from:from,to:to}),asyncPromise()},enter:function(element,parent,after,options){return applyStyles(element,options),after?after.after(element):parent.prepend(element),asyncPromise()},leave:function(element,options){return applyStyles(element,options),element.remove(),asyncPromise()},move:function(element,parent,after,options){return this.enter(element,parent,after,options)},addClass:function(element,className,options){return this.setClass(element,className,[],options)},$$addClassImmediately:function(element,className,options){return element=jqLite(element),className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteAddClass(element,className)}),applyStyles(element,options),asyncPromise()},removeClass:function(element,className,options){return this.setClass(element,[],className,options)},$$removeClassImmediately:function(element,className,options){return element=jqLite(element),className=isString(className)?className:isArray(className)?className.join(" "):"",forEach(element,function(element){jqLiteRemoveClass(element,className)}),applyStyles(element,options),asyncPromise()},setClass:function(element,add,remove,options){var self=this,STORAGE_KEY="$$animateClasses",createdCache=!1;element=jqLite(element);var cache=element.data(STORAGE_KEY);cache?options&&cache.options&&(cache.options=angular.extend(cache.options||{},options)):(cache={classes:{},options:options},createdCache=!0);var classes=cache.classes;return add=isArray(add)?add:add.split(" "),remove=isArray(remove)?remove:remove.split(" "),cachedClassManipulation(classes,add,!0),cachedClassManipulation(classes,remove,!1),createdCache&&(cache.promise=runAnimationPostDigest(function(done){var cache=element.data(STORAGE_KEY);if(element.removeData(STORAGE_KEY),cache){var classes=resolveElementClasses(element,cache.classes);classes&&self.$$setClassImmediately(element,classes[0],classes[1],cache.options)}done()}),element.data(STORAGE_KEY,cache)),cache.promise},$$setClassImmediately:function(element,add,remove,options){return add&&this.$$addClassImmediately(element,add),remove&&this.$$removeClassImmediately(element,remove),applyStyles(element,options),asyncPromise()},enabled:noop,cancel:noop}}]}],$compileMinErr=minErr("$compile");$CompileProvider.$inject=["$provide","$$sanitizeUriProvider"];var PREFIX_REGEXP=/^((?:x|data)[\:\-_])/i,$controllerMinErr=minErr("$controller"),APPLICATION_JSON="application/json",CONTENT_TYPE_APPLICATION_JSON={"Content-Type":APPLICATION_JSON+";charset=utf-8"},JSON_START=/^\[|^\{(?!\{)/,JSON_ENDS={"[":/]$/,"{":/}$/},JSON_PROTECTION_PREFIX=/^\)\]\}',?\n/,$interpolateMinErr=minErr("$interpolate"),PATH_MATCH=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,DEFAULT_PORTS={http:80,https:443,ftp:21},$locationMinErr=minErr("$location"),locationPrototype={$$html5:!1,$$replace:!1,absUrl:locationGetter("$$absUrl"),url:function(url){if(isUndefined(url))return this.$$url;var match=PATH_MATCH.exec(url);return(match[1]||""===url)&&this.path(decodeURIComponent(match[1])),(match[2]||match[1]||""===url)&&this.search(match[3]||""),this.hash(match[5]||""),this},protocol:locationGetter("$$protocol"),host:locationGetter("$$host"),port:locationGetter("$$port"),path:locationGetterSetter("$$path",function(path){return path=null!==path?path.toString():"","/"==path.charAt(0)?path:"/"+path}),search:function(search,paramValue){switch(arguments.length){case 0:return this.$$search;case 1:if(isString(search)||isNumber(search))search=search.toString(),this.$$search=parseKeyValue(search);else{if(!isObject(search))throw $locationMinErr("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");search=copy(search,{}),forEach(search,function(value,key){null==value&&delete search[key]}),this.$$search=search}break;default:isUndefined(paramValue)||null===paramValue?delete this.$$search[search]:this.$$search[search]=paramValue}return this.$$compose(),this},hash:locationGetterSetter("$$hash",function(hash){return null!==hash?hash.toString():""}),replace:function(){return this.$$replace=!0,this}};forEach([LocationHashbangInHtml5Url,LocationHashbangUrl,LocationHtml5Url],function(Location){Location.prototype=Object.create(locationPrototype),Location.prototype.state=function(state){if(!arguments.length)return this.$$state;if(Location!==LocationHtml5Url||!this.$$html5)throw $locationMinErr("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=isUndefined(state)?null:state,this}});var $parseMinErr=minErr("$parse"),CALL=Function.prototype.call,APPLY=Function.prototype.apply,BIND=Function.prototype.bind,CONSTANTS=createMap();forEach({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(constantGetter,name){constantGetter.constant=constantGetter.literal=constantGetter.sharedGetter=!0,CONSTANTS[name]=constantGetter}),CONSTANTS["this"]=function(self){return self},CONSTANTS["this"].sharedGetter=!0;var OPERATORS=extend(createMap(),{"+":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),isDefined(a)?isDefined(b)?a+b:a:isDefined(b)?b:undefined},"-":function(self,locals,a,b){return a=a(self,locals),b=b(self,locals),(isDefined(a)?a:0)-(isDefined(b)?b:0)},"*":function(self,locals,a,b){return a(self,locals)*b(self,locals)},"/":function(self,locals,a,b){return a(self,locals)/b(self,locals)},"%":function(self,locals,a,b){return a(self,locals)%b(self,locals)},"===":function(self,locals,a,b){return a(self,locals)===b(self,locals)},"!==":function(self,locals,a,b){return a(self,locals)!==b(self,locals)},"==":function(self,locals,a,b){return a(self,locals)==b(self,locals)},"!=":function(self,locals,a,b){return a(self,locals)!=b(self,locals)},"<":function(self,locals,a,b){return a(self,locals)<b(self,locals)},">":function(self,locals,a,b){return a(self,locals)>b(self,locals)},"<=":function(self,locals,a,b){return a(self,locals)<=b(self,locals)},">=":function(self,locals,a,b){return a(self,locals)>=b(self,locals)},"&&":function(self,locals,a,b){return a(self,locals)&&b(self,locals)},"||":function(self,locals,a,b){return a(self,locals)||b(self,locals)},"!":function(self,locals,a){return!a(self,locals)},"=":!0,"|":!0}),ESCAPE={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Lexer=function(options){this.options=options};Lexer.prototype={constructor:Lexer,lex:function(text){for(this.text=text,this.index=0,this.tokens=[];this.index<this.text.length;){var ch=this.text.charAt(this.index);if('"'===ch||"'"===ch)this.readString(ch);else if(this.isNumber(ch)||"."===ch&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(ch))this.readIdent();else if(this.is(ch,"(){}[].,;:?"))this.tokens.push({index:this.index,text:ch}),this.index++;else if(this.isWhitespace(ch))this.index++;else{var ch2=ch+this.peek(),ch3=ch2+this.peek(2),op1=OPERATORS[ch],op2=OPERATORS[ch2],op3=OPERATORS[ch3];if(op1||op2||op3){var token=op3?ch3:op2?ch2:ch;this.tokens.push({index:this.index,text:token,operator:!0}),this.index+=token.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(ch,chars){return-1!==chars.indexOf(ch)},peek:function(i){var num=i||1;return this.index+num<this.text.length?this.text.charAt(this.index+num):!1},isNumber:function(ch){return ch>="0"&&"9">=ch&&"string"==typeof ch},isWhitespace:function(ch){return" "===ch||"\r"===ch||"	"===ch||"\n"===ch||""===ch||""===ch},isIdent:function(ch){return ch>="a"&&"z">=ch||ch>="A"&&"Z">=ch||"_"===ch||"$"===ch},isExpOperator:function(ch){return"-"===ch||"+"===ch||this.isNumber(ch)},throwError:function(error,start,end){end=end||this.index;var colStr=isDefined(start)?"s "+start+"-"+this.index+" ["+this.text.substring(start,end)+"]":" "+end;throw $parseMinErr("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",error,colStr,this.text)},readNumber:function(){for(var number="",start=this.index;this.index<this.text.length;){var ch=lowercase(this.text.charAt(this.index));if("."==ch||this.isNumber(ch))number+=ch;else{var peekCh=this.peek();if("e"==ch&&this.isExpOperator(peekCh))number+=ch;else if(this.isExpOperator(ch)&&peekCh&&this.isNumber(peekCh)&&"e"==number.charAt(number.length-1))number+=ch;else{if(!this.isExpOperator(ch)||peekCh&&this.isNumber(peekCh)||"e"!=number.charAt(number.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:start,text:number,constant:!0,value:Number(number)})},readIdent:function(){for(var start=this.index;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(!this.isIdent(ch)&&!this.isNumber(ch))break;this.index++}this.tokens.push({index:start,text:this.text.slice(start,this.index),identifier:!0})},readString:function(quote){var start=this.index;this.index++;for(var string="",rawString=quote,escape=!1;this.index<this.text.length;){var ch=this.text.charAt(this.index);if(rawString+=ch,escape){if("u"===ch){var hex=this.text.substring(this.index+1,this.index+5);hex.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+hex+"]"),this.index+=4,string+=String.fromCharCode(parseInt(hex,16))}else{var rep=ESCAPE[ch];string+=rep||ch}escape=!1}else if("\\"===ch)escape=!0;else{if(ch===quote)return this.index++,void this.tokens.push({index:start,text:rawString,constant:!0,value:string});string+=ch}this.index++}this.throwError("Unterminated quote",start)}};var Parser=function(lexer,$filter,options){this.lexer=lexer,this.$filter=$filter,this.options=options};Parser.ZERO=extend(function(){return 0},{sharedGetter:!0,constant:!0}),Parser.prototype={constructor:Parser,parse:function(text){this.text=text,this.tokens=this.lexer.lex(text);var value=this.statements();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),value.literal=!!value.literal,value.constant=!!value.constant,value},primary:function(){var primary;this.expect("(")?(primary=this.filterChain(),this.consume(")")):this.expect("[")?primary=this.arrayDeclaration():this.expect("{")?primary=this.object():this.peek().identifier&&this.peek().text in CONSTANTS?primary=CONSTANTS[this.consume().text]:this.peek().identifier?primary=this.identifier():this.peek().constant?primary=this.constant():this.throwError("not a primary expression",this.peek());for(var next,context;next=this.expect("(","[",".");)"("===next.text?(primary=this.functionCall(primary,context),context=null):"["===next.text?(context=primary,primary=this.objectIndex(primary)):"."===next.text?(context=primary,primary=this.fieldAccess(primary)):this.throwError("IMPOSSIBLE");return primary},throwError:function(msg,token){throw $parseMinErr("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",token.text,msg,token.index+1,this.text,this.text.substring(token.index))},peekToken:function(){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e1,e2,e3,e4){return this.peekAhead(0,e1,e2,e3,e4)},peekAhead:function(i,e1,e2,e3,e4){if(this.tokens.length>i){var token=this.tokens[i],t=token.text;if(t===e1||t===e2||t===e3||t===e4||!e1&&!e2&&!e3&&!e4)return token}return!1},expect:function(e1,e2,e3,e4){var token=this.peek(e1,e2,e3,e4);return token?(this.tokens.shift(),token):!1},consume:function(e1){if(0===this.tokens.length)throw $parseMinErr("ueoe","Unexpected end of expression: {0}",this.text);var token=this.expect(e1);return token||this.throwError("is unexpected, expecting ["+e1+"]",this.peek()),token},unaryFn:function(op,right){var fn=OPERATORS[op];return extend(function(self,locals){return fn(self,locals,right)},{constant:right.constant,inputs:[right]})},binaryFn:function(left,op,right,isBranching){var fn=OPERATORS[op];return extend(function(self,locals){return fn(self,locals,left,right)},{constant:left.constant&&right.constant,inputs:!isBranching&&[left,right]})},identifier:function(){for(var id=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)id+=this.consume().text+this.consume().text;return getterFn(id,this.options,this.text)},constant:function(){var value=this.consume().value;return extend(function(){return value},{constant:!0,literal:!0})},statements:function(){for(var statements=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&statements.push(this.filterChain()),!this.expect(";"))return 1===statements.length?statements[0]:function(self,locals){for(var value,i=0,ii=statements.length;ii>i;i++)value=statements[i](self,locals);return value}},filterChain:function(){for(var token,left=this.expression();token=this.expect("|");)left=this.filter(left);return left},filter:function(inputFn){var argsFn,args,fn=this.$filter(this.consume().text);if(this.peek(":"))for(argsFn=[],args=[];this.expect(":");)argsFn.push(this.expression());var inputs=[inputFn].concat(argsFn||[]);return extend(function(self,locals){var input=inputFn(self,locals);if(args){args[0]=input;for(var i=argsFn.length;i--;)args[i+1]=argsFn[i](self,locals);return fn.apply(undefined,args)}return fn(input)},{constant:!fn.$stateful&&inputs.every(isConstant),inputs:!fn.$stateful&&inputs})},expression:function(){return this.assignment()},assignment:function(){var right,token,left=this.ternary();return(token=this.expect("="))?(left.assign||this.throwError("implies assignment but ["+this.text.substring(0,token.index)+"] can not be assigned to",token),right=this.ternary(),extend(function(scope,locals){return left.assign(scope,right(scope,locals),locals)},{inputs:[left,right]})):left},ternary:function(){var middle,token,left=this.logicalOR();if((token=this.expect("?"))&&(middle=this.assignment(),this.consume(":"))){var right=this.assignment();return extend(function(self,locals){return left(self,locals)?middle(self,locals):right(self,locals)},{constant:left.constant&&middle.constant&&right.constant})}return left},logicalOR:function(){for(var token,left=this.logicalAND();token=this.expect("||");)left=this.binaryFn(left,token.text,this.logicalAND(),!0);return left},logicalAND:function(){for(var token,left=this.equality();token=this.expect("&&");)left=this.binaryFn(left,token.text,this.equality(),!0);return left},equality:function(){for(var token,left=this.relational();token=this.expect("==","!=","===","!==");)left=this.binaryFn(left,token.text,this.relational());return left},relational:function(){for(var token,left=this.additive();token=this.expect("<",">","<=",">=");)left=this.binaryFn(left,token.text,this.additive());return left},additive:function(){for(var token,left=this.multiplicative();token=this.expect("+","-");)left=this.binaryFn(left,token.text,this.multiplicative());return left},multiplicative:function(){for(var token,left=this.unary();token=this.expect("*","/","%");)left=this.binaryFn(left,token.text,this.unary());return left},unary:function(){var token;return this.expect("+")?this.primary():(token=this.expect("-"))?this.binaryFn(Parser.ZERO,token.text,this.unary()):(token=this.expect("!"))?this.unaryFn(token.text,this.unary()):this.primary()},fieldAccess:function(object){var getter=this.identifier();return extend(function(scope,locals,self){var o=self||object(scope,locals);return null==o?undefined:getter(o)},{assign:function(scope,value,locals){var o=object(scope,locals);return o||object.assign(scope,o={},locals),getter.assign(o,value)}})},objectIndex:function(obj){var expression=this.text,indexFn=this.expression();return this.consume("]"),extend(function(self,locals){var v,o=obj(self,locals),i=indexFn(self,locals);return ensureSafeMemberName(i,expression),o?v=ensureSafeObject(o[i],expression):undefined},{assign:function(self,value,locals){var key=ensureSafeMemberName(indexFn(self,locals),expression),o=ensureSafeObject(obj(self,locals),expression);return o||obj.assign(self,o={},locals),o[key]=value}})},functionCall:function(fnGetter,contextGetter){var argsFn=[];if(")"!==this.peekToken().text)do argsFn.push(this.expression());while(this.expect(","));this.consume(")");var expressionText=this.text,args=argsFn.length?[]:null;return function(scope,locals){var context=contextGetter?contextGetter(scope,locals):isDefined(contextGetter)?undefined:scope,fn=fnGetter(scope,locals,context)||noop;if(args)for(var i=argsFn.length;i--;)args[i]=ensureSafeObject(argsFn[i](scope,locals),expressionText);ensureSafeObject(context,expressionText),ensureSafeFunction(fn,expressionText);var v=fn.apply?fn.apply(context,args):fn(args[0],args[1],args[2],args[3],args[4]);return args&&(args.length=0),ensureSafeObject(v,expressionText)}},arrayDeclaration:function(){var elementFns=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;elementFns.push(this.expression())}while(this.expect(","));return this.consume("]"),extend(function(self,locals){for(var array=[],i=0,ii=elementFns.length;ii>i;i++)array.push(elementFns[i](self,locals));return array},{literal:!0,constant:elementFns.every(isConstant),inputs:elementFns})},object:function(){var keys=[],valueFns=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var token=this.consume();token.constant?keys.push(token.value):token.identifier?keys.push(token.text):this.throwError("invalid key",token),this.consume(":"),valueFns.push(this.expression())}while(this.expect(","));return this.consume("}"),extend(function(self,locals){for(var object={},i=0,ii=valueFns.length;ii>i;i++)object[keys[i]]=valueFns[i](self,locals);return object},{literal:!0,constant:valueFns.every(isConstant),inputs:valueFns})}};var getterFnCacheDefault=createMap(),getterFnCacheExpensive=createMap(),objectValueOf=Object.prototype.valueOf,$sceMinErr=minErr("$sce"),SCE_CONTEXTS={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},$compileMinErr=minErr("$compile"),urlParsingNode=document.createElement("a"),originUrl=urlResolve(window.location.href);$FilterProvider.$inject=["$provide"],currencyFilter.$inject=["$locale"],numberFilter.$inject=["$locale"];var DECIMAL_SEP=".",DATE_FORMATS={yyyy:dateGetter("FullYear",4),yy:dateGetter("FullYear",2,0,!0),y:dateGetter("FullYear",1),MMMM:dateStrGetter("Month"),MMM:dateStrGetter("Month",!0),MM:dateGetter("Month",2,1),M:dateGetter("Month",1,1),dd:dateGetter("Date",2),d:dateGetter("Date",1),HH:dateGetter("Hours",2),H:dateGetter("Hours",1),hh:dateGetter("Hours",2,-12),h:dateGetter("Hours",1,-12),mm:dateGetter("Minutes",2),m:dateGetter("Minutes",1),ss:dateGetter("Seconds",2),s:dateGetter("Seconds",1),sss:dateGetter("Milliseconds",3),EEEE:dateStrGetter("Day"),EEE:dateStrGetter("Day",!0),a:ampmGetter,Z:timeZoneGetter,ww:weekGetter(2),w:weekGetter(1),G:eraGetter,GG:eraGetter,GGG:eraGetter,GGGG:longEraGetter},DATE_FORMATS_SPLIT=/((?:[^yMdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,NUMBER_STRING=/^\-?\d+$/;dateFilter.$inject=["$locale"];var lowercaseFilter=valueFn(lowercase),uppercaseFilter=valueFn(uppercase);orderByFilter.$inject=["$parse"];var htmlAnchorDirective=valueFn({restrict:"E",compile:function(element,attr){return attr.href||attr.xlinkHref||attr.name?void 0:function(scope,element){if("a"===element[0].nodeName.toLowerCase()){var href="[object SVGAnimatedString]"===toString.call(element.prop("href"))?"xlink:href":"href";element.on("click",function(event){element.attr(href)||event.preventDefault()})}}}}),ngAttributeAliasDirectives={};forEach(BOOLEAN_ATTR,function(propName,attrName){if("multiple"!=propName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{restrict:"A",priority:100,link:function(scope,element,attr){scope.$watch(attr[normalized],function(value){attr.$set(attrName,!!value)})}}}}}),forEach(ALIASED_ATTR,function(htmlAttr,ngAttr){ngAttributeAliasDirectives[ngAttr]=function(){return{priority:100,link:function(scope,element,attr){if("ngPattern"===ngAttr&&"/"==attr.ngPattern.charAt(0)){var match=attr.ngPattern.match(REGEX_STRING_REGEXP);if(match)return void attr.$set("ngPattern",new RegExp(match[1],match[2]))}scope.$watch(attr[ngAttr],function(value){attr.$set(ngAttr,value)})}}}}),forEach(["src","srcset","href"],function(attrName){var normalized=directiveNormalize("ng-"+attrName);ngAttributeAliasDirectives[normalized]=function(){return{priority:99,link:function(scope,element,attr){var propName=attrName,name=attrName;"href"===attrName&&"[object SVGAnimatedString]"===toString.call(element.prop("href"))&&(name="xlinkHref",attr.$attr[name]="xlink:href",propName=null),attr.$observe(normalized,function(value){return value?(attr.$set(name,value),void(msie&&propName&&element.prop(propName,attr[name]))):void("href"===attrName&&attr.$set(name,null))})}}}});var nullFormCtrl={$addControl:noop,$$renameControl:nullFormRenameControl,$removeControl:noop,$setValidity:noop,$setDirty:noop,$setPristine:noop,$setSubmitted:noop},SUBMITTED_CLASS="ng-submitted";FormController.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var formDirectiveFactory=function(isNgForm){return["$timeout",function($timeout){var formDirective={name:"form",restrict:isNgForm?"EAC":"E",controller:FormController,compile:function(formElement,attr){formElement.addClass(PRISTINE_CLASS).addClass(VALID_CLASS);var nameAttr=attr.name?"name":isNgForm&&attr.ngForm?"ngForm":!1;return{pre:function(scope,formElement,attr,controller){if(!("action"in attr)){var handleFormSubmission=function(event){scope.$apply(function(){controller.$commitViewValue(),controller.$setSubmitted()}),event.preventDefault()};addEventListenerFn(formElement[0],"submit",handleFormSubmission),formElement.on("$destroy",function(){$timeout(function(){removeEventListenerFn(formElement[0],"submit",handleFormSubmission)},0,!1)})}var parentFormCtrl=controller.$$parentForm;nameAttr&&(setter(scope,null,controller.$name,controller,controller.$name),attr.$observe(nameAttr,function(newValue){controller.$name!==newValue&&(setter(scope,null,controller.$name,undefined,controller.$name),parentFormCtrl.$$renameControl(controller,newValue),setter(scope,null,controller.$name,controller,controller.$name))})),formElement.on("$destroy",function(){parentFormCtrl.$removeControl(controller),nameAttr&&setter(scope,null,attr[nameAttr],undefined,controller.$name),extend(controller,nullFormCtrl)})}}}};return formDirective}]},formDirective=formDirectiveFactory(),ngFormDirective=formDirectiveFactory(!0),ISO_DATE_REGEXP=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,URL_REGEXP=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,EMAIL_REGEXP=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,NUMBER_REGEXP=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,DATE_REGEXP=/^(\d{4})-(\d{2})-(\d{2})$/,DATETIMELOCAL_REGEXP=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,WEEK_REGEXP=/^(\d{4})-W(\d\d)$/,MONTH_REGEXP=/^(\d{4})-(\d\d)$/,TIME_REGEXP=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,inputType={text:textInputType,date:createDateInputType("date",DATE_REGEXP,createDateParser(DATE_REGEXP,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":createDateInputType("datetimelocal",DATETIMELOCAL_REGEXP,createDateParser(DATETIMELOCAL_REGEXP,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:createDateInputType("time",TIME_REGEXP,createDateParser(TIME_REGEXP,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:createDateInputType("week",WEEK_REGEXP,weekParser,"yyyy-Www"),month:createDateInputType("month",MONTH_REGEXP,createDateParser(MONTH_REGEXP,["yyyy","MM"]),"yyyy-MM"),number:numberInputType,url:urlInputType,email:emailInputType,radio:radioInputType,checkbox:checkboxInputType,hidden:noop,button:noop,submit:noop,reset:noop,file:noop},inputDirective=["$browser","$sniffer","$filter","$parse",function($browser,$sniffer,$filter,$parse){return{restrict:"E",require:["?ngModel"],link:{pre:function(scope,element,attr,ctrls){ctrls[0]&&(inputType[lowercase(attr.type)]||inputType.text)(scope,element,attr,ctrls[0],$sniffer,$browser,$filter,$parse)}}}}],CONSTANT_VALUE_REGEXP=/^(true|false|\d+)$/,ngValueDirective=function(){return{restrict:"A",priority:100,compile:function(tpl,tplAttr){return CONSTANT_VALUE_REGEXP.test(tplAttr.ngValue)?function(scope,elm,attr){attr.$set("value",scope.$eval(attr.ngValue))}:function(scope,elm,attr){
scope.$watch(attr.ngValue,function(value){attr.$set("value",value)})}}}},ngBindDirective=["$compile",function($compile){return{restrict:"AC",compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBind),element=element[0],scope.$watch(attr.ngBind,function(value){element.textContent=value===undefined?"":value})}}}}],ngBindTemplateDirective=["$interpolate","$compile",function($interpolate,$compile){return{compile:function(templateElement){return $compile.$$addBindingClass(templateElement),function(scope,element,attr){var interpolateFn=$interpolate(element.attr(attr.$attr.ngBindTemplate));$compile.$$addBindingInfo(element,interpolateFn.expressions),element=element[0],attr.$observe("ngBindTemplate",function(value){element.textContent=value===undefined?"":value})}}}}],ngBindHtmlDirective=["$sce","$parse","$compile",function($sce,$parse,$compile){return{restrict:"A",compile:function(tElement,tAttrs){var ngBindHtmlGetter=$parse(tAttrs.ngBindHtml),ngBindHtmlWatch=$parse(tAttrs.ngBindHtml,function(value){return(value||"").toString()});return $compile.$$addBindingClass(tElement),function(scope,element,attr){$compile.$$addBindingInfo(element,attr.ngBindHtml),scope.$watch(ngBindHtmlWatch,function(){element.html($sce.getTrustedHtml(ngBindHtmlGetter(scope))||"")})}}}}],ngChangeDirective=valueFn({restrict:"A",require:"ngModel",link:function(scope,element,attr,ctrl){ctrl.$viewChangeListeners.push(function(){scope.$eval(attr.ngChange)})}}),ngClassDirective=classDirective("",!0),ngClassOddDirective=classDirective("Odd",0),ngClassEvenDirective=classDirective("Even",1),ngCloakDirective=ngDirective({compile:function(element,attr){attr.$set("ngCloak",undefined),element.removeClass("ng-cloak")}}),ngControllerDirective=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ngEventDirectives={},forceAsyncEvents={blur:!0,focus:!0};forEach("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(eventName){var directiveName=directiveNormalize("ng-"+eventName);ngEventDirectives[directiveName]=["$parse","$rootScope",function($parse,$rootScope){return{restrict:"A",compile:function($element,attr){var fn=$parse(attr[directiveName],null,!0);return function(scope,element){element.on(eventName,function(event){var callback=function(){fn(scope,{$event:event})};forceAsyncEvents[eventName]&&$rootScope.$$phase?scope.$evalAsync(callback):scope.$apply(callback)})}}}}]});var ngIfDirective=["$animate",function($animate){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function($scope,$element,$attr,ctrl,$transclude){var block,childScope,previousElements;$scope.$watch($attr.ngIf,function(value){value?childScope||$transclude(function(clone,newScope){childScope=newScope,clone[clone.length++]=document.createComment(" end ngIf: "+$attr.ngIf+" "),block={clone:clone},$animate.enter(clone,$element.parent(),$element)}):(previousElements&&(previousElements.remove(),previousElements=null),childScope&&(childScope.$destroy(),childScope=null),block&&(previousElements=getBlockNodes(block.clone),$animate.leave(previousElements).then(function(){previousElements=null}),block=null))})}}}],ngIncludeDirective=["$templateRequest","$anchorScroll","$animate","$sce",function($templateRequest,$anchorScroll,$animate,$sce){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:angular.noop,compile:function(element,attr){var srcExp=attr.ngInclude||attr.src,onloadExp=attr.onload||"",autoScrollExp=attr.autoscroll;return function(scope,$element,$attr,ctrl,$transclude){var currentScope,previousElement,currentElement,changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(srcExp),function(src){var afterAnimation=function(){!isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()},thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=scope.$new();ctrl.template=response;var clone=$transclude(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,null,$element).then(afterAnimation)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src),scope.$eval(onloadExp)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):(cleanupLastIncludeContent(),ctrl.template=null)})}}}}],ngIncludeFillContentDirective=["$compile",function($compile){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(scope,$element,$attr,ctrl){return/SVG/.test($element[0].toString())?($element.empty(),void $compile(jqLiteBuildFragment(ctrl.template,document).childNodes)(scope,function(clone){$element.append(clone)},{futureParentElement:$element})):($element.html(ctrl.template),void $compile($element.contents())(scope))}}}],ngInitDirective=ngDirective({priority:450,compile:function(){return{pre:function(scope,element,attrs){scope.$eval(attrs.ngInit)}}}}),ngListDirective=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(scope,element,attr,ctrl){var ngList=element.attr(attr.$attr.ngList)||", ",trimValues="false"!==attr.ngTrim,separator=trimValues?trim(ngList):ngList,parse=function(viewValue){if(!isUndefined(viewValue)){var list=[];return viewValue&&forEach(viewValue.split(separator),function(value){value&&list.push(trimValues?trim(value):value)}),list}};ctrl.$parsers.push(parse),ctrl.$formatters.push(function(value){return isArray(value)?value.join(ngList):undefined}),ctrl.$isEmpty=function(value){return!value||!value.length}}}},VALID_CLASS="ng-valid",INVALID_CLASS="ng-invalid",PRISTINE_CLASS="ng-pristine",DIRTY_CLASS="ng-dirty",UNTOUCHED_CLASS="ng-untouched",TOUCHED_CLASS="ng-touched",PENDING_CLASS="ng-pending",$ngModelMinErr=new minErr("ngModel"),NgModelController=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function($scope,$exceptionHandler,$attr,$element,$parse,$animate,$timeout,$rootScope,$q,$interpolate){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=undefined,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=undefined,this.$name=$interpolate($attr.name||"",!1)($scope);var parserValid,parsedNgModel=$parse($attr.ngModel),parsedNgModelAssign=parsedNgModel.assign,ngModelGet=parsedNgModel,ngModelSet=parsedNgModelAssign,pendingDebounce=null,ctrl=this;this.$$setOptions=function(options){if(ctrl.$options=options,options&&options.getterSetter){var invokeModelGetter=$parse($attr.ngModel+"()"),invokeModelSetter=$parse($attr.ngModel+"($$$p)");ngModelGet=function($scope){var modelValue=parsedNgModel($scope);return isFunction(modelValue)&&(modelValue=invokeModelGetter($scope)),modelValue},ngModelSet=function($scope,newValue){isFunction(parsedNgModel($scope))?invokeModelSetter($scope,{$$$p:ctrl.$modelValue}):parsedNgModelAssign($scope,ctrl.$modelValue)}}else if(!parsedNgModel.assign)throw $ngModelMinErr("nonassign","Expression '{0}' is non-assignable. Element: {1}",$attr.ngModel,startingTag($element))},this.$render=noop,this.$isEmpty=function(value){return isUndefined(value)||""===value||null===value||value!==value};var parentForm=$element.inheritedData("$formController")||nullFormCtrl,currentValidationRunId=0;addSetValidityMethod({ctrl:this,$element:$element,set:function(object,property){object[property]=!0},unset:function(object,property){delete object[property]},parentForm:parentForm,$animate:$animate}),this.$setPristine=function(){ctrl.$dirty=!1,ctrl.$pristine=!0,$animate.removeClass($element,DIRTY_CLASS),$animate.addClass($element,PRISTINE_CLASS)},this.$setDirty=function(){ctrl.$dirty=!0,ctrl.$pristine=!1,$animate.removeClass($element,PRISTINE_CLASS),$animate.addClass($element,DIRTY_CLASS),parentForm.$setDirty()},this.$setUntouched=function(){ctrl.$touched=!1,ctrl.$untouched=!0,$animate.setClass($element,UNTOUCHED_CLASS,TOUCHED_CLASS)},this.$setTouched=function(){ctrl.$touched=!0,ctrl.$untouched=!1,$animate.setClass($element,TOUCHED_CLASS,UNTOUCHED_CLASS)},this.$rollbackViewValue=function(){$timeout.cancel(pendingDebounce),ctrl.$viewValue=ctrl.$$lastCommittedViewValue,ctrl.$render()},this.$validate=function(){if(!isNumber(ctrl.$modelValue)||!isNaN(ctrl.$modelValue)){var viewValue=ctrl.$$lastCommittedViewValue,modelValue=ctrl.$$rawModelValue,prevValid=ctrl.$valid,prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$runValidators(modelValue,viewValue,function(allValid){allowInvalid||prevValid===allValid||(ctrl.$modelValue=allValid?modelValue:undefined,ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope())})}},this.$$runValidators=function(modelValue,viewValue,doneCallback){function processParseErrors(){var errorKey=ctrl.$$parserName||"parse";return parserValid!==undefined?(parserValid||(forEach(ctrl.$validators,function(v,name){setValidity(name,null)}),forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)})),setValidity(errorKey,parserValid),parserValid):(setValidity(errorKey,null),!0)}function processSyncValidators(){var syncValidatorsValid=!0;return forEach(ctrl.$validators,function(validator,name){var result=validator(modelValue,viewValue);syncValidatorsValid=syncValidatorsValid&&result,setValidity(name,result)}),syncValidatorsValid?!0:(forEach(ctrl.$asyncValidators,function(v,name){setValidity(name,null)}),!1)}function processAsyncValidators(){var validatorPromises=[],allValid=!0;forEach(ctrl.$asyncValidators,function(validator,name){var promise=validator(modelValue,viewValue);if(!isPromiseLike(promise))throw $ngModelMinErr("$asyncValidators","Expected asynchronous validator to return a promise but got '{0}' instead.",promise);setValidity(name,undefined),validatorPromises.push(promise.then(function(){setValidity(name,!0)},function(error){allValid=!1,setValidity(name,!1)}))}),validatorPromises.length?$q.all(validatorPromises).then(function(){validationDone(allValid)},noop):validationDone(!0)}function setValidity(name,isValid){localValidationRunId===currentValidationRunId&&ctrl.$setValidity(name,isValid)}function validationDone(allValid){localValidationRunId===currentValidationRunId&&doneCallback(allValid)}currentValidationRunId++;var localValidationRunId=currentValidationRunId;return processParseErrors()&&processSyncValidators()?void processAsyncValidators():void validationDone(!1)},this.$commitViewValue=function(){var viewValue=ctrl.$viewValue;$timeout.cancel(pendingDebounce),(ctrl.$$lastCommittedViewValue!==viewValue||""===viewValue&&ctrl.$$hasNativeValidators)&&(ctrl.$$lastCommittedViewValue=viewValue,ctrl.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function writeToModelIfNeeded(){ctrl.$modelValue!==prevModelValue&&ctrl.$$writeModelToScope()}var viewValue=ctrl.$$lastCommittedViewValue,modelValue=viewValue;if(parserValid=isUndefined(modelValue)?undefined:!0)for(var i=0;i<ctrl.$parsers.length;i++)if(modelValue=ctrl.$parsers[i](modelValue),isUndefined(modelValue)){parserValid=!1;break}isNumber(ctrl.$modelValue)&&isNaN(ctrl.$modelValue)&&(ctrl.$modelValue=ngModelGet($scope));var prevModelValue=ctrl.$modelValue,allowInvalid=ctrl.$options&&ctrl.$options.allowInvalid;ctrl.$$rawModelValue=modelValue,allowInvalid&&(ctrl.$modelValue=modelValue,writeToModelIfNeeded()),ctrl.$$runValidators(modelValue,ctrl.$$lastCommittedViewValue,function(allValid){allowInvalid||(ctrl.$modelValue=allValid?modelValue:undefined,writeToModelIfNeeded())})},this.$$writeModelToScope=function(){ngModelSet($scope,ctrl.$modelValue),forEach(ctrl.$viewChangeListeners,function(listener){try{listener()}catch(e){$exceptionHandler(e)}})},this.$setViewValue=function(value,trigger){ctrl.$viewValue=value,(!ctrl.$options||ctrl.$options.updateOnDefault)&&ctrl.$$debounceViewValueCommit(trigger)},this.$$debounceViewValueCommit=function(trigger){var debounce,debounceDelay=0,options=ctrl.$options;options&&isDefined(options.debounce)&&(debounce=options.debounce,isNumber(debounce)?debounceDelay=debounce:isNumber(debounce[trigger])?debounceDelay=debounce[trigger]:isNumber(debounce["default"])&&(debounceDelay=debounce["default"])),$timeout.cancel(pendingDebounce),debounceDelay?pendingDebounce=$timeout(function(){ctrl.$commitViewValue()},debounceDelay):$rootScope.$$phase?ctrl.$commitViewValue():$scope.$apply(function(){ctrl.$commitViewValue()})},$scope.$watch(function(){var modelValue=ngModelGet($scope);if(modelValue!==ctrl.$modelValue){ctrl.$modelValue=ctrl.$$rawModelValue=modelValue,parserValid=undefined;for(var formatters=ctrl.$formatters,idx=formatters.length,viewValue=modelValue;idx--;)viewValue=formatters[idx](viewValue);ctrl.$viewValue!==viewValue&&(ctrl.$viewValue=ctrl.$$lastCommittedViewValue=viewValue,ctrl.$render(),ctrl.$$runValidators(modelValue,viewValue,noop))}return modelValue})}],ngModelDirective=["$rootScope",function($rootScope){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:NgModelController,priority:1,compile:function(element){return element.addClass(PRISTINE_CLASS).addClass(UNTOUCHED_CLASS).addClass(VALID_CLASS),{pre:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0],formCtrl=ctrls[1]||nullFormCtrl;modelCtrl.$$setOptions(ctrls[2]&&ctrls[2].$options),formCtrl.$addControl(modelCtrl),attr.$observe("name",function(newValue){modelCtrl.$name!==newValue&&formCtrl.$$renameControl(modelCtrl,newValue)}),scope.$on("$destroy",function(){formCtrl.$removeControl(modelCtrl)})},post:function(scope,element,attr,ctrls){var modelCtrl=ctrls[0];modelCtrl.$options&&modelCtrl.$options.updateOn&&element.on(modelCtrl.$options.updateOn,function(ev){modelCtrl.$$debounceViewValueCommit(ev&&ev.type)}),element.on("blur",function(ev){modelCtrl.$touched||($rootScope.$$phase?scope.$evalAsync(modelCtrl.$setTouched):scope.$apply(modelCtrl.$setTouched))})}}}}}],DEFAULT_REGEXP=/(\s+|^)default(\s+|$)/,ngModelOptionsDirective=function(){return{restrict:"A",controller:["$scope","$attrs",function($scope,$attrs){var that=this;this.$options=$scope.$eval($attrs.ngModelOptions),this.$options.updateOn!==undefined?(this.$options.updateOnDefault=!1,this.$options.updateOn=trim(this.$options.updateOn.replace(DEFAULT_REGEXP,function(){return that.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},ngNonBindableDirective=ngDirective({terminal:!0,priority:1e3}),ngPluralizeDirective=["$locale","$interpolate",function($locale,$interpolate){var BRACE=/{}/g,IS_WHEN=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(scope,element,attr){function updateElementText(newText){element.text(newText||"")}var lastCount,numberExp=attr.count,whenExp=attr.$attr.when&&element.attr(attr.$attr.when),offset=attr.offset||0,whens=scope.$eval(whenExp)||{},whensExpFns={},startSymbol=$interpolate.startSymbol(),endSymbol=$interpolate.endSymbol(),braceReplacement=startSymbol+numberExp+"-"+offset+endSymbol,watchRemover=angular.noop;forEach(attr,function(expression,attributeName){var tmpMatch=IS_WHEN.exec(attributeName);if(tmpMatch){var whenKey=(tmpMatch[1]?"-":"")+lowercase(tmpMatch[2]);whens[whenKey]=element.attr(attr.$attr[attributeName])}}),forEach(whens,function(expression,key){whensExpFns[key]=$interpolate(expression.replace(BRACE,braceReplacement))}),scope.$watch(numberExp,function(newVal){var count=parseFloat(newVal),countIsNaN=isNaN(count);countIsNaN||count in whens||(count=$locale.pluralCat(count-offset)),count===lastCount||countIsNaN&&isNaN(lastCount)||(watchRemover(),watchRemover=scope.$watch(whensExpFns[count],updateElementText),lastCount=count)})}}}],ngRepeatDirective=["$parse","$animate",function($parse,$animate){var NG_REMOVED="$$NG_REMOVED",ngRepeatMinErr=minErr("ngRepeat"),updateScope=function(scope,index,valueIdentifier,value,keyIdentifier,key,arrayLength){scope[valueIdentifier]=value,keyIdentifier&&(scope[keyIdentifier]=key),scope.$index=index,scope.$first=0===index,scope.$last=index===arrayLength-1,scope.$middle=!(scope.$first||scope.$last),scope.$odd=!(scope.$even=0===(1&index))},getBlockStart=function(block){return block.clone[0]},getBlockEnd=function(block){return block.clone[block.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function($element,$attr){var expression=$attr.ngRepeat,ngRepeatEndComment=document.createComment(" end ngRepeat: "+expression+" "),match=expression.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!match)throw ngRepeatMinErr("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",expression);var lhs=match[1],rhs=match[2],aliasAs=match[3],trackByExp=match[4];if(match=lhs.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!match)throw ngRepeatMinErr("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",lhs);var valueIdentifier=match[3]||match[1],keyIdentifier=match[2];if(aliasAs&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(aliasAs)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(aliasAs)))throw ngRepeatMinErr("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",aliasAs);var trackByExpGetter,trackByIdExpFn,trackByIdArrayFn,trackByIdObjFn,hashFnLocals={$id:hashKey};return trackByExp?trackByExpGetter=$parse(trackByExp):(trackByIdArrayFn=function(key,value){return hashKey(value)},trackByIdObjFn=function(key){return key}),function($scope,$element,$attr,ctrl,$transclude){trackByExpGetter&&(trackByIdExpFn=function(key,value,index){return keyIdentifier&&(hashFnLocals[keyIdentifier]=key),hashFnLocals[valueIdentifier]=value,hashFnLocals.$index=index,trackByExpGetter($scope,hashFnLocals)});var lastBlockMap=createMap();$scope.$watchCollection(rhs,function(collection){var index,length,nextNode,collectionLength,key,value,trackById,trackByIdFn,collectionKeys,block,nextBlockOrder,elementsToRemove,previousNode=$element[0],nextBlockMap=createMap();if(aliasAs&&($scope[aliasAs]=collection),isArrayLike(collection))collectionKeys=collection,trackByIdFn=trackByIdExpFn||trackByIdArrayFn;else{trackByIdFn=trackByIdExpFn||trackByIdObjFn,collectionKeys=[];for(var itemKey in collection)collection.hasOwnProperty(itemKey)&&"$"!=itemKey.charAt(0)&&collectionKeys.push(itemKey);collectionKeys.sort()}for(collectionLength=collectionKeys.length,nextBlockOrder=new Array(collectionLength),index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],trackById=trackByIdFn(key,value,index),lastBlockMap[trackById])block=lastBlockMap[trackById],delete lastBlockMap[trackById],nextBlockMap[trackById]=block,nextBlockOrder[index]=block;else{if(nextBlockMap[trackById])throw forEach(nextBlockOrder,function(block){block&&block.scope&&(lastBlockMap[block.id]=block)}),ngRepeatMinErr("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",expression,trackById,value);nextBlockOrder[index]={id:trackById,scope:undefined,clone:undefined},nextBlockMap[trackById]=!0}for(var blockKey in lastBlockMap){if(block=lastBlockMap[blockKey],elementsToRemove=getBlockNodes(block.clone),$animate.leave(elementsToRemove),elementsToRemove[0].parentNode)for(index=0,length=elementsToRemove.length;length>index;index++)elementsToRemove[index][NG_REMOVED]=!0;block.scope.$destroy()}for(index=0;collectionLength>index;index++)if(key=collection===collectionKeys?index:collectionKeys[index],value=collection[key],block=nextBlockOrder[index],block.scope){nextNode=previousNode;do nextNode=nextNode.nextSibling;while(nextNode&&nextNode[NG_REMOVED]);getBlockStart(block)!=nextNode&&$animate.move(getBlockNodes(block.clone),null,jqLite(previousNode)),previousNode=getBlockEnd(block),updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)}else $transclude(function(clone,scope){block.scope=scope;var endNode=ngRepeatEndComment.cloneNode(!1);clone[clone.length++]=endNode,$animate.enter(clone,null,jqLite(previousNode)),previousNode=endNode,block.clone=clone,nextBlockMap[block.id]=block,updateScope(block.scope,index,valueIdentifier,value,keyIdentifier,key,collectionLength)});lastBlockMap=nextBlockMap})}}}}],NG_HIDE_CLASS="ng-hide",NG_HIDE_IN_PROGRESS_CLASS="ng-hide-animate",ngShowDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngShow,function(value){$animate[value?"removeClass":"addClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngHideDirective=["$animate",function($animate){return{restrict:"A",multiElement:!0,link:function(scope,element,attr){scope.$watch(attr.ngHide,function(value){$animate[value?"addClass":"removeClass"](element,NG_HIDE_CLASS,{tempClasses:NG_HIDE_IN_PROGRESS_CLASS})})}}}],ngStyleDirective=ngDirective(function(scope,element,attr){scope.$watchCollection(attr.ngStyle,function(newStyles,oldStyles){oldStyles&&newStyles!==oldStyles&&forEach(oldStyles,function(val,style){element.css(style,"")}),newStyles&&element.css(newStyles)})}),ngSwitchDirective=["$animate",function($animate){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(scope,element,attr,ngSwitchController){var watchExpr=attr.ngSwitch||attr.on,selectedTranscludes=[],selectedElements=[],previousLeaveAnimations=[],selectedScopes=[],spliceFactory=function(array,index){return function(){array.splice(index,1)}};scope.$watch(watchExpr,function(value){var i,ii;for(i=0,ii=previousLeaveAnimations.length;ii>i;++i)$animate.cancel(previousLeaveAnimations[i]);for(previousLeaveAnimations.length=0,i=0,ii=selectedScopes.length;ii>i;++i){var selected=getBlockNodes(selectedElements[i].clone);selectedScopes[i].$destroy();var promise=previousLeaveAnimations[i]=$animate.leave(selected);promise.then(spliceFactory(previousLeaveAnimations,i))}selectedElements.length=0,selectedScopes.length=0,(selectedTranscludes=ngSwitchController.cases["!"+value]||ngSwitchController.cases["?"])&&forEach(selectedTranscludes,function(selectedTransclude){selectedTransclude.transclude(function(caseElement,selectedScope){selectedScopes.push(selectedScope);var anchor=selectedTransclude.element;caseElement[caseElement.length++]=document.createComment(" end ngSwitchWhen: ");var block={clone:caseElement};selectedElements.push(block),$animate.enter(caseElement,anchor.parent(),anchor)})})})}}}],ngSwitchWhenDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attrs,ctrl,$transclude){ctrl.cases["!"+attrs.ngSwitchWhen]=ctrl.cases["!"+attrs.ngSwitchWhen]||[],ctrl.cases["!"+attrs.ngSwitchWhen].push({transclude:$transclude,element:element})}}),ngSwitchDefaultDirective=ngDirective({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(scope,element,attr,ctrl,$transclude){ctrl.cases["?"]=ctrl.cases["?"]||[],ctrl.cases["?"].push({transclude:$transclude,element:element})}}),ngTranscludeDirective=ngDirective({restrict:"EAC",link:function($scope,$element,$attrs,controller,$transclude){if(!$transclude)throw minErr("ngTransclude")("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",startingTag($element));$transclude(function(clone){$element.empty(),$element.append(clone)})}}),scriptDirective=["$templateCache",function($templateCache){return{restrict:"E",terminal:!0,compile:function(element,attr){if("text/ng-template"==attr.type){var templateUrl=attr.id,text=element[0].text;$templateCache.put(templateUrl,text)}}}}],ngOptionsMinErr=minErr("ngOptions"),ngOptionsDirective=valueFn({restrict:"A",terminal:!0}),selectDirective=["$compile","$parse",function($compile,$parse){var NG_OPTIONS_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,nullModelCtrl={$setViewValue:noop};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function($element,$scope,$attrs){var nullOption,unknownOption,self=this,optionsMap={},ngModelCtrl=nullModelCtrl;self.databound=$attrs.ngModel,self.init=function(ngModelCtrl_,nullOption_,unknownOption_){ngModelCtrl=ngModelCtrl_,nullOption=nullOption_,unknownOption=unknownOption_},self.addOption=function(value,element){assertNotHasOwnProperty(value,'"option value"'),optionsMap[value]=!0,ngModelCtrl.$viewValue==value&&($element.val(value),unknownOption.parent()&&unknownOption.remove()),element&&element[0].hasAttribute("selected")&&(element[0].selected=!0)},self.removeOption=function(value){this.hasOption(value)&&(delete optionsMap[value],ngModelCtrl.$viewValue===value&&this.renderUnknownOption(value))},self.renderUnknownOption=function(val){var unknownVal="? "+hashKey(val)+" ?";unknownOption.val(unknownVal),$element.prepend(unknownOption),$element.val(unknownVal),unknownOption.prop("selected",!0)},self.hasOption=function(value){return optionsMap.hasOwnProperty(value)},$scope.$on("$destroy",function(){self.renderUnknownOption=noop})}],link:function(scope,element,attr,ctrls){function setupAsSingle(scope,selectElement,ngModelCtrl,selectCtrl){ngModelCtrl.$render=function(){var viewValue=ngModelCtrl.$viewValue;selectCtrl.hasOption(viewValue)?(unknownOption.parent()&&unknownOption.remove(),selectElement.val(viewValue),""===viewValue&&emptyOption.prop("selected",!0)):isUndefined(viewValue)&&emptyOption?selectElement.val(""):selectCtrl.renderUnknownOption(viewValue)},selectElement.on("change",function(){scope.$apply(function(){unknownOption.parent()&&unknownOption.remove(),ngModelCtrl.$setViewValue(selectElement.val())})})}function setupAsMultiple(scope,selectElement,ctrl){var lastView;ctrl.$render=function(){var items=new HashMap(ctrl.$viewValue);forEach(selectElement.find("option"),function(option){option.selected=isDefined(items.get(option.value))})},scope.$watch(function(){equals(lastView,ctrl.$viewValue)||(lastView=shallowCopy(ctrl.$viewValue),ctrl.$render())}),selectElement.on("change",function(){scope.$apply(function(){var array=[];forEach(selectElement.find("option"),function(option){option.selected&&array.push(option.value)}),ctrl.$setViewValue(array)})})}function setupAsOptions(scope,selectElement,ctrl){function callExpression(exprFn,key,value){return locals[valueName]=value,keyName&&(locals[keyName]=key),exprFn(scope,locals)}function selectionChanged(){scope.$apply(function(){var viewValue,collection=valuesFn(scope)||[];if(multiple)viewValue=[],forEach(selectElement.val(),function(selectedKey){selectedKey=trackFn?trackKeysCache[selectedKey]:selectedKey,viewValue.push(getViewValue(selectedKey,collection[selectedKey]))});else{var selectedKey=trackFn?trackKeysCache[selectElement.val()]:selectElement.val();viewValue=getViewValue(selectedKey,collection[selectedKey])}ctrl.$setViewValue(viewValue),render()})}function getViewValue(key,value){if("?"===key)return undefined;if(""===key)return null;var viewValueFn=selectAsFn?selectAsFn:valueFn;return callExpression(viewValueFn,key,value)}function getLabels(){var toDisplay,values=valuesFn(scope);if(values&&isArray(values)){toDisplay=new Array(values.length);for(var i=0,ii=values.length;ii>i;i++)toDisplay[i]=callExpression(displayFn,i,values[i]);return toDisplay}if(values){toDisplay={};for(var prop in values)values.hasOwnProperty(prop)&&(toDisplay[prop]=callExpression(displayFn,prop,values[prop]))}return toDisplay}function createIsSelectedFn(viewValue){var selectedSet;if(multiple)if(trackFn&&isArray(viewValue)){selectedSet=new HashMap([]);for(var trackIndex=0;trackIndex<viewValue.length;trackIndex++)selectedSet.put(callExpression(trackFn,null,viewValue[trackIndex]),!0)}else selectedSet=new HashMap(viewValue);else trackFn&&(viewValue=callExpression(trackFn,null,viewValue));return function(key,value){var compareValueFn;return compareValueFn=trackFn?trackFn:selectAsFn?selectAsFn:valueFn,multiple?isDefined(selectedSet.remove(callExpression(compareValueFn,key,value))):viewValue===callExpression(compareValueFn,key,value)}}function scheduleRendering(){renderScheduled||(scope.$$postDigest(render),renderScheduled=!0)}function updateLabelMap(labelMap,label,added){labelMap[label]=labelMap[label]||0,labelMap[label]+=added?1:-1}function render(){renderScheduled=!1;var optionGroupName,optionGroup,option,existingParent,existingOptions,existingOption,key,value,groupLength,length,groupIndex,index,selected,lastElement,element,label,optionId,optionGroups={"":[]},optionGroupNames=[""],viewValue=ctrl.$viewValue,values=valuesFn(scope)||[],keys=keyName?sortedKeys(values):values,labelMap={},isSelected=createIsSelectedFn(viewValue),anySelected=!1;for(trackKeysCache={},index=0;length=keys.length,length>index;index++)key=index,keyName&&(key=keys[index],"$"===key.charAt(0))||(value=values[key],optionGroupName=callExpression(groupByFn,key,value)||"",(optionGroup=optionGroups[optionGroupName])||(optionGroup=optionGroups[optionGroupName]=[],optionGroupNames.push(optionGroupName)),selected=isSelected(key,value),anySelected=anySelected||selected,label=callExpression(displayFn,key,value),label=isDefined(label)?label:"",optionId=trackFn?trackFn(scope,locals):keyName?keys[index]:index,trackFn&&(trackKeysCache[optionId]=key),optionGroup.push({id:optionId,label:label,selected:selected}));for(multiple||(nullOption||null===viewValue?optionGroups[""].unshift({id:"",label:"",selected:!anySelected}):anySelected||optionGroups[""].unshift({id:"?",label:"",selected:!0})),groupIndex=0,groupLength=optionGroupNames.length;groupLength>groupIndex;groupIndex++){for(optionGroupName=optionGroupNames[groupIndex],optionGroup=optionGroups[optionGroupName],optionGroupsCache.length<=groupIndex?(existingParent={element:optGroupTemplate.clone().attr("label",optionGroupName),label:optionGroup.label},existingOptions=[existingParent],optionGroupsCache.push(existingOptions),selectElement.append(existingParent.element)):(existingOptions=optionGroupsCache[groupIndex],existingParent=existingOptions[0],existingParent.label!=optionGroupName&&existingParent.element.attr("label",existingParent.label=optionGroupName)),lastElement=null,index=0,length=optionGroup.length;length>index;index++)option=optionGroup[index],(existingOption=existingOptions[index+1])?(lastElement=existingOption.element,existingOption.label!==option.label&&(updateLabelMap(labelMap,existingOption.label,!1),updateLabelMap(labelMap,option.label,!0),lastElement.text(existingOption.label=option.label),lastElement.prop("label",existingOption.label)),existingOption.id!==option.id&&lastElement.val(existingOption.id=option.id),lastElement[0].selected!==option.selected&&(lastElement.prop("selected",existingOption.selected=option.selected),msie&&lastElement.prop("selected",existingOption.selected))):(""===option.id&&nullOption?element=nullOption:(element=optionTemplate.clone()).val(option.id).prop("selected",option.selected).attr("selected",option.selected).prop("label",option.label).text(option.label),existingOptions.push(existingOption={
element:element,label:option.label,id:option.id,selected:option.selected}),updateLabelMap(labelMap,option.label,!0),lastElement?lastElement.after(element):existingParent.element.append(element),lastElement=element);for(index++;existingOptions.length>index;)option=existingOptions.pop(),updateLabelMap(labelMap,option.label,!1),option.element.remove()}for(;optionGroupsCache.length>groupIndex;){for(optionGroup=optionGroupsCache.pop(),index=1;index<optionGroup.length;++index)updateLabelMap(labelMap,optionGroup[index].label,!1);optionGroup[0].element.remove()}forEach(labelMap,function(count,label){count>0?selectCtrl.addOption(label):0>count&&selectCtrl.removeOption(label)})}var match;if(!(match=optionsExp.match(NG_OPTIONS_REGEXP)))throw ngOptionsMinErr("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",optionsExp,startingTag(selectElement));var displayFn=$parse(match[2]||match[1]),valueName=match[4]||match[6],selectAs=/ as /.test(match[0])&&match[1],selectAsFn=selectAs?$parse(selectAs):null,keyName=match[5],groupByFn=$parse(match[3]||""),valueFn=$parse(match[2]?match[1]:valueName),valuesFn=$parse(match[7]),track=match[8],trackFn=track?$parse(match[8]):null,trackKeysCache={},optionGroupsCache=[[{element:selectElement,label:""}]],locals={};nullOption&&($compile(nullOption)(scope),nullOption.removeClass("ng-scope"),nullOption.remove()),selectElement.empty(),selectElement.on("change",selectionChanged),ctrl.$render=render,scope.$watchCollection(valuesFn,scheduleRendering),scope.$watchCollection(getLabels,scheduleRendering),multiple&&scope.$watchCollection(function(){return ctrl.$modelValue},scheduleRendering)}if(ctrls[1]){for(var emptyOption,selectCtrl=ctrls[0],ngModelCtrl=ctrls[1],multiple=attr.multiple,optionsExp=attr.ngOptions,nullOption=!1,renderScheduled=!1,optionTemplate=jqLite(document.createElement("option")),optGroupTemplate=jqLite(document.createElement("optgroup")),unknownOption=optionTemplate.clone(),i=0,children=element.children(),ii=children.length;ii>i;i++)if(""===children[i].value){emptyOption=nullOption=children.eq(i);break}selectCtrl.init(ngModelCtrl,nullOption,unknownOption),multiple&&(ngModelCtrl.$isEmpty=function(value){return!value||0===value.length}),optionsExp?setupAsOptions(scope,element,ngModelCtrl):multiple?setupAsMultiple(scope,element,ngModelCtrl):setupAsSingle(scope,element,ngModelCtrl,selectCtrl)}}}}],optionDirective=["$interpolate",function($interpolate){var nullSelectCtrl={addOption:noop,removeOption:noop};return{restrict:"E",priority:100,compile:function(element,attr){if(isUndefined(attr.value)){var interpolateFn=$interpolate(element.text(),!0);interpolateFn||attr.$set("value",element.text())}return function(scope,element,attr){var selectCtrlName="$selectController",parent=element.parent(),selectCtrl=parent.data(selectCtrlName)||parent.parent().data(selectCtrlName);selectCtrl&&selectCtrl.databound||(selectCtrl=nullSelectCtrl),interpolateFn?scope.$watch(interpolateFn,function(newVal,oldVal){attr.$set("value",newVal),oldVal!==newVal&&selectCtrl.removeOption(oldVal),selectCtrl.addOption(newVal,element)}):selectCtrl.addOption(attr.value,element),element.on("$destroy",function(){selectCtrl.removeOption(attr.value)})}}}}],styleDirective=valueFn({restrict:"E",terminal:!1}),requiredDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){ctrl&&(attr.required=!0,ctrl.$validators.required=function(modelValue,viewValue){return!attr.required||!ctrl.$isEmpty(viewValue)},attr.$observe("required",function(){ctrl.$validate()}))}}},patternDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var regexp,patternExp=attr.ngPattern||attr.pattern;attr.$observe("pattern",function(regex){if(isString(regex)&&regex.length>0&&(regex=new RegExp("^"+regex+"$")),regex&&!regex.test)throw minErr("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",patternExp,regex,startingTag(elm));regexp=regex||undefined,ctrl.$validate()}),ctrl.$validators.pattern=function(value){return ctrl.$isEmpty(value)||isUndefined(regexp)||regexp.test(value)}}}}},maxlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var maxlength=-1;attr.$observe("maxlength",function(value){var intVal=int(value);maxlength=isNaN(intVal)?-1:intVal,ctrl.$validate()}),ctrl.$validators.maxlength=function(modelValue,viewValue){return 0>maxlength||ctrl.$isEmpty(viewValue)||viewValue.length<=maxlength}}}}},minlengthDirective=function(){return{restrict:"A",require:"?ngModel",link:function(scope,elm,attr,ctrl){if(ctrl){var minlength=0;attr.$observe("minlength",function(value){minlength=int(value)||0,ctrl.$validate()}),ctrl.$validators.minlength=function(modelValue,viewValue){return ctrl.$isEmpty(viewValue)||viewValue.length>=minlength}}}}};return window.angular.bootstrap?void console.log("WARNING: Tried to load angular more than once."):(bindJQuery(),publishExternalAPI(angular),void jqLite(document).ready(function(){angularInit(document,bootstrap)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(window,angular,undefined){angular.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var NG_ANIMATE_CHILDREN="$$ngAnimateChildren";return function(scope,element,attrs){var val=attrs.ngAnimateChildren;angular.isString(val)&&0===val.length?element.data(NG_ANIMATE_CHILDREN,!0):scope.$watch(val,function(value){element.data(NG_ANIMATE_CHILDREN,!!value)})}}).factory("$$animateReflow",["$$rAF","$document",function($$rAF,$document){var bod=$document[0].body;return function(fn){return $$rAF(function(){bod.offsetWidth+1;fn()})}}]).config(["$provide","$animateProvider",function($provide,$animateProvider){function extractElementNode(element){for(var i=0;i<element.length;i++){var elm=element[i];if(elm.nodeType==ELEMENT_NODE)return elm}}function prepareElement(element){return element&&angular.element(element)}function stripCommentsFromElement(element){return angular.element(extractElementNode(element))}function isMatchingElement(elm1,elm2){return extractElementNode(elm1)==extractElementNode(elm2)}var $$jqLite,noop=angular.noop,forEach=angular.forEach,selectors=$animateProvider.$$selectors,isArray=angular.isArray,isString=angular.isString,isObject=angular.isObject,ELEMENT_NODE=1,NG_ANIMATE_STATE="$$ngAnimateState",NG_ANIMATE_CHILDREN="$$ngAnimateChildren",NG_ANIMATE_CLASS_NAME="ng-animate",rootAnimateState={running:!0};$provide.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function($delegate,$$q,$injector,$sniffer,$rootElement,$$asyncCallback,$rootScope,$document,$templateRequest,$$$jqLite){function classBasedAnimationsBlocked(element,setter){var data=element.data(NG_ANIMATE_STATE)||{};return setter&&(data.running=!0,data.structural=!0,element.data(NG_ANIMATE_STATE,data)),data.disabled||data.running&&data.structural}function runAnimationPostDigest(fn){var cancelFn,defer=$$q.defer();return defer.promise.$$cancelFn=function(){cancelFn&&cancelFn()},$rootScope.$$postDigest(function(){cancelFn=fn(function(){defer.resolve()})}),defer.promise}function parseAnimateOptions(options){return isObject(options)?(options.tempClasses&&isString(options.tempClasses)&&(options.tempClasses=options.tempClasses.split(/\s+/)),options):void 0}function resolveElementClasses(element,cache,runningAnimations){runningAnimations=runningAnimations||{};var lookup={};forEach(runningAnimations,function(data,selector){forEach(selector.split(" "),function(s){lookup[s]=data})});var hasClasses=Object.create(null);forEach((element.attr("class")||"").split(/\s+/),function(className){hasClasses[className]=!0});var toAdd=[],toRemove=[];return forEach(cache&&cache.classes||[],function(status,className){var hasClass=hasClasses[className],matchingAnimation=lookup[className]||{};status===!1?(hasClass||"addClass"==matchingAnimation.event)&&toRemove.push(className):status===!0&&(hasClass&&"removeClass"!=matchingAnimation.event||toAdd.push(className))}),toAdd.length+toRemove.length>0&&[toAdd.join(" "),toRemove.join(" ")]}function lookup(name){if(name){var matches=[],flagMap={},classes=name.substr(1).split(".");($sniffer.transitions||$sniffer.animations)&&matches.push($injector.get(selectors[""]));for(var i=0;i<classes.length;i++){var klass=classes[i],selectorFactoryName=selectors[klass];selectorFactoryName&&!flagMap[klass]&&(matches.push($injector.get(selectorFactoryName)),flagMap[klass]=!0)}return matches}}function animationRunner(element,animationEvent,className,options){function registerAnimation(animationFactory,event){var afterFn=animationFactory[event],beforeFn=animationFactory["before"+event.charAt(0).toUpperCase()+event.substr(1)];return afterFn||beforeFn?("leave"==event&&(beforeFn=afterFn,afterFn=null),after.push({event:event,fn:afterFn}),before.push({event:event,fn:beforeFn}),!0):void 0}function run(fns,cancellations,allCompleteFn){function afterAnimationComplete(index){if(cancellations){if((cancellations[index]||noop)(),++count<animations.length)return;cancellations=null}allCompleteFn()}var animations=[];forEach(fns,function(animation){animation.fn&&animations.push(animation)});var count=0;forEach(animations,function(animation,index){var progress=function(){afterAnimationComplete(index)};switch(animation.event){case"setClass":cancellations.push(animation.fn(element,classNameAdd,classNameRemove,progress,options));break;case"animate":cancellations.push(animation.fn(element,className,options.from,options.to,progress));break;case"addClass":cancellations.push(animation.fn(element,classNameAdd||className,progress,options));break;case"removeClass":cancellations.push(animation.fn(element,classNameRemove||className,progress,options));break;default:cancellations.push(animation.fn(element,progress,options))}}),cancellations&&0===cancellations.length&&allCompleteFn()}var node=element[0];if(node){options&&(options.to=options.to||{},options.from=options.from||{});var classNameAdd,classNameRemove;isArray(className)&&(classNameAdd=className[0],classNameRemove=className[1],classNameAdd?classNameRemove?className=classNameAdd+" "+classNameRemove:(className=classNameAdd,animationEvent="addClass"):(className=classNameRemove,animationEvent="removeClass"));var isSetClassOperation="setClass"==animationEvent,isClassBased=isSetClassOperation||"addClass"==animationEvent||"removeClass"==animationEvent||"animate"==animationEvent,currentClassName=element.attr("class"),classes=currentClassName+" "+className;if(isAnimatableClassName(classes)){var beforeComplete=noop,beforeCancel=[],before=[],afterComplete=noop,afterCancel=[],after=[],animationLookup=(" "+classes).replace(/\s+/g,".");return forEach(lookup(animationLookup),function(animationFactory){var created=registerAnimation(animationFactory,animationEvent);!created&&isSetClassOperation&&(registerAnimation(animationFactory,"addClass"),registerAnimation(animationFactory,"removeClass"))}),{node:node,event:animationEvent,className:className,isClassBased:isClassBased,isSetClassOperation:isSetClassOperation,applyStyles:function(){options&&element.css(angular.extend(options.from||{},options.to||{}))},before:function(allCompleteFn){beforeComplete=allCompleteFn,run(before,beforeCancel,function(){beforeComplete=noop,allCompleteFn()})},after:function(allCompleteFn){afterComplete=allCompleteFn,run(after,afterCancel,function(){afterComplete=noop,allCompleteFn()})},cancel:function(){beforeCancel&&(forEach(beforeCancel,function(cancelFn){(cancelFn||noop)(!0)}),beforeComplete(!0)),afterCancel&&(forEach(afterCancel,function(cancelFn){(cancelFn||noop)(!0)}),afterComplete(!0))}}}}}function performAnimation(animationEvent,className,element,parentElement,afterElement,domOperation,options,doneCallback){function fireDOMCallback(animationPhase){var eventName="$animate:"+animationPhase;elementEvents&&elementEvents[eventName]&&elementEvents[eventName].length>0&&$$asyncCallback(function(){element.triggerHandler(eventName,{event:animationEvent,className:className})})}function fireBeforeCallbackAsync(){fireDOMCallback("before")}function fireAfterCallbackAsync(){fireDOMCallback("after")}function fireDoneCallbackAsync(){fireDOMCallback("close"),doneCallback()}function fireDOMOperation(){fireDOMOperation.hasBeenRun||(fireDOMOperation.hasBeenRun=!0,domOperation())}function closeAnimation(){if(!closeAnimation.hasBeenRun){runner&&runner.applyStyles(),closeAnimation.hasBeenRun=!0,options&&options.tempClasses&&forEach(options.tempClasses,function(className){$$jqLite.removeClass(element,className)});var data=element.data(NG_ANIMATE_STATE);data&&(runner&&runner.isClassBased?cleanup(element,className):($$asyncCallback(function(){var data=element.data(NG_ANIMATE_STATE)||{};localAnimationCount==data.index&&cleanup(element,className,animationEvent)}),element.data(NG_ANIMATE_STATE,data))),fireDoneCallbackAsync()}}var noopCancel=noop,runner=animationRunner(element,animationEvent,className,options);if(!runner)return fireDOMOperation(),fireBeforeCallbackAsync(),fireAfterCallbackAsync(),closeAnimation(),noopCancel;animationEvent=runner.event,className=runner.className;var elementEvents=angular.element._data(runner.node);if(elementEvents=elementEvents&&elementEvents.events,parentElement||(parentElement=afterElement?afterElement.parent():element.parent()),animationsDisabled(element,parentElement))return fireDOMOperation(),fireBeforeCallbackAsync(),fireAfterCallbackAsync(),closeAnimation(),noopCancel;var ngAnimateState=element.data(NG_ANIMATE_STATE)||{},runningAnimations=ngAnimateState.active||{},totalActiveAnimations=ngAnimateState.totalActive||0,lastAnimation=ngAnimateState.last,skipAnimation=!1;if(totalActiveAnimations>0){var animationsToCancel=[];if(runner.isClassBased){if("setClass"==lastAnimation.event)animationsToCancel.push(lastAnimation),cleanup(element,className);else if(runningAnimations[className]){var current=runningAnimations[className];current.event==animationEvent?skipAnimation=!0:(animationsToCancel.push(current),cleanup(element,className))}}else if("leave"==animationEvent&&runningAnimations["ng-leave"])skipAnimation=!0;else{for(var klass in runningAnimations)animationsToCancel.push(runningAnimations[klass]);ngAnimateState={},cleanup(element,!0)}animationsToCancel.length>0&&forEach(animationsToCancel,function(operation){operation.cancel()})}if(!runner.isClassBased||runner.isSetClassOperation||"animate"==animationEvent||skipAnimation||(skipAnimation="addClass"==animationEvent==element.hasClass(className)),skipAnimation)return fireDOMOperation(),fireBeforeCallbackAsync(),fireAfterCallbackAsync(),fireDoneCallbackAsync(),noopCancel;runningAnimations=ngAnimateState.active||{},totalActiveAnimations=ngAnimateState.totalActive||0,"leave"==animationEvent&&element.one("$destroy",function(e){var element=angular.element(this),state=element.data(NG_ANIMATE_STATE);if(state){var activeLeaveAnimation=state.active["ng-leave"];activeLeaveAnimation&&(activeLeaveAnimation.cancel(),cleanup(element,"ng-leave"))}}),$$jqLite.addClass(element,NG_ANIMATE_CLASS_NAME),options&&options.tempClasses&&forEach(options.tempClasses,function(className){$$jqLite.addClass(element,className)});var localAnimationCount=globalAnimationCounter++;return totalActiveAnimations++,runningAnimations[className]=runner,element.data(NG_ANIMATE_STATE,{last:runner,active:runningAnimations,index:localAnimationCount,totalActive:totalActiveAnimations}),fireBeforeCallbackAsync(),runner.before(function(cancelled){var data=element.data(NG_ANIMATE_STATE);cancelled=cancelled||!data||!data.active[className]||runner.isClassBased&&data.active[className].event!=animationEvent,fireDOMOperation(),cancelled===!0?closeAnimation():(fireAfterCallbackAsync(),runner.after(closeAnimation))}),runner.cancel}function cancelChildAnimations(element){var node=extractElementNode(element);if(node){var nodes=angular.isFunction(node.getElementsByClassName)?node.getElementsByClassName(NG_ANIMATE_CLASS_NAME):node.querySelectorAll("."+NG_ANIMATE_CLASS_NAME);forEach(nodes,function(element){element=angular.element(element);var data=element.data(NG_ANIMATE_STATE);data&&data.active&&forEach(data.active,function(runner){runner.cancel()})})}}function cleanup(element,className){if(isMatchingElement(element,$rootElement))rootAnimateState.disabled||(rootAnimateState.running=!1,rootAnimateState.structural=!1);else if(className){var data=element.data(NG_ANIMATE_STATE)||{},removeAnimations=className===!0;!removeAnimations&&data.active&&data.active[className]&&(data.totalActive--,delete data.active[className]),(removeAnimations||!data.totalActive)&&($$jqLite.removeClass(element,NG_ANIMATE_CLASS_NAME),element.removeData(NG_ANIMATE_STATE))}}function animationsDisabled(element,parentElement){if(rootAnimateState.disabled)return!0;if(isMatchingElement(element,$rootElement))return rootAnimateState.running;var allowChildAnimations,parentRunningAnimation,hasParent;do{if(0===parentElement.length)break;var isRoot=isMatchingElement(parentElement,$rootElement),state=isRoot?rootAnimateState:parentElement.data(NG_ANIMATE_STATE)||{};if(state.disabled)return!0;if(isRoot&&(hasParent=!0),allowChildAnimations!==!1){var animateChildrenFlag=parentElement.data(NG_ANIMATE_CHILDREN);angular.isDefined(animateChildrenFlag)&&(allowChildAnimations=animateChildrenFlag)}parentRunningAnimation=parentRunningAnimation||state.running||state.last&&!state.last.isClassBased}while(parentElement=parentElement.parent());return!hasParent||!allowChildAnimations&&parentRunningAnimation}$$jqLite=$$$jqLite,$rootElement.data(NG_ANIMATE_STATE,rootAnimateState);var deregisterWatch=$rootScope.$watch(function(){return $templateRequest.totalPendingRequests},function(val,oldVal){0===val&&(deregisterWatch(),$rootScope.$$postDigest(function(){$rootScope.$$postDigest(function(){rootAnimateState.running=!1})}))}),globalAnimationCounter=0,classNameFilter=$animateProvider.classNameFilter(),isAnimatableClassName=classNameFilter?function(className){return classNameFilter.test(className)}:function(){return!0};return{animate:function(element,from,to,className,options){return className=className||"ng-inline-animate",options=parseAnimateOptions(options)||{},options.from=to?from:null,options.to=to?to:from,runAnimationPostDigest(function(done){return performAnimation("animate",className,stripCommentsFromElement(element),null,null,noop,options,done)})},enter:function(element,parentElement,afterElement,options){return options=parseAnimateOptions(options),element=angular.element(element),parentElement=prepareElement(parentElement),afterElement=prepareElement(afterElement),classBasedAnimationsBlocked(element,!0),$delegate.enter(element,parentElement,afterElement),runAnimationPostDigest(function(done){return performAnimation("enter","ng-enter",stripCommentsFromElement(element),parentElement,afterElement,noop,options,done)})},leave:function(element,options){return options=parseAnimateOptions(options),element=angular.element(element),cancelChildAnimations(element),classBasedAnimationsBlocked(element,!0),runAnimationPostDigest(function(done){return performAnimation("leave","ng-leave",stripCommentsFromElement(element),null,null,function(){$delegate.leave(element)},options,done)})},move:function(element,parentElement,afterElement,options){return options=parseAnimateOptions(options),element=angular.element(element),parentElement=prepareElement(parentElement),afterElement=prepareElement(afterElement),cancelChildAnimations(element),classBasedAnimationsBlocked(element,!0),$delegate.move(element,parentElement,afterElement),runAnimationPostDigest(function(done){return performAnimation("move","ng-move",stripCommentsFromElement(element),parentElement,afterElement,noop,options,done)})},addClass:function(element,className,options){return this.setClass(element,className,[],options)},removeClass:function(element,className,options){return this.setClass(element,[],className,options)},setClass:function(element,add,remove,options){options=parseAnimateOptions(options);var STORAGE_KEY="$$animateClasses";if(element=angular.element(element),element=stripCommentsFromElement(element),classBasedAnimationsBlocked(element))return $delegate.$$setClassImmediately(element,add,remove,options);var classes,cache=element.data(STORAGE_KEY),hasCache=!!cache;return cache||(cache={},cache.classes={}),classes=cache.classes,add=isArray(add)?add:add.split(" "),forEach(add,function(c){c&&c.length&&(classes[c]=!0)}),remove=isArray(remove)?remove:remove.split(" "),forEach(remove,function(c){c&&c.length&&(classes[c]=!1)}),hasCache?(options&&cache.options&&(cache.options=angular.extend(cache.options||{},options)),cache.promise):(element.data(STORAGE_KEY,cache={classes:classes,options:options}),cache.promise=runAnimationPostDigest(function(done){var parentElement=element.parent(),elementNode=extractElementNode(element);if(elementNode!==undefined)var parentNode=elementNode.parentNode;if(!parentNode||parentNode.$$NG_REMOVED||elementNode.$$NG_REMOVED)return void done();var cache=element.data(STORAGE_KEY);element.removeData(STORAGE_KEY);var state=element.data(NG_ANIMATE_STATE)||{},classes=resolveElementClasses(element,cache,state.active);return classes?performAnimation("setClass",classes,element,parentElement,null,function(){classes[0]&&$delegate.$$addClassImmediately(element,classes[0]),classes[1]&&$delegate.$$removeClassImmediately(element,classes[1])},cache.options,done):done()}))},cancel:function(promise){promise.$$cancelFn()},enabled:function(value,element){switch(arguments.length){case 2:if(value)cleanup(element);else{var data=element.data(NG_ANIMATE_STATE)||{};data.disabled=!0,element.data(NG_ANIMATE_STATE,data)}break;case 1:rootAnimateState.disabled=!value;break;default:value=!rootAnimateState.disabled}return!!value}}}]),$animateProvider.register("",["$window","$sniffer","$timeout","$$animateReflow",function($window,$sniffer,$timeout,$$animateReflow){function clearCacheAfterReflow(){cancelAnimationReflow||(cancelAnimationReflow=$$animateReflow(function(){animationReflowQueue=[],cancelAnimationReflow=null,lookupCache={}}))}function afterReflow(element,callback){cancelAnimationReflow&&cancelAnimationReflow(),animationReflowQueue.push(callback),cancelAnimationReflow=$$animateReflow(function(){forEach(animationReflowQueue,function(fn){fn()}),animationReflowQueue=[],cancelAnimationReflow=null,lookupCache={}})}function animationCloseHandler(element,totalTime){var node=extractElementNode(element);element=angular.element(node),animationElementQueue.push(element);var futureTimestamp=Date.now()+totalTime;closingTimestamp>=futureTimestamp||($timeout.cancel(closingTimer),closingTimestamp=futureTimestamp,closingTimer=$timeout(function(){closeAllAnimations(animationElementQueue),animationElementQueue=[]},totalTime,!1))}function closeAllAnimations(elements){forEach(elements,function(element){var elementData=element.data(NG_ANIMATE_CSS_DATA_KEY);elementData&&forEach(elementData.closeAnimationFns,function(fn){fn()})})}function getElementAnimationDetails(element,cacheKey){var data=cacheKey?lookupCache[cacheKey]:null;if(!data){var transitionDuration=0,transitionDelay=0,animationDuration=0,animationDelay=0;forEach(element,function(element){if(element.nodeType==ELEMENT_NODE){var elementStyles=$window.getComputedStyle(element)||{},transitionDurationStyle=elementStyles[TRANSITION_PROP+DURATION_KEY];transitionDuration=Math.max(parseMaxTime(transitionDurationStyle),transitionDuration);var transitionDelayStyle=elementStyles[TRANSITION_PROP+DELAY_KEY];transitionDelay=Math.max(parseMaxTime(transitionDelayStyle),transitionDelay);elementStyles[ANIMATION_PROP+DELAY_KEY];animationDelay=Math.max(parseMaxTime(elementStyles[ANIMATION_PROP+DELAY_KEY]),animationDelay);var aDuration=parseMaxTime(elementStyles[ANIMATION_PROP+DURATION_KEY]);aDuration>0&&(aDuration*=parseInt(elementStyles[ANIMATION_PROP+ANIMATION_ITERATION_COUNT_KEY],10)||1),animationDuration=Math.max(aDuration,animationDuration)}}),data={total:0,transitionDelay:transitionDelay,transitionDuration:transitionDuration,animationDelay:animationDelay,animationDuration:animationDuration},cacheKey&&(lookupCache[cacheKey]=data)}return data}function parseMaxTime(str){var maxValue=0,values=isString(str)?str.split(/\s*,\s*/):[];return forEach(values,function(value){maxValue=Math.max(parseFloat(value)||0,maxValue)}),maxValue}function getCacheKey(element){var parentElement=element.parent(),parentID=parentElement.data(NG_ANIMATE_PARENT_KEY);return parentID||(parentElement.data(NG_ANIMATE_PARENT_KEY,++parentCounter),parentID=parentCounter),parentID+"-"+extractElementNode(element).getAttribute("class")}function animateSetup(animationEvent,element,className,styles){var structural=["ng-enter","ng-leave","ng-move"].indexOf(className)>=0,cacheKey=getCacheKey(element),eventCacheKey=cacheKey+" "+className,itemIndex=lookupCache[eventCacheKey]?++lookupCache[eventCacheKey].total:0,stagger={};if(itemIndex>0){var staggerClassName=className+"-stagger",staggerCacheKey=cacheKey+" "+staggerClassName,applyClasses=!lookupCache[staggerCacheKey];applyClasses&&$$jqLite.addClass(element,staggerClassName),stagger=getElementAnimationDetails(element,staggerCacheKey),applyClasses&&$$jqLite.removeClass(element,staggerClassName)}$$jqLite.addClass(element,className);var formerData=element.data(NG_ANIMATE_CSS_DATA_KEY)||{},timings=getElementAnimationDetails(element,eventCacheKey),transitionDuration=timings.transitionDuration,animationDuration=timings.animationDuration;if(structural&&0===transitionDuration&&0===animationDuration)return $$jqLite.removeClass(element,className),!1;var blockTransition=styles||structural&&transitionDuration>0,blockAnimation=animationDuration>0&&stagger.animationDelay>0&&0===stagger.animationDuration,closeAnimationFns=formerData.closeAnimationFns||[];element.data(NG_ANIMATE_CSS_DATA_KEY,{stagger:stagger,cacheKey:eventCacheKey,running:formerData.running||0,itemIndex:itemIndex,blockTransition:blockTransition,closeAnimationFns:closeAnimationFns});var node=extractElementNode(element);return blockTransition&&(blockTransitions(node,!0),styles&&element.css(styles)),blockAnimation&&blockAnimations(node,!0),!0}function animateRun(animationEvent,element,className,activeAnimationComplete,styles){function onEnd(){element.off(css3AnimationEvents,onAnimationProgress),$$jqLite.removeClass(element,activeClassName),$$jqLite.removeClass(element,pendingClassName),staggerTimeout&&$timeout.cancel(staggerTimeout),animateClose(element,className);var node=extractElementNode(element);for(var i in appliedStyles)node.style.removeProperty(appliedStyles[i])}function onAnimationProgress(event){event.stopPropagation();var ev=event.originalEvent||event,timeStamp=ev.$manualTimeStamp||ev.timeStamp||Date.now(),elapsedTime=parseFloat(ev.elapsedTime.toFixed(ELAPSED_TIME_MAX_DECIMAL_PLACES));Math.max(timeStamp-startTime,0)>=maxDelayTime&&elapsedTime>=maxDuration&&activeAnimationComplete()}var node=extractElementNode(element),elementData=element.data(NG_ANIMATE_CSS_DATA_KEY);if(-1==node.getAttribute("class").indexOf(className)||!elementData)return void activeAnimationComplete();var activeClassName="",pendingClassName="";forEach(className.split(" "),function(klass,i){var prefix=(i>0?" ":"")+klass;activeClassName+=prefix+"-active",pendingClassName+=prefix+"-pending"});var style="",appliedStyles=[],itemIndex=elementData.itemIndex,stagger=elementData.stagger,staggerTime=0;if(itemIndex>0){var transitionStaggerDelay=0;stagger.transitionDelay>0&&0===stagger.transitionDuration&&(transitionStaggerDelay=stagger.transitionDelay*itemIndex);var animationStaggerDelay=0;stagger.animationDelay>0&&0===stagger.animationDuration&&(animationStaggerDelay=stagger.animationDelay*itemIndex,appliedStyles.push(CSS_PREFIX+"animation-play-state")),staggerTime=Math.round(100*Math.max(transitionStaggerDelay,animationStaggerDelay))/100}staggerTime||($$jqLite.addClass(element,activeClassName),elementData.blockTransition&&blockTransitions(node,!1));var eventCacheKey=elementData.cacheKey+" "+activeClassName,timings=getElementAnimationDetails(element,eventCacheKey),maxDuration=Math.max(timings.transitionDuration,timings.animationDuration);if(0===maxDuration)return $$jqLite.removeClass(element,activeClassName),animateClose(element,className),void activeAnimationComplete();!staggerTime&&styles&&Object.keys(styles).length>0&&(timings.transitionDuration||(element.css("transition",timings.animationDuration+"s linear all"),appliedStyles.push("transition")),element.css(styles));var maxDelay=Math.max(timings.transitionDelay,timings.animationDelay),maxDelayTime=maxDelay*ONE_SECOND;if(appliedStyles.length>0){var oldStyle=node.getAttribute("style")||"";";"!==oldStyle.charAt(oldStyle.length-1)&&(oldStyle+=";"),node.setAttribute("style",oldStyle+" "+style)}var staggerTimeout,startTime=Date.now(),css3AnimationEvents=ANIMATIONEND_EVENT+" "+TRANSITIONEND_EVENT,animationTime=(maxDelay+maxDuration)*CLOSING_TIME_BUFFER,totalTime=(staggerTime+animationTime)*ONE_SECOND;return staggerTime>0&&($$jqLite.addClass(element,pendingClassName),staggerTimeout=$timeout(function(){staggerTimeout=null,timings.transitionDuration>0&&blockTransitions(node,!1),timings.animationDuration>0&&blockAnimations(node,!1),$$jqLite.addClass(element,activeClassName),$$jqLite.removeClass(element,pendingClassName),styles&&(0===timings.transitionDuration&&element.css("transition",timings.animationDuration+"s linear all"),element.css(styles),appliedStyles.push("transition"))},staggerTime*ONE_SECOND,!1)),element.on(css3AnimationEvents,onAnimationProgress),elementData.closeAnimationFns.push(function(){onEnd(),activeAnimationComplete()}),elementData.running++,animationCloseHandler(element,totalTime),onEnd}function blockTransitions(node,bool){node.style[TRANSITION_PROP+PROPERTY_KEY]=bool?"none":""}function blockAnimations(node,bool){node.style[ANIMATION_PROP+ANIMATION_PLAYSTATE_KEY]=bool?"paused":""}function animateBefore(animationEvent,element,className,styles){return animateSetup(animationEvent,element,className,styles)?function(cancelled){cancelled&&animateClose(element,className)}:void 0}function animateAfter(animationEvent,element,className,afterAnimationComplete,styles){return element.data(NG_ANIMATE_CSS_DATA_KEY)?animateRun(animationEvent,element,className,afterAnimationComplete,styles):(animateClose(element,className),void afterAnimationComplete())}function animate(animationEvent,element,className,animationComplete,options){var preReflowCancellation=animateBefore(animationEvent,element,className,options.from);if(!preReflowCancellation)return clearCacheAfterReflow(),void animationComplete();var cancel=preReflowCancellation;return afterReflow(element,function(){cancel=animateAfter(animationEvent,element,className,animationComplete,options.to)}),function(cancelled){(cancel||noop)(cancelled)}}function animateClose(element,className){$$jqLite.removeClass(element,className);var data=element.data(NG_ANIMATE_CSS_DATA_KEY);data&&(data.running&&data.running--,data.running&&0!==data.running||element.removeData(NG_ANIMATE_CSS_DATA_KEY))}function suffixClasses(classes,suffix){var className="";return classes=isArray(classes)?classes:classes.split(/\s+/),forEach(classes,function(klass,i){klass&&klass.length>0&&(className+=(i>0?" ":"")+klass+suffix)}),className}var TRANSITION_PROP,TRANSITIONEND_EVENT,ANIMATION_PROP,ANIMATIONEND_EVENT,CSS_PREFIX="";window.ontransitionend===undefined&&window.onwebkittransitionend!==undefined?(CSS_PREFIX="-webkit-",TRANSITION_PROP="WebkitTransition",TRANSITIONEND_EVENT="webkitTransitionEnd transitionend"):(TRANSITION_PROP="transition",TRANSITIONEND_EVENT="transitionend"),window.onanimationend===undefined&&window.onwebkitanimationend!==undefined?(CSS_PREFIX="-webkit-",
ANIMATION_PROP="WebkitAnimation",ANIMATIONEND_EVENT="webkitAnimationEnd animationend"):(ANIMATION_PROP="animation",ANIMATIONEND_EVENT="animationend");var cancelAnimationReflow,DURATION_KEY="Duration",PROPERTY_KEY="Property",DELAY_KEY="Delay",ANIMATION_ITERATION_COUNT_KEY="IterationCount",ANIMATION_PLAYSTATE_KEY="PlayState",NG_ANIMATE_PARENT_KEY="$$ngAnimateKey",NG_ANIMATE_CSS_DATA_KEY="$$ngAnimateCSS3Data",ELAPSED_TIME_MAX_DECIMAL_PLACES=3,CLOSING_TIME_BUFFER=1.5,ONE_SECOND=1e3,lookupCache={},parentCounter=0,animationReflowQueue=[],closingTimer=null,closingTimestamp=0,animationElementQueue=[];return{animate:function(element,className,from,to,animationCompleted,options){return options=options||{},options.from=from,options.to=to,animate("animate",element,className,animationCompleted,options)},enter:function(element,animationCompleted,options){return options=options||{},animate("enter",element,"ng-enter",animationCompleted,options)},leave:function(element,animationCompleted,options){return options=options||{},animate("leave",element,"ng-leave",animationCompleted,options)},move:function(element,animationCompleted,options){return options=options||{},animate("move",element,"ng-move",animationCompleted,options)},beforeSetClass:function(element,add,remove,animationCompleted,options){options=options||{};var className=suffixClasses(remove,"-remove")+" "+suffixClasses(add,"-add"),cancellationMethod=animateBefore("setClass",element,className,options.from);return cancellationMethod?(afterReflow(element,animationCompleted),cancellationMethod):(clearCacheAfterReflow(),void animationCompleted())},beforeAddClass:function(element,className,animationCompleted,options){options=options||{};var cancellationMethod=animateBefore("addClass",element,suffixClasses(className,"-add"),options.from);return cancellationMethod?(afterReflow(element,animationCompleted),cancellationMethod):(clearCacheAfterReflow(),void animationCompleted())},beforeRemoveClass:function(element,className,animationCompleted,options){options=options||{};var cancellationMethod=animateBefore("removeClass",element,suffixClasses(className,"-remove"),options.from);return cancellationMethod?(afterReflow(element,animationCompleted),cancellationMethod):(clearCacheAfterReflow(),void animationCompleted())},setClass:function(element,add,remove,animationCompleted,options){options=options||{},remove=suffixClasses(remove,"-remove"),add=suffixClasses(add,"-add");var className=remove+" "+add;return animateAfter("setClass",element,className,animationCompleted,options.to)},addClass:function(element,className,animationCompleted,options){return options=options||{},animateAfter("addClass",element,suffixClasses(className,"-add"),animationCompleted,options.to)},removeClass:function(element,className,animationCompleted,options){return options=options||{},animateAfter("removeClass",element,suffixClasses(className,"-remove"),animationCompleted,options.to)}}}])}])}(window,window.angular),function(window,angular,undefined){function $RouteProvider(){function inherit(parent,extra){return angular.extend(Object.create(parent),extra)}function pathRegExp(path,opts){var insensitive=opts.caseInsensitiveMatch,ret={originalPath:path,regexp:path},keys=ret.keys=[];return path=path.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)([\?\*])?/g,function(_,slash,key,option){var optional="?"===option?option:null,star="*"===option?option:null;return keys.push({name:key,optional:!!optional}),slash=slash||"",""+(optional?"":slash)+"(?:"+(optional?slash:"")+(star&&"(.+?)"||"([^/]+)")+(optional||"")+")"+(optional||"")}).replace(/([\/$\*])/g,"\\$1"),ret.regexp=new RegExp("^"+path+"$",insensitive?"i":""),ret}var routes={};this.when=function(path,route){var routeCopy=angular.copy(route);if(angular.isUndefined(routeCopy.reloadOnSearch)&&(routeCopy.reloadOnSearch=!0),angular.isUndefined(routeCopy.caseInsensitiveMatch)&&(routeCopy.caseInsensitiveMatch=this.caseInsensitiveMatch),routes[path]=angular.extend(routeCopy,path&&pathRegExp(path,routeCopy)),path){var redirectPath="/"==path[path.length-1]?path.substr(0,path.length-1):path+"/";routes[redirectPath]=angular.extend({redirectTo:path},pathRegExp(redirectPath,routeCopy))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(params){return"string"==typeof params&&(params={redirectTo:params}),this.when(null,params),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function($rootScope,$location,$routeParams,$q,$injector,$templateRequest,$sce){function switchRouteMatcher(on,route){var keys=route.keys,params={};if(!route.regexp)return null;var m=route.regexp.exec(on);if(!m)return null;for(var i=1,len=m.length;len>i;++i){var key=keys[i-1],val=m[i];key&&val&&(params[key.name]=val)}return params}function prepareRoute($locationEvent){var lastRoute=$route.current;preparedRoute=parseRoute(),preparedRouteIsUpdateOnly=preparedRoute&&lastRoute&&preparedRoute.$$route===lastRoute.$$route&&angular.equals(preparedRoute.pathParams,lastRoute.pathParams)&&!preparedRoute.reloadOnSearch&&!forceReload,preparedRouteIsUpdateOnly||!lastRoute&&!preparedRoute||$rootScope.$broadcast("$routeChangeStart",preparedRoute,lastRoute).defaultPrevented&&$locationEvent&&$locationEvent.preventDefault()}function commitRoute(){var lastRoute=$route.current,nextRoute=preparedRoute;preparedRouteIsUpdateOnly?(lastRoute.params=nextRoute.params,angular.copy(lastRoute.params,$routeParams),$rootScope.$broadcast("$routeUpdate",lastRoute)):(nextRoute||lastRoute)&&(forceReload=!1,$route.current=nextRoute,nextRoute&&nextRoute.redirectTo&&(angular.isString(nextRoute.redirectTo)?$location.path(interpolate(nextRoute.redirectTo,nextRoute.params)).search(nextRoute.params).replace():$location.url(nextRoute.redirectTo(nextRoute.pathParams,$location.path(),$location.search())).replace()),$q.when(nextRoute).then(function(){if(nextRoute){var template,templateUrl,locals=angular.extend({},nextRoute.resolve);return angular.forEach(locals,function(value,key){locals[key]=angular.isString(value)?$injector.get(value):$injector.invoke(value,null,null,key)}),angular.isDefined(template=nextRoute.template)?angular.isFunction(template)&&(template=template(nextRoute.params)):angular.isDefined(templateUrl=nextRoute.templateUrl)&&(angular.isFunction(templateUrl)&&(templateUrl=templateUrl(nextRoute.params)),templateUrl=$sce.getTrustedResourceUrl(templateUrl),angular.isDefined(templateUrl)&&(nextRoute.loadedTemplateUrl=templateUrl,template=$templateRequest(templateUrl))),angular.isDefined(template)&&(locals.$template=template),$q.all(locals)}}).then(function(locals){nextRoute==$route.current&&(nextRoute&&(nextRoute.locals=locals,angular.copy(nextRoute.params,$routeParams)),$rootScope.$broadcast("$routeChangeSuccess",nextRoute,lastRoute))},function(error){nextRoute==$route.current&&$rootScope.$broadcast("$routeChangeError",nextRoute,lastRoute,error)}))}function parseRoute(){var params,match;return angular.forEach(routes,function(route,path){!match&&(params=switchRouteMatcher($location.path(),route))&&(match=inherit(route,{params:angular.extend({},$location.search(),params),pathParams:params}),match.$$route=route)}),match||routes[null]&&inherit(routes[null],{params:{},pathParams:{}})}function interpolate(string,params){var result=[];return angular.forEach((string||"").split(":"),function(segment,i){if(0===i)result.push(segment);else{var segmentMatch=segment.match(/(\w+)(?:[?*])?(.*)/),key=segmentMatch[1];result.push(params[key]),result.push(segmentMatch[2]||""),delete params[key]}}),result.join("")}var preparedRoute,preparedRouteIsUpdateOnly,forceReload=!1,$route={routes:routes,reload:function(){forceReload=!0,$rootScope.$evalAsync(function(){prepareRoute(),commitRoute()})},updateParams:function(newParams){if(!this.current||!this.current.$$route)throw $routeMinErr("norout","Tried updating route when with no current route");newParams=angular.extend({},this.current.params,newParams),$location.path(interpolate(this.current.$$route.originalPath,newParams)),$location.search(newParams)}};return $rootScope.$on("$locationChangeStart",prepareRoute),$rootScope.$on("$locationChangeSuccess",commitRoute),$route}]}function $RouteParamsProvider(){this.$get=function(){return{}}}function ngViewFactory($route,$anchorScroll,$animate){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(scope,$element,attr,ctrl,$transclude){function cleanupLastView(){previousLeaveAnimation&&($animate.cancel(previousLeaveAnimation),previousLeaveAnimation=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&(previousLeaveAnimation=$animate.leave(currentElement),previousLeaveAnimation.then(function(){previousLeaveAnimation=null}),currentElement=null)}function update(){var locals=$route.current&&$route.current.locals,template=locals&&locals.$template;if(angular.isDefined(template)){var newScope=scope.$new(),current=$route.current,clone=$transclude(newScope,function(clone){$animate.enter(clone,null,currentElement||$element).then(function(){!angular.isDefined(autoScrollExp)||autoScrollExp&&!scope.$eval(autoScrollExp)||$anchorScroll()}),cleanupLastView()});currentElement=clone,currentScope=current.scope=newScope,currentScope.$emit("$viewContentLoaded"),currentScope.$eval(onloadExp)}else cleanupLastView()}var currentScope,currentElement,previousLeaveAnimation,autoScrollExp=attr.autoscroll,onloadExp=attr.onload||"";scope.$on("$routeChangeSuccess",update),update()}}}function ngViewFillContentFactory($compile,$controller,$route){return{restrict:"ECA",priority:-400,link:function(scope,$element){var current=$route.current,locals=current.locals;$element.html(locals.$template);var link=$compile($element.contents());if(current.controller){locals.$scope=scope;var controller=$controller(current.controller,locals);current.controllerAs&&(scope[current.controllerAs]=controller),$element.data("$ngControllerController",controller),$element.children().data("$ngControllerController",controller)}link(scope)}}}var ngRouteModule=angular.module("ngRoute",["ng"]).provider("$route",$RouteProvider),$routeMinErr=angular.$$minErr("ngRoute");ngRouteModule.provider("$routeParams",$RouteParamsProvider),ngRouteModule.directive("ngView",ngViewFactory),ngRouteModule.directive("ngView",ngViewFillContentFactory),ngViewFactory.$inject=["$route","$anchorScroll","$animate"],ngViewFillContentFactory.$inject=["$compile","$controller","$route"]}(window,window.angular),function(window,angular,undefined){function $SanitizeProvider(){this.$get=["$$sanitizeUri",function($$sanitizeUri){return function(html){var buf=[];return htmlParser(html,htmlSanitizeWriter(buf,function(uri,isImage){return!/^unsafe/.test($$sanitizeUri(uri,isImage))})),buf.join("")}}]}function sanitizeText(chars){var buf=[],writer=htmlSanitizeWriter(buf,angular.noop);return writer.chars(chars),buf.join("")}function makeMap(str){var i,obj={},items=str.split(",");for(i=0;i<items.length;i++)obj[items[i]]=!0;return obj}function htmlParser(html,handler){function parseStartTag(tag,tagName,rest,unary){if(tagName=angular.lowercase(tagName),blockElements[tagName])for(;stack.last()&&inlineElements[stack.last()];)parseEndTag("",stack.last());optionalEndTagElements[tagName]&&stack.last()==tagName&&parseEndTag("",tagName),unary=voidElements[tagName]||!!unary,unary||stack.push(tagName);var attrs={};rest.replace(ATTR_REGEXP,function(match,name,doubleQuotedValue,singleQuotedValue,unquotedValue){var value=doubleQuotedValue||singleQuotedValue||unquotedValue||"";attrs[name]=decodeEntities(value)}),handler.start&&handler.start(tagName,attrs,unary)}function parseEndTag(tag,tagName){var i,pos=0;if(tagName=angular.lowercase(tagName))for(pos=stack.length-1;pos>=0&&stack[pos]!=tagName;pos--);if(pos>=0){for(i=stack.length-1;i>=pos;i--)handler.end&&handler.end(stack[i]);stack.length=pos}}"string"!=typeof html&&(html=null===html||"undefined"==typeof html?"":""+html);var index,chars,match,text,stack=[],last=html;for(stack.last=function(){return stack[stack.length-1]};html;){if(text="",chars=!0,stack.last()&&specialElements[stack.last()]?(html=html.replace(new RegExp("([\\W\\w]*)<\\s*\\/\\s*"+stack.last()+"[^>]*>","i"),function(all,text){return text=text.replace(COMMENT_REGEXP,"$1").replace(CDATA_REGEXP,"$1"),handler.chars&&handler.chars(decodeEntities(text)),""}),parseEndTag("",stack.last())):(0===html.indexOf("<!--")?(index=html.indexOf("--",4),index>=0&&html.lastIndexOf("-->",index)===index&&(handler.comment&&handler.comment(html.substring(4,index)),html=html.substring(index+3),chars=!1)):DOCTYPE_REGEXP.test(html)?(match=html.match(DOCTYPE_REGEXP),match&&(html=html.replace(match[0],""),chars=!1)):BEGING_END_TAGE_REGEXP.test(html)?(match=html.match(END_TAG_REGEXP),match&&(html=html.substring(match[0].length),match[0].replace(END_TAG_REGEXP,parseEndTag),chars=!1)):BEGIN_TAG_REGEXP.test(html)&&(match=html.match(START_TAG_REGEXP),match?(match[4]&&(html=html.substring(match[0].length),match[0].replace(START_TAG_REGEXP,parseStartTag)),chars=!1):(text+="<",html=html.substring(1))),chars&&(index=html.indexOf("<"),text+=0>index?html:html.substring(0,index),html=0>index?"":html.substring(index),handler.chars&&handler.chars(decodeEntities(text)))),html==last)throw $sanitizeMinErr("badparse","The sanitizer was unable to parse the following block of html: {0}",html);last=html}parseEndTag()}function decodeEntities(value){return value?(hiddenPre.innerHTML=value.replace(/</g,"&lt;"),hiddenPre.textContent):""}function encodeEntities(value){return value.replace(/&/g,"&amp;").replace(SURROGATE_PAIR_REGEXP,function(value){var hi=value.charCodeAt(0),low=value.charCodeAt(1);return"&#"+(1024*(hi-55296)+(low-56320)+65536)+";"}).replace(NON_ALPHANUMERIC_REGEXP,function(value){return"&#"+value.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlSanitizeWriter(buf,uriValidator){var ignore=!1,out=angular.bind(buf,buf.push);return{start:function(tag,attrs,unary){tag=angular.lowercase(tag),!ignore&&specialElements[tag]&&(ignore=tag),ignore||validElements[tag]!==!0||(out("<"),out(tag),angular.forEach(attrs,function(value,key){var lkey=angular.lowercase(key),isImage="img"===tag&&"src"===lkey||"background"===lkey;validAttrs[lkey]!==!0||uriAttrs[lkey]===!0&&!uriValidator(value,isImage)||(out(" "),out(key),out('="'),out(encodeEntities(value)),out('"'))}),out(unary?"/>":">"))},end:function(tag){tag=angular.lowercase(tag),ignore||validElements[tag]!==!0||(out("</"),out(tag),out(">")),tag==ignore&&(ignore=!1)},chars:function(chars){ignore||out(encodeEntities(chars))}}}var $sanitizeMinErr=angular.$$minErr("$sanitize"),START_TAG_REGEXP=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,END_TAG_REGEXP=/^<\/\s*([\w:-]+)[^>]*>/,ATTR_REGEXP=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,BEGIN_TAG_REGEXP=/^</,BEGING_END_TAGE_REGEXP=/^<\//,COMMENT_REGEXP=/<!--(.*?)-->/g,DOCTYPE_REGEXP=/<!DOCTYPE([^>]*?)>/i,CDATA_REGEXP=/<!\[CDATA\[(.*?)]]>/g,SURROGATE_PAIR_REGEXP=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,NON_ALPHANUMERIC_REGEXP=/([^\#-~| |!])/g,voidElements=makeMap("area,br,col,hr,img,wbr"),optionalEndTagBlockElements=makeMap("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),optionalEndTagInlineElements=makeMap("rp,rt"),optionalEndTagElements=angular.extend({},optionalEndTagInlineElements,optionalEndTagBlockElements),blockElements=angular.extend({},optionalEndTagBlockElements,makeMap("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),inlineElements=angular.extend({},optionalEndTagInlineElements,makeMap("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),svgElements=makeMap("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),specialElements=makeMap("script,style"),validElements=angular.extend({},voidElements,blockElements,inlineElements,optionalEndTagElements,svgElements),uriAttrs=makeMap("background,cite,href,longdesc,src,usemap,xlink:href"),htmlAttrs=makeMap("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),svgAttrs=makeMap("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),validAttrs=angular.extend({},uriAttrs,svgAttrs,htmlAttrs),hiddenPre=document.createElement("pre");angular.module("ngSanitize",[]).provider("$sanitize",$SanitizeProvider),angular.module("ngSanitize").filter("linky",["$sanitize",function($sanitize){var LINKY_URL_REGEXP=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"]/,MAILTO_REGEXP=/^mailto:/;return function(text,target){function addText(text){text&&html.push(sanitizeText(text))}function addLink(url,text){html.push("<a "),angular.isDefined(target)&&html.push('target="',target,'" '),html.push('href="',url.replace(/"/g,"&quot;"),'">'),addText(text),html.push("</a>")}if(!text)return text;for(var match,url,i,raw=text,html=[];match=raw.match(LINKY_URL_REGEXP);)url=match[0],match[2]||match[4]||(url=(match[3]?"http://":"mailto:")+url),i=match.index,addText(raw.substr(0,i)),addLink(url,match[0].replace(MAILTO_REGEXP,"")),raw=raw.substring(i+match[0].length);return addText(raw),$sanitize(html.join(""))}}])}(window,window.angular),angular.module("selectize",[]).value("selectizeConfig",{}).directive("selectize",["selectizeConfig",function(selectizeConfig){return{restrict:"EA",require:"^ngModel",scope:{ngModel:"=",config:"=?",options:"=?",ngDisabled:"=",ngRequired:"&"},link:function(scope,element,attrs,modelCtrl){function createItem(input){var data={};return data[config.labelField]=input,data[config.valueField]=input,data}function toggle(disabled){disabled?selectize.disable():selectize.enable()}function generateOptions(data){return data?(data=angular.isArray(data)?data:[data],jQuery.map(data,function(opt){return"string"==typeof opt?createItem(opt):opt})):[]}function updateSelectize(){validate(),selectize.$control.toggleClass("ng-valid",modelCtrl.$valid),selectize.$control.toggleClass("ng-invalid",modelCtrl.$invalid),selectize.$control.toggleClass("ng-dirty",modelCtrl.$dirty),selectize.$control.toggleClass("ng-pristine",modelCtrl.$pristine),angular.equals(selectize.items,scope.ngModel)||(selectize.addOption(generateOptions(scope.ngModel)),selectize.setValue(scope.ngModel))}Selectize.defaults.maxItems=null;var selectize,config=angular.extend({},Selectize.defaults,selectizeConfig,scope.config);modelCtrl.$isEmpty=function(val){return void 0===val||null===val||!val.length};var validate=function(){var isInvalid=(scope.ngRequired()||attrs.required||config.required)&&modelCtrl.$isEmpty(scope.ngModel);modelCtrl.$setValidity("required",!isInvalid)},onChange=config.onChange,onOptionAdd=config.onOptionAdd;config.onChange=function(){angular.equals(selectize.items,scope.ngModel)||scope.$evalAsync(function(){var value=selectize.items.slice();1==config.maxItems&&(value=value[0]),modelCtrl.$setViewValue(value)}),onChange&&onChange.apply(this,arguments)},config.onOptionAdd=function(value,data){-1===scope.options.indexOf(data)&&scope.options.push(data),onOptionAdd&&onOptionAdd.apply(this,arguments)},scope.options=generateOptions((scope.options||config.options||scope.ngModel).slice());var angularCallback=config.onInitialize;config.onInitialize=function(){selectize=element[0].selectize,selectize.addOption(scope.options),selectize.setValue(scope.ngModel),angularCallback&&angularCallback(selectize),scope.$watch("options",function(){selectize.clearOptions(),selectize.addOption(scope.options),selectize.setValue(scope.ngModel)},!0),scope.$watchCollection("ngModel",updateSelectize),scope.$watch("ngDisabled",toggle)},element.selectize(config),element.on("$destroy",function(){selectize&&(selectize.destroy(),element=null)})}}}]),function(){angular.module("as.sortable",[]).constant("sortableConfig",{itemClass:"as-sortable-item",handleClass:"as-sortable-item-handle",placeHolderClass:"as-sortable-placeholder",dragClass:"as-sortable-drag",hiddenClass:"as-sortable-hidden",dragging:"as-sortable-dragging"})}(),function(){var mainModule=angular.module("as.sortable");mainModule.factory("$helper",["$document","$window",function($document,$window){return{height:function(element){return element[0].getBoundingClientRect().height},width:function(element){return element[0].getBoundingClientRect().width},offset:function(element,scrollableContainer){var boundingClientRect=element[0].getBoundingClientRect();return scrollableContainer||(scrollableContainer=$document[0].documentElement),{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||scrollableContainer.scrollTop-scrollableContainer.offsetTop),left:boundingClientRect.left+($window.pageXOffset||scrollableContainer.scrollLeft-scrollableContainer.offsetLeft)}},eventObj:function(event){var obj=event;return void 0!==event.targetTouches?obj=event.targetTouches.item(0):void 0!==event.originalEvent&&void 0!==event.originalEvent.targetTouches&&(obj=event.originalEvent.targetTouches.item(0)),obj},isTouchInvalid:function(event){var touchInvalid=!1;return void 0!==event.touches&&event.touches.length>1?touchInvalid=!0:void 0!==event.originalEvent&&void 0!==event.originalEvent.touches&&event.originalEvent.touches.length>1&&(touchInvalid=!0),touchInvalid},positionStarted:function(event,target,scrollableContainer){var pos={};return pos.offsetX=event.pageX-this.offset(target,scrollableContainer).left,pos.offsetY=event.pageY-this.offset(target,scrollableContainer).top,pos.startX=pos.lastX=event.pageX,pos.startY=pos.lastY=event.pageY,pos.nowX=pos.nowY=pos.distX=pos.distY=pos.dirAx=0,pos.dirX=pos.dirY=pos.lastDirX=pos.lastDirY=pos.distAxX=pos.distAxY=0,pos},calculatePosition:function(pos,event){pos.lastX=pos.nowX,pos.lastY=pos.nowY,pos.nowX=event.pageX,pos.nowY=event.pageY,pos.distX=pos.nowX-pos.lastX,pos.distY=pos.nowY-pos.lastY,pos.lastDirX=pos.dirX,pos.lastDirY=pos.dirY,pos.dirX=0===pos.distX?0:pos.distX>0?1:-1,pos.dirY=0===pos.distY?0:pos.distY>0?1:-1;var newAx=Math.abs(pos.distX)>Math.abs(pos.distY)?1:0;pos.dirAx!==newAx?(pos.distAxX=0,pos.distAxY=0):(pos.distAxX+=Math.abs(pos.distX),0!==pos.dirX&&pos.dirX!==pos.lastDirX&&(pos.distAxX=0),pos.distAxY+=Math.abs(pos.distY),0!==pos.dirY&&pos.dirY!==pos.lastDirY&&(pos.distAxY=0)),pos.dirAx=newAx},movePosition:function(event,element,pos,container,containerPositioning,scrollableContainer){var bounds,useRelative="relative"===containerPositioning;element.x=event.pageX-pos.offsetX,element.y=event.pageY-pos.offsetY,container&&(bounds=this.offset(container,scrollableContainer),useRelative&&(element.x-=bounds.left,element.y-=bounds.top,bounds.left=0,bounds.top=0),element.x<bounds.left?element.x=bounds.left:element.x>=bounds.width+bounds.left-this.offset(element).width&&(element.x=bounds.width+bounds.left-this.offset(element).width),element.y<bounds.top?element.y=bounds.top:element.y>=bounds.height+bounds.top-this.offset(element).height&&(element.y=bounds.height+bounds.top-this.offset(element).height)),element.css({left:element.x+"px",top:element.y+"px"}),this.calculatePosition(pos,event)},dragItem:function(item){return{index:item.index(),parent:item.sortableScope,source:item,sourceInfo:{index:item.index(),itemScope:item.itemScope,sortableScope:item.sortableScope},moveTo:function(parent,index){this.parent=parent,this.isSameParent()&&this.source.index()<index&&(index-=1),this.index=index},isSameParent:function(){return this.parent.element===this.sourceInfo.sortableScope.element},isOrderChanged:function(){return this.index!==this.sourceInfo.index},eventArgs:function(){return{source:this.sourceInfo,dest:{index:this.index,sortableScope:this.parent}}},apply:function(){this.sourceInfo.sortableScope.removeItem(this.sourceInfo.index),this.parent.insertItem(this.index,this.source.modelValue)}}},noDrag:function(element){return void 0!==element.attr("no-drag")||void 0!==element.attr("data-no-drag")},findAncestor:function(el,selector){el=el[0];for(var matches=Element.matches||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;(el=el.parentElement)&&!matches.call(el,selector););return el?angular.element(el):angular.element(document.body)}}}])}(),function(){var mainModule=angular.module("as.sortable");mainModule.controller("as.sortable.sortableController",["$scope",function($scope){this.scope=$scope,$scope.modelValue=null,$scope.callbacks=null,$scope.type="sortable",$scope.options={},$scope.isDisabled=!1,$scope.insertItem=function(index,itemData){$scope.modelValue.splice(index,0,itemData)},$scope.removeItem=function(index){var removedItem=null;return index>-1&&(removedItem=$scope.modelValue.splice(index,1)[0]),removedItem},$scope.isEmpty=function(){return $scope.modelValue&&0===$scope.modelValue.length},$scope.accept=function(sourceItemHandleScope,destScope,destItemScope){return $scope.callbacks.accept(sourceItemHandleScope,destScope,destItemScope)}}]),mainModule.directive("asSortable",function(){return{require:"ngModel",restrict:"A",scope:!0,controller:"as.sortable.sortableController",link:function(scope,element,attrs,ngModelController){var ngModel,callbacks;ngModel=ngModelController,ngModel&&(ngModel.$render=function(){scope.modelValue=ngModel.$modelValue},scope.element=element,element.data("_scope",scope),callbacks={accept:null,orderChanged:null,itemMoved:null,dragStart:null,dragMove:null,dragCancel:null,dragEnd:null},callbacks.accept=function(sourceItemHandleScope,destSortableScope,destItemScope){return!0},callbacks.orderChanged=function(event){},callbacks.itemMoved=function(event){},callbacks.dragStart=function(event){},callbacks.dragMove=function(itemPosition,containment,eventObj){},callbacks.dragCancel=function(event){},callbacks.dragEnd=function(event){},scope.$watch(attrs.asSortable,function(newVal,oldVal){angular.forEach(newVal,function(value,key){callbacks[key]?"function"==typeof value&&(callbacks[key]=value):scope.options[key]=value}),scope.callbacks=callbacks},!0),angular.isDefined(attrs.isDisabled)&&scope.$watch(attrs.isDisabled,function(newVal,oldVal){angular.isUndefined(newVal)||(scope.isDisabled=newVal)},!0))}}})}(),function(){var mainModule=angular.module("as.sortable");mainModule.controller("as.sortable.sortableItemHandleController",["$scope",function($scope){this.scope=$scope,$scope.itemScope=null,$scope.type="handle"}]),mainModule.directive("asSortableItemHandle",["sortableConfig","$helper","$window","$document",function(sortableConfig,$helper,$window,$document){return{require:"^asSortableItem",scope:!0,restrict:"A",controller:"as.sortable.sortableItemHandleController",link:function(scope,element,attrs,itemController){function insertBefore(targetElement,targetScope){targetElement[0].parentNode.insertBefore(placeHolder[0],targetElement[0]),dragItemInfo.moveTo(targetScope.sortableScope,targetScope.index())}function insertAfter(targetElement,targetScope){targetElement.after(placeHolder),dragItemInfo.moveTo(targetScope.sortableScope,targetScope.index()+1)}function fetchScope(element){for(var scope;!scope&&element.length;)scope=element.data("_scope"),scope||(element=element.parent());return scope}function rollbackDragChanges(){placeElement.replaceWith(scope.itemScope.element),placeHolder.remove(),dragElement.remove(),dragElement=null,dragHandled=!1,containment.css("cursor",""),containment.removeClass("as-sortable-un-selectable")}var dragElement,placeHolder,placeElement,itemPosition,dragItemInfo,containment,containerPositioning,dragListen,scrollableContainer,dragStart,dragMove,dragEnd,dragCancel,isDraggable,placeHolderIndex,bindDrag,unbindDrag,bindEvents,unBindEvents,hasTouch,dragHandled,createPlaceholder,isPlaceHolderPresent,isDisabled=!1;hasTouch=$window.hasOwnProperty("ontouchstart"),sortableConfig.handleClass&&element.addClass(sortableConfig.handleClass),scope.itemScope=itemController.scope,element.data("_scope",scope),scope.$watch("sortableScope.isDisabled",function(newVal){isDisabled!==newVal&&(isDisabled=newVal,isDisabled?unbindDrag():bindDrag())}),createPlaceholder=function(itemScope){return"function"==typeof scope.sortableScope.options.placeholder?angular.element(scope.sortableScope.options.placeholder(itemScope)):"string"==typeof scope.sortableScope.options.placeholder?angular.element(scope.sortableScope.options.placeholder):angular.element($document[0].createElement(itemScope.element.prop("tagName")))},dragListen=function(event){var startPosition,unbindMoveListen=function(){angular.element($document).unbind("mousemove",moveListen),angular.element($document).unbind("touchmove",moveListen),element.unbind("mouseup",unbindMoveListen),element.unbind("touchend",unbindMoveListen),element.unbind("touchcancel",unbindMoveListen)},moveListen=function(e){e.preventDefault();var eventObj=$helper.eventObj(e);startPosition||(startPosition={clientX:eventObj.clientX,clientY:eventObj.clientY}),Math.abs(eventObj.clientX-startPosition.clientX)+Math.abs(eventObj.clientY-startPosition.clientY)>10&&(unbindMoveListen(),dragStart(event))};angular.element($document).bind("mousemove",moveListen),angular.element($document).bind("touchmove",moveListen),element.bind("mouseup",unbindMoveListen),element.bind("touchend",unbindMoveListen),element.bind("touchcancel",unbindMoveListen)},dragStart=function(event){var eventObj,tagName;(hasTouch||2!==event.button&&3!==event.which)&&(hasTouch&&$helper.isTouchInvalid(event)||!dragHandled&&isDraggable(event)&&(dragHandled=!0,event.preventDefault(),eventObj=$helper.eventObj(event),scrollableContainer=angular.element($document[0].querySelector(scope.sortableScope.options.scrollableContainer)).length>0?$document[0].querySelector(scope.sortableScope.options.scrollableContainer):$document[0].documentElement,containment=scope.sortableScope.options.containment?$helper.findAncestor(element,scope.sortableScope.options.containment):angular.element($document[0].body),containment.css("cursor","move"),containment.addClass("as-sortable-un-selectable"),containerPositioning=scope.sortableScope.options.containerPositioning||"absolute",dragItemInfo=$helper.dragItem(scope),tagName=scope.itemScope.element.prop("tagName"),dragElement=angular.element($document[0].createElement(scope.sortableScope.element.prop("tagName"))).addClass(scope.sortableScope.element.attr("class")).addClass(sortableConfig.dragClass),
dragElement.css("width",$helper.width(scope.itemScope.element)+"px"),dragElement.css("height",$helper.height(scope.itemScope.element)+"px"),placeHolder=createPlaceholder(scope.itemScope).addClass(sortableConfig.placeHolderClass).addClass(scope.sortableScope.options.additionalPlaceholderClass),placeHolder.css("width",$helper.width(scope.itemScope.element)+"px"),placeHolder.css("height",$helper.height(scope.itemScope.element)+"px"),placeElement=angular.element($document[0].createElement(tagName)),sortableConfig.hiddenClass&&placeElement.addClass(sortableConfig.hiddenClass),itemPosition=$helper.positionStarted(eventObj,scope.itemScope.element,scrollableContainer),scope.itemScope.element.after(placeHolder),scope.itemScope.element.after(placeElement),dragElement.append(scope.itemScope.element),containment.append(dragElement),$helper.movePosition(eventObj,dragElement,itemPosition,containment,containerPositioning,scrollableContainer),scope.sortableScope.$apply(function(){scope.callbacks.dragStart(dragItemInfo.eventArgs())}),bindEvents()))},isDraggable=function(event){var elementClicked,sourceScope,isDraggable;for(elementClicked=angular.element(event.target),sourceScope=fetchScope(elementClicked),isDraggable=sourceScope&&"handle"===sourceScope.type;isDraggable&&elementClicked[0]!==element[0];)$helper.noDrag(elementClicked)&&(isDraggable=!1),elementClicked=elementClicked.parent();return isDraggable},dragMove=function(event){var eventObj,targetX,targetY,targetScope,targetElement;if((!hasTouch||!$helper.isTouchInvalid(event))&&dragHandled&&dragElement){if(event.preventDefault(),eventObj=$helper.eventObj(event),scope.sortableScope.$apply(function(){scope.callbacks.dragMove(itemPosition,containment,eventObj)}),$helper.movePosition(eventObj,dragElement,itemPosition,containment,containerPositioning,scrollableContainer),targetX=eventObj.pageX-$document[0].documentElement.scrollLeft,targetY=eventObj.pageY-($window.pageYOffset||$document[0].documentElement.scrollTop),dragElement.addClass(sortableConfig.hiddenClass),$document[0].elementFromPoint(targetX,targetY),targetElement=angular.element($document[0].elementFromPoint(targetX,targetY)),dragElement.removeClass(sortableConfig.hiddenClass),dragElement.addClass(sortableConfig.dragging),targetScope=fetchScope(targetElement),!targetScope||!targetScope.type)return;if("handle"===targetScope.type&&(targetScope=targetScope.itemScope),"item"!==targetScope.type&&"sortable"!==targetScope.type)return;if("item"===targetScope.type&&targetScope.accept(scope,targetScope.sortableScope,targetScope)){targetElement=targetScope.element;var placeholderIndex=placeHolderIndex(targetScope.sortableScope.element);0>placeholderIndex?insertBefore(targetElement,targetScope):placeholderIndex<=targetScope.index()?insertAfter(targetElement,targetScope):insertBefore(targetElement,targetScope)}"sortable"===targetScope.type&&targetScope.accept(scope,targetScope)&&targetElement[0].parentNode!==targetScope.element[0]&&(isPlaceHolderPresent(targetElement)||(targetElement[0].appendChild(placeHolder[0]),dragItemInfo.moveTo(targetScope,targetScope.modelValue.length)))}},placeHolderIndex=function(targetElement){var itemElements,i;if(targetElement.hasClass(sortableConfig.placeHolderClass))return 0;for(itemElements=targetElement.children(),i=0;i<itemElements.length;i+=1)if(angular.element(itemElements[i]).hasClass(sortableConfig.placeHolderClass))return i;return-1},isPlaceHolderPresent=function(targetElement){return placeHolderIndex(targetElement)>=0},dragEnd=function(event){dragHandled&&(event.preventDefault(),dragElement&&(rollbackDragChanges(),dragItemInfo.apply(),scope.sortableScope.$apply(function(){dragItemInfo.isSameParent()?dragItemInfo.isOrderChanged()&&scope.callbacks.orderChanged(dragItemInfo.eventArgs()):scope.callbacks.itemMoved(dragItemInfo.eventArgs())}),scope.sortableScope.$apply(function(){scope.callbacks.dragEnd(dragItemInfo.eventArgs())}),dragItemInfo=null),unBindEvents())},dragCancel=function(event){dragHandled&&(event.preventDefault(),dragElement&&(rollbackDragChanges(),scope.sortableScope.$apply(function(){scope.callbacks.dragCancel(dragItemInfo.eventArgs())}),dragItemInfo=null),unBindEvents())},bindDrag=function(){element.bind("touchstart",dragListen),element.bind("mousedown",dragListen)},unbindDrag=function(){element.unbind("touchstart",dragListen),element.unbind("mousedown",dragListen)},bindDrag(),angular.element($document[0].body).bind("keydown",function(event){27===event.keyCode&&dragCancel(event)}),bindEvents=function(){angular.element($document).bind("touchmove",dragMove),angular.element($document).bind("touchend",dragEnd),angular.element($document).bind("touchcancel",dragCancel),angular.element($document).bind("mousemove",dragMove),angular.element($document).bind("mouseup",dragEnd)},unBindEvents=function(){angular.element($document).unbind("touchend",dragEnd),angular.element($document).unbind("touchcancel",dragCancel),angular.element($document).unbind("touchmove",dragMove),angular.element($document).unbind("mouseup",dragEnd),angular.element($document).unbind("mousemove",dragMove)}}}}])}(),function(){var mainModule=angular.module("as.sortable");mainModule.controller("as.sortable.sortableItemController",["$scope",function($scope){this.scope=$scope,$scope.sortableScope=null,$scope.modelValue=null,$scope.type="item",$scope.index=function(){return $scope.$index},$scope.itemData=function(){return $scope.sortableScope.modelValue[$scope.$index]}}]),mainModule.directive("asSortableItem",["sortableConfig",function(sortableConfig){return{require:["^asSortable","?ngModel"],restrict:"A",controller:"as.sortable.sortableItemController",link:function(scope,element,attrs,ctrl){var sortableController=ctrl[0],ngModelController=ctrl[1];sortableConfig.itemClass&&element.addClass(sortableConfig.itemClass),scope.sortableScope=sortableController.scope,ngModelController?ngModelController.$render=function(){scope.modelValue=ngModelController.$modelValue}:scope.modelValue=sortableController.scope.modelValue[scope.$index],scope.element=element,element.data("_scope",scope)}}}])}(),function(window,angular,undefined){(function(){angular.module("uiGmapgoogle-maps.providers",[]),angular.module("uiGmapgoogle-maps.wrapped",[]),angular.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]),angular.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]),angular.module("uiGmapgoogle-maps.directives.api.managers",[]),angular.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]),angular.module("uiGmapgoogle-maps.directives.api.options.builders",[]),angular.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]),angular.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]),angular.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]),angular.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"])}).call(this),function(){angular.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function($q,uuid){var getScriptUrl,includeScript,isGoogleMapsLoaded,scriptId;return scriptId=void 0,getScriptUrl=function(options){return options.china?"http://maps.google.cn/maps/api/js?":"auto"===options.transport?"//maps.googleapis.com/maps/api/js?":options.transport+"://maps.googleapis.com/maps/api/js?"},includeScript=function(options){var omitOptions,query,script;return omitOptions=["transport","isGoogleMapsForWork","china"],options.isGoogleMapsForWork&&omitOptions.push("key"),query=_.map(_.omit(options,omitOptions),function(v,k){return k+"="+v}),scriptId&&document.getElementById(scriptId).remove(),query=query.join("&"),script=document.createElement("script"),script.id=scriptId="ui_gmap_map_load_"+uuid.generate(),script.type="text/javascript",script.src=getScriptUrl(options)+query,document.body.appendChild(script)},isGoogleMapsLoaded=function(){return angular.isDefined(window.google)&&angular.isDefined(window.google.maps)},{load:function(options){var deferred,randomizedFunctionName;return deferred=$q.defer(),isGoogleMapsLoaded()?(deferred.resolve(window.google.maps),deferred.promise):(randomizedFunctionName=options.callback="onGoogleMapsReady"+Math.round(1e3*Math.random()),window[randomizedFunctionName]=function(){window[randomizedFunctionName]=null,deferred.resolve(window.google.maps)},window.navigator.connection&&window.Connection&&window.navigator.connection.type===window.Connection.NONE?document.addEventListener("online",function(){return isGoogleMapsLoaded()?void 0:includeScript(options)}):includeScript(options),deferred.promise)}}}]).provider("uiGmapGoogleMapApi",function(){return this.options={transport:"https",isGoogleMapsForWork:!1,china:!1,v:"3.17",libraries:"",language:"en",sensor:"false"},this.configure=function(options){angular.extend(this.options,options)},this.$get=["uiGmapMapScriptLoader",function(_this){return function(loader){return loader.load(_this.options)}}(this)],this})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendGWin",function(){return{init:_.once(function(){var uiGmapInfoBox;if(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)return google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(map,anchor,recurse){null==recurse&&(this._isOpen=!0,this._open(map,anchor,!0))},google.maps.InfoWindow.prototype.close=function(recurse){null==recurse&&(this._isOpen=!1,this._close(!0))},google.maps.InfoWindow.prototype.isOpen=function(val){return null==val&&(val=void 0),null==val?this._isOpen:this._isOpen=val},window.InfoBox&&(window.InfoBox.prototype._open=window.InfoBox.prototype.open,window.InfoBox.prototype._close=window.InfoBox.prototype.close,window.InfoBox.prototype._isOpen=!1,window.InfoBox.prototype.open=function(map,anchor){this._isOpen=!0,this._open(map,anchor)},window.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},window.InfoBox.prototype.isOpen=function(val){return null==val&&(val=void 0),null==val?this._isOpen:this._isOpen=val},uiGmapInfoBox=function(superClass){function uiGmapInfoBox(opts){this.getOrigCloseBoxImg_=bind(this.getOrigCloseBoxImg_,this),this.getCloseBoxDiv_=bind(this.getCloseBoxDiv_,this);var box;box=new window.InfoBox(opts),_.extend(this,box),null!=opts.closeBoxDiv&&(this.closeBoxDiv_=opts.closeBoxDiv)}return extend(uiGmapInfoBox,superClass),uiGmapInfoBox.prototype.getCloseBoxDiv_=function(){return this.closeBoxDiv_},uiGmapInfoBox.prototype.getCloseBoxImg_=function(){var div,img;return div=this.getCloseBoxDiv_(),img=this.getOrigCloseBoxImg_(),div||img},uiGmapInfoBox.prototype.getOrigCloseBoxImg_=function(){var img;return img="",""!==this.closeBoxURL_&&(img="<img",img+=" src='"+this.closeBoxURL_+"'",img+=" align=right",img+=" style='",img+=" position: relative;",img+=" cursor: pointer;",img+=" margin: "+this.closeBoxMargin_+";",img+="'>"),img},uiGmapInfoBox}(window.InfoBox),window.uiGmapInfoBox=uiGmapInfoBox),window.MarkerLabel_?window.MarkerLabel_.prototype.setContent=function(){var content;content=this.marker_.get("labelContent"),content&&!_.isEqual(this.oldContent,content)&&("undefined"==typeof(null!=content?content.nodeType:void 0)?(this.labelDiv_.innerHTML=content,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=content):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(content),content=content.cloneNode(!0),this.labelDiv_.innerHTML="",this.eventDiv_.appendChild(content),this.oldContent=content))}:void 0})}})}.call(this),function(){angular.module("uiGmapgoogle-maps.extensions").service("uiGmapLodash",function(){return this.intersectionObjects=function(array1,array2,comparison){var res;return null==comparison&&(comparison=void 0),res=_.map(array1,function(_this){return function(obj1){return _.find(array2,function(obj2){return null!=comparison?comparison(obj1,obj2):_.isEqual(obj1,obj2)})}}(this)),_.filter(res,function(o){return null!=o})},this.containsObject=_.includeObject=function(obj,target,comparison){return null==comparison&&(comparison=void 0),null===obj?!1:_.any(obj,function(_this){return function(value){return null!=comparison?comparison(value,target):_.isEqual(value,target)}}(this))},this.differenceObjects=function(array1,array2,comparison){return null==comparison&&(comparison=void 0),_.filter(array1,function(_this){return function(value){return!_this.containsObject(array2,value,comparison)}}(this))},this.withoutObjects=this.differenceObjects,this.indexOfObject=function(array,item,comparison,isSorted){var i,length;if(null==array)return-1;if(i=0,length=array.length,isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}for(;length>i;){if(null!=comparison){if(comparison(array[i],item))return i}else if(_.isEqual(array[i],item))return i;i++}return-1},this.isNullOrUndefined=function(thing){return _.isNull(thing||_.isUndefined(thing))},this})}.call(this),function(){angular.module("uiGmapgoogle-maps.extensions").factory("uiGmapString",function(){return function(str){return this.contains=function(value,fromIndex){return-1!==str.indexOf(value,fromIndex)},this}})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmap_sync",[function(){return{fakePromise:function(){var _cb;return _cb=void 0,{then:function(cb){return _cb=cb},resolve:function(){return _cb.apply(void 0,arguments)}}}}}]).service("uiGmap_async",["$timeout","uiGmapPromise","uiGmapLogger","$q","uiGmapDataStructures","uiGmapGmapUtil",function($timeout,uiGmapPromise,$log,$q,uiGmapDataStructures,uiGmapGmapUtil){var ExposedPromise,PromiseQueueManager,SniffedPromise,_getArrayAndKeys,_getIterateeValue,defaultChunkSize,doChunk,doSkippPromise,each,errorObject,isInProgress,kickPromise,logTryCatch,managePromiseQueue,map,maybeCancelPromises,promiseStatus,promiseTypes,tryCatch;return promiseTypes=uiGmapPromise.promiseTypes,isInProgress=uiGmapPromise.isInProgress,promiseStatus=uiGmapPromise.promiseStatus,ExposedPromise=uiGmapPromise.ExposedPromise,SniffedPromise=uiGmapPromise.SniffedPromise,kickPromise=function(sniffedPromise,cancelCb){var promise;return promise=sniffedPromise.promise(),promise.promiseType=sniffedPromise.promiseType,promise.$$state&&$log.debug("promiseType: "+promise.promiseType+", state: "+promiseStatus(promise.$$state.status)),promise.cancelCb=cancelCb,promise},doSkippPromise=function(sniffedPromise,lastPromise){return sniffedPromise.promiseType===promiseTypes.create&&lastPromise.promiseType!==promiseTypes["delete"]&&lastPromise.promiseType!==promiseTypes.init?($log.debug("lastPromise.promiseType "+lastPromise.promiseType+", newPromiseType: "+sniffedPromise.promiseType+", SKIPPED MUST COME AFTER DELETE ONLY"),!0):!1},maybeCancelPromises=function(queue,sniffedPromise,lastPromise){var first;return sniffedPromise.promiseType===promiseTypes["delete"]&&lastPromise.promiseType!==promiseTypes["delete"]&&null!=lastPromise.cancelCb&&_.isFunction(lastPromise.cancelCb)&&isInProgress(lastPromise)&&($log.debug("promiseType: "+sniffedPromise.promiseType+", CANCELING LAST PROMISE type: "+lastPromise.promiseType),lastPromise.cancelCb("cancel safe"),first=queue.peek(),null!=first&&isInProgress(first))?first.hasOwnProperty("cancelCb")&&_.isFunction(first.cancelCb)?($log.debug("promiseType: "+first.promiseType+", CANCELING FIRST PROMISE type: "+first.promiseType),first.cancelCb("cancel safe")):$log.warn("first promise was not cancelable"):void 0},PromiseQueueManager=function(existingPiecesObj,sniffedPromise,cancelCb){var lastPromise,newPromise;if(existingPiecesObj.existingPieces){if(lastPromise=_.last(existingPiecesObj.existingPieces._content),doSkippPromise(sniffedPromise,lastPromise))return;return maybeCancelPromises(existingPiecesObj.existingPieces,sniffedPromise,lastPromise),newPromise=ExposedPromise(lastPromise["finally"](function(){return kickPromise(sniffedPromise,cancelCb)})),newPromise.cancelCb=cancelCb,newPromise.promiseType=sniffedPromise.promiseType,existingPiecesObj.existingPieces.enqueue(newPromise),lastPromise["finally"](function(){return existingPiecesObj.existingPieces.dequeue()})}return existingPiecesObj.existingPieces=new uiGmapDataStructures.Queue,existingPiecesObj.existingPieces.enqueue(kickPromise(sniffedPromise,cancelCb))},managePromiseQueue=function(objectToLock,promiseType,msg,cancelCb,fnPromise){var cancelLogger;return null==msg&&(msg=""),cancelLogger=function(msg){return $log.debug(msg+": "+msg),null!=cancelCb&&_.isFunction(cancelCb)?cancelCb(msg):void 0},PromiseQueueManager(objectToLock,SniffedPromise(fnPromise,promiseType),cancelLogger)},defaultChunkSize=80,errorObject={value:null},tryCatch=function(fn,ctx,args){var e;try{return fn.apply(ctx,args)}catch(_error){return e=_error,errorObject.value=e,errorObject}},logTryCatch=function(fn,ctx,deferred,args){var msg,result;return result=tryCatch(fn,ctx,args),result===errorObject&&(msg="error within chunking iterator: "+errorObject.value,$log.error(msg),deferred.reject(msg)),"cancel safe"===result?!1:!0},_getIterateeValue=function(collection,array,index){var _isArray,valOrKey;return _isArray=collection===array,valOrKey=array[index],_isArray?valOrKey:collection[valOrKey]},_getArrayAndKeys=function(collection,keys,bailOutCb,cb){var array;return angular.isArray(collection)?array=collection:(array=keys?keys:Object.keys(_.omit(collection,["length","forEach","map"])),keys=array),null==cb&&(cb=bailOutCb),angular.isArray(array)&&(void 0===array||(null!=array?array.length:void 0)<=0)&&cb!==bailOutCb?bailOutCb():cb(array,keys)},doChunk=function(collection,chunkSizeOrDontChunk,pauseMilli,chunkCb,pauseCb,overallD,index,_keys){return _getArrayAndKeys(collection,_keys,function(array,keys){var cnt,i,keepGoing,val;for(cnt=chunkSizeOrDontChunk&&chunkSizeOrDontChunk<array.length?chunkSizeOrDontChunk:array.length,i=index,keepGoing=!0;keepGoing&&cnt--&&i<(array?array.length:i+1);)val=_getIterateeValue(collection,array,i),keepGoing=angular.isFunction(val)?!0:logTryCatch(chunkCb,void 0,overallD,[val,i]),++i;if(array){if(!(keepGoing&&i<array.length))return overallD.resolve();if(index=i,chunkSizeOrDontChunk)return null!=pauseCb&&_.isFunction(pauseCb)&&logTryCatch(pauseCb,void 0,overallD,[]),$timeout(function(){return doChunk(collection,chunkSizeOrDontChunk,pauseMilli,chunkCb,pauseCb,overallD,index,keys)},pauseMilli,!1)}})},each=function(collection,chunk,chunkSizeOrDontChunk,pauseCb,index,pauseMilli,_keys){var error,overallD,ret;return null==chunkSizeOrDontChunk&&(chunkSizeOrDontChunk=defaultChunkSize),null==index&&(index=0),null==pauseMilli&&(pauseMilli=1),ret=void 0,overallD=uiGmapPromise.defer(),ret=overallD.promise,pauseMilli?_getArrayAndKeys(collection,_keys,function(){return overallD.resolve(),ret},function(array,keys){return doChunk(collection,chunkSizeOrDontChunk,pauseMilli,chunk,pauseCb,overallD,index,keys),ret}):(error="pause (delay) must be set from _async!",$log.error(error),overallD.reject(error),ret)},map=function(collection,iterator,chunkSizeOrDontChunk,pauseCb,index,pauseMilli,_keys){var results;return results=[],_getArrayAndKeys(collection,_keys,function(){return uiGmapPromise.resolve(results)},function(array,keys){return each(collection,function(o){return results.push(iterator(o))},chunkSizeOrDontChunk,pauseCb,index,pauseMilli,keys).then(function(){return results})})},{each:each,map:map,managePromiseQueue:managePromiseQueue,promiseLock:managePromiseQueue,defaultChunkSize:defaultChunkSize,chunkSizeFrom:function(fromSize,ret){return null==ret&&(ret=void 0),_.isNumber(fromSize)&&(ret=fromSize),(uiGmapGmapUtil.isFalse(fromSize)||fromSize===!1)&&(ret=!1),ret}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapBaseObject",function(){var BaseObject,baseObjectKeywords;return baseObjectKeywords=["extended","included"],BaseObject=function(){function BaseObject(){}return BaseObject.extend=function(obj){var key,ref,value;for(key in obj)value=obj[key],indexOf.call(baseObjectKeywords,key)<0&&(this[key]=value);return null!=(ref=obj.extended)&&ref.apply(this),this},BaseObject.include=function(obj){var key,ref,value;for(key in obj)value=obj[key],indexOf.call(baseObjectKeywords,key)<0&&(this.prototype[key]=value);return null!=(ref=obj.included)&&ref.apply(this),this},BaseObject}()})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChildEvents",function(){return{onChildCreation:function(child){}}})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapCtrlHandle",["$q",function($q){var CtrlHandle;return CtrlHandle={handle:function($scope,$element){return $scope.$on("$destroy",function(){return CtrlHandle.handle($scope)}),$scope.deferred=$q.defer(),{getScope:function(){return $scope}}},mapPromise:function(scope,ctrl){var mapScope;return mapScope=ctrl.getScope(),mapScope.deferred.promise.then(function(map){return scope.map=map}),mapScope.deferred.promise}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function($log){var _getEventsObj,_hasEvents;return _hasEvents=function(obj){return angular.isDefined(obj.events)&&null!=obj.events&&angular.isObject(obj.events)},_getEventsObj=function(scope,model){return _hasEvents(scope)?scope:_hasEvents(model)?model:void 0},{setEvents:function(gObject,scope,model,ignores){var eventObj;return eventObj=_getEventsObj(scope,model),null!=eventObj?_.compact(_.map(eventObj.events,function(eventHandler,eventName){var doIgnore;return ignores&&(doIgnore=_(ignores).contains(eventName)),eventObj.events.hasOwnProperty(eventName)&&angular.isFunction(eventObj.events[eventName])&&!doIgnore?google.maps.event.addListener(gObject,eventName,function(){return scope.$evalAsync||(scope.$evalAsync=function(){}),scope.$evalAsync(eventHandler.apply(scope,[gObject,eventName,model,arguments]))}):void 0})):void 0},removeEvents:function(listeners){return listeners?listeners.forEach(function(l){return l?google.maps.event.removeListener(l):void 0}):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapFitHelper",["uiGmapLogger","uiGmap_async",function($log,_async){return{fit:function(gMarkers,gMap){var bounds,everSet;return gMap&&gMarkers&&gMarkers.length>0&&(bounds=new google.maps.LatLngBounds,everSet=!1,gMarkers.forEach(function(_this){return function(gMarker){return gMarker?(everSet||(everSet=!0),bounds.extend(gMarker.getPosition())):void 0}}(this)),everSet)?gMap.fitBounds(bounds):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(Logger,$compile){var _isFalse,_isTruthy,getCoords,getLatitude,getLongitude,validateCoords;return _isTruthy=function(value,bool,optionsArray){return value===bool||-1!==optionsArray.indexOf(value)},_isFalse=function(value){return _isTruthy(value,!1,["false","FALSE",0,"n","N","no","NO"])},getLatitude=function(value){return Array.isArray(value)&&2===value.length?value[1]:angular.isDefined(value.type)&&"Point"===value.type?value.coordinates[1]:value.latitude},getLongitude=function(value){return Array.isArray(value)&&2===value.length?value[0]:angular.isDefined(value.type)&&"Point"===value.type?value.coordinates[0]:value.longitude},getCoords=function(value){return value?Array.isArray(value)&&2===value.length?new google.maps.LatLng(value[1],value[0]):angular.isDefined(value.type)&&"Point"===value.type?new google.maps.LatLng(value.coordinates[1],value.coordinates[0]):new google.maps.LatLng(value.latitude,value.longitude):void 0},validateCoords=function(coords){if(angular.isUndefined(coords))return!1;if(_.isArray(coords)){if(2===coords.length)return!0}else if(null!=coords&&(null!=coords?coords.type:void 0)&&"Point"===coords.type&&_.isArray(coords.coordinates)&&2===coords.coordinates.length)return!0;return coords&&angular.isDefined((null!=coords?coords.latitude:void 0)&&angular.isDefined(null!=coords?coords.longitude:void 0))?!0:!1},{setCoordsFromEvent:function(prevValue,newLatLon){return prevValue?(Array.isArray(prevValue)&&2===prevValue.length?(prevValue[1]=newLatLon.lat(),prevValue[0]=newLatLon.lng()):angular.isDefined(prevValue.type)&&"Point"===prevValue.type?(prevValue.coordinates[1]=newLatLon.lat(),prevValue.coordinates[0]=newLatLon.lng()):(prevValue.latitude=newLatLon.lat(),prevValue.longitude=newLatLon.lng()),prevValue):void 0},getLabelPositionPoint:function(anchor){var xPos,yPos;return void 0===anchor?void 0:(anchor=/^([-\d\.]+)\s([-\d\.]+)$/.exec(anchor),xPos=parseFloat(anchor[1]),yPos=parseFloat(anchor[2]),null!=xPos&&null!=yPos?new google.maps.Point(xPos,yPos):void 0)},createWindowOptions:function(gMarker,scope,content,defaults){var options;return null!=content&&null!=defaults&&null!=$compile?(options=angular.extend({},defaults,{content:this.buildContent(scope,defaults,content),position:null!=defaults.position?defaults.position:angular.isObject(gMarker)?gMarker.getPosition():getCoords(scope.coords)}),null!=gMarker&&null==(null!=options?options.pixelOffset:void 0)&&(null==options.boxClass||(options.pixelOffset={height:0,width:-2})),options):defaults?defaults:(Logger.error("infoWindow defaults not defined"),content?void 0:Logger.error("infoWindow content not defined"))},buildContent:function(scope,defaults,content){var parsed,ret;return null!=defaults.content?ret=defaults.content:null!=$compile?(content=content.replace(/^\s+|\s+$/g,""),parsed=""===content?"":$compile(content)(scope),parsed.length>0&&(ret=parsed[0])):ret=content,ret},defaultDelay:50,isTrue:function(value){return _isTruthy(value,!0,["true","TRUE",1,"y","Y","yes","YES"])},isFalse:_isFalse,isFalsy:function(value){return _isTruthy(value,!1,[void 0,null])||_isFalse(value)},getCoords:getCoords,validateCoords:validateCoords,equalCoords:function(coord1,coord2){return getLatitude(coord1)===getLatitude(coord2)&&getLongitude(coord1)===getLongitude(coord2)},validatePath:function(path){var array,i,polygon,trackMaxVertices;if(i=0,angular.isUndefined(path.type)){if(!Array.isArray(path)||path.length<2)return!1;for(;i<path.length;){if(!(angular.isDefined(path[i].latitude)&&angular.isDefined(path[i].longitude)||"function"==typeof path[i].lat&&"function"==typeof path[i].lng))return!1;i++}return!0}if(angular.isUndefined(path.coordinates))return!1;if("Polygon"===path.type){if(path.coordinates[0].length<4)return!1;array=path.coordinates[0]}else if("MultiPolygon"===path.type){if(trackMaxVertices={max:0,index:0},_.forEach(path.coordinates,function(polygon,index){return polygon[0].length>this.max?(this.max=polygon[0].length,this.index=index):void 0},trackMaxVertices),polygon=path.coordinates[trackMaxVertices.index],array=polygon[0],array.length<4)return!1}else{if("LineString"!==path.type)return!1;if(path.coordinates.length<2)return!1;array=path.coordinates}for(;i<array.length;){if(2!==array[i].length)return!1;i++}return!0},convertPathPoints:function(path){var array,i,latlng,result,trackMaxVertices;if(i=0,result=new google.maps.MVCArray,angular.isUndefined(path.type))for(;i<path.length;)angular.isDefined(path[i].latitude)&&angular.isDefined(path[i].longitude)?latlng=new google.maps.LatLng(path[i].latitude,path[i].longitude):"function"==typeof path[i].lat&&"function"==typeof path[i].lng&&(latlng=path[i]),result.push(latlng),i++;else for("Polygon"===path.type?array=path.coordinates[0]:"MultiPolygon"===path.type?(trackMaxVertices={max:0,index:0},_.forEach(path.coordinates,function(polygon,index){return polygon[0].length>this.max?(this.max=polygon[0].length,this.index=index):void 0},trackMaxVertices),array=path.coordinates[trackMaxVertices.index][0]):"LineString"===path.type&&(array=path.coordinates);i<array.length;)result.push(new google.maps.LatLng(array[i][1],array[i][0])),i++;return result},extendMapBounds:function(map,points){var bounds,i;for(bounds=new google.maps.LatLngBounds,i=0;i<points.length;)bounds.extend(points.getAt(i)),i++;return map.fitBounds(bounds)},getPath:function(object,key){var obj;return null!=key&&_.isString(key)?(obj=object,_.each(key.split("."),function(value){return obj?obj=obj[value]:void 0}),obj):key},validateBoundPoints:function(bounds){return angular.isUndefined(bounds.sw.latitude)||angular.isUndefined(bounds.sw.longitude)||angular.isUndefined(bounds.ne.latitude)||angular.isUndefined(bounds.ne.longitude)?!1:!0},convertBoundPoints:function(bounds){var result;return result=new google.maps.LatLngBounds(new google.maps.LatLng(bounds.sw.latitude,bounds.sw.longitude),new google.maps.LatLng(bounds.ne.latitude,bounds.ne.longitude))},fitMapBounds:function(map,bounds){return map.fitBounds(bounds)}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapIsReady",["$q","$timeout",function($q,$timeout){var ctr,promises,proms;return ctr=0,proms=[],promises=function(){return $q.all(proms)},{spawn:function(){var d;return d=$q.defer(),proms.push(d.promise),ctr+=1,{instance:ctr,deferred:d}},promises:promises,instances:function(){return ctr},promise:function(expect){var d,ohCrap;return null==expect&&(expect=1),d=$q.defer(),ohCrap=function(){return $timeout(function(){return ctr!==expect?ohCrap():d.resolve(promises())})},ohCrap(),d.promise},reset:function(){return ctr=0,proms.length=0},decrement:function(){return ctr-=1,proms.length>0?proms.length=proms.length-1:proms.length=0}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapLinked",["uiGmapBaseObject",function(BaseObject){var Linked;return Linked=function(superClass){function Linked(scope,element,attrs,ctrls){this.scope=scope,this.element=element,this.attrs=attrs,this.ctrls=ctrls}return extend(Linked,superClass),Linked}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["$log",function($log){var LEVELS,Logger,log,maybeExecLevel;return LEVELS={log:1,info:2,debug:3,warn:4,error:5,none:6},maybeExecLevel=function(level,current,fn){return level>=current?fn():void 0},log=function(logLevelFnName,msg){return null!=$log?$log[logLevelFnName](msg):console[logLevelFnName](msg)},new(Logger=function(){function Logger(){var logFns;this.doLog=!0,logFns={},["log","info","debug","warn","error"].forEach(function(_this){return function(level){return logFns[level]=function(msg){return _this.doLog?maybeExecLevel(LEVELS[level],_this.currentLevel,function(){return log(level,msg)}):void 0}}}(this)),this.LEVELS=LEVELS,this.currentLevel=LEVELS.error,this.log=logFns.log,this.info=logFns.info,this.debug=logFns.debug,this.warn=logFns.warn,this.error=logFns.error}return Logger.prototype.spawn=function(){return new Logger;
},Logger.prototype.setLog=function(someLogger){return $log=someLogger},Logger}())}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelKey",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapPromise","$q","$timeout",function(BaseObject,GmapUtil,uiGmapPromise,$q,$timeout){var ModelKey;return ModelKey=function(superClass){function ModelKey(scope1){this.scope=scope1,this.modelsLength=bind(this.modelsLength,this),this.updateChild=bind(this.updateChild,this),this.destroy=bind(this.destroy,this),this.onDestroy=bind(this.onDestroy,this),this.setChildScope=bind(this.setChildScope,this),this.getChanges=bind(this.getChanges,this),this.getProp=bind(this.getProp,this),this.setIdKey=bind(this.setIdKey,this),this.modelKeyComparison=bind(this.modelKeyComparison,this),ModelKey.__super__.constructor.call(this),this["interface"]={},this["interface"].scopeKeys=[],this.defaultIdKey="id",this.idKey=void 0}return extend(ModelKey,superClass),ModelKey.prototype.evalModelHandle=function(model,modelKey){return null!=model&&null!=modelKey?"self"===modelKey?model:(_.isFunction(modelKey)&&(modelKey=modelKey()),GmapUtil.getPath(model,modelKey)):void 0},ModelKey.prototype.modelKeyComparison=function(model1,model2){var hasCoords,isEqual,scope;if(hasCoords=_.contains(this["interface"].scopeKeys,"coords"),(hasCoords&&null!=this.scope.coords||!hasCoords)&&(scope=this.scope),null==scope)throw"No scope set!";return hasCoords&&(isEqual=GmapUtil.equalCoords(this.scopeOrModelVal("coords",scope,model1),this.scopeOrModelVal("coords",scope,model2)),!isEqual)?isEqual:isEqual=_.every(_.without(this["interface"].scopeKeys,"coords"),function(_this){return function(k){return _this.scopeOrModelVal(scope[k],scope,model1)===_this.scopeOrModelVal(scope[k],scope,model2)}}(this))},ModelKey.prototype.setIdKey=function(scope){return this.idKey=null!=scope.idKey?scope.idKey:this.defaultIdKey},ModelKey.prototype.setVal=function(model,key,newValue){var thingToSet;return thingToSet=this.modelOrKey(model,key),thingToSet=newValue,model},ModelKey.prototype.modelOrKey=function(model,key){return null!=key?"self"!==key?GmapUtil.getPath(model,key):model:void 0},ModelKey.prototype.getProp=function(propName,scope,model){return this.scopeOrModelVal(propName,scope,model)},ModelKey.prototype.getChanges=function(now,prev,whitelistedProps){var c,changes,prop;whitelistedProps&&(prev=_.pick(prev,whitelistedProps),now=_.pick(now,whitelistedProps)),changes={},prop={},c={};for(prop in now)prev&&prev[prop]===now[prop]||(_.isArray(now[prop])?changes[prop]=now[prop]:_.isObject(now[prop])?(c=this.getChanges(now[prop],prev?prev[prop]:null),_.isEmpty(c)||(changes[prop]=c)):changes[prop]=now[prop]);return changes},ModelKey.prototype.scopeOrModelVal=function(key,scope,model,doWrap){var maybeWrap,modelKey,modelProp,scopeProp;return null==doWrap&&(doWrap=!1),maybeWrap=function(isScope,ret,doWrap){return null==doWrap&&(doWrap=!1),doWrap?{isScope:isScope,value:ret}:ret},scopeProp=scope[key],_.isFunction(scopeProp)?maybeWrap(!0,scopeProp(model),doWrap):_.isObject(scopeProp)?maybeWrap(!0,scopeProp,doWrap):_.isString(scopeProp)?(modelKey=scopeProp,modelProp=modelKey?"self"===modelKey?model:model[modelKey]:model[key],_.isFunction(modelProp)?maybeWrap(!1,modelProp(),doWrap):maybeWrap(!1,modelProp,doWrap)):maybeWrap(!0,scopeProp,doWrap)},ModelKey.prototype.setChildScope=function(keys,childScope,model){return _.each(keys,function(_this){return function(name){var isScopeObj,newValue;return isScopeObj=_this.scopeOrModelVal(name,childScope,model,!0),null!=(null!=isScopeObj?isScopeObj.value:void 0)&&(newValue=isScopeObj.value,newValue!==childScope[name])?childScope[name]=newValue:void 0}}(this)),childScope.model=model},ModelKey.prototype.onDestroy=function(scope){},ModelKey.prototype.destroy=function(manualOverride){var ref;return null==manualOverride&&(manualOverride=!1),null==this.scope||(null!=(ref=this.scope)?ref.$$destroyed:void 0)||!this.needToManualDestroy&&!manualOverride?this.clean():this.scope.$destroy()},ModelKey.prototype.updateChild=function(child,model){return null==model[this.idKey]?void this.$log.error("Model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):child.updateModel(model)},ModelKey.prototype.modelsLength=function(arrayOrObjModels){var len,toCheck;return null==arrayOrObjModels&&(arrayOrObjModels=void 0),len=0,toCheck=arrayOrObjModels?arrayOrObjModels:this.scope.models,null==toCheck?len:len=angular.isArray(toCheck)||null!=toCheck.length?toCheck.length:Object.keys(toCheck).length},ModelKey}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelsWatcher",["uiGmapLogger","uiGmap_async","$q","uiGmapPromise",function(Logger,_async,$q,uiGmapPromise){return{didQueueInitPromise:function(existingPiecesObj,scope){return 0===scope.models.length?(_async.promiseLock(existingPiecesObj,uiGmapPromise.promiseTypes.init,null,null,function(_this){return function(){return uiGmapPromise.resolve()}}(this)),!0):!1},figureOutState:function(idKey,scope,childObjects,comparison,callBack){var adds,children,mappedScopeModelIds,removals,updates;return adds=[],mappedScopeModelIds={},removals=[],updates=[],scope.models.forEach(function(m){var child;return null==m[idKey]?Logger.error(" id missing for model #{m.toString()},\ncan not use do comparison/insertion"):(mappedScopeModelIds[m[idKey]]={},null==childObjects.get(m[idKey])?adds.push(m):(child=childObjects.get(m[idKey]),comparison(m,child.clonedModel,scope)?void 0:updates.push({model:m,child:child})))}),children=childObjects.values(),children.forEach(function(c){var id;return null==c?void Logger.error("child undefined in ModelsWatcher."):null==c.model?void Logger.error("child.model undefined in ModelsWatcher."):(id=c.model[idKey],null==mappedScopeModelIds[id]?removals.push(c):void 0)}),{adds:adds,removals:removals,updates:updates}}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapPromise",["$q","$timeout","uiGmapLogger",function($q,$timeout,$log){var ExposedPromise,SniffedPromise,defer,isInProgress,isResolved,promise,promiseStatus,promiseStatuses,promiseTypes,resolve,strPromiseStatuses;return promiseTypes={create:"create",update:"update","delete":"delete",init:"init"},promiseStatuses={IN_PROGRESS:0,RESOLVED:1,REJECTED:2},strPromiseStatuses=function(){var obj;return obj={},obj[""+promiseStatuses.IN_PROGRESS]="in-progress",obj[""+promiseStatuses.RESOLVED]="resolved",obj[""+promiseStatuses.REJECTED]="rejected",obj}(),isInProgress=function(promise){return promise.$$state?promise.$$state.status===promiseStatuses.IN_PROGRESS:promise.hasOwnProperty("$$v")?void 0:!0},isResolved=function(promise){return promise.$$state?promise.$$state.status===promiseStatuses.RESOLVED:promise.hasOwnProperty("$$v")?!0:void 0},promiseStatus=function(status){return strPromiseStatuses[status]||"done w error"},ExposedPromise=function(promise){var cancelDeferred,combined,wrapped;return cancelDeferred=$q.defer(),combined=$q.all([promise,cancelDeferred.promise]),wrapped=$q.defer(),promise.then(cancelDeferred.resolve,function(){},function(notify){return cancelDeferred.notify(notify),wrapped.notify(notify)}),combined.then(function(successes){return wrapped.resolve(successes[0]||successes[1])},function(error){return wrapped.reject(error)}),wrapped.promise.cancel=function(reason){return null==reason&&(reason="canceled"),cancelDeferred.reject(reason)},wrapped.promise.notify=function(msg){return null==msg&&(msg="cancel safe"),wrapped.notify(msg),promise.hasOwnProperty("notify")?promise.notify(msg):void 0},null!=promise.promiseType&&(wrapped.promise.promiseType=promise.promiseType),wrapped.promise},SniffedPromise=function(fnPromise,promiseType){return{promise:fnPromise,promiseType:promiseType}},defer=function(){return $q.defer()},resolve=function(){var d;return d=$q.defer(),d.resolve.apply(void 0,arguments),d.promise},promise=function(fnToWrap){var d;return _.isFunction(fnToWrap)?(d=$q.defer(),$timeout(function(){var result;return result=fnToWrap(),d.resolve(result)}),d.promise):void $log.error("uiGmapPromise.promise() only accepts functions")},{defer:defer,promise:promise,resolve:resolve,promiseTypes:promiseTypes,isInProgress:isInProgress,isResolved:isResolved,promiseStatus:promiseStatus,ExposedPromise:ExposedPromise,SniffedPromise:SniffedPromise}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropMap",function(){var PropMap;return PropMap=function(){function PropMap(){this.removeAll=bind(this.removeAll,this),this.slice=bind(this.slice,this),this.push=bind(this.push,this),this.keys=bind(this.keys,this),this.values=bind(this.values,this),this.remove=bind(this.remove,this),this.put=bind(this.put,this),this.stateChanged=bind(this.stateChanged,this),this.get=bind(this.get,this),this.length=0,this.dict={},this.didValsStateChange=!1,this.didKeysStateChange=!1,this.allVals=[],this.allKeys=[]}return PropMap.prototype.get=function(key){return this.dict[key]},PropMap.prototype.stateChanged=function(){return this.didValsStateChange=!0,this.didKeysStateChange=!0},PropMap.prototype.put=function(key,value){return null==this.get(key)&&this.length++,this.stateChanged(),this.dict[key]=value},PropMap.prototype.remove=function(key,isSafe){var value;return null==isSafe&&(isSafe=!1),isSafe&&!this.get(key)?void 0:(value=this.dict[key],delete this.dict[key],this.length--,this.stateChanged(),value)},PropMap.prototype.valuesOrKeys=function(str){var keys,vals;return null==str&&(str="Keys"),this["did"+str+"StateChange"]?(vals=[],keys=[],_.each(this.dict,function(v,k){return vals.push(v),keys.push(k)}),this.didKeysStateChange=!1,this.didValsStateChange=!1,this.allVals=vals,this.allKeys=keys,this["all"+str]):this["all"+str]},PropMap.prototype.values=function(){return this.valuesOrKeys("Vals")},PropMap.prototype.keys=function(){return this.valuesOrKeys()},PropMap.prototype.push=function(obj,key){return null==key&&(key="key"),this.put(obj[key],obj)},PropMap.prototype.slice=function(){return this.keys().map(function(_this){return function(k){return _this.remove(k)}}(this))},PropMap.prototype.removeAll=function(){return this.slice()},PropMap.prototype.each=function(cb){return _.each(this.dict,function(v,k){return cb(v)})},PropMap.prototype.map=function(cb){return _.map(this.dict,function(v,k){return cb(v)})},PropMap}()})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropertyAction",["uiGmapLogger",function(Logger){var PropertyAction;return PropertyAction=function(setterFn){return this.setIfChange=function(newVal,oldVal){var callingKey;return callingKey=this.exp,_.isEqual(oldVal,newVal)?void 0:setterFn(callingKey,newVal)},this.sic=this.setIfChange,this}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapClustererMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function($log,FitHelper,PropMap){var ClustererMarkerManager;return ClustererMarkerManager=function(){function ClustererMarkerManager(gMap,opt_markers,opt_options,opt_events){null==opt_markers&&(opt_markers={}),this.opt_options=null!=opt_options?opt_options:{},this.opt_events=opt_events,this.checkSync=bind(this.checkSync,this),this.getGMarkers=bind(this.getGMarkers,this),this.fit=bind(this.fit,this),this.destroy=bind(this.destroy,this),this.clear=bind(this.clear,this),this.draw=bind(this.draw,this),this.removeMany=bind(this.removeMany,this),this.remove=bind(this.remove,this),this.addMany=bind(this.addMany,this),this.update=bind(this.update,this),this.add=bind(this.add,this),this.type=ClustererMarkerManager.type,this.clusterer=new NgMapMarkerClusterer(gMap,opt_markers,this.opt_options),this.propMapGMarkers=new PropMap,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,$log.info(this)}return ClustererMarkerManager.type="ClustererMarkerManager",ClustererMarkerManager.prototype.checkKey=function(gMarker){var msg;return null==gMarker.key?(msg="gMarker.key undefined and it is REQUIRED!!",$log.error(msg)):void 0},ClustererMarkerManager.prototype.add=function(gMarker){return this.checkKey(gMarker),this.clusterer.addMarker(gMarker,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(gMarker.key,gMarker),this.checkSync()},ClustererMarkerManager.prototype.update=function(gMarker){return this.remove(gMarker),this.add(gMarker)},ClustererMarkerManager.prototype.addMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(gMarker){return _this.add(gMarker)}}(this))},ClustererMarkerManager.prototype.remove=function(gMarker){var exists;return this.checkKey(gMarker),exists=this.propMapGMarkers.get(gMarker.key),exists&&(this.clusterer.removeMarker(gMarker,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(gMarker.key)),this.checkSync()},ClustererMarkerManager.prototype.removeMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(gMarker){return _this.remove(gMarker)}}(this))},ClustererMarkerManager.prototype.draw=function(){return this.clusterer.repaint()},ClustererMarkerManager.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},ClustererMarkerManager.prototype.attachEvents=function(options,optionsName){var eventHandler,eventName,results;if(angular.isDefined(options)&&null!=options&&angular.isObject(options)){results=[];for(eventName in options)eventHandler=options[eventName],options.hasOwnProperty(eventName)&&angular.isFunction(options[eventName])?($log.info(optionsName+": Attaching event: "+eventName+" to clusterer"),results.push(google.maps.event.addListener(this.clusterer,eventName,options[eventName]))):results.push(void 0);return results}},ClustererMarkerManager.prototype.clearEvents=function(options,optionsName){var eventHandler,eventName,results;if(angular.isDefined(options)&&null!=options&&angular.isObject(options)){results=[];for(eventName in options)eventHandler=options[eventName],options.hasOwnProperty(eventName)&&angular.isFunction(options[eventName])?($log.info(optionsName+": Clearing event: "+eventName+" to clusterer"),results.push(google.maps.event.clearListeners(this.clusterer,eventName))):results.push(void 0);return results}},ClustererMarkerManager.prototype.destroy=function(){return this.clearEvents(this.opt_events,"opt_events"),this.clear()},ClustererMarkerManager.prototype.fit=function(){return FitHelper.fit(this.getGMarkers(),this.clusterer.getMap())},ClustererMarkerManager.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},ClustererMarkerManager.prototype.checkSync=function(){},ClustererMarkerManager}()}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(Logger,FitHelper,PropMap){var MarkerManager;return MarkerManager=function(){function MarkerManager(gMap,opt_markers,opt_options){this.getGMarkers=bind(this.getGMarkers,this),this.fit=bind(this.fit,this),this.handleOptDraw=bind(this.handleOptDraw,this),this.clear=bind(this.clear,this),this.draw=bind(this.draw,this),this.removeMany=bind(this.removeMany,this),this.remove=bind(this.remove,this),this.addMany=bind(this.addMany,this),this.update=bind(this.update,this),this.add=bind(this.add,this),this.type=MarkerManager.type,this.gMap=gMap,this.gMarkers=new PropMap,this.$log=Logger,this.$log.info(this)}return MarkerManager.type="MarkerManager",MarkerManager.prototype.add=function(gMarker,optDraw){var exists,msg;if(null==optDraw&&(optDraw=!0),null==gMarker.key)throw msg="gMarker.key undefined and it is REQUIRED!!",Logger.error(msg),msg;return exists=this.gMarkers.get(gMarker.key),exists?void 0:(this.handleOptDraw(gMarker,optDraw,!0),this.gMarkers.put(gMarker.key,gMarker))},MarkerManager.prototype.update=function(gMarker,optDraw){return null==optDraw&&(optDraw=!0),this.remove(gMarker,optDraw),this.add(gMarker,optDraw)},MarkerManager.prototype.addMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(gMarker){return _this.add(gMarker)}}(this))},MarkerManager.prototype.remove=function(gMarker,optDraw){return null==optDraw&&(optDraw=!0),this.handleOptDraw(gMarker,optDraw,!1),this.gMarkers.get(gMarker.key)?this.gMarkers.remove(gMarker.key):void 0},MarkerManager.prototype.removeMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(marker){return _this.remove(marker)}}(this))},MarkerManager.prototype.draw=function(){var deletes;return deletes=[],this.gMarkers.each(function(_this){return function(gMarker){return gMarker.isDrawn?void 0:gMarker.doAdd?(gMarker.setMap(_this.gMap),gMarker.isDrawn=!0):deletes.push(gMarker)}}(this)),deletes.forEach(function(_this){return function(gMarker){return gMarker.isDrawn=!1,_this.remove(gMarker,!0)}}(this))},MarkerManager.prototype.clear=function(){return this.gMarkers.each(function(gMarker){return gMarker.setMap(null)}),delete this.gMarkers,this.gMarkers=new PropMap},MarkerManager.prototype.handleOptDraw=function(gMarker,optDraw,doAdd){return optDraw===!0?(doAdd?gMarker.setMap(this.gMap):gMarker.setMap(null),gMarker.isDrawn=!0):(gMarker.isDrawn=!1,gMarker.doAdd=doAdd)},MarkerManager.prototype.fit=function(){return FitHelper.fit(this.getGMarkers(),this.gMap)},MarkerManager.prototype.getGMarkers=function(){return this.gMarkers.values()},MarkerManager}()}])}.call(this),function(){angular.module("uiGmapgoogle-maps").factory("uiGmapadd-events",["$timeout",function($timeout){var addEvent,addEvents;return addEvent=function(target,eventName,handler){return google.maps.event.addListener(target,eventName,function(){return handler.apply(this,arguments),$timeout(function(){},!0)})},addEvents=function(target,eventName,handler){var remove;return handler?addEvent(target,eventName,handler):(remove=[],angular.forEach(eventName,function(_handler,key){return remove.push(addEvent(target,key,_handler))}),function(){return angular.forEach(remove,function(listener){return google.maps.event.removeListener(listener)}),remove=null})}}])}.call(this),function(){angular.module("uiGmapgoogle-maps").factory("uiGmaparray-sync",["uiGmapadd-events",function(mapEvents){return function(mapArray,scope,pathEval,pathChangedFn){var geojsonArray,geojsonHandlers,geojsonWatcher,isSetFromScope,legacyHandlers,legacyWatcher,mapArrayListener,scopePath,watchListener;return isSetFromScope=!1,scopePath=scope.$eval(pathEval),scope["static"]||(legacyHandlers={set_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index)))return value.lng&&value.lat?(scopePath[index].latitude=value.lat(),scopePath[index].longitude=value.lng()):scopePath[index]=value},insert_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index)))return value.lng&&value.lat?scopePath.splice(index,0,{latitude:value.lat(),longitude:value.lng()}):scopePath.splice(index,0,value)},remove_at:function(index){return isSetFromScope?void 0:scopePath.splice(index,1)}},"Polygon"===scopePath.type?geojsonArray=scopePath.coordinates[0]:"LineString"===scopePath.type&&(geojsonArray=scopePath.coordinates),geojsonHandlers={set_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index),value&&value.lng&&value.lat))return geojsonArray[index][1]=value.lat(),geojsonArray[index][0]=value.lng()},insert_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index),value&&value.lng&&value.lat))return geojsonArray.splice(index,0,[value.lng(),value.lat()])},remove_at:function(index){return isSetFromScope?void 0:geojsonArray.splice(index,1)}},mapArrayListener=mapEvents(mapArray,angular.isUndefined(scopePath.type)?legacyHandlers:geojsonHandlers)),legacyWatcher=function(newPath){var changed,i,l,newLength,newValue,oldArray,oldLength,oldValue;if(isSetFromScope=!0,oldArray=mapArray,changed=!1,newPath){for(i=0,oldLength=oldArray.getLength(),newLength=newPath.length,l=Math.min(oldLength,newLength),newValue=void 0;l>i;)oldValue=oldArray.getAt(i),newValue=newPath[i],"function"==typeof newValue.equals?newValue.equals(oldValue)||(oldArray.setAt(i,newValue),changed=!0):(oldValue.lat()!==newValue.latitude||oldValue.lng()!==newValue.longitude)&&(oldArray.setAt(i,new google.maps.LatLng(newValue.latitude,newValue.longitude)),changed=!0),i++;for(;newLength>i;)newValue=newPath[i],"function"==typeof newValue.lat&&"function"==typeof newValue.lng?oldArray.push(newValue):oldArray.push(new google.maps.LatLng(newValue.latitude,newValue.longitude)),changed=!0,i++;for(;oldLength>i;)oldArray.pop(),changed=!0,i++}return isSetFromScope=!1,changed?pathChangedFn(oldArray):void 0},geojsonWatcher=function(newPath){var array,changed,i,l,newLength,newValue,oldArray,oldLength,oldValue;if(isSetFromScope=!0,oldArray=mapArray,changed=!1,newPath){for("Polygon"===scopePath.type?array=newPath.coordinates[0]:"LineString"===scopePath.type&&(array=newPath.coordinates),i=0,oldLength=oldArray.getLength(),newLength=array.length,l=Math.min(oldLength,newLength),newValue=void 0;l>i;)oldValue=oldArray.getAt(i),newValue=array[i],(oldValue.lat()!==newValue[1]||oldValue.lng()!==newValue[0])&&(oldArray.setAt(i,new google.maps.LatLng(newValue[1],newValue[0])),changed=!0),i++;for(;newLength>i;)newValue=array[i],oldArray.push(new google.maps.LatLng(newValue[1],newValue[0])),changed=!0,i++;for(;oldLength>i;)oldArray.pop(),changed=!0,i++}return isSetFromScope=!1,changed?pathChangedFn(oldArray):void 0},scope["static"]||(watchListener=angular.isUndefined(scopePath.type)?scope.$watchCollection(pathEval,legacyWatcher):scope.$watch(pathEval,geojsonWatcher,!0)),function(){return mapArrayListener&&(mapArrayListener(),mapArrayListener=null),watchListener?(watchListener(),watchListener=null):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChromeFixes",["$timeout",function($timeout){return{maybeRepaint:function(el){return el?(el.style.opacity=.9,$timeout(function(){return el.style.opacity=1})):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps").service("uiGmapObjectIterators",function(){var _ignores,_iterators,_slapForEach,_slapMap;return _ignores=["length","forEach","map"],_iterators=[],_slapForEach=function(object){return object.forEach=function(cb){return _.each(_.omit(object,_ignores),function(val){return _.isFunction(val)?void 0:cb(val)})},object},_iterators.push(_slapForEach),_slapMap=function(object){return object.map=function(cb){return _.map(_.omit(object,_ignores),function(val){return _.isFunction(val)?void 0:cb(val)})},object},_iterators.push(_slapMap),{slapMap:_slapMap,slapForEach:_slapForEach,slapAll:function(object){return _iterators.forEach(function(it){return it(object)}),object}}})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.options.builders").service("uiGmapCommonOptionsBuilder",["uiGmapBaseObject","uiGmapLogger","uiGmapModelKey",function(BaseObject,$log,ModelKey){var CommonOptionsBuilder;return CommonOptionsBuilder=function(superClass){function CommonOptionsBuilder(){return this.watchProps=bind(this.watchProps,this),this.buildOpts=bind(this.buildOpts,this),CommonOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(CommonOptionsBuilder,superClass),CommonOptionsBuilder.prototype.props=["clickable","draggable","editable","visible",{prop:"stroke",isColl:!0}],CommonOptionsBuilder.prototype.getCorrectModel=function(scope){return angular.isDefined(null!=scope?scope.model:void 0)?scope.model:scope},CommonOptionsBuilder.prototype.buildOpts=function(customOpts,cachedEval,forEachOpts){var model,opts,stroke;return null==customOpts&&(customOpts={}),null==forEachOpts&&(forEachOpts={}),this.scope?this.map?(model=this.getCorrectModel(this.scope),stroke=this.scopeOrModelVal("stroke",this.scope,model),opts=angular.extend(customOpts,this.DEFAULTS,{map:this.map,strokeColor:null!=stroke?stroke.color:void 0,strokeOpacity:null!=stroke?stroke.opacity:void 0,strokeWeight:null!=stroke?stroke.weight:void 0}),angular.forEach(angular.extend(forEachOpts,{clickable:!0,draggable:!1,editable:!1,"static":!1,fit:!1,visible:!0,zIndex:0,icons:[]}),function(_this){return function(defaultValue,key){var val;return val=cachedEval?cachedEval[key]:_this.scopeOrModelVal(key,_this.scope,model),angular.isUndefined(val)?opts[key]=defaultValue:opts[key]=model[key]}}(this)),opts["static"]&&(opts.editable=!1),opts):void $log.error("this.map not defined in CommonOptionsBuilder can not buildOpts"):void $log.error("this.scope not defined in CommonOptionsBuilder can not buildOpts")},CommonOptionsBuilder.prototype.watchProps=function(props){return null==props&&(props=this.props),props.forEach(function(_this){return function(prop){return null!=_this.attrs[prop]||null!=_this.attrs[null!=prop?prop.prop:void 0]?(null!=prop?prop.isColl:void 0)?_this.scope.$watchCollection(prop.prop,_this.setMyOptions):_this.scope.$watch(prop,_this.setMyOptions):void 0}}(this))},CommonOptionsBuilder}(ModelKey)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.options.builders").factory("uiGmapPolylineOptionsBuilder",["uiGmapCommonOptionsBuilder",function(CommonOptionsBuilder){var PolylineOptionsBuilder;return PolylineOptionsBuilder=function(superClass){function PolylineOptionsBuilder(){return PolylineOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(PolylineOptionsBuilder,superClass),PolylineOptionsBuilder.prototype.buildOpts=function(pathPoints,cachedEval){return PolylineOptionsBuilder.__super__.buildOpts.call(this,{path:pathPoints},cachedEval,{geodesic:!1})},PolylineOptionsBuilder}(CommonOptionsBuilder)}]).factory("uiGmapShapeOptionsBuilder",["uiGmapCommonOptionsBuilder",function(CommonOptionsBuilder){var ShapeOptionsBuilder;return ShapeOptionsBuilder=function(superClass){function ShapeOptionsBuilder(){return ShapeOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(ShapeOptionsBuilder,superClass),ShapeOptionsBuilder.prototype.buildOpts=function(customOpts,cachedEval,forEachOpts){var fill,model;return model=this.getCorrectModel(this.scope),fill=cachedEval?cachedEval.fill:this.scopeOrModelVal("fill",this.scope,model),customOpts=angular.extend(customOpts,{fillColor:null!=fill?fill.color:void 0,fillOpacity:null!=fill?fill.opacity:void 0}),ShapeOptionsBuilder.__super__.buildOpts.call(this,customOpts,cachedEval,forEachOpts)},ShapeOptionsBuilder}(CommonOptionsBuilder)}]).factory("uiGmapPolygonOptionsBuilder",["uiGmapShapeOptionsBuilder",function(ShapeOptionsBuilder){var PolygonOptionsBuilder;return PolygonOptionsBuilder=function(superClass){function PolygonOptionsBuilder(){return PolygonOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(PolygonOptionsBuilder,superClass),PolygonOptionsBuilder.prototype.buildOpts=function(pathPoints,cachedEval){return PolygonOptionsBuilder.__super__.buildOpts.call(this,{path:pathPoints},cachedEval,{geodesic:!1})},PolygonOptionsBuilder}(ShapeOptionsBuilder)}]).factory("uiGmapRectangleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(ShapeOptionsBuilder){var RectangleOptionsBuilder;return RectangleOptionsBuilder=function(superClass){function RectangleOptionsBuilder(){return RectangleOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(RectangleOptionsBuilder,superClass),RectangleOptionsBuilder.prototype.buildOpts=function(bounds,cachedEval){return RectangleOptionsBuilder.__super__.buildOpts.call(this,{bounds:bounds},cachedEval)},RectangleOptionsBuilder}(ShapeOptionsBuilder)}]).factory("uiGmapCircleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(ShapeOptionsBuilder){var CircleOptionsBuilder;return CircleOptionsBuilder=function(superClass){function CircleOptionsBuilder(){return CircleOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(CircleOptionsBuilder,superClass),CircleOptionsBuilder.prototype.buildOpts=function(center,radius,cachedEval){return CircleOptionsBuilder.__super__.buildOpts.call(this,{center:center,radius:radius},cachedEval)},CircleOptionsBuilder}(ShapeOptionsBuilder)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.options").service("uiGmapMarkerOptions",["uiGmapLogger","uiGmapGmapUtil",function($log,GmapUtil){return _.extend(GmapUtil,{createOptions:function(coords,icon,defaults,map){var opts;return null==defaults&&(defaults={}),opts=angular.extend({},defaults,{position:null!=defaults.position?defaults.position:GmapUtil.getCoords(coords),visible:null!=defaults.visible?defaults.visible:GmapUtil.validateCoords(coords)}),(null!=defaults.icon||null!=icon)&&(opts=angular.extend(opts,{icon:null!=defaults.icon?defaults.icon:icon})),null!=map&&(opts.map=map),opts},isLabel:function(options){return null==options?!1:null!=options.labelContent||null!=options.labelAnchor||null!=options.labelClass||null!=options.labelStyle||null!=options.labelVisible}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapBasePolyChildModel",["uiGmapLogger","$timeout","uiGmaparray-sync","uiGmapGmapUtil","uiGmapEventsHelper",function($log,$timeout,arraySync,GmapUtil,EventsHelper){return function(Builder,gFactory){var BasePolyChildModel;return BasePolyChildModel=function(superClass){function BasePolyChildModel(scope,attrs,map,defaults,model){var create;this.scope=scope,this.attrs=attrs,this.map=map,this.defaults=defaults,this.model=model,this.clean=bind(this.clean,this),this.clonedModel=_.clone(this.model,!0),this.isDragging=!1,this.internalEvents={dragend:function(_this){return function(){return _.defer(function(){return _this.isDragging=!1})}}(this),dragstart:function(_this){return function(){return _this.isDragging=!0}}(this)},create=function(_this){return function(){var maybeCachedEval,pathPoints;if(!_this.isDragging)return pathPoints=_this.convertPathPoints(_this.scope.path),null!=_this.gObject&&_this.clean(),null!=_this.scope.model&&(maybeCachedEval=_this.scope),pathPoints.length>0&&(_this.gObject=gFactory(_this.buildOpts(pathPoints,maybeCachedEval))),_this.gObject?(_this.scope.fit&&_this.extendMapBounds(_this.map,pathPoints),arraySync(_this.gObject.getPath(),_this.scope,"path",function(pathPoints){return _this.scope.fit?_this.extendMapBounds(_this.map,pathPoints):void 0}),angular.isDefined(_this.scope.events)&&angular.isObject(_this.scope.events)&&(_this.listeners=_this.model?EventsHelper.setEvents(_this.gObject,_this.scope,_this.model):EventsHelper.setEvents(_this.gObject,_this.scope,_this.scope)),
_this.internalListeners=_this.model?EventsHelper.setEvents(_this.gObject,{events:_this.internalEvents},_this.model):EventsHelper.setEvents(_this.gObject,{events:_this.internalEvents},_this.scope)):void 0}}(this),create(),this.scope.$watch("path",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)&&_this.gObject?void 0:create()}}(this),!0),!this.scope["static"]&&angular.isDefined(this.scope.editable)&&this.scope.$watch("editable",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue?(newValue=!_this.isFalse(newValue),null!=(ref=_this.gObject)?ref.setEditable(newValue):void 0):void 0}}(this),!0),angular.isDefined(this.scope.draggable)&&this.scope.$watch("draggable",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue?(newValue=!_this.isFalse(newValue),null!=(ref=_this.gObject)?ref.setDraggable(newValue):void 0):void 0}}(this),!0),angular.isDefined(this.scope.visible)&&this.scope.$watch("visible",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&(newValue=!_this.isFalse(newValue)),null!=(ref=_this.gObject)?ref.setVisible(newValue):void 0}}(this),!0),angular.isDefined(this.scope.geodesic)&&this.scope.$watch("geodesic",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue?(newValue=!_this.isFalse(newValue),null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0):void 0}}(this),!0),angular.isDefined(this.scope.stroke)&&angular.isDefined(this.scope.stroke.weight)&&this.scope.$watch("stroke.weight",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),angular.isDefined(this.scope.stroke)&&angular.isDefined(this.scope.stroke.color)&&this.scope.$watch("stroke.color",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),angular.isDefined(this.scope.stroke)&&angular.isDefined(this.scope.stroke.opacity)&&this.scope.$watch("stroke.opacity",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),angular.isDefined(this.scope.icons)&&this.scope.$watch("icons",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),this.scope.$on("$destroy",function(_this){return function(){return _this.clean(),_this.scope=null}}(this)),angular.isDefined(this.scope.fill)&&angular.isDefined(this.scope.fill.color)&&this.scope.$watch("fill.color",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.gObject.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this)),angular.isDefined(this.scope.fill)&&angular.isDefined(this.scope.fill.opacity)&&this.scope.$watch("fill.opacity",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.gObject.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this)),angular.isDefined(this.scope.zIndex)&&this.scope.$watch("zIndex",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.gObject.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this))}return extend(BasePolyChildModel,superClass),BasePolyChildModel.include(GmapUtil),BasePolyChildModel.prototype.clean=function(){var ref;return EventsHelper.removeEvents(this.listeners),EventsHelper.removeEvents(this.internalListeners),null!=(ref=this.gObject)&&ref.setMap(null),this.gObject=null},BasePolyChildModel}(Builder)}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapDrawFreeHandChildModel",["uiGmapLogger","$q",function($log,$q){var drawFreeHand,freeHandMgr;return drawFreeHand=function(map,polys,done){var move,poly;return poly=new google.maps.Polyline({map:map,clickable:!1}),move=google.maps.event.addListener(map,"mousemove",function(e){return poly.getPath().push(e.latLng)}),void google.maps.event.addListenerOnce(map,"mouseup",function(e){var path;return google.maps.event.removeListener(move),path=poly.getPath(),poly.setMap(null),polys.push(new google.maps.Polygon({map:map,path:path})),poly=null,google.maps.event.clearListeners(map.getDiv(),"mousedown"),done()})},freeHandMgr=function(map1,scope){var disableMap,enableMap;return this.map=map1,disableMap=function(_this){return function(){var mapOptions;return mapOptions={draggable:!1,disableDefaultUI:!0,scrollwheel:!1,disableDoubleClickZoom:!1},$log.info("disabling map move"),_this.map.setOptions(mapOptions)}}(this),enableMap=function(_this){return function(){var mapOptions,ref;return mapOptions={draggable:!0,disableDefaultUI:!1,scrollwheel:!0,disableDoubleClickZoom:!0},null!=(ref=_this.deferred)&&ref.resolve(),_.defer(function(){return _this.map.setOptions(_.extend(mapOptions,scope.options))})}}(this),this.engage=function(_this){return function(polys1){return _this.polys=polys1,_this.deferred=$q.defer(),disableMap(),$log.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(_this.map.getDiv(),"mousedown",function(e){return drawFreeHand(_this.map,_this.polys,enableMap)}),_this.deferred.promise}}(this),this}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapMarkerChildModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger","uiGmapEventsHelper","uiGmapPropertyAction","uiGmapMarkerOptions","uiGmapIMarker","uiGmapMarkerManager","uiGmapPromise",function(ModelKey,GmapUtil,$log,EventsHelper,PropertyAction,MarkerOptions,IMarker,MarkerManager,uiGmapPromise){var MarkerChildModel;return MarkerChildModel=function(superClass){function MarkerChildModel(scope,model1,keys,gMap,defaults,doClick,gManager,doDrawSelf,trackModel,needRedraw){var action;this.model=model1,this.keys=keys,this.gMap=gMap,this.defaults=defaults,this.doClick=doClick,this.gManager=gManager,this.doDrawSelf=null!=doDrawSelf?doDrawSelf:!0,this.trackModel=null!=trackModel?trackModel:!0,this.needRedraw=null!=needRedraw?needRedraw:!1,this.internalEvents=bind(this.internalEvents,this),this.setLabelOptions=bind(this.setLabelOptions,this),this.setOptions=bind(this.setOptions,this),this.setIcon=bind(this.setIcon,this),this.setCoords=bind(this.setCoords,this),this.isNotValid=bind(this.isNotValid,this),this.maybeSetScopeValue=bind(this.maybeSetScopeValue,this),this.createMarker=bind(this.createMarker,this),this.setMyScope=bind(this.setMyScope,this),this.updateModel=bind(this.updateModel,this),this.handleModelChanges=bind(this.handleModelChanges,this),this.destroy=bind(this.destroy,this),this.clonedModel=_.extend({},this.model),this.deferred=uiGmapPromise.defer(),_.each(this.keys,function(_this){return function(v,k){var keyValue;return keyValue=_this.keys[k],null!=keyValue&&!_.isFunction(keyValue)&&_.isString(keyValue)?_this[k+"Key"]=keyValue:void 0}}(this)),this.idKey=this.idKeyKey||"id",null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),MarkerChildModel.__super__.constructor.call(this,scope),this.scope.getGMarker=function(_this){return function(){return _this.gObject}}(this),this.firstTime=!0,this.trackModel?(this.scope.model=this.model,this.scope.$watch("model",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.handleModelChanges(newValue,oldValue):void 0}}(this),!0)):(action=new PropertyAction(function(_this){return function(calledKey,newVal){return _this.firstTime?void 0:_this.setMyScope(calledKey,scope)}}(this),!1),_.each(this.keys,function(v,k){return scope.$watch(k,action.sic,!0)})),this.scope.$on("$destroy",function(_this){return function(){return destroy(_this)}}(this)),this.createMarker(this.model),$log.info(this)}var destroy;return extend(MarkerChildModel,superClass),MarkerChildModel.include(GmapUtil),MarkerChildModel.include(EventsHelper),MarkerChildModel.include(MarkerOptions),destroy=function(child){return null!=(null!=child?child.gObject:void 0)&&(child.removeEvents(child.externalListeners),child.removeEvents(child.internalListeners),null!=child?child.gObject:void 0)?(child.removeFromManager&&child.gManager.remove(child.gObject),child.gObject.setMap(null),child.gObject=null):void 0},MarkerChildModel.prototype.destroy=function(removeFromManager){return null==removeFromManager&&(removeFromManager=!0),this.removeFromManager=removeFromManager,this.scope.$destroy()},MarkerChildModel.prototype.handleModelChanges=function(newValue,oldValue){var changes,ctr,len;return changes=this.getChanges(newValue,oldValue,IMarker.keys),this.firstTime?void 0:(ctr=0,len=_.keys(changes).length,_.each(changes,function(_this){return function(v,k){var doDraw;return ctr+=1,doDraw=len===ctr,_this.setMyScope(k,newValue,oldValue,!1,!0,doDraw),_this.needRedraw=!0}}(this)))},MarkerChildModel.prototype.updateModel=function(model){return this.clonedModel=_.extend({},model),this.setMyScope("all",model,this.model)},MarkerChildModel.prototype.renderGMarker=function(doDraw,validCb){var coords;if(null==doDraw&&(doDraw=!0),coords=this.getProp("coords",this.scope,this.model),null!=coords){if(!this.validateCoords(coords))return void $log.debug("MarkerChild does not have coords yet. They may be defined later.");if(null!=validCb&&validCb(),doDraw&&this.gObject)return this.gManager.add(this.gObject)}else if(doDraw&&this.gObject)return this.gManager.remove(this.gObject)},MarkerChildModel.prototype.setMyScope=function(thingThatChanged,model,oldModel,isInit,doDraw){var justCreated;switch(null==oldModel&&(oldModel=void 0),null==isInit&&(isInit=!1),null==doDraw&&(doDraw=!0),null==model?model=this.model:this.model=model,this.gObject||(this.setOptions(this.scope,doDraw),justCreated=!0),thingThatChanged){case"all":return _.each(this.keys,function(_this){return function(v,k){return _this.setMyScope(k,model,oldModel,isInit,doDraw)}}(this));case"icon":return this.maybeSetScopeValue("icon",model,oldModel,this.iconKey,this.evalModelHandle,isInit,this.setIcon,doDraw);case"coords":return this.maybeSetScopeValue("coords",model,oldModel,this.coordsKey,this.evalModelHandle,isInit,this.setCoords,doDraw);case"options":if(!justCreated)return this.createMarker(model,oldModel,isInit,doDraw)}},MarkerChildModel.prototype.createMarker=function(model,oldModel,isInit,doDraw){return null==oldModel&&(oldModel=void 0),null==isInit&&(isInit=!1),null==doDraw&&(doDraw=!0),this.maybeSetScopeValue("options",model,oldModel,this.optionsKey,this.evalModelHandle,isInit,this.setOptions,doDraw),this.firstTime=!1},MarkerChildModel.prototype.maybeSetScopeValue=function(scopePropName,model,oldModel,modelKey,evaluate,isInit,gSetter,doDraw){return null==gSetter&&(gSetter=void 0),null==doDraw&&(doDraw=!0),null!=gSetter?gSetter(this.scope,doDraw):void 0},MarkerChildModel.doDrawSelf&&doDraw&&MarkerChildModel.gManager.draw(),MarkerChildModel.prototype.isNotValid=function(scope,doCheckGmarker){var hasIdenticalScopes,hasNoGmarker;return null==doCheckGmarker&&(doCheckGmarker=!0),hasNoGmarker=doCheckGmarker?void 0===this.gObject:!1,hasIdenticalScopes=this.trackModel?!1:scope.$id!==this.scope.$id,hasIdenticalScopes||hasNoGmarker},MarkerChildModel.prototype.setCoords=function(scope,doDraw){return null==doDraw&&(doDraw=!0),this.isNotValid(scope)||null==this.gObject?void 0:this.renderGMarker(doDraw,function(_this){return function(){var newGValue,newModelVal,oldGValue;return newModelVal=_this.getProp("coords",scope,_this.model),newGValue=_this.getCoords(newModelVal),oldGValue=_this.gObject.getPosition(),null==oldGValue||null==newGValue||newGValue.lng()!==oldGValue.lng()||newGValue.lat()!==oldGValue.lat()?(_this.gObject.setPosition(newGValue),_this.gObject.setVisible(_this.validateCoords(newModelVal))):void 0}}(this))},MarkerChildModel.prototype.setIcon=function(scope,doDraw){return null==doDraw&&(doDraw=!0),this.isNotValid(scope)||null==this.gObject?void 0:this.renderGMarker(doDraw,function(_this){return function(){var coords,newValue,oldValue;return oldValue=_this.gObject.getIcon(),newValue=_this.getProp("icon",scope,_this.model),oldValue!==newValue?(_this.gObject.setIcon(newValue),coords=_this.getProp("coords",scope,_this.model),_this.gObject.setPosition(_this.getCoords(coords)),_this.gObject.setVisible(_this.validateCoords(coords))):void 0}}(this))},MarkerChildModel.prototype.setOptions=function(scope,doDraw){var ref;if(null==doDraw&&(doDraw=!0),!this.isNotValid(scope,!1)){if(this.renderGMarker(doDraw,function(_this){return function(){var _options,coords,icon;return coords=_this.getProp("coords",scope,_this.model),icon=_this.getProp("icon",scope,_this.model),_options=_this.getProp("options",scope,_this.model),_this.opts=_this.createOptions(coords,icon,_options),_this.isLabel(_this.gObject)!==_this.isLabel(_this.opts)&&null!=_this.gObject&&(_this.gManager.remove(_this.gObject),_this.gObject=void 0),null!=_this.gObject&&_this.gObject.setOptions(_this.setLabelOptions(_this.opts)),_this.gObject||(_this.isLabel(_this.opts)?_this.gObject=new MarkerWithLabel(_this.setLabelOptions(_this.opts)):_this.gObject=new google.maps.Marker(_this.opts),_.extend(_this.gObject,{model:_this.model})),_this.externalListeners&&_this.removeEvents(_this.externalListeners),_this.internalListeners&&_this.removeEvents(_this.internalListeners),_this.externalListeners=_this.setEvents(_this.gObject,_this.scope,_this.model,["dragend"]),_this.internalListeners=_this.setEvents(_this.gObject,{events:_this.internalEvents(),$evalAsync:function(){}},_this.model),null!=_this.id?_this.gObject.key=_this.id:void 0}}(this)),this.gObject&&(this.gObject.getMap()||this.gManager.type!==MarkerManager.type))this.deferred.resolve(this.gObject);else{if(!this.gObject)return this.deferred.reject("gObject is null");(null!=(ref=this.gObject)?ref.getMap():0)&&this.gManager.type===MarkerManager.type||($log.debug("gObject has no map yet"),this.deferred.resolve(this.gObject))}return this.model[this.fitKey]?this.gManager.fit():void 0}},MarkerChildModel.prototype.setLabelOptions=function(opts){return opts.labelAnchor&&(opts.labelAnchor=this.getLabelPositionPoint(opts.labelAnchor)),opts},MarkerChildModel.prototype.internalEvents=function(){return{dragend:function(_this){return function(marker,eventName,model,mousearg){var events,modelToSet,newCoords;return modelToSet=_this.trackModel?_this.scope.model:_this.model,newCoords=_this.setCoordsFromEvent(_this.modelOrKey(modelToSet,_this.coordsKey),_this.gObject.getPosition()),modelToSet=_this.setVal(model,_this.coordsKey,newCoords),events=_this.scope.events,null!=(null!=events?events.dragend:void 0)&&events.dragend(marker,eventName,modelToSet,mousearg),_this.scope.$apply()}}(this),click:function(_this){return function(marker,eventName,model,mousearg){var click;return click=_this.getProp("click",_this.scope,_this.model),_this.doClick&&null!=click?_this.scope.$evalAsync(click(marker,eventName,_this.model,mousearg)):void 0}}(this)}},MarkerChildModel}(ModelKey)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygonChildModel",["uiGmapBasePolyChildModel","uiGmapPolygonOptionsBuilder",function(BaseGen,Builder){var PolygonChildModel,base,gFactory;return gFactory=function(opts){return new google.maps.Polygon(opts)},base=new BaseGen(Builder,gFactory),PolygonChildModel=function(superClass){function PolygonChildModel(){return PolygonChildModel.__super__.constructor.apply(this,arguments)}return extend(PolygonChildModel,superClass),PolygonChildModel}(base)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylineChildModel",["uiGmapBasePolyChildModel","uiGmapPolylineOptionsBuilder",function(BaseGen,Builder){var PolylineChildModel,base,gFactory;return gFactory=function(opts){return new google.maps.Polyline(opts)},base=BaseGen(Builder,gFactory),PolylineChildModel=function(superClass){function PolylineChildModel(){return PolylineChildModel.__super__.constructor.apply(this,arguments)}return extend(PolylineChildModel,superClass),PolylineChildModel}(base)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapWindowChildModel",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapLogger","$compile","$http","$templateCache","uiGmapChromeFixes","uiGmapEventsHelper",function(BaseObject,GmapUtil,$log,$compile,$http,$templateCache,ChromeFixes,EventsHelper){var WindowChildModel;return WindowChildModel=function(superClass){function WindowChildModel(model1,scope1,opts,isIconVisibleOnClick,mapCtrl,markerScope,element,needToManualDestroy,markerIsVisibleAfterWindowClose){var maybeMarker;this.model=model1,this.scope=scope1,this.opts=opts,this.isIconVisibleOnClick=isIconVisibleOnClick,this.mapCtrl=mapCtrl,this.markerScope=markerScope,this.element=element,this.needToManualDestroy=null!=needToManualDestroy?needToManualDestroy:!1,this.markerIsVisibleAfterWindowClose=null!=markerIsVisibleAfterWindowClose?markerIsVisibleAfterWindowClose:!0,this.updateModel=bind(this.updateModel,this),this.destroy=bind(this.destroy,this),this.remove=bind(this.remove,this),this.getLatestPosition=bind(this.getLatestPosition,this),this.hideWindow=bind(this.hideWindow,this),this.showWindow=bind(this.showWindow,this),this.handleClick=bind(this.handleClick,this),this.watchOptions=bind(this.watchOptions,this),this.watchCoords=bind(this.watchCoords,this),this.createGWin=bind(this.createGWin,this),this.watchElement=bind(this.watchElement,this),this.watchAndDoShow=bind(this.watchAndDoShow,this),this.doShow=bind(this.doShow,this),this.clonedModel=_.clone(this.model,!0),this.getGmarker=function(){var ref,ref1;return null!=(null!=(ref=this.markerScope)?ref.getGMarker:void 0)&&null!=(ref1=this.markerScope)?ref1.getGMarker():void 0},this.listeners=[],this.createGWin(),maybeMarker=this.getGmarker(),null!=maybeMarker&&maybeMarker.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchCoords(),this.watchAndDoShow(),this.scope.$on("$destroy",function(_this){return function(){return _this.destroy()}}(this)),$log.info(this)}return extend(WindowChildModel,superClass),WindowChildModel.include(GmapUtil),WindowChildModel.include(EventsHelper),WindowChildModel.prototype.doShow=function(wasOpen){return this.scope.show===!0||wasOpen?this.showWindow():this.hideWindow()},WindowChildModel.prototype.watchAndDoShow=function(){return null!=this.model.show&&(this.scope.show=this.model.show),this.scope.$watch("show",this.doShow,!0),this.doShow()},WindowChildModel.prototype.watchElement=function(){return this.scope.$watch(function(_this){return function(){var ref,wasOpen;if(_this.element||_this.html)return _this.html!==_this.element.html()&&_this.gObject?(null!=(ref=_this.opts)&&(ref.content=void 0),wasOpen=_this.gObject.isOpen(),_this.remove(),_this.createGWin(wasOpen)):void 0}}(this))},WindowChildModel.prototype.createGWin=function(isOpen){var _opts,defaults,maybeMarker,ref,ref1;return null==isOpen&&(isOpen=!1),maybeMarker=this.getGmarker(),defaults={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),defaults=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),_opts=this.scope.options?this.scope.options:defaults,this.opts=this.createWindowOptions(maybeMarker,this.markerScope||this.scope,this.html,_opts),null!=this.opts?(this.gObject||(this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?this.gObject=new window.InfoBox(this.opts):this.gObject=new google.maps.InfoWindow(this.opts),this.listeners.push(google.maps.event.addListener(this.gObject,"domready",function(){return ChromeFixes.maybeRepaint(this.content)})),this.listeners.push(google.maps.event.addListener(this.gObject,"closeclick",function(_this){return function(){return maybeMarker&&(maybeMarker.setAnimation(_this.oldMarkerAnimation),_this.markerIsVisibleAfterWindowClose&&_.delay(function(){return maybeMarker.setVisible(!1),maybeMarker.setVisible(_this.markerIsVisibleAfterWindowClose)},250)),_this.gObject.close(),_this.model.show=!1,null!=_this.scope.closeClick?_this.scope.$evalAsync(_this.scope.closeClick()):_this.scope.$evalAsync()}}(this)))),this.gObject.setContent(this.opts.content),this.handleClick((null!=(ref=this.scope)&&null!=(ref1=ref.options)?ref1.forceClick:void 0)||isOpen),this.doShow(this.gObject.isOpen())):void 0},WindowChildModel.prototype.watchCoords=function(){var scope;return scope=null!=this.markerScope?this.markerScope:this.scope,scope.$watch("coords",function(_this){return function(newValue,oldValue){var pos;if(newValue!==oldValue){if(null==newValue)_this.hideWindow();else if(!_this.validateCoords(newValue))return void $log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(_this.model));if(pos=_this.getCoords(newValue),_this.doShow(),_this.gObject.setPosition(pos),_this.opts)return _this.opts.position=pos}}}(this),!0)},WindowChildModel.prototype.watchOptions=function(){return this.scope.$watch("options",function(_this){return function(newValue,oldValue){if(newValue!==oldValue&&(_this.opts=newValue,null!=_this.gObject)){if(_this.gObject.setOptions(_this.opts),null!=_this.opts.visible&&_this.opts.visible)return _this.showWindow();if(null!=_this.opts.visible)return _this.hideWindow()}}}(this),!0)},WindowChildModel.prototype.handleClick=function(forceClick){var click,maybeMarker;if(null!=this.gObject)return maybeMarker=this.getGmarker(),click=function(_this){return function(){return null==_this.gObject&&_this.createGWin(),_this.showWindow(),null!=maybeMarker?(_this.initialMarkerVisibility=maybeMarker.getVisible(),_this.oldMarkerAnimation=maybeMarker.getAnimation(),maybeMarker.setVisible(_this.isIconVisibleOnClick)):void 0}}(this),forceClick&&click(),maybeMarker?this.listeners=this.listeners.concat(this.setEvents(maybeMarker,{events:{click:click}},this.model)):void 0},WindowChildModel.prototype.showWindow=function(){var compiled,show,templateScope;return null!=this.gObject?(show=function(_this){return function(){var isOpen,maybeMarker,pos;if(!_this.gObject.isOpen()){if(maybeMarker=_this.getGmarker(),null!=_this.gObject&&null!=_this.gObject.getPosition&&(pos=_this.gObject.getPosition()),maybeMarker&&(pos=maybeMarker.getPosition()),!pos)return;if(_this.gObject.open(_this.mapCtrl,maybeMarker),isOpen=_this.gObject.isOpen(),_this.model.show!==isOpen)return _this.model.show=isOpen}}}(this),this.scope.templateUrl?$http.get(this.scope.templateUrl,{cache:$templateCache}).then(function(_this){return function(content){var compiled,templateScope;return templateScope=_this.scope.$new(),angular.isDefined(_this.scope.templateParameter)&&(templateScope.parameter=_this.scope.templateParameter),compiled=$compile(content.data)(templateScope),_this.gObject.setContent(compiled[0]),show()}}(this)):this.scope.template?(templateScope=this.scope.$new(),angular.isDefined(this.scope.templateParameter)&&(templateScope.parameter=this.scope.templateParameter),compiled=$compile(this.scope.template)(templateScope),this.gObject.setContent(compiled[0]),show()):show()):void 0},WindowChildModel.prototype.hideWindow=function(){return null!=this.gObject&&this.gObject.isOpen()?this.gObject.close():void 0},WindowChildModel.prototype.getLatestPosition=function(overridePos){var maybeMarker;return maybeMarker=this.getGmarker(),null==this.gObject||null==maybeMarker||overridePos?overridePos?this.gObject.setPosition(overridePos):void 0:this.gObject.setPosition(maybeMarker.getPosition())},WindowChildModel.prototype.remove=function(){return this.hideWindow(),this.removeEvents(this.listeners),this.listeners.length=0,delete this.gObject,delete this.opts},WindowChildModel.prototype.destroy=function(manualOverride){var ref;return null==manualOverride&&(manualOverride=!1),this.remove(),null==this.scope||(null!=(ref=this.scope)?ref.$$destroyed:void 0)||!this.needToManualDestroy&&!manualOverride?void 0:this.scope.$destroy()},WindowChildModel.prototype.updateModel=function(model){return this.clonedModel=_.extend({},model),_.extend(this.model,this.clonedModel)},WindowChildModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapBasePolysParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmap_async","uiGmapPromise",function($timeout,$log,ModelKey,ModelsWatcher,PropMap,_async,uiGmapPromise){return function(IPoly,PolyChildModel,gObjectName){var BasePolysParentModel;return BasePolysParentModel=function(superClass){function BasePolysParentModel(scope,element,attrs,gMap1,defaults){this.element=element,this.attrs=attrs,this.gMap=gMap1,this.defaults=defaults,this.createChild=bind(this.createChild,this),this.pieceMeal=bind(this.pieceMeal,this),this.createAllNew=bind(this.createAllNew,this),this.watchIdKey=bind(this.watchIdKey,this),this.createChildScopes=bind(this.createChildScopes,this),this.watchDestroy=bind(this.watchDestroy,this),this.onDestroy=bind(this.onDestroy,this),this.rebuildAll=bind(this.rebuildAll,this),this.doINeedToWipe=bind(this.doINeedToWipe,this),this.watchModels=bind(this.watchModels,this),BasePolysParentModel.__super__.constructor.call(this,scope),this["interface"]=IPoly,this.$log=$log,this.plurals=new PropMap,_.each(IPoly.scopeKeys,function(_this){return function(name){return _this[name+"Key"]=void 0}}(this)),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.createChildScopes()}return extend(BasePolysParentModel,superClass),BasePolysParentModel.include(ModelsWatcher),BasePolysParentModel.prototype.watchModels=function(scope){return scope.$watchCollection("models",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.doINeedToWipe(newValue)||scope.doRebuildAll?_this.rebuildAll(scope,!0,!0):_this.createChildScopes(!1):void 0}}(this))},BasePolysParentModel.prototype.doINeedToWipe=function(newValue){var newValueIsEmpty;return newValueIsEmpty=null!=newValue?0===newValue.length:!0,this.plurals.length>0&&newValueIsEmpty},BasePolysParentModel.prototype.rebuildAll=function(scope,doCreate,doDelete){return this.onDestroy(doDelete).then(function(_this){return function(){return doCreate?_this.createChildScopes():void 0}}(this))},BasePolysParentModel.prototype.onDestroy=function(scope){return BasePolysParentModel.__super__.onDestroy.call(this,this.scope),_async.promiseLock(this,uiGmapPromise.promiseTypes["delete"],void 0,void 0,function(_this){return function(){return _async.each(_this.plurals.values(),function(child){return child.destroy(!0)},_async.chunkSizeFrom(_this.scope.cleanchunk,!1)).then(function(){var ref;return null!=(ref=_this.plurals)?ref.removeAll():void 0})}}(this))},BasePolysParentModel.prototype.watchDestroy=function(scope){return scope.$on("$destroy",function(_this){return function(){return _this.rebuildAll(scope,!1,!0)}}(this))},BasePolysParentModel.prototype.createChildScopes=function(isCreatingFromScratch){return null==isCreatingFromScratch&&(isCreatingFromScratch=!0),angular.isUndefined(this.scope.models)?void this.$log.error("No models to create "+gObjectName+"s from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),isCreatingFromScratch?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},BasePolysParentModel.prototype.watchIdKey=function(scope){return this.setIdKey(scope),scope.$watch("idKey",function(_this){return function(newValue,oldValue){return newValue!==oldValue&&null==newValue?(_this.idKey=newValue,_this.rebuildAll(scope,!0,!0)):void 0}}(this))},BasePolysParentModel.prototype.createAllNew=function(scope,isArray){var maybeCanceled;return null==isArray&&(isArray=!1),this.models=scope.models,this.firstTime&&(this.watchModels(scope),this.watchDestroy(scope)),this.didQueueInitPromise(this,scope)?void 0:(maybeCanceled=null,_async.promiseLock(this,uiGmapPromise.promiseTypes.create,"createAllNew",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return _async.each(scope.models,function(model){var child;return child=_this.createChild(model,_this.gMap),maybeCanceled&&($log.debug("createNew should fall through safely"),child.isEnabled=!1),maybeCanceled},_async.chunkSizeFrom(scope.chunk)).then(function(){return _this.firstTime=!1})}}(this)))},BasePolysParentModel.prototype.pieceMeal=function(scope,isArray){var maybeCanceled,payload;return null==isArray&&(isArray=!0),scope.$$destroyed?void 0:(maybeCanceled=null,payload=null,this.models=scope.models,null!=scope&&this.modelsLength()&&this.plurals.length?_async.promiseLock(this,uiGmapPromise.promiseTypes.update,"pieceMeal",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return uiGmapPromise.promise(function(){return _this.figureOutState(_this.idKey,scope,_this.plurals,_this.modelKeyComparison)}).then(function(state){return payload=state,payload.updates.length&&$log.info("polygons updates: "+payload.updates.length+" will be missed"),_async.each(payload.removals,function(child){return null!=child?(child.destroy(),_this.plurals.remove(child.model[_this.idKey]),maybeCanceled):void 0},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.adds,function(modelToAdd){return maybeCanceled&&$log.debug("pieceMeal should fall through safely"),_this.createChild(modelToAdd,_this.gMap),maybeCanceled},_async.chunkSizeFrom(scope.chunk))})}}(this)):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0)))},BasePolysParentModel.prototype.createChild=function(model,gMap){var child,childScope;return childScope=this.scope.$new(!1),this.setChildScope(IPoly.scopeKeys,childScope,model),childScope.$watch("model",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.setChildScope(childScope,newValue):void 0}}(this),!0),childScope["static"]=this.scope["static"],child=new PolyChildModel(childScope,this.attrs,gMap,this.defaults,model),null==model[this.idKey]?void this.$log.error(gObjectName+" model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key."):(this.plurals.put(model[this.idKey],child),
child)},BasePolysParentModel}(ModelKey)}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapCircleParentModel",["uiGmapLogger","$timeout","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapCircleOptionsBuilder",function($log,$timeout,GmapUtil,EventsHelper,Builder){var CircleParentModel;return CircleParentModel=function(superClass){function CircleParentModel(scope,element,attrs,map,DEFAULTS){var clean,gObject,lastRadius;this.attrs=attrs,this.map=map,this.DEFAULTS=DEFAULTS,this.scope=scope,lastRadius=null,clean=function(_this){return function(){return lastRadius=null,null!=_this.listeners?(_this.removeEvents(_this.listeners),_this.listeners=void 0):void 0}}(this),gObject=new google.maps.Circle(this.buildOpts(GmapUtil.getCoords(scope.center),scope.radius)),this.setMyOptions=function(_this){return function(newVals,oldVals){return _.isEqual(newVals,oldVals)?void 0:gObject.setOptions(_this.buildOpts(GmapUtil.getCoords(scope.center),scope.radius))}}(this),this.props=this.props.concat([{prop:"center",isColl:!0},{prop:"fill",isColl:!0},"radius","zIndex"]),this.watchProps(),null!=this.scope.control&&(this.scope.control.getCircle=function(){return gObject}),clean(),this.listeners=this.setEvents(gObject,scope,scope,["radius_changed"]),null!=this.listeners&&this.listeners.push(google.maps.event.addListener(gObject,"radius_changed",function(){var newRadius,work;return newRadius=gObject.getRadius(),newRadius!==lastRadius?(lastRadius=newRadius,work=function(){var ref,ref1;return newRadius!==scope.radius&&(scope.radius=newRadius),(null!=(ref=scope.events)?ref.radius_changed:void 0)&&_.isFunction(null!=(ref1=scope.events)?ref1.radius_changed:void 0)?scope.events.radius_changed(gObject,"radius_changed",scope,arguments):void 0},angular.mock?work():scope.$evalAsync(function(){return work()})):void 0})),null!=this.listeners&&this.listeners.push(google.maps.event.addListener(gObject,"center_changed",function(){return scope.$evalAsync(function(){return angular.isDefined(scope.center.type)?(scope.center.coordinates[1]=gObject.getCenter().lat(),scope.center.coordinates[0]=gObject.getCenter().lng()):(scope.center.latitude=gObject.getCenter().lat(),scope.center.longitude=gObject.getCenter().lng())})})),scope.$on("$destroy",function(_this){return function(){return clean(),gObject.setMap(null)}}(this)),$log.info(this)}return extend(CircleParentModel,superClass),CircleParentModel.include(GmapUtil),CircleParentModel.include(EventsHelper),CircleParentModel}(Builder)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapDrawingManagerParentModel",["uiGmapLogger","$timeout","uiGmapBaseObject","uiGmapEventsHelper",function($log,$timeout,BaseObject,EventsHelper){var DrawingManagerParentModel;return DrawingManagerParentModel=function(superClass){function DrawingManagerParentModel(scope,element,attrs,map){var gObject,listeners;this.scope=scope,this.attrs=attrs,this.map=map,gObject=new google.maps.drawing.DrawingManager(this.scope.options),gObject.setMap(this.map),listeners=void 0,null!=this.scope.control&&(this.scope.control.getDrawingManager=function(){return gObject}),!this.scope["static"]&&this.scope.options&&this.scope.$watch("options",function(newValue){return null!=gObject?gObject.setOptions(newValue):void 0},!0),null!=this.scope.events&&(listeners=this.setEvents(gObject,this.scope,this.scope),this.scope.$watch("events",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:(null!=listeners&&_this.removeEvents(listeners),listeners=_this.setEvents(gObject,_this.scope,_this.scope))}}(this))),this.scope.$on("$destroy",function(_this){return function(){return null!=listeners&&_this.removeEvents(listeners),gObject.setMap(null),gObject=null}}(this))}return extend(DrawingManagerParentModel,superClass),DrawingManagerParentModel.include(EventsHelper),DrawingManagerParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIMarkerParentModel",["uiGmapModelKey","uiGmapLogger",function(ModelKey,Logger){var IMarkerParentModel;return IMarkerParentModel=function(superClass){function IMarkerParentModel(scope1,element,attrs,map){if(this.scope=scope1,this.element=element,this.attrs=attrs,this.map=map,this.onWatch=bind(this.onWatch,this),this.watch=bind(this.watch,this),this.validateScope=bind(this.validateScope,this),IMarkerParentModel.__super__.constructor.call(this,this.scope),this.$log=Logger,!this.validateScope(this.scope))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=angular.isDefined(this.attrs.click),null!=this.scope.options&&(this.DEFAULTS=this.scope.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),this.scope.$on("$destroy",function(_this){return function(){return _this.onDestroy(_this.scope)}}(this))}return extend(IMarkerParentModel,superClass),IMarkerParentModel.prototype.DEFAULTS={},IMarkerParentModel.prototype.validateScope=function(scope){var ret;return null==scope?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(ret=null!=scope.coords,ret?ret:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},IMarkerParentModel.prototype.watch=function(propNameToWatch,scope,equalityCheck){return null==equalityCheck&&(equalityCheck=!0),scope.$watch(propNameToWatch,function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:_this.onWatch(propNameToWatch,scope,newValue,oldValue)}}(this),equalityCheck)},IMarkerParentModel.prototype.onWatch=function(propNameToWatch,scope,newValue,oldValue){},IMarkerParentModel}(ModelKey)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIWindowParentModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger",function(ModelKey,GmapUtil,Logger){var IWindowParentModel;return IWindowParentModel=function(superClass){function IWindowParentModel(scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache){IWindowParentModel.__super__.constructor.call(this,scope),this.$log=Logger,this.$timeout=$timeout,this.$compile=$compile,this.$http=$http,this.$templateCache=$templateCache,this.DEFAULTS={},null!=scope.options&&(this.DEFAULTS=scope.options)}return extend(IWindowParentModel,superClass),IWindowParentModel.include(GmapUtil),IWindowParentModel.prototype.getItem=function(scope,modelsPropToIterate,index){return"models"===modelsPropToIterate?scope[modelsPropToIterate][index]:scope[modelsPropToIterate].get(index)},IWindowParentModel}(ModelKey)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapLayerParentModel",["uiGmapBaseObject","uiGmapLogger","$timeout",function(BaseObject,Logger,$timeout){var LayerParentModel;return LayerParentModel=function(superClass){function LayerParentModel(scope,element,attrs,gMap,onLayerCreated,$log){return this.scope=scope,this.element=element,this.attrs=attrs,this.gMap=gMap,this.onLayerCreated=null!=onLayerCreated?onLayerCreated:void 0,this.$log=null!=$log?$log:Logger,this.createGoogleLayer=bind(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.doShow=!0,angular.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.gObject.setMap(this.gMap),this.scope.$watch("show",function(_this){return function(newValue,oldValue){return newValue!==oldValue?(_this.doShow=newValue,newValue?_this.gObject.setMap(_this.gMap):_this.gObject.setMap(null)):void 0}}(this),!0),this.scope.$watch("options",function(_this){return function(newValue,oldValue){return newValue!==oldValue?(_this.gObject.setMap(null),_this.gObject=null,_this.createGoogleLayer()):void 0}}(this),!0),void this.scope.$on("$destroy",function(_this){return function(){return _this.gObject.setMap(null)}}(this)))}return extend(LayerParentModel,superClass),LayerParentModel.prototype.createGoogleLayer=function(){var base;return null==this.attrs.options?this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.gObject&&null!=this.onLayerCreated&&"function"==typeof(base=this.onLayerCreated(this.scope,this.gObject))?base(this.gObject):void 0},LayerParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypeParentModel",["uiGmapBaseObject","uiGmapLogger",function(BaseObject,Logger){var MapTypeParentModel;return MapTypeParentModel=function(superClass){function MapTypeParentModel(scope,element,attrs,gMap,$log){return this.scope=scope,this.element=element,this.attrs=attrs,this.gMap=gMap,this.$log=null!=$log?$log:Logger,this.hideOverlay=bind(this.hideOverlay,this),this.showOverlay=bind(this.showOverlay,this),this.refreshMapType=bind(this.refreshMapType,this),this.createMapType=bind(this.createMapType,this),null==this.attrs.options?void this.$log.info("options attribute for the map-type directive is mandatory. Map type creation aborted!!"):(this.id=this.gMap.overlayMapTypesCount=this.gMap.overlayMapTypesCount+1||0,this.doShow=!0,this.createMapType(),angular.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.showOverlay(),this.scope.$watch("show",function(_this){return function(newValue,oldValue){return newValue!==oldValue?(_this.doShow=newValue,newValue?_this.showOverlay():_this.hideOverlay()):void 0}}(this),!0),this.scope.$watch("options",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:_this.refreshMapType()}}(this),!0),angular.isDefined(this.attrs.refresh)&&this.scope.$watch("refresh",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:_this.refreshMapType()}}(this),!0),void this.scope.$on("$destroy",function(_this){return function(){return _this.hideOverlay(),_this.mapType=null}}(this)))}return extend(MapTypeParentModel,superClass),MapTypeParentModel.prototype.createMapType=function(){if(null!=this.scope.options.getTile)this.mapType=this.scope.options;else{if(null==this.scope.options.getTileUrl)return void this.$log.info("options should provide either getTile or getTileUrl methods. Map type creation aborted!!");this.mapType=new google.maps.ImageMapType(this.scope.options)}return this.attrs.id&&this.scope.id&&(this.gMap.mapTypes.set(this.scope.id,this.mapType),angular.isDefined(this.attrs.show)||(this.doShow=!1)),this.mapType.layerId=this.id},MapTypeParentModel.prototype.refreshMapType=function(){return this.hideOverlay(),this.mapType=null,this.createMapType(),this.doShow&&null!=this.gMap?this.showOverlay():void 0},MapTypeParentModel.prototype.showOverlay=function(){return this.gMap.overlayMapTypes.push(this.mapType)},MapTypeParentModel.prototype.hideOverlay=function(){var found;return found=!1,this.gMap.overlayMapTypes.forEach(function(_this){return function(mapType,index){found||mapType.layerId!==_this.id||(found=!0,_this.gMap.overlayMapTypes.removeAt(index))}}(this))},MapTypeParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMarkersParentModel",["uiGmapIMarkerParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapMarkerChildModel","uiGmap_async","uiGmapClustererMarkerManager","uiGmapMarkerManager","$timeout","uiGmapIMarker","uiGmapPromise","uiGmapGmapUtil","uiGmapLogger",function(IMarkerParentModel,ModelsWatcher,PropMap,MarkerChildModel,_async,ClustererMarkerManager,MarkerManager,$timeout,IMarker,uiGmapPromise,GmapUtil,$log){var MarkersParentModel,_setPlurals;return _setPlurals=function(val,objToSet){return objToSet.plurals=new PropMap,objToSet.scope.plurals=objToSet.plurals,objToSet},MarkersParentModel=function(superClass){function MarkersParentModel(scope,element,attrs,map){this.onDestroy=bind(this.onDestroy,this),this.newChildMarker=bind(this.newChildMarker,this),this.pieceMeal=bind(this.pieceMeal,this),this.rebuildAll=bind(this.rebuildAll,this),this.createAllNew=bind(this.createAllNew,this),this.createChildScopes=bind(this.createChildScopes,this),this.validateScope=bind(this.validateScope,this),this.onWatch=bind(this.onWatch,this);var self;MarkersParentModel.__super__.constructor.call(this,scope,element,attrs,map),this["interface"]=IMarker,self=this,_setPlurals(new PropMap,this),this.scope.pluralsUpdate={updateCtr:0},this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,this.setIdKey(this.scope),this.scope.$watch("doRebuildAll",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.doRebuildAll=newValue:void 0}}(this)),this.modelsLength()||(this.modelsRendered=!1),this.scope.$watch("models",function(_this){return function(newValue,oldValue){if(!_.isEqual(newValue,oldValue)||!_this.modelsRendered){if(0===newValue.length&&0===oldValue.length)return;return _this.modelsRendered=!0,_this.onWatch("models",_this.scope,newValue,oldValue)}}}(this),!this.isTrue(attrs.modelsbyref)),this.watch("doCluster",this.scope),this.watch("clusterOptions",this.scope),this.watch("clusterEvents",this.scope),this.watch("fit",this.scope),this.watch("idKey",this.scope),this.gManager=void 0,this.createAllNew(this.scope)}return extend(MarkersParentModel,superClass),MarkersParentModel.include(GmapUtil),MarkersParentModel.include(ModelsWatcher),MarkersParentModel.prototype.onWatch=function(propNameToWatch,scope,newValue,oldValue){return"idKey"===propNameToWatch&&newValue!==oldValue&&(this.idKey=newValue),this.doRebuildAll||"doCluster"===propNameToWatch?this.rebuildAll(scope):this.pieceMeal(scope)},MarkersParentModel.prototype.validateScope=function(scope){var modelsNotDefined;return modelsNotDefined=angular.isUndefined(scope.models)||void 0===scope.models,modelsNotDefined&&this.$log.error(this.constructor.name+": no valid models attribute found"),MarkersParentModel.__super__.validateScope.call(this,scope)||modelsNotDefined},MarkersParentModel.prototype.createChildScopes=function(isCreatingFromScratch){return null!=this.gMap&&null!=this.scope.models?isCreatingFromScratch?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1):void 0},MarkersParentModel.prototype.createAllNew=function(scope){var maybeCanceled,ref,ref1,ref2,self;return null!=this.gManager&&(this.gManager.clear(),delete this.gManager),scope.doCluster?(scope.clusterEvents&&(self=this,this.origClusterEvents?angular.extend(scope.clusterEvents,this.origClusterEvents):this.origClusterEvents={click:null!=(ref=scope.clusterEvents)?ref.click:void 0,mouseout:null!=(ref1=scope.clusterEvents)?ref1.mouseout:void 0,mouseover:null!=(ref2=scope.clusterEvents)?ref2.mouseover:void 0},angular.extend(scope.clusterEvents,{click:function(cluster){return self.maybeExecMappedEvent(cluster,"click")},mouseout:function(cluster){return self.maybeExecMappedEvent(cluster,"mouseout")},mouseover:function(cluster){return self.maybeExecMappedEvent(cluster,"mouseover")}})),this.gManager=new ClustererMarkerManager(this.map,void 0,scope.clusterOptions,scope.clusterEvents)):this.gManager=new MarkerManager(this.map),this.didQueueInitPromise(this,scope)?void 0:(maybeCanceled=null,_async.promiseLock(this,uiGmapPromise.promiseTypes.create,"createAllNew",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return _async.each(scope.models,function(model){return _this.newChildMarker(model,scope),maybeCanceled},_async.chunkSizeFrom(scope.chunk)).then(function(){return _this.modelsRendered=!0,scope.fit&&_this.gManager.fit(),_this.gManager.draw(),_this.scope.pluralsUpdate.updateCtr+=1},_async.chunkSizeFrom(scope.chunk))}}(this)))},MarkersParentModel.prototype.rebuildAll=function(scope){var ref;if(scope.doRebuild||void 0===scope.doRebuild)return(null!=(ref=this.scope.plurals)?ref.length:void 0)?this.onDestroy(scope).then(function(_this){return function(){return _this.createAllNew(scope)}}(this)):this.createAllNew(scope)},MarkersParentModel.prototype.pieceMeal=function(scope){var maybeCanceled,payload;if(!scope.$$destroyed)return maybeCanceled=null,payload=null,this.modelsLength()&&this.scope.plurals.length?_async.promiseLock(this,uiGmapPromise.promiseTypes.update,"pieceMeal",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return uiGmapPromise.promise(function(){return _this.figureOutState(_this.idKey,scope,_this.scope.plurals,_this.modelKeyComparison)}).then(function(state){return payload=state,_async.each(payload.removals,function(child){return null!=child?(null!=child.destroy&&child.destroy(),_this.scope.plurals.remove(child.id),maybeCanceled):void 0},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.adds,function(modelToAdd){return _this.newChildMarker(modelToAdd,scope),maybeCanceled},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.updates,function(update){return _this.updateChild(update.child,update.model),maybeCanceled},_async.chunkSizeFrom(scope.chunk))}).then(function(){return(payload.adds.length>0||payload.removals.length>0||payload.updates.length>0)&&(scope.plurals=_this.scope.plurals,scope.fit&&_this.gManager.fit(),_this.gManager.draw()),_this.scope.pluralsUpdate.updateCtr+=1})}}(this)):(this.inProgress=!1,this.rebuildAll(scope))},MarkersParentModel.prototype.newChildMarker=function(model,scope){var child,childScope,doDrawSelf,keys;return null==model[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",child,"markers",this.scope.markerModels),childScope=scope.$new(!1),childScope.events=scope.events,keys={},IMarker.scopeKeys.forEach(function(k){return keys[k]=scope[k]}),child=new MarkerChildModel(childScope,model,keys,this.map,this.DEFAULTS,this.doClick,this.gManager,doDrawSelf=!1),this.scope.plurals.put(model[this.idKey],child),child)},MarkersParentModel.prototype.onDestroy=function(scope){return MarkersParentModel.__super__.onDestroy.call(this,scope),_async.promiseLock(this,uiGmapPromise.promiseTypes["delete"],void 0,void 0,function(_this){return function(){return _async.each(_this.scope.plurals.values(),function(model){return null!=model?model.destroy(!1):void 0},_async.chunkSizeFrom(_this.scope.cleanchunk,!1)).then(function(){return null!=_this.gManager&&_this.gManager.clear(),_this.plurals.removeAll(),_this.plurals!==_this.scope.plurals&&console.error("plurals out of sync for MarkersParentModel"),_this.scope.pluralsUpdate.updateCtr+=1})}}(this))},MarkersParentModel.prototype.maybeExecMappedEvent=function(cluster,fnName){var pair,ref;return _.isFunction(null!=(ref=this.scope.clusterEvents)?ref[fnName]:void 0)&&(pair=this.mapClusterToPlurals(cluster),this.origClusterEvents[fnName])?this.origClusterEvents[fnName](pair.cluster,pair.mapped):void 0},MarkersParentModel.prototype.mapClusterToPlurals=function(cluster){var mapped;return mapped=cluster.getMarkers().map(function(_this){return function(g){return _this.scope.plurals.get(g.key).model}}(this)),{cluster:cluster,mapped:mapped}},MarkersParentModel.prototype.getItem=function(scope,modelsPropToIterate,index){return"models"===modelsPropToIterate?scope[modelsPropToIterate][index]:scope[modelsPropToIterate].get(index)},MarkersParentModel}(IMarkerParentModel)}])}.call(this),function(){["Polygon","Polyline"].forEach(function(name){return angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmap"+name+"sParentModel",["uiGmapBasePolysParentModel","uiGmap"+name+"ChildModel","uiGmapI"+name,function(BasePolysParentModel,ChildModel,IPoly){return BasePolysParentModel(IPoly,ChildModel,name)}])})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapRectangleParentModel",["uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapRectangleOptionsBuilder",function($log,GmapUtil,EventsHelper,Builder){var RectangleParentModel;return RectangleParentModel=function(superClass){function RectangleParentModel(scope,element,attrs,map,DEFAULTS){var bounds,clear,createBounds,dragging,fit,gObject,init,listeners,myListeners,settingBoundsFromScope,updateBounds;this.scope=scope,this.attrs=attrs,this.map=map,this.DEFAULTS=DEFAULTS,bounds=void 0,dragging=!1,myListeners=[],listeners=void 0,fit=function(_this){return function(){return _this.isTrue(_this.attrs.fit)?_this.fitMapBounds(_this.map,bounds):void 0}}(this),createBounds=function(_this){return function(){var ref,ref1,ref2;return null!=_this.scope.bounds&&null!=(null!=(ref=_this.scope.bounds)?ref.sw:void 0)&&null!=(null!=(ref1=_this.scope.bounds)?ref1.ne:void 0)&&_this.validateBoundPoints(_this.scope.bounds)?(bounds=_this.convertBoundPoints(_this.scope.bounds),$log.info("new new bounds created: "+JSON.stringify(bounds))):null!=_this.scope.bounds.getNorthEast&&null!=_this.scope.bounds.getSouthWest?bounds=_this.scope.bounds:null!=_this.scope.bounds?$log.error("Invalid bounds for newValue: "+JSON.stringify(null!=(ref2=_this.scope)?ref2.bounds:void 0)):void 0}}(this),createBounds(),gObject=new google.maps.Rectangle(this.buildOpts(bounds)),$log.info("gObject (rectangle) created: "+gObject),settingBoundsFromScope=!1,updateBounds=function(_this){return function(){var b,ne,sw;return b=gObject.getBounds(),ne=b.getNorthEast(),sw=b.getSouthWest(),settingBoundsFromScope?void 0:_this.scope.$evalAsync(function(s){return null!=s.bounds&&null!=s.bounds.sw&&null!=s.bounds.ne&&(s.bounds.ne={latitude:ne.lat(),longitude:ne.lng()},s.bounds.sw={latitude:sw.lat(),longitude:sw.lng()}),null!=s.bounds.getNorthEast&&null!=s.bounds.getSouthWest?s.bounds=b:void 0})}}(this),init=function(_this){return function(){return fit(),_this.removeEvents(myListeners),myListeners.push(google.maps.event.addListener(gObject,"dragstart",function(){return dragging=!0})),myListeners.push(google.maps.event.addListener(gObject,"dragend",function(){return dragging=!1,updateBounds()})),myListeners.push(google.maps.event.addListener(gObject,"bounds_changed",function(){return dragging?void 0:updateBounds()}))}}(this),clear=function(_this){return function(){return _this.removeEvents(myListeners),null!=listeners&&_this.removeEvents(listeners),gObject.setMap(null)}}(this),null!=bounds&&init(),this.scope.$watch("bounds",function(newValue,oldValue){var isNew;if(!(_.isEqual(newValue,oldValue)&&null!=bounds||dragging))return settingBoundsFromScope=!0,null==newValue?void clear():(null==bounds?isNew=!0:fit(),createBounds(),gObject.setBounds(bounds),settingBoundsFromScope=!1,isNew&&null!=bounds?init():void 0)},!0),this.setMyOptions=function(_this){return function(newVals,oldVals){return _.isEqual(newVals,oldVals)||null==bounds||null==newVals?void 0:gObject.setOptions(_this.buildOpts(bounds))}}(this),this.props.push("bounds"),this.watchProps(this.props),null!=this.attrs.events&&(listeners=this.setEvents(gObject,this.scope,this.scope),this.scope.$watch("events",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:(null!=listeners&&_this.removeEvents(listeners),listeners=_this.setEvents(gObject,_this.scope,_this.scope))}}(this))),this.scope.$on("$destroy",function(_this){return function(){return clear()}}(this)),$log.info(this)}return extend(RectangleParentModel,superClass),RectangleParentModel.include(GmapUtil),RectangleParentModel.include(EventsHelper),RectangleParentModel}(Builder)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapSearchBoxParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapEventsHelper","$timeout","$http","$templateCache",function(BaseObject,Logger,EventsHelper,$timeout,$http,$templateCache){var SearchBoxParentModel;return SearchBoxParentModel=function(superClass){function SearchBoxParentModel(scope,element,attrs,gMap,ctrlPosition,template,$log){var controlDiv;return this.scope=scope,this.element=element,this.attrs=attrs,this.gMap=gMap,this.ctrlPosition=ctrlPosition,this.template=template,this.$log=null!=$log?$log:Logger,this.setVisibility=bind(this.setVisibility,this),this.getBounds=bind(this.getBounds,this),this.setBounds=bind(this.setBounds,this),this.createSearchBox=bind(this.createSearchBox,this),this.addToParentDiv=bind(this.addToParentDiv,this),this.addAsMapControl=bind(this.addAsMapControl,this),this.init=bind(this.init,this),null==this.attrs.template?void this.$log.error("template attribute for the search-box directive is mandatory. Places Search Box creation aborted!!"):(angular.isUndefined(this.scope.options)&&(this.scope.options={},this.scope.options.visible=!0),angular.isUndefined(this.scope.options.visible)&&(this.scope.options.visible=!0),angular.isUndefined(this.scope.options.autocomplete)&&(this.scope.options.autocomplete=!1),this.visible=this.scope.options.visible,this.autocomplete=this.scope.options.autocomplete,controlDiv=angular.element("<div></div>"),controlDiv.append(this.template),this.input=controlDiv.find("input")[0],void this.init())}return extend(SearchBoxParentModel,superClass),SearchBoxParentModel.include(EventsHelper),SearchBoxParentModel.prototype.init=function(){return this.createSearchBox(),this.scope.$watch("options",function(_this){return function(newValue,oldValue){return angular.isObject(newValue)&&(null!=newValue.bounds&&_this.setBounds(newValue.bounds),null!=newValue.visible&&_this.visible!==newValue.visible)?_this.setVisibility(newValue.visible):void 0}}(this),!0),null!=this.attrs.parentdiv?this.addToParentDiv():this.addAsMapControl(),this.autocomplete?this.listener=google.maps.event.addListener(this.gObject,"place_changed",function(_this){return function(){return _this.places=_this.gObject.getPlace()}}(this)):this.listener=google.maps.event.addListener(this.gObject,"places_changed",function(_this){return function(){return _this.places=_this.gObject.getPlaces()}}(this)),this.listeners=this.setEvents(this.gObject,this.scope,this.scope),this.$log.info(this),this.scope.$on("$destroy",function(_this){return function(){return _this.gObject=null}}(this))},SearchBoxParentModel.prototype.addAsMapControl=function(){return this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input)},SearchBoxParentModel.prototype.addToParentDiv=function(){return this.parentDiv=angular.element(document.getElementById(this.scope.parentdiv)),this.parentDiv.append(this.input)},SearchBoxParentModel.prototype.createSearchBox=function(){return this.autocomplete?this.gObject=new google.maps.places.Autocomplete(this.input,this.scope.options):this.gObject=new google.maps.places.SearchBox(this.input,this.scope.options)},SearchBoxParentModel.prototype.setBounds=function(bounds){if(angular.isUndefined(bounds.isEmpty))this.$log.error("Error: SearchBoxParentModel setBounds. Bounds not an instance of LatLngBounds.");else if(bounds.isEmpty()===!1&&null!=this.gObject)return this.gObject.setBounds(bounds)},SearchBoxParentModel.prototype.getBounds=function(){return this.gObject.getBounds()},SearchBoxParentModel.prototype.setVisibility=function(val){return null!=this.attrs.parentdiv?val===!1?this.parentDiv.addClass("ng-hide"):this.parentDiv.removeClass("ng-hide"):val===!1?this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].clear():this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input),this.visible=val},SearchBoxParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapWindowsParentModel",["uiGmapIWindowParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapWindowChildModel","uiGmapLinked","uiGmap_async","uiGmapLogger","$timeout","$compile","$http","$templateCache","$interpolate","uiGmapPromise","uiGmapIWindow","uiGmapGmapUtil",function(IWindowParentModel,ModelsWatcher,PropMap,WindowChildModel,Linked,_async,$log,$timeout,$compile,$http,$templateCache,$interpolate,uiGmapPromise,IWindow,GmapUtil){var WindowsParentModel;return WindowsParentModel=function(superClass){function WindowsParentModel(scope,element,attrs,ctrls,gMap1,markersScope){this.gMap=gMap1,this.markersScope=markersScope,this.modelKeyComparison=bind(this.modelKeyComparison,this),this.interpolateContent=bind(this.interpolateContent,this),this.setChildScope=bind(this.setChildScope,this),this.createWindow=bind(this.createWindow,this),this.setContentKeys=bind(this.setContentKeys,this),this.pieceMeal=bind(this.pieceMeal,this),
this.createAllNew=bind(this.createAllNew,this),this.watchIdKey=bind(this.watchIdKey,this),this.createChildScopes=bind(this.createChildScopes,this),this.watchOurScope=bind(this.watchOurScope,this),this.watchDestroy=bind(this.watchDestroy,this),this.onDestroy=bind(this.onDestroy,this),this.rebuildAll=bind(this.rebuildAll,this),this.doINeedToWipe=bind(this.doINeedToWipe,this),this.watchModels=bind(this.watchModels,this),this.go=bind(this.go,this),WindowsParentModel.__super__.constructor.call(this,scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache),this["interface"]=IWindow,this.plurals=new PropMap,_.each(IWindow.scopeKeys,function(_this){return function(name){return _this[name+"Key"]=void 0}}(this)),this.linked=new Linked(scope,element,attrs,ctrls),this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.firstWatchModels=!0,this.$log.info(self),this.parentScope=void 0,this.go(scope)}return extend(WindowsParentModel,superClass),WindowsParentModel.include(ModelsWatcher),WindowsParentModel.prototype.go=function(scope){return this.watchOurScope(scope),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,scope.$watch("doRebuildAll",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.doRebuildAll=newValue:void 0}}(this)),this.createChildScopes()},WindowsParentModel.prototype.watchModels=function(scope){var itemToWatch;return itemToWatch=null!=this.markersScope?"pluralsUpdate":"models",scope.$watch(itemToWatch,function(_this){return function(newValue,oldValue){var doScratch;return!_.isEqual(newValue,oldValue)||_this.firstWatchModels?(_this.firstWatchModels=!1,_this.doRebuildAll||_this.doINeedToWipe(scope.models)?_this.rebuildAll(scope,!0,!0):(doScratch=0===_this.plurals.length,null!=_this.existingPieces?_.last(_this.existingPieces._content).then(function(){return _this.createChildScopes(doScratch)}):_this.createChildScopes(doScratch))):void 0}}(this),!0)},WindowsParentModel.prototype.doINeedToWipe=function(newValue){var newValueIsEmpty;return newValueIsEmpty=null!=newValue?0===newValue.length:!0,this.plurals.length>0&&newValueIsEmpty},WindowsParentModel.prototype.rebuildAll=function(scope,doCreate,doDelete){return this.onDestroy(doDelete).then(function(_this){return function(){return doCreate?_this.createChildScopes():void 0}}(this))},WindowsParentModel.prototype.onDestroy=function(scope){return WindowsParentModel.__super__.onDestroy.call(this,this.scope),_async.promiseLock(this,uiGmapPromise.promiseTypes["delete"],void 0,void 0,function(_this){return function(){return _async.each(_this.plurals.values(),function(child){return child.destroy()},_async.chunkSizeFrom(_this.scope.cleanchunk,!1)).then(function(){var ref;return null!=(ref=_this.plurals)?ref.removeAll():void 0})}}(this))},WindowsParentModel.prototype.watchDestroy=function(scope){return scope.$on("$destroy",function(_this){return function(){return _this.firstWatchModels=!0,_this.firstTime=!0,_this.rebuildAll(scope,!1,!0)}}(this))},WindowsParentModel.prototype.watchOurScope=function(scope){return _.each(IWindow.scopeKeys,function(_this){return function(name){var nameKey;return nameKey=name+"Key",_this[nameKey]="function"==typeof scope[name]?scope[name]():scope[name]}}(this))},WindowsParentModel.prototype.createChildScopes=function(isCreatingFromScratch){var modelsNotDefined,ref,ref1;return null==isCreatingFromScratch&&(isCreatingFromScratch=!0),this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),modelsNotDefined=angular.isUndefined(this.linked.scope.models),!modelsNotDefined||void 0!==this.markersScope&&void 0!==(null!=(ref=this.markersScope)?ref.plurals:void 0)&&void 0!==(null!=(ref1=this.markersScope)?ref1.models:void 0)?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),isCreatingFromScratch?this.createAllNew(this.linked.scope,!1):this.pieceMeal(this.linked.scope,!1)):(this.parentScope=this.markersScope,this.watchIdKey(this.parentScope),isCreatingFromScratch?this.createAllNew(this.markersScope,!0,"plurals",!1):this.pieceMeal(this.markersScope,!0,"plurals",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derived from markers!")},WindowsParentModel.prototype.watchIdKey=function(scope){return this.setIdKey(scope),scope.$watch("idKey",function(_this){return function(newValue,oldValue){return newValue!==oldValue&&null==newValue?(_this.idKey=newValue,_this.rebuildAll(scope,!0,!0)):void 0}}(this))},WindowsParentModel.prototype.createAllNew=function(scope,hasGMarker,modelsPropToIterate,isArray){var maybeCanceled;return null==modelsPropToIterate&&(modelsPropToIterate="models"),null==isArray&&(isArray=!1),this.firstTime&&(this.watchModels(scope),this.watchDestroy(scope)),this.setContentKeys(scope.models),this.didQueueInitPromise(this,scope)?void 0:(maybeCanceled=null,_async.promiseLock(this,uiGmapPromise.promiseTypes.create,"createAllNew",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return _async.each(scope.models,function(model){var gMarker,ref;return gMarker=hasGMarker&&null!=(ref=_this.getItem(scope,modelsPropToIterate,model[_this.idKey]))?ref.gObject:void 0,maybeCanceled||(!gMarker&&_this.markersScope&&$log.error("Unable to get gMarker from markersScope!"),_this.createWindow(model,gMarker,_this.gMap)),maybeCanceled},_async.chunkSizeFrom(scope.chunk)).then(function(){return _this.firstTime=!1})}}(this)))},WindowsParentModel.prototype.pieceMeal=function(scope,hasGMarker,modelsPropToIterate,isArray){var maybeCanceled,payload;return null==modelsPropToIterate&&(modelsPropToIterate="models"),null==isArray&&(isArray=!0),scope.$$destroyed?void 0:(maybeCanceled=null,payload=null,null!=scope&&this.modelsLength()&&this.plurals.length?_async.promiseLock(this,uiGmapPromise.promiseTypes.update,"pieceMeal",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return uiGmapPromise.promise(function(){return _this.figureOutState(_this.idKey,scope,_this.plurals,_this.modelKeyComparison)}).then(function(state){return payload=state,_async.each(payload.removals,function(child){return null!=child?(_this.plurals.remove(child.id),null!=child.destroy&&child.destroy(!0),maybeCanceled):void 0},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.adds,function(modelToAdd){var gMarker,ref;if(gMarker=null!=(ref=_this.getItem(scope,modelsPropToIterate,modelToAdd[_this.idKey]))?ref.gObject:void 0,!gMarker)throw"Gmarker undefined";return _this.createWindow(modelToAdd,gMarker,_this.gMap),maybeCanceled})}).then(function(){return _async.each(payload.updates,function(update){return _this.updateChild(update.child,update.model),maybeCanceled},_async.chunkSizeFrom(scope.chunk))})}}(this)):($log.debug("pieceMeal: rebuildAll"),this.rebuildAll(this.scope,!0,!0)))},WindowsParentModel.prototype.setContentKeys=function(models){return this.modelsLength(models)?this.contentKeys=Object.keys(models[0]):void 0},WindowsParentModel.prototype.createWindow=function(model,gMarker,gMap){var child,childScope,fakeElement,opts,ref,ref1;return childScope=this.linked.scope.$new(!1),this.setChildScope(childScope,model),childScope.$watch("model",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.setChildScope(childScope,newValue):void 0}}(this),!0),fakeElement={html:function(_this){return function(){return _this.interpolateContent(_this.linked.element.html(),model)}}(this)},this.DEFAULTS=this.scopeOrModelVal(this.optionsKey,this.scope,model)||{},opts=this.createWindowOptions(gMarker,childScope,fakeElement.html(),this.DEFAULTS),child=new WindowChildModel(model,childScope,opts,this.isIconVisibleOnClick,gMap,null!=(ref=this.markersScope)&&null!=(ref1=ref.plurals.get(model[this.idKey]))?ref1.scope:void 0,fakeElement,!1,!0),null==model[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.plurals.put(model[this.idKey],child),child)},WindowsParentModel.prototype.setChildScope=function(childScope,model){return _.each(IWindow.scopeKeys,function(_this){return function(name){var nameKey,newValue;return nameKey=name+"Key",newValue="self"===_this[nameKey]?model:model[_this[nameKey]],newValue!==childScope[name]?childScope[name]=newValue:void 0}}(this)),childScope.model=model},WindowsParentModel.prototype.interpolateContent=function(content,model){var exp,i,interpModel,key,len,ref;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(exp=$interpolate(content),interpModel={},ref=this.contentKeys,i=0,len=ref.length;len>i;i++)key=ref[i],interpModel[key]=model[key];return exp(interpModel)}},WindowsParentModel.prototype.modelKeyComparison=function(model1,model2){var isEqual,scope;if(scope=null!=this.scope.coords?this.scope:this.parentScope,null==scope)throw"No scope or parentScope set!";return(isEqual=GmapUtil.equalCoords(this.evalModelHandle(model1,scope.coords),this.evalModelHandle(model2,scope.coords)))?isEqual=_.every(_.without(this["interface"].scopeKeys,"coords"),function(_this){return function(k){return _this.evalModelHandle(model1,scope[k])===_this.evalModelHandle(model2,scope[k])}}(this)):isEqual},WindowsParentModel}(IWindowParentModel)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapCircle",["uiGmapICircle","uiGmapCircleParentModel",function(ICircle,CircleParentModel){return _.extend(ICircle,{link:function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return new CircleParentModel(scope,element,attrs,map)}}(this))}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapControl",["uiGmapIControl","$http","$templateCache","$compile","$controller","uiGmapGoogleMapApi",function(IControl,$http,$templateCache,$compile,$controller,GoogleMapApi){var Control;return Control=function(superClass){function Control(){this.link=bind(this.link,this),Control.__super__.constructor.call(this)}return extend(Control,superClass),Control.prototype.link=function(scope,element,attrs,ctrl){return GoogleMapApi.then(function(_this){return function(maps){var index,position;return angular.isUndefined(scope.template)?void _this.$log.error("mapControl: could not find a valid template property"):(index=angular.isDefined(scope.index&&!isNaN(parseInt(scope.index)))?parseInt(scope.index):void 0,position=angular.isDefined(scope.position)?scope.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",maps.ControlPosition[position]?IControl.mapPromise(scope,ctrl).then(function(map){var control,controlDiv;return control=void 0,controlDiv=angular.element("<div></div>"),$http.get(scope.template,{cache:$templateCache}).success(function(template){var templateCtrl,templateScope;return templateScope=scope.$new(),controlDiv.append(template),angular.isDefined(scope.controller)&&(templateCtrl=$controller(scope.controller,{$scope:templateScope}),controlDiv.children().data("$ngControllerController",templateCtrl)),control=$compile(controlDiv.children())(templateScope),index?control[0].index=index:void 0}).error(function(error){return _this.$log.error("mapControl: template could not be found")}).then(function(){return map.controls[google.maps.ControlPosition[position]].push(control[0])})}):void _this.$log.error("mapControl: invalid position property"))}}(this))},Control}(IControl)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapDragZoom",["uiGmapCtrlHandle","uiGmapPropertyAction",function(CtrlHandle,PropertyAction){return{restrict:"EMA",transclude:!0,template:'<div class="angular-google-map-dragzoom" ng-transclude style="display: none"></div>',require:"^uiGmapGoogleMap",scope:{keyboardkey:"=",options:"=",spec:"="},controller:["$scope","$element",function($scope,$element){return $scope.ctrlType="uiGmapDragZoom",_.extend(this,CtrlHandle.handle($scope,$element))}],link:function(scope,element,attrs,ctrl){return CtrlHandle.mapPromise(scope,ctrl).then(function(map){var enableKeyDragZoom,setKeyAction,setOptionsAction;return enableKeyDragZoom=function(opts){return map.enableKeyDragZoom(opts),scope.spec?scope.spec.enableKeyDragZoom(opts):void 0},setKeyAction=new PropertyAction(function(key,newVal){return newVal?enableKeyDragZoom({key:newVal}):enableKeyDragZoom()}),setOptionsAction=new PropertyAction(function(key,newVal){return newVal?enableKeyDragZoom(newVal):void 0}),scope.$watch("keyboardkey",setKeyAction.sic),setKeyAction.sic(scope.keyboardkey),scope.$watch("options",setOptionsAction.sic),setOptionsAction.sic(scope.options)})}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapDrawingManager",["uiGmapIDrawingManager","uiGmapDrawingManagerParentModel",function(IDrawingManager,DrawingManagerParentModel){return _.extend(IDrawingManager,{link:function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(map){return new DrawingManagerParentModel(scope,element,attrs,map)})}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapApiFreeDrawPolygons",["uiGmapLogger","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapDrawFreeHandChildModel","uiGmapLodash",function($log,BaseObject,CtrlHandle,DrawFreeHandChildModel,uiGmapLodash){var FreeDrawPolygons;return FreeDrawPolygons=function(superClass){function FreeDrawPolygons(){return this.link=bind(this.link,this),FreeDrawPolygons.__super__.constructor.apply(this,arguments)}return extend(FreeDrawPolygons,superClass),FreeDrawPolygons.include(CtrlHandle),FreeDrawPolygons.prototype.restrict="EMA",FreeDrawPolygons.prototype.replace=!0,FreeDrawPolygons.prototype.require="^uiGmapGoogleMap",FreeDrawPolygons.prototype.scope={polygons:"=",draw:"="},FreeDrawPolygons.prototype.link=function(scope,element,attrs,ctrl){return this.mapPromise(scope,ctrl).then(function(_this){return function(map){var freeHand,listener;return scope.polygons?_.isArray(scope.polygons)?(freeHand=new DrawFreeHandChildModel(map,ctrl.getScope()),listener=void 0,scope.draw=function(){return"function"==typeof listener&&listener(),freeHand.engage(scope.polygons).then(function(){var firstTime;return firstTime=!0,listener=scope.$watchCollection("polygons",function(newValue,oldValue){var removals;return firstTime||newValue===oldValue?void(firstTime=!1):(removals=uiGmapLodash.differenceObjects(oldValue,newValue),removals.forEach(function(p){return p.setMap(null)}))})})}):$log.error("Free Draw Polygons must be of type Array!"):$log.error("No polygons to bind to!")}}(this))},FreeDrawPolygons}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapICircle",[function(){var DEFAULTS;return DEFAULTS={},{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"=",control:"=",zIndex:"=zindex"}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIControl",["uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(BaseObject,Logger,CtrlHandle){var IControl;return IControl=function(superClass){function IControl(){this.restrict="EA",this.replace=!0,this.require="^uiGmapGoogleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=Logger}return extend(IControl,superClass),IControl.extend(CtrlHandle),IControl.prototype.link=function(scope,element,attrs,ctrl){throw new Exception("Not implemented!!")},IControl}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapIDrawingManager",[function(){return{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{"static":"@",control:"=",options:"=",events:"="}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIMarker",["uiGmapBaseObject","uiGmapCtrlHandle",function(BaseObject,CtrlHandle){var IMarker;return IMarker=function(superClass){function IMarker(){this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope=_.extend(this.scope||{},IMarker.scope)}return extend(IMarker,superClass),IMarker.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"},IMarker.scopeKeys=_.keys(IMarker.scope),IMarker.keys=IMarker.scopeKeys,IMarker.extend(CtrlHandle),IMarker}(BaseObject)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolygon",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(GmapUtil,BaseObject,Logger,CtrlHandle){var IPolygon;return IPolygon=function(superClass){function IPolygon(){}return extend(IPolygon,superClass),IPolygon.scope={path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"=",control:"=control"},IPolygon.scopeKeys=_.keys(IPolygon.scope),IPolygon.include(GmapUtil),IPolygon.extend(CtrlHandle),IPolygon.prototype.restrict="EMA",IPolygon.prototype.replace=!0,IPolygon.prototype.require="^uiGmapGoogleMap",IPolygon.prototype.scope=IPolygon.scope,IPolygon.prototype.DEFAULTS={},IPolygon.prototype.$log=Logger,IPolygon}(BaseObject)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolyline",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(GmapUtil,BaseObject,Logger,CtrlHandle){var IPolyline;return IPolyline=function(superClass){function IPolyline(){}return extend(IPolyline,superClass),IPolyline.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"=",events:"=",zIndex:"=zindex"},IPolyline.scopeKeys=_.keys(IPolyline.scope),IPolyline.include(GmapUtil),IPolyline.extend(CtrlHandle),IPolyline.prototype.restrict="EMA",IPolyline.prototype.replace=!0,IPolyline.prototype.require="^uiGmapGoogleMap",IPolyline.prototype.scope=IPolyline.scope,IPolyline.prototype.DEFAULTS={},IPolyline.prototype.$log=Logger,IPolyline}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapIRectangle",[function(){var DEFAULTS;return DEFAULTS={},{restrict:"EMA",require:"^uiGmapGoogleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"=",events:"="}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIWindow",["uiGmapBaseObject","uiGmapChildEvents","uiGmapCtrlHandle",function(BaseObject,ChildEvents,CtrlHandle){var IWindow;return IWindow=function(superClass){function IWindow(){this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require="^uiGmapGoogleMap",this.replace=!0,this.scope=_.extend(this.scope||{},IWindow.scope)}return extend(IWindow,superClass),IWindow.scope={coords:"=coords",template:"=template",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control",show:"=show"},IWindow.scopeKeys=_.keys(IWindow.scope),IWindow.include(ChildEvents),IWindow.extend(CtrlHandle),IWindow}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMap",["$timeout","$q","uiGmapLogger","uiGmapGmapUtil","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapIsReady","uiGmapuuid","uiGmapExtendGWin","uiGmapExtendMarkerClusterer","uiGmapGoogleMapsUtilV3","uiGmapGoogleMapApi","uiGmapEventsHelper",function($timeout,$q,$log,GmapUtil,BaseObject,CtrlHandle,IsReady,uuid,ExtendGWin,ExtendMarkerClusterer,GoogleMapsUtilV3,GoogleMapApi,EventsHelper){var DEFAULTS,Map,initializeItems;return DEFAULTS=void 0,initializeItems=[GoogleMapsUtilV3,ExtendGWin,ExtendMarkerClusterer],Map=function(superClass){function Map(){this.link=bind(this.link,this);var ctrlFn,self;ctrlFn=function($scope){var ctrlObj,retCtrl;return retCtrl=void 0,$scope.$on("$destroy",function(){return IsReady.decrement()}),ctrlObj=CtrlHandle.handle($scope),$scope.ctrlType="Map",$scope.deferred.promise.then(function(){return initializeItems.forEach(function(i){return i.init()})}),ctrlObj.getMap=function(){return $scope.map},retCtrl=_.extend(this,ctrlObj)},this.controller=["$scope",ctrlFn],self=this}return extend(Map,superClass),Map.include(GmapUtil),Map.prototype.restrict="EMA",Map.prototype.transclude=!0,Map.prototype.replace=!1,Map.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',Map.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",options:"=",events:"=",eventOpts:"=",styles:"=",bounds:"=",update:"="},Map.prototype.link=function(scope,element,attrs){var listeners,unbindCenterWatch;return listeners=[],scope.$on("$destroy",function(){return EventsHelper.removeEvents(listeners)}),scope.idleAndZoomChanged=!1,null==scope.center?void(unbindCenterWatch=scope.$watch("center",function(_this){return function(){return scope.center?(unbindCenterWatch(),_this.link(scope,element,attrs)):void 0}}(this))):GoogleMapApi.then(function(_this){return function(maps){var _gMap,customListeners,disabledEvents,dragging,el,eventName,getEventHandler,mapOptions,maybeHookToEvent,opts,ref,resolveSpawned,settingFromDirective,spawned,type,updateCenter,zoomPromise;if(DEFAULTS={mapTypeId:maps.MapTypeId.ROADMAP},spawned=IsReady.spawn(),resolveSpawned=function(){return spawned.deferred.resolve({instance:spawned.instance,map:_gMap})},!_this.validateCoords(scope.center))return void $log.error("angular-google-maps: could not find a valid center property");if(!angular.isDefined(scope.zoom))return void $log.error("angular-google-maps: map zoom property not set");if(el=angular.element(element),el.addClass("angular-google-map"),opts={options:{}},attrs.options&&(opts.options=scope.options),attrs.styles&&(opts.styles=scope.styles),attrs.type&&(type=attrs.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(type)?opts.mapTypeId=google.maps.MapTypeId[attrs.type.toUpperCase()]:$log.error("angular-google-maps: invalid map type '"+attrs.type+"'")),mapOptions=angular.extend({},DEFAULTS,opts,{center:_this.getCoords(scope.center),zoom:scope.zoom,bounds:scope.bounds}),_gMap=new google.maps.Map(el.find("div")[1],mapOptions),_gMap.uiGmap_id=uuid.generate(),dragging=!1,listeners.push(google.maps.event.addListenerOnce(_gMap,"idle",function(){return scope.deferred.resolve(_gMap),resolveSpawned()})),disabledEvents=attrs.events&&null!=(null!=(ref=scope.events)?ref.blacklist:void 0)?scope.events.blacklist:[],_.isString(disabledEvents)&&(disabledEvents=[disabledEvents]),maybeHookToEvent=function(eventName,fn,prefn){return _.contains(disabledEvents,eventName)?void 0:(prefn&&prefn(),listeners.push(google.maps.event.addListener(_gMap,eventName,function(){var ref1;return(null!=(ref1=scope.update)?ref1.lazy:void 0)?void 0:fn()})))},_.contains(disabledEvents,"all")||(maybeHookToEvent("dragstart",function(){return dragging=!0,scope.$evalAsync(function(s){return null!=s.dragging?s.dragging=dragging:void 0})}),maybeHookToEvent("dragend",function(){return dragging=!1,scope.$evalAsync(function(s){return null!=s.dragging?s.dragging=dragging:void 0})}),updateCenter=function(c,s){if(null==c&&(c=_gMap.center),null==s&&(s=scope),!_.contains(disabledEvents,"center"))if(angular.isDefined(s.center.type)){if(s.center.coordinates[1]!==c.lat()&&(s.center.coordinates[1]=c.lat()),s.center.coordinates[0]!==c.lng())return s.center.coordinates[0]=c.lng()}else if(s.center.latitude!==c.lat()&&(s.center.latitude=c.lat()),s.center.longitude!==c.lng())return s.center.longitude=c.lng()},settingFromDirective=!1,maybeHookToEvent("idle",function(){var b,ne,sw;return b=_gMap.getBounds(),ne=b.getNorthEast(),sw=b.getSouthWest(),settingFromDirective=!0,scope.$evalAsync(function(s){return updateCenter(),null===s.bounds||s.bounds===undefined||void 0===s.bounds||_.contains(disabledEvents,"bounds")||(s.bounds.northeast={latitude:ne.lat(),longitude:ne.lng()},s.bounds.southwest={latitude:sw.lat(),longitude:sw.lng()}),_.contains(disabledEvents,"zoom")||(s.zoom=_gMap.zoom,scope.idleAndZoomChanged=!scope.idleAndZoomChanged),settingFromDirective=!1})})),angular.isDefined(scope.events)&&null!==scope.events&&angular.isObject(scope.events)){getEventHandler=function(eventName){return function(){return scope.events[eventName].apply(scope,[_gMap,eventName,arguments])}},customListeners=[];for(eventName in scope.events)scope.events.hasOwnProperty(eventName)&&angular.isFunction(scope.events[eventName])&&customListeners.push(google.maps.event.addListener(_gMap,eventName,getEventHandler(eventName)));listeners.concat(customListeners)}return _gMap.getOptions=function(){return mapOptions},scope.map=_gMap,null!=attrs.control&&null!=scope.control&&(scope.control.refresh=function(maybeCoords){var coords,ref1,ref2;if(null!=_gMap)return null!=("undefined"!=typeof google&&null!==google&&null!=(ref1=google.maps)&&null!=(ref2=ref1.event)?ref2.trigger:void 0)&&null!=_gMap&&google.maps.event.trigger(_gMap,"resize"),null!=(null!=maybeCoords?maybeCoords.latitude:void 0)&&null!=(null!=maybeCoords?maybeCoords.longitude:void 0)?(coords=_this.getCoords(maybeCoords),_this.isTrue(attrs.pan)?_gMap.panTo(coords):_gMap.setCenter(coords)):void 0},scope.control.getGMap=function(){return _gMap},scope.control.getMapOptions=function(){return mapOptions},scope.control.getCustomEventListeners=function(){return customListeners},scope.control.removeEvents=function(yourListeners){return EventsHelper.removeEvents(yourListeners)}),scope.$watch("center",function(newValue,oldValue){var coords,settingCenterFromScope;if(newValue!==oldValue&&!settingFromDirective&&(coords=_this.getCoords(scope.center),coords.lat()!==_gMap.center.lat()||coords.lng()!==_gMap.center.lng()))return settingCenterFromScope=!0,dragging||(_this.validateCoords(newValue)||$log.error("Invalid center for newValue: "+JSON.stringify(newValue)),_this.isTrue(attrs.pan)&&scope.zoom===_gMap.zoom?_gMap.panTo(coords):_gMap.setCenter(coords)),settingCenterFromScope=!1},!0),zoomPromise=null,scope.$watch("zoom",function(newValue,oldValue){var ref1,ref2,settingZoomFromScope;if(null!=newValue&&!_.isEqual(newValue,oldValue)&&(null!=_gMap?_gMap.getZoom():void 0)!==(null!=scope?scope.zoom:void 0)&&!settingFromDirective)return settingZoomFromScope=!0,null!=zoomPromise&&$timeout.cancel(zoomPromise),zoomPromise=$timeout(function(){return _gMap.setZoom(newValue),settingZoomFromScope=!1},(null!=(ref1=scope.eventOpts)&&null!=(ref2=ref1.debounce)?ref2.zoomMs:void 0)+20,!1)}),scope.$watch("bounds",function(newValue,oldValue){var bounds,ne,ref1,ref2,ref3,ref4,sw;if(newValue!==oldValue)return null==(null!=newValue&&null!=(ref1=newValue.northeast)?ref1.latitude:void 0)||null==(null!=newValue&&null!=(ref2=newValue.northeast)?ref2.longitude:void 0)||null==(null!=newValue&&null!=(ref3=newValue.southwest)?ref3.latitude:void 0)||null==(null!=newValue&&null!=(ref4=newValue.southwest)?ref4.longitude:void 0)?void $log.error("Invalid map bounds for new value: "+JSON.stringify(newValue)):(ne=new google.maps.LatLng(newValue.northeast.latitude,newValue.northeast.longitude),sw=new google.maps.LatLng(newValue.southwest.latitude,newValue.southwest.longitude),bounds=new google.maps.LatLngBounds(sw,ne),_gMap.fitBounds(bounds))}),["options","styles"].forEach(function(toWatch){return scope.$watch(toWatch,function(newValue,oldValue){var watchItem;return watchItem=this.exp,_.isEqual(newValue,oldValue)?void 0:("options"===watchItem?opts.options=newValue:opts.options[watchItem]=newValue,null!=_gMap?_gMap.setOptions(opts):void 0)},!0)})}}(this))},Map}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarker",["uiGmapIMarker","uiGmapMarkerChildModel","uiGmapMarkerManager","uiGmapLogger",function(IMarker,MarkerChildModel,MarkerManager,$log){var Marker;return Marker=function(superClass){function Marker(){this.link=bind(this.link,this),Marker.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',$log.info(this)}return extend(Marker,superClass),Marker.prototype.controller=["$scope","$element",function($scope,$element){return $scope.ctrlType="Marker",_.extend(this,IMarker.handle($scope,$element))}],Marker.prototype.link=function(scope,element,attrs,ctrl){var mapPromise;return mapPromise=IMarker.mapPromise(scope,ctrl),mapPromise.then(function(_this){return function(map){var doClick,doDrawSelf,gManager,keys,m,trackModel;return gManager=new MarkerManager(map),keys=_.object(IMarker.keys,IMarker.keys),m=new MarkerChildModel(scope,scope,keys,map,{},doClick=!0,gManager,doDrawSelf=!1,trackModel=!1),m.deferred.promise.then(function(gMarker){return scope.deferred.resolve(gMarker)}),null!=scope.control?scope.control.getGMarkers=gManager.getGMarkers:void 0;
}}(this)),scope.$on("$destroy",function(_this){return function(){var gManager;return"undefined"!=typeof gManager&&null!==gManager&&gManager.clear(),gManager=null}}(this))},Marker}(IMarker)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarkers",["uiGmapIMarker","uiGmapPlural","uiGmapMarkersParentModel","uiGmap_sync","uiGmapLogger",function(IMarker,Plural,MarkersParentModel,_sync,$log){var Markers;return Markers=function(superClass){function Markers(){Markers.__super__.constructor.call(this),this.template='<span class="angular-google-map-markers" ng-transclude></span>',Plural.extend(this,{doCluster:"=docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",modelsByRef:"=modelsbyref"}),$log.info(this)}return extend(Markers,superClass),Markers.prototype.controller=["$scope","$element",function($scope,$element){return $scope.ctrlType="Markers",_.extend(this,IMarker.handle($scope,$element))}],Markers.prototype.link=function(scope,element,attrs,ctrl){var parentModel,ready;return parentModel=void 0,ready=function(){return scope.deferred.resolve()},IMarker.mapPromise(scope,ctrl).then(function(map){var mapScope;return mapScope=ctrl.getScope(),mapScope.$watch("idleAndZoomChanged",function(){return _.defer(parentModel.gManager.draw)}),parentModel=new MarkersParentModel(scope,element,attrs,map),Plural.link(scope,parentModel),null!=scope.control&&(scope.control.getGMarkers=function(){var ref;return null!=(ref=parentModel.gManager)?ref.getGMarkers():void 0},scope.control.getChildMarkers=function(){return parentModel.plurals}),_.last(parentModel.existingPieces._content).then(function(){return ready()})})},Markers}(IMarker)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapPlural",[function(){var _initControl;return _initControl=function(scope,parent){return null!=scope.control?(scope.control.updateModels=function(models){return scope.models=models,parent.createChildScopes(!1)},scope.control.newModels=function(models){return scope.models=models,parent.rebuildAll(scope,!0,!0)},scope.control.clean=function(){return parent.rebuildAll(scope,!1,!0)},scope.control.getPlurals=function(){return parent.plurals},scope.control.getManager=function(){return parent.gManager},scope.control.hasManager=function(){return null!=parent.gManager==!0},scope.control.managerDraw=function(){var ref;return scope.control.hasManager()&&null!=(ref=scope.control.getManager())?ref.draw():void 0}):void 0},{extend:function(obj,obj2){return _.extend(obj.scope||{},obj2||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",chunk:"=chunk",cleanchunk:"=cleanchunk",control:"=control"})},link:function(scope,parent){return _initControl(scope,parent)}}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygon",["uiGmapIPolygon","$timeout","uiGmaparray-sync","uiGmapPolygonChildModel",function(IPolygon,$timeout,arraySync,PolygonChild){var Polygon;return Polygon=function(superClass){function Polygon(){return this.link=bind(this.link,this),Polygon.__super__.constructor.apply(this,arguments)}return extend(Polygon,superClass),Polygon.prototype.link=function(scope,element,attrs,mapCtrl){var children,promise;return children=[],promise=IPolygon.mapPromise(scope,mapCtrl),null!=scope.control&&(scope.control.getInstance=this,scope.control.polygons=children,scope.control.promise=promise),promise.then(function(_this){return function(map){return children.push(new PolygonChild(scope,attrs,map,_this.DEFAULTS))}}(this))},Polygon}(IPolygon)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygons",["uiGmapIPolygon","$timeout","uiGmaparray-sync","uiGmapPolygonsParentModel","uiGmapPlural",function(Interface,$timeout,arraySync,ParentModel,Plural){var Polygons;return Polygons=function(superClass){function Polygons(){this.link=bind(this.link,this),Polygons.__super__.constructor.call(this),Plural.extend(this),this.$log.info(this)}return extend(Polygons,superClass),Polygons.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return(angular.isUndefined(scope.path)||null===scope.path)&&_this.$log.warn("polygons: no valid path attribute found"),scope.models||_this.$log.warn("polygons: no models found to create from"),Plural.link(scope,new ParentModel(scope,element,attrs,map,_this.DEFAULTS))}}(this))},Polygons}(Interface)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolyline",["uiGmapIPolyline","$timeout","uiGmaparray-sync","uiGmapPolylineChildModel",function(IPolyline,$timeout,arraySync,PolylineChildModel){var Polyline;return Polyline=function(superClass){function Polyline(){return this.link=bind(this.link,this),Polyline.__super__.constructor.apply(this,arguments)}return extend(Polyline,superClass),Polyline.prototype.link=function(scope,element,attrs,mapCtrl){return IPolyline.mapPromise(scope,mapCtrl).then(function(_this){return function(map){return(angular.isUndefined(scope.path)||null===scope.path||!_this.validatePath(scope.path))&&_this.$log.warn("polyline: no valid path attribute found"),new PolylineChildModel(scope,attrs,map,_this.DEFAULTS)}}(this))},Polyline}(IPolyline)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylines",["uiGmapIPolyline","$timeout","uiGmaparray-sync","uiGmapPolylinesParentModel","uiGmapPlural",function(IPolyline,$timeout,arraySync,PolylinesParentModel,Plural){var Polylines;return Polylines=function(superClass){function Polylines(){this.link=bind(this.link,this),Polylines.__super__.constructor.call(this),Plural.extend(this),this.$log.info(this)}return extend(Polylines,superClass),Polylines.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return(angular.isUndefined(scope.path)||null===scope.path)&&_this.$log.warn("polylines: no valid path attribute found"),scope.models||_this.$log.warn("polylines: no models found to create from"),Plural.link(scope,new PolylinesParentModel(scope,element,attrs,map,_this.DEFAULTS))}}(this))},Polylines}(IPolyline)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapRectangle",["uiGmapLogger","uiGmapGmapUtil","uiGmapIRectangle","uiGmapRectangleParentModel",function($log,GmapUtil,IRectangle,RectangleParentModel){return _.extend(IRectangle,{link:function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return new RectangleParentModel(scope,element,attrs,map)}}(this))}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindow",["uiGmapIWindow","uiGmapGmapUtil","uiGmapWindowChildModel","uiGmapLodash","uiGmapLogger",function(IWindow,GmapUtil,WindowChildModel,uiGmapLodash,$log){var Window;return Window=function(superClass){function Window(){this.link=bind(this.link,this),Window.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',$log.debug(this),this.childWindows=[]}return extend(Window,superClass),Window.include(GmapUtil),Window.prototype.link=function(scope,element,attrs,ctrls){var markerCtrl,markerScope;return markerCtrl=ctrls.length>1&&null!=ctrls[1]?ctrls[1]:void 0,markerScope=null!=markerCtrl?markerCtrl.getScope():void 0,this.mapPromise=IWindow.mapPromise(scope,ctrls[0]),this.mapPromise.then(function(_this){return function(mapCtrl){var isIconVisibleOnClick;return isIconVisibleOnClick=!0,angular.isDefined(attrs.isiconvisibleonclick)&&(isIconVisibleOnClick=scope.isIconVisibleOnClick),markerCtrl?markerScope.deferred.promise.then(function(gMarker){return _this.init(scope,element,isIconVisibleOnClick,mapCtrl,markerScope)}):void _this.init(scope,element,isIconVisibleOnClick,mapCtrl)}}(this))},Window.prototype.init=function(scope,element,isIconVisibleOnClick,mapCtrl,markerScope){var childWindow,defaults,gMarker,hasScopeCoords,opts;return defaults=null!=scope.options?scope.options:{},hasScopeCoords=null!=scope&&this.validateCoords(scope.coords),null!=(null!=markerScope?markerScope.getGMarker:void 0)&&(gMarker=markerScope.getGMarker()),opts=hasScopeCoords?this.createWindowOptions(gMarker,scope,element.html(),defaults):defaults,null!=mapCtrl&&(childWindow=new WindowChildModel({},scope,opts,isIconVisibleOnClick,mapCtrl,markerScope,element),this.childWindows.push(childWindow),scope.$on("$destroy",function(_this){return function(){return _this.childWindows=uiGmapLodash.withoutObjects(_this.childWindows,[childWindow],function(child1,child2){return child1.scope.$id===child2.scope.$id}),_this.childWindows.length=0}}(this))),null!=scope.control&&(scope.control.getGWindows=function(_this){return function(){return _this.childWindows.map(function(child){return child.gObject})}}(this),scope.control.getChildWindows=function(_this){return function(){return _this.childWindows}}(this),scope.control.getPlurals=scope.control.getChildWindows,scope.control.showWindow=function(_this){return function(){return _this.childWindows.map(function(child){return child.showWindow()})}}(this),scope.control.hideWindow=function(_this){return function(){return _this.childWindows.map(function(child){return child.hideWindow()})}}(this)),null!=this.onChildCreation&&null!=childWindow?this.onChildCreation(childWindow):void 0},Window}(IWindow)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindows",["uiGmapIWindow","uiGmapPlural","uiGmapWindowsParentModel","uiGmapPromise","uiGmapLogger",function(IWindow,Plural,WindowsParentModel,uiGmapPromise,$log){var Windows;return Windows=function(superClass){function Windows(){this.init=bind(this.init,this),this.link=bind(this.link,this),Windows.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarkers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',Plural.extend(this),$log.debug(this)}return extend(Windows,superClass),Windows.prototype.link=function(scope,element,attrs,ctrls){var mapScope,markerCtrl,markerScope;return mapScope=ctrls[0].getScope(),markerCtrl=ctrls.length>1&&null!=ctrls[1]?ctrls[1]:void 0,markerScope=null!=markerCtrl?markerCtrl.getScope():void 0,mapScope.deferred.promise.then(function(_this){return function(map){var promise,ref;return promise=(null!=markerScope&&null!=(ref=markerScope.deferred)?ref.promise:void 0)||uiGmapPromise.resolve(),promise.then(function(){var pieces,ref1;return pieces=null!=(ref1=_this.parentModel)?ref1.existingPieces:void 0,pieces?pieces.then(function(){return _this.init(scope,element,attrs,ctrls,map,markerScope)}):_this.init(scope,element,attrs,ctrls,map,markerScope)})}}(this))},Windows.prototype.init=function(scope,element,attrs,ctrls,map,additionalScope){var parentModel;return parentModel=new WindowsParentModel(scope,element,attrs,ctrls,map,additionalScope),Plural.link(scope,parentModel),null!=scope.control?(scope.control.getGWindows=function(_this){return function(){return parentModel.plurals.map(function(child){return child.gObject})}}(this),scope.control.getChildWindows=function(_this){return function(){return parentModel.plurals}}(this)):void 0},Windows}(IWindow)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapGoogleMap",["uiGmapMap",function(Map){return new Map}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapMarker",["$timeout","uiGmapMarker",function($timeout,Marker){return new Marker($timeout)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapMarkers",["$timeout","uiGmapMarkers",function($timeout,Markers){return new Markers($timeout)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolygon",["uiGmapPolygon",function(Polygon){return new Polygon}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapCircle",["uiGmapCircle",function(Circle){return Circle}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolyline",["uiGmapPolyline",function(Polyline){return new Polyline}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolylines",["uiGmapPolylines",function(Polylines){return new Polylines}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapRectangle",["uiGmapLogger","uiGmapRectangle",function($log,Rectangle){return Rectangle}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapWindow",["$timeout","$compile","$http","$templateCache","uiGmapWindow",function($timeout,$compile,$http,$templateCache,Window){return new Window($timeout,$compile,$http,$templateCache)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapWindows",["$timeout","$compile","$http","$templateCache","$interpolate","uiGmapWindows",function($timeout,$compile,$http,$templateCache,$interpolate,Windows){return new Windows($timeout,$compile,$http,$templateCache,$interpolate)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps").directive("uiGmapLayer",["$timeout","uiGmapLogger","uiGmapLayerParentModel",function($timeout,Logger,LayerParentModel){var Layer;return new(Layer=function(){function Layer(){this.link=bind(this.link,this),this.$log=Logger,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-layer' ng-transclude></span>",this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return Layer.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return null!=scope.onCreated?new LayerParentModel(scope,element,attrs,map,scope.onCreated):new LayerParentModel(scope,element,attrs,map)}}(this))},Layer}())}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapMapControl",["uiGmapControl",function(Control){return new Control}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapDragZoom",["uiGmapDragZoom",function(DragZoom){return DragZoom}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapDrawingManager",["uiGmapDrawingManager",function(DrawingManager){return DrawingManager}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapFreeDrawPolygons",["uiGmapApiFreeDrawPolygons",function(FreeDrawPolygons){return new FreeDrawPolygons}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps").directive("uiGmapMapType",["$timeout","uiGmapLogger","uiGmapMapTypeParentModel",function($timeout,Logger,MapTypeParentModel){var MapType;return new(MapType=function(){function MapType(){this.link=bind(this.link,this),this.$log=Logger,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",options:"=options",refresh:"=refresh",id:"@"}}return MapType.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return new MapTypeParentModel(scope,element,attrs,map)}}(this))},MapType}())}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolygons",["uiGmapPolygons",function(Polygons){return new Polygons}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps").directive("uiGmapSearchBox",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapSearchBoxParentModel","$http","$templateCache","$compile",function(GoogleMapApi,Logger,SearchBoxParentModel,$http,$templateCache,$compile){var SearchBox;return new(SearchBox=function(){function SearchBox(){this.link=bind(this.link,this),this.$log=Logger,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-search' ng-transclude></span>",this.replace=!0,this.scope={template:"=template",events:"=events",position:"=?position",options:"=?options",parentdiv:"=?parentdiv",ngModel:"=?"}}return SearchBox.prototype.require="ngModel",SearchBox.prototype.link=function(scope,element,attrs,mapCtrl){return GoogleMapApi.then(function(_this){return function(maps){return $http.get(scope.template,{cache:$templateCache}).success(function(template){return angular.isUndefined(scope.events)?void _this.$log.error("searchBox: the events property is required"):mapCtrl.getScope().deferred.promise.then(function(map){var ctrlPosition;return ctrlPosition=angular.isDefined(scope.position)?scope.position.toUpperCase().replace(/-/g,"_"):"TOP_LEFT",maps.ControlPosition[ctrlPosition]?new SearchBoxParentModel(scope,element,attrs,map,ctrlPosition,$compile(template)(scope)):void _this.$log.error("searchBox: invalid position property")})})}}(this))},SearchBox}())}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapShow",["$animate","uiGmapLogger",function($animate,$log){return{scope:{uiGmapShow:"=",uiGmapAfterShow:"&",uiGmapAfterHide:"&"},link:function(scope,element){var angular_post_1_3_handle,angular_pre_1_3_handle,handle;return angular_post_1_3_handle=function(animateAction,cb){return $animate[animateAction](element,"ng-hide").then(function(){return cb()})},angular_pre_1_3_handle=function(animateAction,cb){return $animate[animateAction](element,"ng-hide",cb)},handle=function(animateAction,cb){return angular.version.major>1?$log.error("uiGmapShow is not supported for Angular Major greater than 1.\nYour Major is "+angular.version.major+'"'):1===angular.version.major&&angular.version.minor<3?angular_pre_1_3_handle(animateAction,cb):angular_post_1_3_handle(animateAction,cb)},scope.$watch("uiGmapShow",function(show){return show&&handle("removeClass",scope.uiGmapAfterShow),show?void 0:handle("addClass",scope.uiGmapAfterHide)})}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapStreetViewPanorama",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper",function(GoogleMapApi,$log,GmapUtil,EventsHelper){var name;return name="uiGmapStreetViewPanorama",{restrict:"EMA",template:'<div class="angular-google-map-street-view-panorama"></div>',replace:!0,scope:{focalcoord:"=",radius:"=?",events:"=?",options:"=?",control:"=?",povoptions:"=?",imagestatus:"="},link:function(scope,element,attrs){return GoogleMapApi.then(function(_this){return function(maps){var clean,create,didCreateOptionsFromDirective,firstTime,handleSettings,listeners,opts,pano,povOpts,sv;return pano=void 0,sv=void 0,didCreateOptionsFromDirective=!1,listeners=void 0,opts=null,povOpts=null,clean=function(){return EventsHelper.removeEvents(listeners),null!=pano&&(pano.unbind("position"),pano.setVisible(!1)),null!=sv?(null!=(null!=sv?sv.setVisible:void 0)&&sv.setVisible(!1),sv=void 0):void 0},handleSettings=function(perspectivePoint,focalPoint){var heading;return heading=google.maps.geometry.spherical.computeHeading(perspectivePoint,focalPoint),didCreateOptionsFromDirective=!0,scope.radius=scope.radius||50,povOpts=angular.extend({heading:heading,zoom:1,pitch:0},scope.povoptions||{}),opts=opts=angular.extend({navigationControl:!1,addressControl:!1,linksControl:!1,position:perspectivePoint,pov:povOpts,visible:!0},scope.options||{}),didCreateOptionsFromDirective=!1},create=function(){var focalPoint;return scope.focalcoord?scope.radius?(clean(),null==sv&&(sv=new google.maps.StreetViewService),scope.events&&(listeners=EventsHelper.setEvents(sv,scope,scope)),focalPoint=GmapUtil.getCoords(scope.focalcoord),sv.getPanoramaByLocation(focalPoint,scope.radius,function(streetViewPanoramaData,status){var ele,perspectivePoint,ref;return null!=scope.imagestatus&&(scope.imagestatus=status),null!=(null!=(ref=scope.events)?ref.image_status_changed:void 0)&&scope.events.image_status_changed(sv,"image_status_changed",scope,status),"OK"===status?(perspectivePoint=streetViewPanoramaData.location.latLng,handleSettings(perspectivePoint,focalPoint),ele=element[0],pano=new google.maps.StreetViewPanorama(ele,opts)):void 0})):void $log.error(name+": needs a radius to set the camera view from its focal target."):void $log.error(name+": focalCoord needs to be defined")},null!=scope.control&&(scope.control.getOptions=function(){return opts},scope.control.getPovOptions=function(){return povOpts},scope.control.getGObject=function(){return sv},scope.control.getGPano=function(){return pano}),scope.$watch("options",function(newValue,oldValue){return newValue===oldValue||newValue===opts||didCreateOptionsFromDirective?void 0:create()}),firstTime=!0,scope.$watch("focalcoord",function(newValue,oldValue){return newValue===oldValue&&!firstTime||null==newValue?void 0:(firstTime=!1,create())}),scope.$on("$destroy",function(){return clean()})}}(this))}}}])}.call(this),angular.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",function(){function UUID(){}return UUID.generate=function(){var a=UUID._gri,b=UUID._ha;return b(a(32),8)+"-"+b(a(16),4)+"-"+b(16384|a(12),4)+"-"+b(32768|a(14),4)+"-"+b(a(48),12)},UUID._gri=function(a){return 0>a?NaN:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):NaN},UUID._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e="0";d>0;d>>>=1,e+=e)1&d&&(c=e+c);return c},UUID}),angular.module("uiGmapgoogle-maps.wrapped").service("uiGmapGoogleMapsUtilV3",function(){return{init:_.once(function(){function InfoBox(opt_opts){opt_opts=opt_opts||{},google.maps.OverlayView.apply(this,arguments),this.content_=opt_opts.content||"",this.disableAutoPan_=opt_opts.disableAutoPan||!1,this.maxWidth_=opt_opts.maxWidth||0,this.pixelOffset_=opt_opts.pixelOffset||new google.maps.Size(0,0),this.position_=opt_opts.position||new google.maps.LatLng(0,0),this.zIndex_=opt_opts.zIndex||null,this.boxClass_=opt_opts.boxClass||"infoBox",this.boxStyle_=opt_opts.boxStyle||{},this.closeBoxMargin_=opt_opts.closeBoxMargin||"2px",this.closeBoxURL_=opt_opts.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",""===opt_opts.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=opt_opts.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof opt_opts.visible&&("undefined"==typeof opt_opts.isHidden?opt_opts.visible=!0:opt_opts.visible=!opt_opts.isHidden),this.isHidden_=!opt_opts.visible,this.alignBottom_=opt_opts.alignBottom||!1,this.pane_=opt_opts.pane||"floatPane",this.enableEventPropagation_=opt_opts.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function ClusterIcon(cluster,styles){cluster.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=cluster,this.className_=cluster.getMarkerClusterer().getClusterClass(),this.styles_=styles,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(cluster.getMap())}function Cluster(mc){this.markerClusterer_=mc,this.map_=mc.getMap(),this.gridSize_=mc.getGridSize(),this.minClusterSize_=mc.getMinimumClusterSize(),this.averageCenter_=mc.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,mc.getStyles())}function MarkerClusterer(map,opt_markers,opt_options){this.extend(MarkerClusterer,google.maps.OverlayView),opt_markers=opt_markers||[],opt_options=opt_options||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=opt_options.gridSize||60,this.minClusterSize_=opt_options.minimumClusterSize||2,this.maxZoom_=opt_options.maxZoom||null,this.styles_=opt_options.styles||[],this.title_=opt_options.title||"",this.zoomOnClick_=!0,opt_options.zoomOnClick!==undefined&&(this.zoomOnClick_=opt_options.zoomOnClick),this.averageCenter_=!1,opt_options.averageCenter!==undefined&&(this.averageCenter_=opt_options.averageCenter),this.ignoreHidden_=!1,opt_options.ignoreHidden!==undefined&&(this.ignoreHidden_=opt_options.ignoreHidden),this.enableRetinaIcons_=!1,opt_options.enableRetinaIcons!==undefined&&(this.enableRetinaIcons_=opt_options.enableRetinaIcons),this.imagePath_=opt_options.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=opt_options.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=opt_options.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=opt_options.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=opt_options.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=opt_options.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=opt_options.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(opt_markers,!0),this.setMap(map)}function inherits(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype,childCtor.superClass_=parentCtor.prototype,childCtor.prototype=new tempCtor,childCtor.prototype.constructor=childCtor}function MarkerLabel_(marker,crossURL,handCursorURL){this.marker_=marker,this.handCursorURL_=marker.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(crossURL)}function MarkerWithLabel(opt_options){opt_options=opt_options||{},opt_options.labelContent=opt_options.labelContent||"",opt_options.labelAnchor=opt_options.labelAnchor||new google.maps.Point(0,0),opt_options.labelClass=opt_options.labelClass||"markerLabels",opt_options.labelStyle=opt_options.labelStyle||{},opt_options.labelInBackground=opt_options.labelInBackground||!1,"undefined"==typeof opt_options.labelVisible&&(opt_options.labelVisible=!0),"undefined"==typeof opt_options.raiseOnDrag&&(opt_options.raiseOnDrag=!0),"undefined"==typeof opt_options.clickable&&(opt_options.clickable=!0),"undefined"==typeof opt_options.draggable&&(opt_options.draggable=!1),"undefined"==typeof opt_options.optimized&&(opt_options.optimized=!1),opt_options.crossImage=opt_options.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",opt_options.handCursor=opt_options.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",opt_options.optimized=!1,this.label=new MarkerLabel_(this,opt_options.crossImage,opt_options.handCursor),google.maps.Marker.apply(this,arguments)}InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var i,events,bw,me=this,cancelHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},ignoreHandler=function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),me.enableEventPropagation_||cancelHandler(e)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(bw=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-bw.left-bw.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],events=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],i=0;i<events.length;i++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,events[i],cancelHandler));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",ignoreHandler),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var img="";return""!==this.closeBoxURL_&&(img="<img",img+=" src='"+this.closeBoxURL_+"'",img+=" align=right",img+=" style='",img+=" position: relative;",img+=" cursor: pointer;",img+=" margin: "+this.closeBoxMargin_+";",img+="'>"),img},InfoBox.prototype.addClickHandler_=function(){var closeBox;""!==this.closeBoxURL_?(closeBox=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(closeBox,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var me=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(me,"closeclick"),me.close()}},InfoBox.prototype.panBox_=function(disablePan){var map,bounds,xOffset=0,yOffset=0;if(!disablePan&&(map=this.getMap(),map instanceof google.maps.Map)){map.getBounds().contains(this.position_)||map.setCenter(this.position_),
bounds=map.getBounds();var mapDiv=map.getDiv(),mapWidth=mapDiv.offsetWidth,mapHeight=mapDiv.offsetHeight,iwOffsetX=this.pixelOffset_.width,iwOffsetY=this.pixelOffset_.height,iwWidth=this.div_.offsetWidth,iwHeight=this.div_.offsetHeight,padX=this.infoBoxClearance_.width,padY=this.infoBoxClearance_.height,pixPosition=this.getProjection().fromLatLngToContainerPixel(this.position_);if(pixPosition.x<-iwOffsetX+padX?xOffset=pixPosition.x+iwOffsetX-padX:pixPosition.x+iwWidth+iwOffsetX+padX>mapWidth&&(xOffset=pixPosition.x+iwWidth+iwOffsetX+padX-mapWidth),this.alignBottom_?pixPosition.y<-iwOffsetY+padY+iwHeight?yOffset=pixPosition.y+iwOffsetY-padY-iwHeight:pixPosition.y+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwOffsetY+padY-mapHeight):pixPosition.y<-iwOffsetY+padY?yOffset=pixPosition.y+iwOffsetY-padY:pixPosition.y+iwHeight+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwHeight+iwOffsetY+padY-mapHeight),0!==xOffset||0!==yOffset){map.getCenter();map.panBy(xOffset,yOffset)}}},InfoBox.prototype.setBoxStyle_=function(){var i,boxStyle;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",boxStyle=this.boxStyle_;for(i in boxStyle)boxStyle.hasOwnProperty(i)&&(this.div_.style[i]=boxStyle[i]);this.div_.style.WebkitTransform="translateZ(0)","undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var computedStyle,bw={top:0,bottom:0,left:0,right:0},box=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(computedStyle=box.ownerDocument.defaultView.getComputedStyle(box,""),computedStyle&&(bw.top=parseInt(computedStyle.borderTopWidth,10)||0,bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0,bw.left=parseInt(computedStyle.borderLeftWidth,10)||0,bw.right=parseInt(computedStyle.borderRightWidth,10)||0)):document.documentElement.currentStyle&&box.currentStyle&&(bw.top=parseInt(box.currentStyle.borderTopWidth,10)||0,bw.bottom=parseInt(box.currentStyle.borderBottomWidth,10)||0,bw.left=parseInt(box.currentStyle.borderLeftWidth,10)||0,bw.right=parseInt(box.currentStyle.borderRightWidth,10)||0),bw},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var pixPosition=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=pixPosition.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(pixPosition.y+this.pixelOffset_.height)+"px":this.div_.style.top=pixPosition.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(opt_opts){"undefined"!=typeof opt_opts.boxClass&&(this.boxClass_=opt_opts.boxClass,this.setBoxStyle_()),"undefined"!=typeof opt_opts.boxStyle&&(this.boxStyle_=opt_opts.boxStyle,this.setBoxStyle_()),"undefined"!=typeof opt_opts.content&&this.setContent(opt_opts.content),"undefined"!=typeof opt_opts.disableAutoPan&&(this.disableAutoPan_=opt_opts.disableAutoPan),"undefined"!=typeof opt_opts.maxWidth&&(this.maxWidth_=opt_opts.maxWidth),"undefined"!=typeof opt_opts.pixelOffset&&(this.pixelOffset_=opt_opts.pixelOffset),"undefined"!=typeof opt_opts.alignBottom&&(this.alignBottom_=opt_opts.alignBottom),"undefined"!=typeof opt_opts.position&&this.setPosition(opt_opts.position),"undefined"!=typeof opt_opts.zIndex&&this.setZIndex(opt_opts.zIndex),"undefined"!=typeof opt_opts.closeBoxMargin&&(this.closeBoxMargin_=opt_opts.closeBoxMargin),"undefined"!=typeof opt_opts.closeBoxURL&&(this.closeBoxURL_=opt_opts.closeBoxURL),"undefined"!=typeof opt_opts.infoBoxClearance&&(this.infoBoxClearance_=opt_opts.infoBoxClearance),"undefined"!=typeof opt_opts.isHidden&&(this.isHidden_=opt_opts.isHidden),"undefined"!=typeof opt_opts.visible&&(this.isHidden_=!opt_opts.visible),"undefined"!=typeof opt_opts.enableEventPropagation&&(this.enableEventPropagation_=opt_opts.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(content){this.content_=content,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof content.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+content:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(content)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof content.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+content:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(content))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(latlng){this.position_=latlng,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(index){this.zIndex_=index,this.div_&&(this.div_.style.zIndex=index),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(isVisible){this.isHidden_=!isVisible,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){var isVisible;return isVisible="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(map,anchor){var me=this;anchor&&(this.position_=anchor.getPosition(),this.moveListener_=google.maps.event.addListener(anchor,"position_changed",function(){me.setPosition(this.getPosition())})),this.setMap(map),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var i;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(i=0;i<this.eventListeners_.length;i++)google.maps.event.removeListener(this.eventListeners_[i]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},function(){function DragZoom(map,opt_zoomOpts){var me=this,ov=new google.maps.OverlayView;ov.onAdd=function(){me.init_(map,opt_zoomOpts)},ov.draw=function(){},ov.onRemove=function(){},ov.setMap(map),this.prjov_=ov}var toPixels=function(widthValue){var px;switch(widthValue){case"thin":px="2px";break;case"medium":px="4px";break;case"thick":px="6px";break;default:px=widthValue}return px},getBorderWidths=function(h){var computedStyle,bw={};if(document.defaultView&&document.defaultView.getComputedStyle){if(computedStyle=h.ownerDocument.defaultView.getComputedStyle(h,""))return bw.top=parseInt(computedStyle.borderTopWidth,10)||0,bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0,bw.left=parseInt(computedStyle.borderLeftWidth,10)||0,bw.right=parseInt(computedStyle.borderRightWidth,10)||0,bw}else if(document.documentElement.currentStyle&&h.currentStyle)return bw.top=parseInt(toPixels(h.currentStyle.borderTopWidth),10)||0,bw.bottom=parseInt(toPixels(h.currentStyle.borderBottomWidth),10)||0,bw.left=parseInt(toPixels(h.currentStyle.borderLeftWidth),10)||0,bw.right=parseInt(toPixels(h.currentStyle.borderRightWidth),10)||0,bw;return bw.top=parseInt(h.style["border-top-width"],10)||0,bw.bottom=parseInt(h.style["border-bottom-width"],10)||0,bw.left=parseInt(h.style["border-left-width"],10)||0,bw.right=parseInt(h.style["border-right-width"],10)||0,bw},scroll={x:0,y:0},getScrollValue=function(e){scroll.x="undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,scroll.y="undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};getScrollValue();var getMousePosition=function(e){var posX=0,posY=0;return e=e||window.event,"undefined"!=typeof e.pageX?(posX=e.pageX,posY=e.pageY):"undefined"!=typeof e.clientX&&(posX=e.clientX+scroll.x,posY=e.clientY+scroll.y),{left:posX,top:posY}},getElementPosition=function(h){for(var posX=h.offsetLeft,posY=h.offsetTop,parent=h.offsetParent;null!==parent;){parent!==document.body&&parent!==document.documentElement&&(posX-=parent.scrollLeft,posY-=parent.scrollTop);var m=parent,moffx=m.offsetLeft,moffy=m.offsetTop;if(!moffx&&!moffy&&window.getComputedStyle){var matrix=document.defaultView.getComputedStyle(m,null).MozTransform||document.defaultView.getComputedStyle(m,null).WebkitTransform;if(matrix&&"string"==typeof matrix){var parms=matrix.split(",");moffx+=parseInt(parms[4],10)||0,moffy+=parseInt(parms[5],10)||0}}posX+=moffx,posY+=moffy,parent=parent.offsetParent}return{left:posX,top:posY}},setVals=function(obj,vals){if(obj&&vals)for(var x in vals)vals.hasOwnProperty(x)&&(obj[x]=vals[x]);return obj},setOpacity=function(h,op){"undefined"!=typeof op&&(h.style.opacity=op),"undefined"!=typeof h.style.opacity&&""!==h.style.opacity&&(h.style.filter="alpha(opacity="+100*h.style.opacity+")")};DragZoom.prototype.init_=function(map,opt_zoomOpts){var i,me=this;for(this.map_=map,opt_zoomOpts=opt_zoomOpts||{},this.key_=opt_zoomOpts.key||"shift",this.key_=this.key_.toLowerCase(),this.borderWidths_=getBorderWidths(this.map_.getDiv()),this.veilDiv_=[],i=0;4>i;i++)this.veilDiv_[i]=document.createElement("div"),this.veilDiv_[i].onselectstart=function(){return!1},setVals(this.veilDiv_[i].style,{backgroundColor:"gray",opacity:.25,cursor:"crosshair"}),setVals(this.veilDiv_[i].style,opt_zoomOpts.paneStyle),setVals(this.veilDiv_[i].style,opt_zoomOpts.veilStyle),setVals(this.veilDiv_[i].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[i].style.MozUserSelect="none"),setOpacity(this.veilDiv_[i]),"transparent"===this.veilDiv_[i].style.backgroundColor&&(this.veilDiv_[i].style.backgroundColor="white",setOpacity(this.veilDiv_[i],0)),this.map_.getDiv().appendChild(this.veilDiv_[i]);this.noZoom_=opt_zoomOpts.noZoom||!1,this.visualEnabled_=opt_zoomOpts.visualEnabled||!1,this.visualClass_=opt_zoomOpts.visualClass||"",this.visualPosition_=opt_zoomOpts.visualPosition||google.maps.ControlPosition.LEFT_TOP,this.visualPositionOffset_=opt_zoomOpts.visualPositionOffset||new google.maps.Size(35,0),this.visualPositionIndex_=opt_zoomOpts.visualPositionIndex||null,this.visualSprite_=opt_zoomOpts.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png",this.visualSize_=opt_zoomOpts.visualSize||new google.maps.Size(20,20),this.visualTips_=opt_zoomOpts.visualTips||{},this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode",this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode",this.boxDiv_=document.createElement("div"),setVals(this.boxDiv_.style,{border:"4px solid #736AFF"}),setVals(this.boxDiv_.style,opt_zoomOpts.boxStyle),setVals(this.boxDiv_.style,{position:"absolute",display:"none"}),setOpacity(this.boxDiv_),this.map_.getDiv().appendChild(this.boxDiv_),this.boxBorderWidths_=getBorderWidths(this.boxDiv_),this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(e){me.onKeyDown_(e)}),google.maps.event.addDomListener(document,"keyup",function(e){me.onKeyUp_(e)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(document,"mousedown",function(e){me.onMouseDownDocument_(e)}),google.maps.event.addDomListener(document,"mousemove",function(e){me.onMouseMove_(e)}),google.maps.event.addDomListener(document,"mouseup",function(e){me.onMouseUp_(e)}),google.maps.event.addDomListener(window,"scroll",getScrollValue)],this.hotKeyDown_=!1,this.mouseDown_=!1,this.dragging_=!1,this.startPt_=null,this.endPt_=null,this.mapWidth_=null,this.mapHeight_=null,this.mousePosn_=null,this.mapPosn_=null,this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)},DragZoom.prototype.initControl_=function(offset){var control,image,me=this;return control=document.createElement("div"),control.className=this.visualClass_,control.style.position="relative",control.style.overflow="hidden",control.style.height=this.visualSize_.height+"px",control.style.width=this.visualSize_.width+"px",control.title=this.visualTips_.off,image=document.createElement("img"),image.src=this.visualSprite_,image.style.position="absolute",image.style.left=-(2*this.visualSize_.width)+"px",image.style.top="0px",control.appendChild(image),control.onclick=function(e){me.hotKeyDown_=!me.hotKeyDown_,me.hotKeyDown_?(me.buttonDiv_.firstChild.style.left=-(0*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.on,me.activatedByControl_=!0,google.maps.event.trigger(me,"activate")):(me.buttonDiv_.firstChild.style.left=-(2*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.off,google.maps.event.trigger(me,"deactivate")),me.onMouseMove_(e)},control.onmouseover=function(){me.buttonDiv_.firstChild.style.left=-(1*me.visualSize_.width)+"px"},control.onmouseout=function(){me.hotKeyDown_?(me.buttonDiv_.firstChild.style.left=-(0*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.on):(me.buttonDiv_.firstChild.style.left=-(2*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.off)},control.ondragstart=function(){return!1},setVals(control.style,{cursor:"pointer",marginTop:offset.height+"px",marginLeft:offset.width+"px"}),control},DragZoom.prototype.isHotKeyDown_=function(e){var isHot;if(e=e||window.event,isHot=e.shiftKey&&"shift"===this.key_||e.altKey&&"alt"===this.key_||e.ctrlKey&&"ctrl"===this.key_,!isHot)switch(e.keyCode){case 16:"shift"===this.key_&&(isHot=!0);break;case 17:"ctrl"===this.key_&&(isHot=!0);break;case 18:"alt"===this.key_&&(isHot=!0)}return isHot},DragZoom.prototype.isMouseOnMap_=function(){var mousePosn=this.mousePosn_;if(mousePosn){var mapPosn=this.mapPosn_,mapDiv=this.map_.getDiv();return mousePosn.left>mapPosn.left&&mousePosn.left<mapPosn.left+mapDiv.offsetWidth&&mousePosn.top>mapPosn.top&&mousePosn.top<mapPosn.top+mapDiv.offsetHeight}return!1},DragZoom.prototype.setVeilVisibility_=function(){var i;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var mapDiv=this.map_.getDiv();if(this.mapWidth_=mapDiv.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right),this.mapHeight_=mapDiv.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom),this.activatedByControl_){var left=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width,top=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height,width=this.visualSize_.width,height=this.visualSize_.height;for(this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=left+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=left+width+"px",this.veilDiv_[1].style.width=this.mapWidth_-(left+width)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=left+"px",this.veilDiv_[2].style.width=width+"px",this.veilDiv_[2].style.height=top+"px",this.veilDiv_[3].style.top=top+height+"px",this.veilDiv_[3].style.left=left+"px",this.veilDiv_[3].style.width=width+"px",this.veilDiv_[3].style.height=this.mapHeight_-(top+height)+"px",i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="block"}else{for(this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.width=this.mapWidth_+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",i=1;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.width="0px",this.veilDiv_[i].style.height="0px";for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="block"}}else for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="none"},DragZoom.prototype.onKeyDown_=function(e){this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(e)&&(this.mapPosn_=getElementPosition(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))},DragZoom.prototype.getMousePoint_=function(e){var mousePosn=getMousePosition(e),p=new google.maps.Point;return p.x=mousePosn.left-this.mapPosn_.left-this.borderWidths_.left,p.y=mousePosn.top-this.mapPosn_.top-this.borderWidths_.top,p.x=Math.min(p.x,this.mapWidth_),p.y=Math.min(p.y,this.mapHeight_),p.x=Math.max(p.x,0),p.y=Math.max(p.y,0),p},DragZoom.prototype.onMouseDown_=function(e){if(this.map_&&this.hotKeyDown_){this.mapPosn_=getElementPosition(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(e),this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var prj=this.prjov_.getProjection(),latlng=prj.fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",latlng)}},DragZoom.prototype.onMouseDownDocument_=function(e){this.mouseDown_=!0},DragZoom.prototype.onMouseMove_=function(e){if(this.mousePosn_=getMousePosition(e),this.dragging_){this.endPt_=this.getMousePoint_(e);var left=Math.min(this.startPt_.x,this.endPt_.x),top=Math.min(this.startPt_.y,this.endPt_.y),width=Math.abs(this.startPt_.x-this.endPt_.x),height=Math.abs(this.startPt_.y-this.endPt_.y),boxWidth=Math.max(0,width-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),boxHeight=Math.max(0,height-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=left+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=left+width+"px",this.veilDiv_[1].style.width=this.mapWidth_-(left+width)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=left+"px",this.veilDiv_[2].style.width=width+"px",this.veilDiv_[2].style.height=top+"px",this.veilDiv_[3].style.top=top+height+"px",this.veilDiv_[3].style.left=left+"px",this.veilDiv_[3].style.width=width+"px",this.veilDiv_[3].style.height=this.mapHeight_-(top+height)+"px",this.boxDiv_.style.top=top+"px",this.boxDiv_.style.left=left+"px",this.boxDiv_.style.width=boxWidth+"px",this.boxDiv_.style.height=boxHeight+"px",this.boxDiv_.style.display="block",google.maps.event.trigger(this,"drag",new google.maps.Point(left,top+height),new google.maps.Point(left+width,top),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=getElementPosition(this.map_.getDiv()),this.setVeilVisibility_())},DragZoom.prototype.onMouseUp_=function(e){var z,me=this;if(this.mouseDown_=!1,this.dragging_){if(this.getMousePoint_(e).x===this.startPt_.x&&this.getMousePoint_(e).y===this.startPt_.y)return void this.onKeyUp_(e);var left=Math.min(this.startPt_.x,this.endPt_.x),top=Math.min(this.startPt_.y,this.endPt_.y),width=Math.abs(this.startPt_.x-this.endPt_.x),height=Math.abs(this.startPt_.y-this.endPt_.y),kGoogleCenteringBug=!0;kGoogleCenteringBug&&(left+=this.borderWidths_.left,top+=this.borderWidths_.top);var prj=this.prjov_.getProjection(),sw=prj.fromContainerPixelToLatLng(new google.maps.Point(left,top+height)),ne=prj.fromContainerPixelToLatLng(new google.maps.Point(left+width,top)),bnds=new google.maps.LatLngBounds(sw,ne);if(this.noZoom_)this.boxDiv_.style.display="none";else{z=this.map_.getZoom(),this.map_.fitBounds(bnds),this.map_.getZoom()<z&&this.map_.setZoom(z);var swPt=prj.fromLatLngToContainerPixel(sw),nePt=prj.fromLatLngToContainerPixel(ne);kGoogleCenteringBug&&(swPt.x-=this.borderWidths_.left,swPt.y-=this.borderWidths_.top,nePt.x-=this.borderWidths_.left,nePt.y-=this.borderWidths_.top),this.boxDiv_.style.left=swPt.x+"px",this.boxDiv_.style.top=nePt.y+"px",this.boxDiv_.style.width=Math.abs(nePt.x-swPt.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px",this.boxDiv_.style.height=Math.abs(nePt.y-swPt.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout(function(){me.boxDiv_.style.display="none"},1e3)}this.dragging_=!1,this.onMouseMove_(e),google.maps.event.trigger(this,"dragend",bnds),this.isHotKeyDown_(e)||this.onKeyUp_(e)}},DragZoom.prototype.onKeyUp_=function(e){var i,left,top,width,height,prj,sw,ne,bnds=null;if(this.map_&&this.hotKeyDown_){for(this.hotKeyDown_=!1,this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,left=Math.min(this.startPt_.x,this.endPt_.x),top=Math.min(this.startPt_.y,this.endPt_.y),width=Math.abs(this.startPt_.x-this.endPt_.x),height=Math.abs(this.startPt_.y-this.endPt_.y),prj=this.prjov_.getProjection(),sw=prj.fromContainerPixelToLatLng(new google.maps.Point(left,top+height)),ne=prj.fromContainerPixelToLatLng(new google.maps.Point(left+width,top)),bnds=new google.maps.LatLngBounds(sw,ne)),i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-(2*this.visualSize_.width)+"px",this.buttonDiv_.title=this.visualTips_.off,this.buttonDiv_.style.display=""),google.maps.event.trigger(this,"deactivate",bnds)}},google.maps.Map.prototype.enableKeyDragZoom=function(opt_zoomOpts){this.dragZoom_=new DragZoom(this,opt_zoomOpts)},google.maps.Map.prototype.disableKeyDragZoom=function(){var i,d=this.dragZoom_;if(d){for(i=0;i<d.listeners_.length;++i)google.maps.event.removeListener(d.listeners_[i]);for(this.getDiv().removeChild(d.boxDiv_),i=0;i<d.veilDiv_.length;i++)this.getDiv().removeChild(d.veilDiv_[i]);d.visualEnabled_&&this.controls[d.visualPosition_].removeAt(d.controlIndex_),d.prjov_.setMap(null),this.dragZoom_=null}},google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_},google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}}(),ClusterIcon.prototype.onAdd=function(){var cMouseDownInCluster,cDraggingMapByCluster,cClusterIcon=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){cDraggingMapByCluster=cMouseDownInCluster}),google.maps.event.addDomListener(this.div_,"mousedown",function(){cMouseDownInCluster=!0,cDraggingMapByCluster=!1}),google.maps.event.addDomListener(this.div_,"click",function(e){if(cMouseDownInCluster=!1,!cDraggingMapByCluster){var theBounds,mz,mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"click",cClusterIcon.cluster_),google.maps.event.trigger(mc,"clusterclick",cClusterIcon.cluster_),mc.getZoomOnClick()&&(mz=mc.getMaxZoom(),theBounds=cClusterIcon.cluster_.getBounds(),mc.getMap().fitBounds(theBounds),setTimeout(function(){mc.getMap().fitBounds(theBounds),null!==mz&&mc.getMap().getZoom()>mz&&mc.getMap().setZoom(mz+1)},100)),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"mouseover",cClusterIcon.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"mouseout",cClusterIcon.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.top=pos.y+"px",this.div_.style.left=pos.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var img="",bp=this.backgroundPosition_.split(" "),spriteH=parseInt(bp[0].trim(),10),spriteV=parseInt(bp[1].trim(),10),pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos),img="<img src='"+this.url_+"' style='position: absolute; top: "+spriteV+"px; left: "+spriteH+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(img+="clip: rect("+-1*spriteV+"px, "+(-1*spriteH+this.width_)+"px, "+(-1*spriteV+this.height_)+"px, "+-1*spriteH+"px);"),img+="'>",this.div_.innerHTML=img+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(sums){this.sums_=sums;var index=Math.max(0,sums.index-1);index=Math.min(this.styles_.length-1,index);var style=this.styles_[index];this.url_=style.url,this.height_=style.height,this.width_=style.width,this.anchorText_=style.anchorText||[0,0],this.anchorIcon_=style.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=style.textColor||"black",this.textSize_=style.textSize||11,this.textDecoration_=style.textDecoration||"none",this.fontWeight_=style.fontWeight||"bold",this.fontStyle_=style.fontStyle||"normal",this.fontFamily_=style.fontFamily||"Arial,sans-serif",this.backgroundPosition_=style.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(center){this.center_=center},ClusterIcon.prototype.createCss=function(pos){var style=[];return style.push("cursor: pointer;"),style.push("position: absolute; top: "+pos.y+"px; left: "+pos.x+"px;"),style.push("width: "+this.width_+"px; height: "+this.height_+"px;"),style.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(latlng){var pos=this.getProjection().fromLatLngToDivPixel(latlng);return pos.x-=this.anchorIcon_[1],pos.y-=this.anchorIcon_[0],pos.x=parseInt(pos.x,10),pos.y=parseInt(pos.y,10),pos},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var i,bounds=new google.maps.LatLngBounds(this.center_,this.center_),markers=this.getMarkers();for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());return bounds},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(marker){var i,mCount,mz;if(this.isMarkerAlreadyAdded_(marker))return!1;if(this.center_){if(this.averageCenter_){var l=this.markers_.length+1,lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l,lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng),this.calculateBounds_()}}else this.center_=marker.getPosition(),this.calculateBounds_();if(marker.isAdded=!0,this.markers_.push(marker),mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom(),null!==mz&&this.map_.getZoom()>mz)marker.getMap()!==this.map_&&marker.setMap(this.map_);else if(mCount<this.minClusterSize_)marker.getMap()!==this.map_&&marker.setMap(this.map_);else if(mCount===this.minClusterSize_)for(i=0;mCount>i;i++)this.markers_[i].setMap(null);else marker.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(marker){return this.bounds_.contains(marker.getPosition())},Cluster.prototype.calculateBounds_=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(bounds)},Cluster.prototype.updateIcon_=function(){var mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom();if(null!==mz&&this.map_.getZoom()>mz)return void this.clusterIcon_.hide();if(mCount<this.minClusterSize_)return void this.clusterIcon_.hide();var numStyles=this.markerClusterer_.getStyles().length,sums=this.markerClusterer_.getCalculator()(this.markers_,numStyles);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(sums),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(marker){var i;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(marker);for(i=0;i<this.markers_.length;i++)if(marker===this.markers_[i])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var cMarkerClusterer=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){cMarkerClusterer.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){cMarkerClusterer.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var i;for(i=0;i<this.markers_.length;i++)this.markers_[i].getMap()!==this.activeMap_&&this.markers_[i].setMap(this.activeMap_);for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();for(this.clusters_=[],i=0;i<this.listeners_.length;i++)google.maps.event.removeListener(this.listeners_[i]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var i,size;if(!(this.styles_.length>0))for(i=0;i<this.imageSizes_.length;i++)size=this.imageSizes_[i],this.styles_.push({url:this.imagePath_+(i+1)+"."+this.imageExtension_,height:size,width:size})},MarkerClusterer.prototype.fitMapToMarkers=function(){var i,markers=this.getMarkers(),bounds=new google.maps.LatLngBounds;for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());this.getMap().fitBounds(bounds)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(gridSize){this.gridSize_=gridSize},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(minimumClusterSize){this.minClusterSize_=minimumClusterSize},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(maxZoom){this.maxZoom_=maxZoom},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(styles){this.styles_=styles},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(title){this.title_=title},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_;
},MarkerClusterer.prototype.setZoomOnClick=function(zoomOnClick){this.zoomOnClick_=zoomOnClick},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(averageCenter){this.averageCenter_=averageCenter},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(ignoreHidden){this.ignoreHidden_=ignoreHidden},MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},MarkerClusterer.prototype.setEnableRetinaIcons=function(enableRetinaIcons){this.enableRetinaIcons_=enableRetinaIcons},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(imageExtension){this.imageExtension_=imageExtension},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(imagePath){this.imagePath_=imagePath},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(imageSizes){this.imageSizes_=imageSizes},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(calculator){this.calculator_=calculator},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(batchSizeIE){this.batchSizeIE_=batchSizeIE},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(clusterClass){this.clusterClass_=clusterClass},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(marker,opt_nodraw){this.pushMarkerTo_(marker),opt_nodraw||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(markers,opt_nodraw){var key;for(key in markers)markers.hasOwnProperty(key)&&this.pushMarkerTo_(markers[key]);opt_nodraw||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(marker){if(marker.getDraggable()){var cMarkerClusterer=this;google.maps.event.addListener(marker,"dragend",function(){cMarkerClusterer.ready_&&(this.isAdded=!1,cMarkerClusterer.repaint())})}marker.isAdded=!1,this.markers_.push(marker)},MarkerClusterer.prototype.removeMarker=function(marker,opt_nodraw){var removed=this.removeMarker_(marker);return!opt_nodraw&&removed&&this.repaint(),removed},MarkerClusterer.prototype.removeMarkers=function(markers,opt_nodraw){var i,r,removed=!1;for(i=0;i<markers.length;i++)r=this.removeMarker_(markers[i]),removed=removed||r;return!opt_nodraw&&removed&&this.repaint(),removed},MarkerClusterer.prototype.removeMarker_=function(marker){var i,index=-1;if(this.markers_.indexOf)index=this.markers_.indexOf(marker);else for(i=0;i<this.markers_.length;i++)if(marker===this.markers_[i]){index=i;break}return-1===index?!1:(marker.setMap(null),this.markers_.splice(index,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var oldClusters=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var i;for(i=0;i<oldClusters.length;i++)oldClusters[i].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(bounds){var projection=this.getProjection(),tr=new google.maps.LatLng(bounds.getNorthEast().lat(),bounds.getNorthEast().lng()),bl=new google.maps.LatLng(bounds.getSouthWest().lat(),bounds.getSouthWest().lng()),trPix=projection.fromLatLngToDivPixel(tr);trPix.x+=this.gridSize_,trPix.y-=this.gridSize_;var blPix=projection.fromLatLngToDivPixel(bl);blPix.x-=this.gridSize_,blPix.y+=this.gridSize_;var ne=projection.fromDivPixelToLatLng(trPix),sw=projection.fromDivPixelToLatLng(blPix);return bounds.extend(ne),bounds.extend(sw),bounds},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(opt_hide){var i,marker;for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();for(this.clusters_=[],i=0;i<this.markers_.length;i++)marker=this.markers_[i],marker.isAdded=!1,opt_hide&&marker.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(p1,p2){var R=6371,dLat=(p2.lat()-p1.lat())*Math.PI/180,dLon=(p2.lng()-p1.lng())*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(p1.lat()*Math.PI/180)*Math.cos(p2.lat()*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),d=R*c;return d},MarkerClusterer.prototype.isMarkerInBounds_=function(marker,bounds){return bounds.contains(marker.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(marker){var i,d,cluster,center,distance=4e4,clusterToAddTo=null;for(i=0;i<this.clusters_.length;i++)cluster=this.clusters_[i],center=cluster.getCenter(),center&&(d=this.distanceBetweenPoints_(center,marker.getPosition()),distance>d&&(distance=d,clusterToAddTo=cluster));clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)?clusterToAddTo.addMarker(marker):(cluster=new Cluster(this),cluster.addMarker(marker),this.clusters_.push(cluster))},MarkerClusterer.prototype.createClusters_=function(iFirst){var i,marker,mapBounds,cMarkerClusterer=this;if(this.ready_){0===iFirst&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),mapBounds=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var bounds=this.getExtendedBounds(mapBounds),iLast=Math.min(iFirst+this.batchSize_,this.markers_.length);for(i=iFirst;iLast>i;i++)marker=this.markers_[i],!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)&&(!this.ignoreHidden_||this.ignoreHidden_&&marker.getVisible())&&this.addToClosestCluster_(marker);iLast<this.markers_.length?this.timerRefStatic=setTimeout(function(){cMarkerClusterer.createClusters_(iLast)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(obj1,obj2){return function(object){var property;for(property in object.prototype)this.prototype[property]=object.prototype[property];return this}.apply(obj1,[obj2])},MarkerClusterer.CALCULATOR=function(markers,numStyles){for(var index=0,title="",count=markers.length.toString(),dv=count;0!==dv;)dv=parseInt(dv/10,10),index++;return index=Math.min(index,numStyles),{text:count,index:index,title:title}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90],inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(crossURL){var div;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(div=document.createElement("img"),div.style.cssText="position: absolute; z-index: 1000002; display: none;",div.style.marginLeft="-8px",div.style.marginTop="-9px",div.src=crossURL,MarkerLabel_.getSharedCross.crossDiv=div),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var cSavedZIndex,cLatOffset,cLngOffset,cIgnoreClick,cRaiseEnabled,cStartPosition,cStartCenter,me=this,cMouseIsDown=!1,cDraggingLabel=!1,cRaiseOffset=20,cDraggingCursor="url("+this.handCursorURL_+")",cAbortEvent=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},cStopBounce=function(){me.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(me.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!me.marker_.getDraggable()&&!me.marker_.getClickable()||cDraggingLabel||(this.style.cursor=me.marker_.getCursor(),google.maps.event.trigger(me.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){cDraggingLabel=!1,me.marker_.getDraggable()&&(cMouseIsDown=!0,this.style.cursor=cDraggingCursor),(me.marker_.getDraggable()||me.marker_.getClickable())&&(google.maps.event.trigger(me.marker_,"mousedown",e),cAbortEvent(e))}),google.maps.event.addDomListener(document,"mouseup",function(mEvent){var position;if(cMouseIsDown&&(cMouseIsDown=!1,me.eventDiv_.style.cursor="pointer",google.maps.event.trigger(me.marker_,"mouseup",mEvent)),cDraggingLabel){if(cRaiseEnabled){position=me.getProjection().fromLatLngToDivPixel(me.marker_.getPosition()),position.y+=cRaiseOffset,me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));try{me.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(cStopBounce,1406)}catch(e){}}me.crossDiv_.style.display="none",me.marker_.setZIndex(cSavedZIndex),cIgnoreClick=!0,cDraggingLabel=!1,mEvent.latLng=me.marker_.getPosition(),google.maps.event.trigger(me.marker_,"dragend",mEvent)}}),google.maps.event.addListener(me.marker_.getMap(),"mousemove",function(mEvent){var position;cMouseIsDown&&(cDraggingLabel?(mEvent.latLng=new google.maps.LatLng(mEvent.latLng.lat()-cLatOffset,mEvent.latLng.lng()-cLngOffset),position=me.getProjection().fromLatLngToDivPixel(mEvent.latLng),cRaiseEnabled&&(me.crossDiv_.style.left=position.x+"px",me.crossDiv_.style.top=position.y+"px",me.crossDiv_.style.display="",position.y-=cRaiseOffset),me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position)),cRaiseEnabled&&(me.eventDiv_.style.top=position.y+cRaiseOffset+"px"),google.maps.event.trigger(me.marker_,"drag",mEvent)):(cLatOffset=mEvent.latLng.lat()-me.marker_.getPosition().lat(),cLngOffset=mEvent.latLng.lng()-me.marker_.getPosition().lng(),cSavedZIndex=me.marker_.getZIndex(),cStartPosition=me.marker_.getPosition(),cStartCenter=me.marker_.getMap().getCenter(),cRaiseEnabled=me.marker_.get("raiseOnDrag"),cDraggingLabel=!0,me.marker_.setZIndex(1e6),mEvent.latLng=me.marker_.getPosition(),google.maps.event.trigger(me.marker_,"dragstart",mEvent)))}),google.maps.event.addDomListener(document,"keydown",function(e){cDraggingLabel&&27===e.keyCode&&(cRaiseEnabled=!1,me.marker_.setPosition(cStartPosition),me.marker_.getMap().setCenter(cStartCenter),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(cIgnoreClick?cIgnoreClick=!1:(google.maps.event.trigger(me.marker_,"click",e),cAbortEvent(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(google.maps.event.trigger(me.marker_,"dblclick",e),cAbortEvent(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(mEvent){cDraggingLabel||(cRaiseEnabled=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(mEvent){cDraggingLabel||cRaiseEnabled&&(me.setPosition(cRaiseOffset),me.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(mEvent){cDraggingLabel||cRaiseEnabled&&me.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){me.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){me.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){me.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){me.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){me.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){me.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){me.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){me.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){me.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var i;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),i=0;i<this.listeners_.length;i++)google.maps.event.removeListener(this.listeners_[i])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var content=this.marker_.get("labelContent");"undefined"==typeof content.nodeType?(this.labelDiv_.innerHTML=content,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(content),content=content.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(content))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var i,labelStyle;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",labelStyle=this.marker_.get("labelStyle");for(i in labelStyle)labelStyle.hasOwnProperty(i)&&(this.labelDiv_.style[i]=labelStyle[i],this.eventDiv_.style[i]=labelStyle[i]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var anchor=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-anchor.x+"px",this.labelDiv_.style.marginTop=-anchor.y+"px",this.eventDiv_.style.marginLeft=-anchor.x+"px",this.eventDiv_.style.marginTop=-anchor.y+"px"},MarkerLabel_.prototype.setPosition=function(yOffset){var position=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof yOffset&&(yOffset=0),this.labelDiv_.style.left=Math.round(position.x)+"px",this.labelDiv_.style.top=Math.round(position.y-yOffset)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var zAdjust=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+zAdjust,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+zAdjust,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(theMap){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(theMap)},window.InfoBox=InfoBox,window.Cluster=Cluster,window.ClusterIcon=ClusterIcon,window.MarkerClusterer=MarkerClusterer,window.MarkerLabel_=MarkerLabel_,window.MarkerWithLabel=MarkerWithLabel})}}),function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){angular.module("uiGmapgoogle-maps.wrapped").service("uiGmapDataStructures",function(){return{Graph:__webpack_require__(1).Graph,Queue:__webpack_require__(1).Queue}})},function(module,exports,__webpack_require__){(function(){module.exports={Graph:__webpack_require__(2),Heap:__webpack_require__(3),LinkedList:__webpack_require__(4),Map:__webpack_require__(5),Queue:__webpack_require__(6),RedBlackTree:__webpack_require__(7),Trie:__webpack_require__(8)}}).call(this)},function(module,exports,__webpack_require__){(function(){var Graph,__hasProp={}.hasOwnProperty;Graph=function(){function Graph(){this._nodes={},this.nodeSize=0,this.edgeSize=0}return Graph.prototype.addNode=function(id){return this._nodes[id]?void 0:(this.nodeSize++,this._nodes[id]={_outEdges:{},_inEdges:{}})},Graph.prototype.getNode=function(id){return this._nodes[id]},Graph.prototype.removeNode=function(id){var inEdgeId,nodeToRemove,outEdgeId,_ref,_ref1;if(nodeToRemove=this._nodes[id]){_ref=nodeToRemove._outEdges;for(outEdgeId in _ref)__hasProp.call(_ref,outEdgeId)&&this.removeEdge(id,outEdgeId);_ref1=nodeToRemove._inEdges;for(inEdgeId in _ref1)__hasProp.call(_ref1,inEdgeId)&&this.removeEdge(inEdgeId,id);return this.nodeSize--,delete this._nodes[id],nodeToRemove}},Graph.prototype.addEdge=function(fromId,toId,weight){var edgeToAdd,fromNode,toNode;return null==weight&&(weight=1),!this.getEdge(fromId,toId)&&(fromNode=this._nodes[fromId],toNode=this._nodes[toId],fromNode&&toNode)?(edgeToAdd={weight:weight},fromNode._outEdges[toId]=edgeToAdd,toNode._inEdges[fromId]=edgeToAdd,this.edgeSize++,edgeToAdd):void 0},Graph.prototype.getEdge=function(fromId,toId){var fromNode,toNode;return fromNode=this._nodes[fromId],toNode=this._nodes[toId],fromNode&&toNode?fromNode._outEdges[toId]:void 0},Graph.prototype.removeEdge=function(fromId,toId){var edgeToDelete,fromNode,toNode;return fromNode=this._nodes[fromId],toNode=this._nodes[toId],(edgeToDelete=this.getEdge(fromId,toId))?(delete fromNode._outEdges[toId],delete toNode._inEdges[fromId],this.edgeSize--,edgeToDelete):void 0},Graph.prototype.getInEdgesOf=function(nodeId){var fromId,inEdges,toNode,_ref;toNode=this._nodes[nodeId],inEdges=[],_ref=null!=toNode?toNode._inEdges:void 0;for(fromId in _ref)__hasProp.call(_ref,fromId)&&inEdges.push(this.getEdge(fromId,nodeId));return inEdges},Graph.prototype.getOutEdgesOf=function(nodeId){var fromNode,outEdges,toId,_ref;fromNode=this._nodes[nodeId],outEdges=[],_ref=null!=fromNode?fromNode._outEdges:void 0;for(toId in _ref)__hasProp.call(_ref,toId)&&outEdges.push(this.getEdge(nodeId,toId));return outEdges},Graph.prototype.getAllEdgesOf=function(nodeId){var i,inEdges,outEdges,selfEdge,_i,_ref,_ref1;if(inEdges=this.getInEdgesOf(nodeId),outEdges=this.getOutEdgesOf(nodeId),0===inEdges.length)return outEdges;for(selfEdge=this.getEdge(nodeId,nodeId),i=_i=0,_ref=inEdges.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)if(inEdges[i]===selfEdge){_ref1=[inEdges[inEdges.length-1],inEdges[i]],inEdges[i]=_ref1[0],inEdges[inEdges.length-1]=_ref1[1],inEdges.pop();break}return inEdges.concat(outEdges)},Graph.prototype.forEachNode=function(operation){var nodeId,nodeObject,_ref;_ref=this._nodes;for(nodeId in _ref)__hasProp.call(_ref,nodeId)&&(nodeObject=_ref[nodeId],operation(nodeObject,nodeId))},Graph.prototype.forEachEdge=function(operation){var edgeObject,nodeId,nodeObject,toId,_ref,_ref1;_ref=this._nodes;for(nodeId in _ref)if(__hasProp.call(_ref,nodeId)){nodeObject=_ref[nodeId],_ref1=nodeObject._outEdges;for(toId in _ref1)__hasProp.call(_ref1,toId)&&(edgeObject=_ref1[toId],operation(edgeObject))}},Graph}(),module.exports=Graph}).call(this)},function(module,exports,__webpack_require__){(function(){var Heap,_leftChild,_parent,_rightChild;Heap=function(){function Heap(dataToHeapify){var i,item,_i,_j,_len,_ref;for(null==dataToHeapify&&(dataToHeapify=[]),this._data=[void 0],_i=0,_len=dataToHeapify.length;_len>_i;_i++)item=dataToHeapify[_i],null!=item&&this._data.push(item);if(this._data.length>1)for(i=_j=2,_ref=this._data.length;_ref>=2?_ref>_j:_j>_ref;i=_ref>=2?++_j:--_j)this._upHeap(i);this.size=this._data.length-1}return Heap.prototype.add=function(value){return null!=value?(this._data.push(value),this._upHeap(this._data.length-1),this.size++,value):void 0},Heap.prototype.removeMin=function(){var min;if(1!==this._data.length)return this.size--,2===this._data.length?this._data.pop():(min=this._data[1],this._data[1]=this._data.pop(),this._downHeap(),min)},Heap.prototype.peekMin=function(){return this._data[1]},Heap.prototype._upHeap=function(index){var valueHolder,_ref;for(valueHolder=this._data[index];this._data[index]<this._data[_parent(index)]&&index>1;)_ref=[this._data[_parent(index)],this._data[index]],this._data[index]=_ref[0],this._data[_parent(index)]=_ref[1],index=_parent(index)},Heap.prototype._downHeap=function(){var currentIndex,smallerChildIndex,_ref;for(currentIndex=1;_leftChild(currentIndex<this._data.length)&&(smallerChildIndex=_leftChild(currentIndex),smallerChildIndex<this._data.length-1&&this._data[_rightChild(currentIndex)]<this._data[smallerChildIndex]&&(smallerChildIndex=_rightChild(currentIndex)),this._data[smallerChildIndex]<this._data[currentIndex]);)_ref=[this._data[currentIndex],this._data[smallerChildIndex]],this._data[smallerChildIndex]=_ref[0],this._data[currentIndex]=_ref[1],currentIndex=smallerChildIndex},Heap}(),_parent=function(index){return index>>1},_leftChild=function(index){return index<<1},_rightChild=function(index){return(index<<1)+1},module.exports=Heap}).call(this)},function(module,exports,__webpack_require__){(function(){var LinkedList;LinkedList=function(){function LinkedList(valuesToAdd){var value,_i,_len;for(null==valuesToAdd&&(valuesToAdd=[]),this.head={prev:void 0,value:void 0,next:void 0},this.tail={prev:void 0,value:void 0,next:void 0},this.size=0,_i=0,_len=valuesToAdd.length;_len>_i;_i++)value=valuesToAdd[_i],this.add(value)}return LinkedList.prototype.at=function(position){var currentNode,i,_i,_j,_ref;if(-this.size<=position&&position<this.size){if(position=this._adjust(position),2*position<this.size)for(currentNode=this.head,i=_i=1;position>=_i;i=_i+=1)currentNode=currentNode.next;else for(currentNode=this.tail,i=_j=1,_ref=this.size-position-1;_ref>=_j;i=_j+=1)currentNode=currentNode.prev;return currentNode}},LinkedList.prototype.add=function(value,position){var currentNode,nodeToAdd,_ref,_ref1,_ref2;return null==position&&(position=this.size),-this.size<=position&&position<=this.size?(nodeToAdd={value:value},position=this._adjust(position),0===this.size?this.head=nodeToAdd:0===position?(_ref=[nodeToAdd,this.head,nodeToAdd],this.head.prev=_ref[0],nodeToAdd.next=_ref[1],this.head=_ref[2]):(currentNode=this.at(position-1),_ref1=[currentNode.next,nodeToAdd,nodeToAdd,currentNode],nodeToAdd.next=_ref1[0],null!=(_ref2=currentNode.next)?_ref2.prev=_ref1[1]:void 0,currentNode.next=_ref1[2],nodeToAdd.prev=_ref1[3]),position===this.size&&(this.tail=nodeToAdd),this.size++,value):void 0},LinkedList.prototype.removeAt=function(position){var currentNode,valueToReturn,_ref;return null==position&&(position=this.size-1),-this.size<=position&&position<this.size&&0!==this.size?(position=this._adjust(position),1===this.size?(valueToReturn=this.head.value,this.head.value=this.tail.value=void 0):0===position?(valueToReturn=this.head.value,this.head=this.head.next,this.head.prev=void 0):(currentNode=this.at(position),valueToReturn=currentNode.value,currentNode.prev.next=currentNode.next,null!=(_ref=currentNode.next)&&(_ref.prev=currentNode.prev),position===this.size-1&&(this.tail=currentNode.prev)),this.size--,valueToReturn):void 0},LinkedList.prototype.remove=function(value){var currentNode;if(null!=value){for(currentNode=this.head;currentNode&&currentNode.value!==value;)currentNode=currentNode.next;if(currentNode)return 1===this.size?this.head.value=this.tail.value=void 0:currentNode===this.head?(this.head=this.head.next,this.head.prev=void 0):currentNode===this.tail?(this.tail=this.tail.prev,this.tail.next=void 0):(currentNode.prev.next=currentNode.next,currentNode.next.prev=currentNode.prev),this.size--,value}},LinkedList.prototype.indexOf=function(value,startingPosition){var currentNode,position;if(null==startingPosition&&(startingPosition=0),null==this.head.value&&!this.head.next||startingPosition>=this.size)return-1;for(startingPosition=Math.max(0,this._adjust(startingPosition)),currentNode=this.at(startingPosition),position=startingPosition;currentNode&&currentNode.value!==value;)currentNode=currentNode.next,position++;return position===this.size?-1:position},LinkedList.prototype._adjust=function(position){return 0>position?this.size+position:position},LinkedList}(),module.exports=LinkedList}).call(this)},function(module,exports,__webpack_require__){(function(){var Map,SPECIAL_TYPE_KEY_PREFIX,_extractDataType,_isSpecialType,__hasProp={}.hasOwnProperty;SPECIAL_TYPE_KEY_PREFIX="_mapId_",Map=function(){function Map(objectToMap){var key,value;this._content={},this._itemId=0,this._id=Map._newMapId(),this.size=0;for(key in objectToMap)__hasProp.call(objectToMap,key)&&(value=objectToMap[key],this.set(key,value))}return Map._mapIdTracker=0,Map._newMapId=function(){return this._mapIdTracker++},Map.prototype.hash=function(key,makeHash){var propertyForMap,type;return null==makeHash&&(makeHash=!1),type=_extractDataType(key),_isSpecialType(key)?(propertyForMap=SPECIAL_TYPE_KEY_PREFIX+this._id,makeHash&&!key[propertyForMap]&&(key[propertyForMap]=this._itemId++),propertyForMap+"_"+key[propertyForMap]):type+"_"+key},Map.prototype.set=function(key,value){return this.has(key)||this.size++,this._content[this.hash(key,!0)]=[value,key],value},Map.prototype.get=function(key){var _ref;return null!=(_ref=this._content[this.hash(key)])?_ref[0]:void 0},Map.prototype.has=function(key){return this.hash(key)in this._content},Map.prototype["delete"]=function(key){var hashedKey;return hashedKey=this.hash(key),hashedKey in this._content?(delete this._content[hashedKey],_isSpecialType(key)&&delete key[SPECIAL_TYPE_KEY_PREFIX+this._id],this.size--,!0):!1},Map.prototype.forEach=function(operation){var key,value,_ref;_ref=this._content;for(key in _ref)__hasProp.call(_ref,key)&&(value=_ref[key],operation(value[1],value[0]))},Map}(),_isSpecialType=function(key){var simpleHashableTypes,simpleType,type,_i,_len;for(simpleHashableTypes=["Boolean","Number","String","Undefined","Null","RegExp","Function"],type=_extractDataType(key),_i=0,_len=simpleHashableTypes.length;_len>_i;_i++)if(simpleType=simpleHashableTypes[_i],type===simpleType)return!1;return!0},_extractDataType=function(type){return Object.prototype.toString.apply(type).match(/\[object (.+)\]/)[1]},module.exports=Map}).call(this)},function(module,exports,__webpack_require__){(function(){var Queue;Queue=function(){function Queue(initialArray){null==initialArray&&(initialArray=[]),this._content=initialArray,this._dequeueIndex=0,this.size=this._content.length}return Queue.prototype.enqueue=function(item){return this.size++,this._content.push(item),item},Queue.prototype.dequeue=function(){var itemToDequeue;if(0!==this.size)return this.size--,itemToDequeue=this._content[this._dequeueIndex],this._dequeueIndex++,2*this._dequeueIndex>this._content.length&&(this._content=this._content.slice(this._dequeueIndex),this._dequeueIndex=0),itemToDequeue},Queue.prototype.peek=function(){return this._content[this._dequeueIndex]},Queue}(),module.exports=Queue}).call(this)},function(module,exports,__webpack_require__){(function(){var BLACK,NODE_FOUND,NODE_TOO_BIG,NODE_TOO_SMALL,RED,RedBlackTree,STOP_SEARCHING,_findNode,_grandParentOf,_isLeft,_leftOrRight,_peekMaxNode,_peekMinNode,_siblingOf,_uncleOf;NODE_FOUND=0,NODE_TOO_BIG=1,NODE_TOO_SMALL=2,STOP_SEARCHING=3,RED=1,BLACK=2,RedBlackTree=function(){function RedBlackTree(valuesToAdd){var value,_i,_len;for(null==valuesToAdd&&(valuesToAdd=[]),this._root,this.size=0,_i=0,_len=valuesToAdd.length;_len>_i;_i++)value=valuesToAdd[_i],null!=value&&this.add(value)}return RedBlackTree.prototype.add=function(value){var currentNode,foundNode,nodeToInsert,_ref;if(null!=value){if(this.size++,nodeToInsert={value:value,_color:RED},this._root){if(foundNode=_findNode(this._root,function(node){return value===node.value?NODE_FOUND:value<node.value?node._left?NODE_TOO_BIG:(nodeToInsert._parent=node,node._left=nodeToInsert,STOP_SEARCHING):node._right?NODE_TOO_SMALL:(nodeToInsert._parent=node,node._right=nodeToInsert,STOP_SEARCHING)}),null!=foundNode)return}else this._root=nodeToInsert;for(currentNode=nodeToInsert;;){if(currentNode===this._root){currentNode._color=BLACK;break}if(currentNode._parent._color===BLACK)break;{if((null!=(_ref=_uncleOf(currentNode))?_ref._color:void 0)!==RED){!_isLeft(currentNode)&&_isLeft(currentNode._parent)?(this._rotateLeft(currentNode._parent),currentNode=currentNode._left):_isLeft(currentNode)&&!_isLeft(currentNode._parent)&&(this._rotateRight(currentNode._parent),currentNode=currentNode._right),currentNode._parent._color=BLACK,_grandParentOf(currentNode)._color=RED,_isLeft(currentNode)?this._rotateRight(_grandParentOf(currentNode)):this._rotateLeft(_grandParentOf(currentNode));break}currentNode._parent._color=BLACK,_uncleOf(currentNode)._color=BLACK,_grandParentOf(currentNode)._color=RED,currentNode=_grandParentOf(currentNode)}}return value}},RedBlackTree.prototype.has=function(value){var foundNode;return foundNode=_findNode(this._root,function(node){return value===node.value?NODE_FOUND:value<node.value?NODE_TOO_BIG:NODE_TOO_SMALL}),foundNode?!0:!1},RedBlackTree.prototype.peekMin=function(){var _ref;return null!=(_ref=_peekMinNode(this._root))?_ref.value:void 0},RedBlackTree.prototype.peekMax=function(){var _ref;return null!=(_ref=_peekMaxNode(this._root))?_ref.value:void 0},RedBlackTree.prototype.remove=function(value){var foundNode;return(foundNode=_findNode(this._root,function(node){return value===node.value?NODE_FOUND:value<node.value?NODE_TOO_BIG:NODE_TOO_SMALL}))?(this._removeNode(this._root,foundNode),this.size--,value):void 0},RedBlackTree.prototype.removeMin=function(){var nodeToRemove,valueToReturn;return(nodeToRemove=_peekMinNode(this._root))?(valueToReturn=nodeToRemove.value,this._removeNode(this._root,nodeToRemove),valueToReturn):void 0},RedBlackTree.prototype.removeMax=function(){var nodeToRemove,valueToReturn;return(nodeToRemove=_peekMaxNode(this._root))?(valueToReturn=nodeToRemove.value,this._removeNode(this._root,nodeToRemove),valueToReturn):void 0},RedBlackTree.prototype._removeNode=function(root,node){var sibling,successor,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7;if(node._left&&node._right&&(successor=_peekMinNode(node._right),node.value=successor.value,node=successor),successor=node._left||node._right,successor||(successor={color:BLACK,_right:void 0,_left:void 0,isLeaf:!0}),successor._parent=node._parent,null!=(_ref=node._parent)&&(_ref[_leftOrRight(node)]=successor),node._color===BLACK)if(successor._color===RED)successor._color=BLACK,
successor._parent||(this._root=successor);else for(;;){if(!successor._parent){successor.isLeaf?this._root=void 0:this._root=successor;break}if(sibling=_siblingOf(successor),(null!=sibling?sibling._color:void 0)===RED&&(successor._parent._color=RED,sibling._color=BLACK,_isLeft(successor)?this._rotateLeft(successor._parent):this._rotateRight(successor._parent)),sibling=_siblingOf(successor),successor._parent._color!==BLACK||sibling&&(sibling._color!==BLACK||sibling._left&&sibling._left._color!==BLACK||sibling._right&&sibling._right._color!==BLACK)){if(!(successor._parent._color!==RED||sibling&&(sibling._color!==BLACK||sibling._left&&(null!=(_ref1=sibling._left)?_ref1._color:void 0)!==BLACK||sibling._right&&(null!=(_ref2=sibling._right)?_ref2._color:void 0)!==BLACK))){null!=sibling&&(sibling._color=RED),successor._parent._color=BLACK;break}if((null!=sibling?sibling._color:void 0)===BLACK){!_isLeft(successor)||sibling._right&&sibling._right._color!==BLACK||(null!=(_ref3=sibling._left)?_ref3._color:void 0)!==RED?_isLeft(successor)||sibling._left&&sibling._left._color!==BLACK||(null!=(_ref5=sibling._right)?_ref5._color:void 0)!==RED||(sibling._color=RED,null!=(_ref6=sibling._right)&&(_ref6._color=BLACK),this._rotateLeft(sibling)):(sibling._color=RED,null!=(_ref4=sibling._left)&&(_ref4._color=BLACK),this._rotateRight(sibling));break}sibling=_siblingOf(successor),sibling._color=successor._parent._color,_isLeft(successor)?(sibling._right._color=BLACK,this._rotateRight(successor._parent)):(sibling._left._color=BLACK,this._rotateLeft(successor._parent))}else null!=sibling&&(sibling._color=RED),successor.isLeaf&&(successor._parent[_leftOrRight(successor)]=void 0),successor=successor._parent}return successor.isLeaf&&null!=(_ref7=successor._parent)?_ref7[_leftOrRight(successor)]=void 0:void 0},RedBlackTree.prototype._rotateLeft=function(node){var _ref,_ref1;return null!=(_ref=node._parent)&&(_ref[_leftOrRight(node)]=node._right),node._right._parent=node._parent,node._parent=node._right,node._right=node._right._left,node._parent._left=node,null!=(_ref1=node._right)&&(_ref1._parent=node),null==node._parent._parent?this._root=node._parent:void 0},RedBlackTree.prototype._rotateRight=function(node){var _ref,_ref1;return null!=(_ref=node._parent)&&(_ref[_leftOrRight(node)]=node._left),node._left._parent=node._parent,node._parent=node._left,node._left=node._left._right,node._parent._right=node,null!=(_ref1=node._left)&&(_ref1._parent=node),null==node._parent._parent?this._root=node._parent:void 0},RedBlackTree}(),_isLeft=function(node){return node===node._parent._left},_leftOrRight=function(node){return _isLeft(node)?"_left":"_right"},_findNode=function(startingNode,comparator){var comparisonResult,currentNode,foundNode;for(currentNode=startingNode,foundNode=void 0;currentNode;){if(comparisonResult=comparator(currentNode),comparisonResult===NODE_FOUND){foundNode=currentNode;break}if(comparisonResult===NODE_TOO_BIG)currentNode=currentNode._left;else if(comparisonResult===NODE_TOO_SMALL)currentNode=currentNode._right;else if(comparisonResult===STOP_SEARCHING)break}return foundNode},_peekMinNode=function(startingNode){return _findNode(startingNode,function(node){return node._left?NODE_TOO_BIG:NODE_FOUND})},_peekMaxNode=function(startingNode){return _findNode(startingNode,function(node){return node._right?NODE_TOO_SMALL:NODE_FOUND})},_grandParentOf=function(node){var _ref;return null!=(_ref=node._parent)?_ref._parent:void 0},_uncleOf=function(node){return _grandParentOf(node)?_isLeft(node._parent)?_grandParentOf(node)._right:_grandParentOf(node)._left:void 0},_siblingOf=function(node){return _isLeft(node)?node._parent._right:node._parent._left},module.exports=RedBlackTree}).call(this)},function(module,exports,__webpack_require__){(function(){var Queue,Trie,WORD_END,_hasAtLeastNChildren,__hasProp={}.hasOwnProperty;Queue=__webpack_require__(6),WORD_END="end",Trie=function(){function Trie(words){var word,_i,_len;for(null==words&&(words=[]),this._root={},this.size=0,_i=0,_len=words.length;_len>_i;_i++)word=words[_i],this.add(word)}return Trie.prototype.add=function(word){var currentNode,letter,_i,_len;if(null!=word){for(this.size++,currentNode=this._root,_i=0,_len=word.length;_len>_i;_i++)letter=word[_i],null==currentNode[letter]&&(currentNode[letter]={}),currentNode=currentNode[letter];return currentNode[WORD_END]=!0,word}},Trie.prototype.has=function(word){var currentNode,letter,_i,_len;if(null==word)return!1;for(currentNode=this._root,_i=0,_len=word.length;_len>_i;_i++){if(letter=word[_i],null==currentNode[letter])return!1;currentNode=currentNode[letter]}return currentNode[WORD_END]?!0:!1},Trie.prototype.longestPrefixOf=function(word){var currentNode,letter,prefix,_i,_len;if(null==word)return"";for(currentNode=this._root,prefix="",_i=0,_len=word.length;_len>_i&&(letter=word[_i],null!=currentNode[letter]);_i++)prefix+=letter,currentNode=currentNode[letter];return prefix},Trie.prototype.wordsWithPrefix=function(prefix){var accumulatedLetters,currentNode,letter,node,queue,subNode,words,_i,_len,_ref;if(null==prefix)return[];for(null!=prefix||(prefix=""),words=[],currentNode=this._root,_i=0,_len=prefix.length;_len>_i;_i++)if(letter=prefix[_i],currentNode=currentNode[letter],null==currentNode)return[];for(queue=new Queue,queue.enqueue([currentNode,""]);0!==queue.size;){_ref=queue.dequeue(),node=_ref[0],accumulatedLetters=_ref[1],node[WORD_END]&&words.push(prefix+accumulatedLetters);for(letter in node)__hasProp.call(node,letter)&&(subNode=node[letter],queue.enqueue([subNode,accumulatedLetters+letter]))}return words},Trie.prototype.remove=function(word){var currentNode,i,letter,prefix,_i,_j,_len,_ref;if(null!=word){for(currentNode=this._root,prefix=[],_i=0,_len=word.length;_len>_i;_i++){if(letter=word[_i],null==currentNode[letter])return;currentNode=currentNode[letter],prefix.push([letter,currentNode])}if(currentNode[WORD_END]){if(this.size--,delete currentNode[WORD_END],_hasAtLeastNChildren(currentNode,1))return word;for(i=_j=_ref=prefix.length-1;(1>=_ref?1>=_j:_j>=1)&&!_hasAtLeastNChildren(prefix[i][1],1);i=1>=_ref?++_j:--_j)delete prefix[i-1][1][prefix[i][0]];return _hasAtLeastNChildren(this._root[prefix[0][0]],1)||delete this._root[prefix[0][0]],word}}},Trie}(),_hasAtLeastNChildren=function(node,n){var child,childCount;if(0===n)return!0;childCount=0;for(child in node)if(__hasProp.call(node,child)&&(childCount++,childCount>=n))return!0;return!1},module.exports=Trie}).call(this)}]),angular.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendMarkerClusterer",["uiGmapLodash","uiGmapPropMap",function(uiGmapLodash,PropMap){return{init:_.once(function(){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};window.NgMapCluster=function(_super){function NgMapCluster(opts){NgMapCluster.__super__.constructor.call(this,opts),this.markers_=new PropMap}return __extends(NgMapCluster,_super),NgMapCluster.prototype.addMarker=function(marker){var mCount,mz;if(this.isMarkerAlreadyAdded_(marker)){var oldMarker=this.markers_.get(marker.key);if(oldMarker.getPosition().lat()==marker.getPosition().lat()&&oldMarker.getPosition().lon()==marker.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var l=this.markers_.length+1,lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l,lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng),this.calculateBounds_()}}else this.center_=marker.getPosition(),this.calculateBounds_();return marker.isAdded=!0,this.markers_.push(marker),mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom(),null!==mz&&this.map_.getZoom()>mz?marker.getMap()!==this.map_&&marker.setMap(this.map_):mCount<this.minClusterSize_?marker.getMap()!==this.map_&&marker.setMap(this.map_):mCount===this.minClusterSize_?this.markers_.each(function(m){m.setMap(null)}):marker.setMap(null),!0},NgMapCluster.prototype.isMarkerAlreadyAdded_=function(marker){return uiGmapLodash.isNullOrUndefined(this.markers_.get(marker.key))},NgMapCluster.prototype.getBounds=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);return this.getMarkers().each(function(m){bounds.extend(m.getPosition())}),bounds},NgMapCluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new PropMap,delete this.markers_},NgMapCluster}(Cluster),window.NgMapMarkerClusterer=function(_super){function NgMapMarkerClusterer(map,opt_markers,opt_options){NgMapMarkerClusterer.__super__.constructor.call(this,map,opt_markers,opt_options),this.markers_=new PropMap}return __extends(NgMapMarkerClusterer,_super),NgMapMarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new PropMap},NgMapMarkerClusterer.prototype.removeMarker_=function(marker){return this.markers_.get(marker.key)?(marker.setMap(null),this.markers_.remove(marker.key),!0):!1},NgMapMarkerClusterer.prototype.createClusters_=function(iFirst){var i,marker,mapBounds,cMarkerClusterer=this;if(this.ready_){0===iFirst&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),mapBounds=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var bounds=this.getExtendedBounds(mapBounds),iLast=Math.min(iFirst+this.batchSize_,this.markers_.length),_ms=this.markers_.values();for(i=iFirst;iLast>i;i++)marker=_ms[i],!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)&&(!this.ignoreHidden_||this.ignoreHidden_&&marker.getVisible())&&this.addToClosestCluster_(marker);if(iLast<this.markers_.length)this.timerRefStatic=setTimeout(function(){cMarkerClusterer.createClusters_(iLast)},0);else{for(i=0;i<this.clusters_.length;i++)this.clusters_[i].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},NgMapMarkerClusterer.prototype.addToClosestCluster_=function(marker){var i,d,cluster,center,distance=4e4,clusterToAddTo=null;for(i=0;i<this.clusters_.length;i++)cluster=this.clusters_[i],center=cluster.getCenter(),center&&(d=this.distanceBetweenPoints_(center,marker.getPosition()),distance>d&&(distance=d,clusterToAddTo=cluster));clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)?clusterToAddTo.addMarker(marker):(cluster=new NgMapCluster(this),cluster.addMarker(marker),this.clusters_.push(cluster))},NgMapMarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},NgMapMarkerClusterer.prototype.resetViewport_=function(opt_hide){var i;for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();this.clusters_=[],this.markers_.each(function(marker){marker.isAdded=!1,opt_hide&&marker.setMap(null)})},NgMapMarkerClusterer.prototype.extend=function(obj1,obj2){return function(object){var property;for(property in object.prototype)"constructor"!==property&&(this.prototype[property]=object.prototype[property]);return this}.apply(obj1,[obj2])},ClusterIcon.prototype.show=function(){if(this.div_){var img="",bp=this.backgroundPosition_.split(" "),spriteH=parseInt(bp[0].trim(),10),spriteV=parseInt(bp[1].trim(),10),pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos),img="<img src='"+this.url_+"' style='position: absolute; top: "+spriteV+"px; left: "+spriteH+"px; ",img+=this.cluster_.getMarkerClusterer().enableRetinaIcons_?"width: "+this.width_+"px;height: "+this.height_+"px;":"clip: rect("+-1*spriteV+"px, "+(-1*spriteH+this.width_)+"px, "+(-1*spriteV+this.height_)+"px, "+-1*spriteH+"px);",img+="'>",this.div_.innerHTML=img+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},NgMapMarkerClusterer}(MarkerClusterer)}).call(this)})}}])}(window,angular),function(window,angular,undefined){(function(){angular.module("uiGmapgoogle-maps.providers",[]),angular.module("uiGmapgoogle-maps.wrapped",[]),angular.module("uiGmapgoogle-maps.extensions",["uiGmapgoogle-maps.wrapped","uiGmapgoogle-maps.providers"]),angular.module("uiGmapgoogle-maps.directives.api.utils",["uiGmapgoogle-maps.extensions"]),angular.module("uiGmapgoogle-maps.directives.api.managers",[]),angular.module("uiGmapgoogle-maps.directives.api.options",["uiGmapgoogle-maps.directives.api.utils"]),angular.module("uiGmapgoogle-maps.directives.api.options.builders",[]),angular.module("uiGmapgoogle-maps.directives.api.models.child",["uiGmapgoogle-maps.directives.api.utils","uiGmapgoogle-maps.directives.api.options","uiGmapgoogle-maps.directives.api.options.builders"]),angular.module("uiGmapgoogle-maps.directives.api.models.parent",["uiGmapgoogle-maps.directives.api.managers","uiGmapgoogle-maps.directives.api.models.child","uiGmapgoogle-maps.providers"]),angular.module("uiGmapgoogle-maps.directives.api",["uiGmapgoogle-maps.directives.api.models.parent"]),angular.module("uiGmapgoogle-maps",["uiGmapgoogle-maps.directives.api","uiGmapgoogle-maps.providers"])}).call(this),function(){angular.module("uiGmapgoogle-maps.providers").factory("uiGmapMapScriptLoader",["$q","uiGmapuuid",function($q,uuid){var getScriptUrl,includeScript,isGoogleMapsLoaded,scriptId;return scriptId=void 0,getScriptUrl=function(options){return options.china?"http://maps.google.cn/maps/api/js?":"auto"===options.transport?"//maps.googleapis.com/maps/api/js?":options.transport+"://maps.googleapis.com/maps/api/js?"},includeScript=function(options){var omitOptions,query,script;return omitOptions=["transport","isGoogleMapsForWork","china"],options.isGoogleMapsForWork&&omitOptions.push("key"),query=_.map(_.omit(options,omitOptions),function(v,k){return k+"="+v}),scriptId&&document.getElementById(scriptId).remove(),query=query.join("&"),script=document.createElement("script"),script.id=scriptId="ui_gmap_map_load_"+uuid.generate(),script.type="text/javascript",script.src=getScriptUrl(options)+query,document.body.appendChild(script)},isGoogleMapsLoaded=function(){return angular.isDefined(window.google)&&angular.isDefined(window.google.maps)},{load:function(options){var deferred,randomizedFunctionName;return deferred=$q.defer(),isGoogleMapsLoaded()?(deferred.resolve(window.google.maps),deferred.promise):(randomizedFunctionName=options.callback="onGoogleMapsReady"+Math.round(1e3*Math.random()),window[randomizedFunctionName]=function(){window[randomizedFunctionName]=null,deferred.resolve(window.google.maps)},window.navigator.connection&&window.Connection&&window.navigator.connection.type===window.Connection.NONE?document.addEventListener("online",function(){return isGoogleMapsLoaded()?void 0:includeScript(options)}):includeScript(options),deferred.promise)}}}]).provider("uiGmapGoogleMapApi",function(){return this.options={transport:"https",isGoogleMapsForWork:!1,china:!1,v:"3",libraries:"",language:"en",sensor:"false"},this.configure=function(options){angular.extend(this.options,options)},this.$get=["uiGmapMapScriptLoader",function(_this){return function(loader){return loader.load(_this.options)}}(this)],this})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendGWin",function(){return{init:_.once(function(){var uiGmapInfoBox;if(google||("undefined"!=typeof google&&null!==google?google.maps:void 0)||null!=google.maps.InfoWindow)return google.maps.InfoWindow.prototype._open=google.maps.InfoWindow.prototype.open,google.maps.InfoWindow.prototype._close=google.maps.InfoWindow.prototype.close,google.maps.InfoWindow.prototype._isOpen=!1,google.maps.InfoWindow.prototype.open=function(map,anchor,recurse){null==recurse&&(this._isOpen=!0,this._open(map,anchor,!0))},google.maps.InfoWindow.prototype.close=function(recurse){null==recurse&&(this._isOpen=!1,this._close(!0))},google.maps.InfoWindow.prototype.isOpen=function(val){return null==val&&(val=void 0),null==val?this._isOpen:this._isOpen=val},window.InfoBox&&(window.InfoBox.prototype._open=window.InfoBox.prototype.open,window.InfoBox.prototype._close=window.InfoBox.prototype.close,window.InfoBox.prototype._isOpen=!1,window.InfoBox.prototype.open=function(map,anchor){this._isOpen=!0,this._open(map,anchor)},window.InfoBox.prototype.close=function(){this._isOpen=!1,this._close()},window.InfoBox.prototype.isOpen=function(val){return null==val&&(val=void 0),null==val?this._isOpen:this._isOpen=val},uiGmapInfoBox=function(superClass){function uiGmapInfoBox(opts){this.getOrigCloseBoxImg_=bind(this.getOrigCloseBoxImg_,this),this.getCloseBoxDiv_=bind(this.getCloseBoxDiv_,this);var box;box=new window.InfoBox(opts),_.extend(this,box),null!=opts.closeBoxDiv&&(this.closeBoxDiv_=opts.closeBoxDiv)}return extend(uiGmapInfoBox,superClass),uiGmapInfoBox.prototype.getCloseBoxDiv_=function(){return this.closeBoxDiv_},uiGmapInfoBox.prototype.getCloseBoxImg_=function(){var div,img;return div=this.getCloseBoxDiv_(),img=this.getOrigCloseBoxImg_(),div||img},uiGmapInfoBox.prototype.getOrigCloseBoxImg_=function(){var img;return img="",""!==this.closeBoxURL_&&(img="<img",img+=" src='"+this.closeBoxURL_+"'",img+=" align=right",img+=" style='",img+=" position: relative;",img+=" cursor: pointer;",img+=" margin: "+this.closeBoxMargin_+";",img+="'>"),img},uiGmapInfoBox}(window.InfoBox),window.uiGmapInfoBox=uiGmapInfoBox),window.MarkerLabel_?window.MarkerLabel_.prototype.setContent=function(){var content;content=this.marker_.get("labelContent"),content&&!_.isEqual(this.oldContent,content)&&("undefined"==typeof(null!=content?content.nodeType:void 0)?(this.labelDiv_.innerHTML=content,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML,this.oldContent=content):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(content),content=content.cloneNode(!0),this.labelDiv_.innerHTML="",this.eventDiv_.appendChild(content),this.oldContent=content))}:void 0})}})}.call(this),function(){angular.module("uiGmapgoogle-maps.extensions").service("uiGmapLodash",function(){return this.intersectionObjects=function(array1,array2,comparison){var res;return null==comparison&&(comparison=void 0),res=_.map(array1,function(_this){return function(obj1){return _.find(array2,function(obj2){return null!=comparison?comparison(obj1,obj2):_.isEqual(obj1,obj2)})}}(this)),_.filter(res,function(o){return null!=o})},this.containsObject=_.includeObject=function(obj,target,comparison){return null==comparison&&(comparison=void 0),null===obj?!1:_.any(obj,function(_this){return function(value){return null!=comparison?comparison(value,target):_.isEqual(value,target)}}(this))},this.differenceObjects=function(array1,array2,comparison){return null==comparison&&(comparison=void 0),_.filter(array1,function(_this){return function(value){return!_this.containsObject(array2,value,comparison)}}(this))},this.withoutObjects=this.differenceObjects,this.indexOfObject=function(array,item,comparison,isSorted){var i,length;if(null==array)return-1;if(i=0,length=array.length,isSorted){if("number"!=typeof isSorted)return i=_.sortedIndex(array,item),array[i]===item?i:-1;i=0>isSorted?Math.max(0,length+isSorted):isSorted}for(;length>i;){if(null!=comparison){if(comparison(array[i],item))return i}else if(_.isEqual(array[i],item))return i;i++}return-1},this.isNullOrUndefined=function(thing){return _.isNull(thing||_.isUndefined(thing))},this})}.call(this),function(){angular.module("uiGmapgoogle-maps.extensions").factory("uiGmapString",function(){return function(str){return this.contains=function(value,fromIndex){return-1!==str.indexOf(value,fromIndex)},this}})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmap_sync",[function(){return{fakePromise:function(){var _cb;return _cb=void 0,{then:function(cb){return _cb=cb},resolve:function(){return _cb.apply(void 0,arguments)}}}}}]).service("uiGmap_async",["$timeout","uiGmapPromise","uiGmapLogger","$q","uiGmapDataStructures","uiGmapGmapUtil",function($timeout,uiGmapPromise,$log,$q,uiGmapDataStructures,uiGmapGmapUtil){var ExposedPromise,PromiseQueueManager,SniffedPromise,_getArrayAndKeys,_getIterateeValue,defaultChunkSize,doChunk,doSkippPromise,each,errorObject,isInProgress,kickPromise,logTryCatch,managePromiseQueue,map,maybeCancelPromises,promiseStatus,promiseTypes,tryCatch;return promiseTypes=uiGmapPromise.promiseTypes,isInProgress=uiGmapPromise.isInProgress,promiseStatus=uiGmapPromise.promiseStatus,ExposedPromise=uiGmapPromise.ExposedPromise,SniffedPromise=uiGmapPromise.SniffedPromise,kickPromise=function(sniffedPromise,cancelCb){var promise;return promise=sniffedPromise.promise(),promise.promiseType=sniffedPromise.promiseType,promise.$$state&&$log.debug("promiseType: "+promise.promiseType+", state: "+promiseStatus(promise.$$state.status)),promise.cancelCb=cancelCb,promise},doSkippPromise=function(sniffedPromise,lastPromise){return sniffedPromise.promiseType===promiseTypes.create&&lastPromise.promiseType!==promiseTypes["delete"]&&lastPromise.promiseType!==promiseTypes.init?($log.debug("lastPromise.promiseType "+lastPromise.promiseType+", newPromiseType: "+sniffedPromise.promiseType+", SKIPPED MUST COME AFTER DELETE ONLY"),!0):!1},maybeCancelPromises=function(queue,sniffedPromise,lastPromise){var first;return sniffedPromise.promiseType===promiseTypes["delete"]&&lastPromise.promiseType!==promiseTypes["delete"]&&null!=lastPromise.cancelCb&&_.isFunction(lastPromise.cancelCb)&&isInProgress(lastPromise)&&($log.debug("promiseType: "+sniffedPromise.promiseType+", CANCELING LAST PROMISE type: "+lastPromise.promiseType),lastPromise.cancelCb("cancel safe"),first=queue.peek(),null!=first&&isInProgress(first))?first.hasOwnProperty("cancelCb")&&_.isFunction(first.cancelCb)?($log.debug("promiseType: "+first.promiseType+", CANCELING FIRST PROMISE type: "+first.promiseType),first.cancelCb("cancel safe")):$log.warn("first promise was not cancelable"):void 0},PromiseQueueManager=function(existingPiecesObj,sniffedPromise,cancelCb){var lastPromise,newPromise;if(existingPiecesObj.existingPieces){if(lastPromise=_.last(existingPiecesObj.existingPieces._content),doSkippPromise(sniffedPromise,lastPromise))return;return maybeCancelPromises(existingPiecesObj.existingPieces,sniffedPromise,lastPromise),newPromise=ExposedPromise(lastPromise["finally"](function(){return kickPromise(sniffedPromise,cancelCb)})),newPromise.cancelCb=cancelCb,newPromise.promiseType=sniffedPromise.promiseType,existingPiecesObj.existingPieces.enqueue(newPromise),lastPromise["finally"](function(){return existingPiecesObj.existingPieces.dequeue()})}return existingPiecesObj.existingPieces=new uiGmapDataStructures.Queue,existingPiecesObj.existingPieces.enqueue(kickPromise(sniffedPromise,cancelCb))},managePromiseQueue=function(objectToLock,promiseType,msg,cancelCb,fnPromise){var cancelLogger;return null==msg&&(msg=""),cancelLogger=function(msg){return $log.debug(msg+": "+msg),null!=cancelCb&&_.isFunction(cancelCb)?cancelCb(msg):void 0},PromiseQueueManager(objectToLock,SniffedPromise(fnPromise,promiseType),cancelLogger)},defaultChunkSize=80,errorObject={value:null},tryCatch=function(fn,ctx,args){var e;try{return fn.apply(ctx,args)}catch(_error){return e=_error,errorObject.value=e,errorObject}},logTryCatch=function(fn,ctx,deferred,args){var msg,result;return result=tryCatch(fn,ctx,args),result===errorObject&&(msg="error within chunking iterator: "+errorObject.value,$log.error(msg),deferred.reject(msg)),"cancel safe"===result?!1:!0},_getIterateeValue=function(collection,array,index){var _isArray,valOrKey;return _isArray=collection===array,valOrKey=array[index],_isArray?valOrKey:collection[valOrKey]},_getArrayAndKeys=function(collection,keys,bailOutCb,cb){var array;return angular.isArray(collection)?array=collection:(array=keys?keys:Object.keys(_.omit(collection,["length","forEach","map"])),keys=array),null==cb&&(cb=bailOutCb),angular.isArray(array)&&(void 0===array||(null!=array?array.length:void 0)<=0)&&cb!==bailOutCb?bailOutCb():cb(array,keys)},doChunk=function(collection,chunkSizeOrDontChunk,pauseMilli,chunkCb,pauseCb,overallD,index,_keys){return _getArrayAndKeys(collection,_keys,function(array,keys){var cnt,i,keepGoing,val;for(cnt=chunkSizeOrDontChunk&&chunkSizeOrDontChunk<array.length?chunkSizeOrDontChunk:array.length,i=index,keepGoing=!0;keepGoing&&cnt--&&i<(array?array.length:i+1);)val=_getIterateeValue(collection,array,i),keepGoing=angular.isFunction(val)?!0:logTryCatch(chunkCb,void 0,overallD,[val,i]),++i;if(array){if(!(keepGoing&&i<array.length))return overallD.resolve();if(index=i,chunkSizeOrDontChunk)return null!=pauseCb&&_.isFunction(pauseCb)&&logTryCatch(pauseCb,void 0,overallD,[]),$timeout(function(){return doChunk(collection,chunkSizeOrDontChunk,pauseMilli,chunkCb,pauseCb,overallD,index,keys)},pauseMilli,!1)}})},each=function(collection,chunk,chunkSizeOrDontChunk,pauseCb,index,pauseMilli,_keys){var error,overallD,ret;return null==chunkSizeOrDontChunk&&(chunkSizeOrDontChunk=defaultChunkSize),null==index&&(index=0),null==pauseMilli&&(pauseMilli=1),ret=void 0,overallD=uiGmapPromise.defer(),ret=overallD.promise,pauseMilli?_getArrayAndKeys(collection,_keys,function(){return overallD.resolve(),ret},function(array,keys){return doChunk(collection,chunkSizeOrDontChunk,pauseMilli,chunk,pauseCb,overallD,index,keys),ret}):(error="pause (delay) must be set from _async!",$log.error(error),overallD.reject(error),ret)},map=function(collection,iterator,chunkSizeOrDontChunk,pauseCb,index,pauseMilli,_keys){var results;return results=[],_getArrayAndKeys(collection,_keys,function(){return uiGmapPromise.resolve(results)},function(array,keys){return each(collection,function(o){return results.push(iterator(o))},chunkSizeOrDontChunk,pauseCb,index,pauseMilli,keys).then(function(){return results})})},{each:each,map:map,managePromiseQueue:managePromiseQueue,promiseLock:managePromiseQueue,defaultChunkSize:defaultChunkSize,chunkSizeFrom:function(fromSize,ret){return null==ret&&(ret=void 0),_.isNumber(fromSize)&&(ret=fromSize),(uiGmapGmapUtil.isFalse(fromSize)||fromSize===!1)&&(ret=!1),ret}}}])}.call(this),function(){var indexOf=[].indexOf||function(item){for(var i=0,l=this.length;l>i;i++)if(i in this&&this[i]===item)return i;return-1};angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapBaseObject",function(){var BaseObject,baseObjectKeywords;return baseObjectKeywords=["extended","included"],BaseObject=function(){function BaseObject(){}return BaseObject.extend=function(obj){var key,ref,value;for(key in obj)value=obj[key],indexOf.call(baseObjectKeywords,key)<0&&(this[key]=value);return null!=(ref=obj.extended)&&ref.apply(this),this},BaseObject.include=function(obj){var key,ref,value;for(key in obj)value=obj[key],indexOf.call(baseObjectKeywords,key)<0&&(this.prototype[key]=value);return null!=(ref=obj.included)&&ref.apply(this),this},BaseObject}()})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChildEvents",function(){return{onChildCreation:function(child){}}})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapCtrlHandle",["$q",function($q){var CtrlHandle;return CtrlHandle={handle:function($scope,$element){return $scope.$on("$destroy",function(){return CtrlHandle.handle($scope)}),$scope.deferred=$q.defer(),{getScope:function(){return $scope}}},mapPromise:function(scope,ctrl){var mapScope;return mapScope=ctrl.getScope(),mapScope.deferred.promise.then(function(map){return scope.map=map}),mapScope.deferred.promise}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapEventsHelper",["uiGmapLogger",function($log){var _getEventsObj,_hasEvents;return _hasEvents=function(obj){return angular.isDefined(obj.events)&&null!=obj.events&&angular.isObject(obj.events)},_getEventsObj=function(scope,model){return _hasEvents(scope)?scope:_hasEvents(model)?model:void 0},{setEvents:function(gObject,scope,model,ignores){var eventObj;return eventObj=_getEventsObj(scope,model),null!=eventObj?_.compact(_.map(eventObj.events,function(eventHandler,eventName){var doIgnore;return ignores&&(doIgnore=_(ignores).contains(eventName)),eventObj.events.hasOwnProperty(eventName)&&angular.isFunction(eventObj.events[eventName])&&!doIgnore?google.maps.event.addListener(gObject,eventName,function(){return scope.$evalAsync||(scope.$evalAsync=function(){}),scope.$evalAsync(eventHandler.apply(scope,[gObject,eventName,model,arguments]))}):void 0})):void 0},removeEvents:function(listeners){return listeners?listeners.forEach(function(l){return l?google.maps.event.removeListener(l):void 0}):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapFitHelper",["uiGmapLogger","uiGmap_async",function($log,_async){return{fit:function(gMarkers,gMap){var bounds,everSet;return gMap&&gMarkers&&gMarkers.length>0&&(bounds=new google.maps.LatLngBounds,everSet=!1,gMarkers.forEach(function(_this){return function(gMarker){return gMarker?(everSet||(everSet=!0),bounds.extend(gMarker.getPosition())):void 0}}(this)),everSet)?gMap.fitBounds(bounds):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapGmapUtil",["uiGmapLogger","$compile",function(Logger,$compile){var _isFalse,_isTruthy,getCoords,getLatitude,getLongitude,validateCoords;return _isTruthy=function(value,bool,optionsArray){return value===bool||-1!==optionsArray.indexOf(value)},_isFalse=function(value){return _isTruthy(value,!1,["false","FALSE",0,"n","N","no","NO"])},getLatitude=function(value){return Array.isArray(value)&&2===value.length?value[1]:angular.isDefined(value.type)&&"Point"===value.type?value.coordinates[1]:value.latitude},getLongitude=function(value){return Array.isArray(value)&&2===value.length?value[0]:angular.isDefined(value.type)&&"Point"===value.type?value.coordinates[0]:value.longitude},getCoords=function(value){return value?Array.isArray(value)&&2===value.length?new google.maps.LatLng(value[1],value[0]):angular.isDefined(value.type)&&"Point"===value.type?new google.maps.LatLng(value.coordinates[1],value.coordinates[0]):new google.maps.LatLng(value.latitude,value.longitude):void 0},validateCoords=function(coords){if(angular.isUndefined(coords))return!1;if(_.isArray(coords)){if(2===coords.length)return!0}else if(null!=coords&&(null!=coords?coords.type:void 0)&&"Point"===coords.type&&_.isArray(coords.coordinates)&&2===coords.coordinates.length)return!0;return coords&&angular.isDefined((null!=coords?coords.latitude:void 0)&&angular.isDefined(null!=coords?coords.longitude:void 0))?!0:!1},{setCoordsFromEvent:function(prevValue,newLatLon){return prevValue?(Array.isArray(prevValue)&&2===prevValue.length?(prevValue[1]=newLatLon.lat(),prevValue[0]=newLatLon.lng()):angular.isDefined(prevValue.type)&&"Point"===prevValue.type?(prevValue.coordinates[1]=newLatLon.lat(),prevValue.coordinates[0]=newLatLon.lng()):(prevValue.latitude=newLatLon.lat(),
prevValue.longitude=newLatLon.lng()),prevValue):void 0},getLabelPositionPoint:function(anchor){var xPos,yPos;return void 0===anchor?void 0:(anchor=/^([-\d\.]+)\s([-\d\.]+)$/.exec(anchor),xPos=parseFloat(anchor[1]),yPos=parseFloat(anchor[2]),null!=xPos&&null!=yPos?new google.maps.Point(xPos,yPos):void 0)},createWindowOptions:function(gMarker,scope,content,defaults){var options;return null!=content&&null!=defaults&&null!=$compile?(options=angular.extend({},defaults,{content:this.buildContent(scope,defaults,content),position:null!=defaults.position?defaults.position:angular.isObject(gMarker)?gMarker.getPosition():getCoords(scope.coords)}),null!=gMarker&&null==(null!=options?options.pixelOffset:void 0)&&(null==options.boxClass||(options.pixelOffset={height:0,width:-2})),options):defaults?defaults:(Logger.error("infoWindow defaults not defined"),content?void 0:Logger.error("infoWindow content not defined"))},buildContent:function(scope,defaults,content){var parsed,ret;return null!=defaults.content?ret=defaults.content:null!=$compile?(content=content.replace(/^\s+|\s+$/g,""),parsed=""===content?"":$compile(content)(scope),parsed.length>0&&(ret=parsed[0])):ret=content,ret},defaultDelay:50,isTrue:function(value){return _isTruthy(value,!0,["true","TRUE",1,"y","Y","yes","YES"])},isFalse:_isFalse,isFalsy:function(value){return _isTruthy(value,!1,[void 0,null])||_isFalse(value)},getCoords:getCoords,validateCoords:validateCoords,equalCoords:function(coord1,coord2){return getLatitude(coord1)===getLatitude(coord2)&&getLongitude(coord1)===getLongitude(coord2)},validatePath:function(path){var array,i,polygon,trackMaxVertices;if(i=0,angular.isUndefined(path.type)){if(!Array.isArray(path)||path.length<2)return!1;for(;i<path.length;){if(!(angular.isDefined(path[i].latitude)&&angular.isDefined(path[i].longitude)||"function"==typeof path[i].lat&&"function"==typeof path[i].lng))return!1;i++}return!0}if(angular.isUndefined(path.coordinates))return!1;if("Polygon"===path.type){if(path.coordinates[0].length<4)return!1;array=path.coordinates[0]}else if("MultiPolygon"===path.type){if(trackMaxVertices={max:0,index:0},_.forEach(path.coordinates,function(polygon,index){return polygon[0].length>this.max?(this.max=polygon[0].length,this.index=index):void 0},trackMaxVertices),polygon=path.coordinates[trackMaxVertices.index],array=polygon[0],array.length<4)return!1}else{if("LineString"!==path.type)return!1;if(path.coordinates.length<2)return!1;array=path.coordinates}for(;i<array.length;){if(2!==array[i].length)return!1;i++}return!0},convertPathPoints:function(path){var array,i,latlng,result,trackMaxVertices;if(i=0,result=new google.maps.MVCArray,angular.isUndefined(path.type))for(;i<path.length;)angular.isDefined(path[i].latitude)&&angular.isDefined(path[i].longitude)?latlng=new google.maps.LatLng(path[i].latitude,path[i].longitude):"function"==typeof path[i].lat&&"function"==typeof path[i].lng&&(latlng=path[i]),result.push(latlng),i++;else for("Polygon"===path.type?array=path.coordinates[0]:"MultiPolygon"===path.type?(trackMaxVertices={max:0,index:0},_.forEach(path.coordinates,function(polygon,index){return polygon[0].length>this.max?(this.max=polygon[0].length,this.index=index):void 0},trackMaxVertices),array=path.coordinates[trackMaxVertices.index][0]):"LineString"===path.type&&(array=path.coordinates);i<array.length;)result.push(new google.maps.LatLng(array[i][1],array[i][0])),i++;return result},extendMapBounds:function(map,points){var bounds,i;for(bounds=new google.maps.LatLngBounds,i=0;i<points.length;)bounds.extend(points.getAt(i)),i++;return map.fitBounds(bounds)},getPath:function(object,key){var obj;return null!=key&&_.isString(key)?(obj=object,_.each(key.split("."),function(value){return obj?obj=obj[value]:void 0}),obj):key},validateBoundPoints:function(bounds){return angular.isUndefined(bounds.sw.latitude)||angular.isUndefined(bounds.sw.longitude)||angular.isUndefined(bounds.ne.latitude)||angular.isUndefined(bounds.ne.longitude)?!1:!0},convertBoundPoints:function(bounds){var result;return result=new google.maps.LatLngBounds(new google.maps.LatLng(bounds.sw.latitude,bounds.sw.longitude),new google.maps.LatLng(bounds.ne.latitude,bounds.ne.longitude))},fitMapBounds:function(map,bounds){return map.fitBounds(bounds)}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapIsReady",["$q","$timeout",function($q,$timeout){var _checkIfReady,_ctr,_promises,_proms;return _ctr=0,_proms=[],_promises=function(){return $q.all(_proms)},_checkIfReady=function(deferred,expectedInstances,retriesLeft){return $timeout(function(){return 0>=retriesLeft&&deferred.reject("Your maps are not found we have checked the maximum amount of times. :)"),_ctr!==expectedInstances?_checkIfReady(deferred,expectedInstances,retriesLeft-1):deferred.resolve(_promises())},100)},{spawn:function(){var d;return d=$q.defer(),_proms.push(d.promise),_ctr+=1,{instance:_ctr,deferred:d}},promises:_promises,instances:function(){return _ctr},promise:function(expectedInstances,numRetries){var d;return null==expectedInstances&&(expectedInstances=1),null==numRetries&&(numRetries=50),d=$q.defer(),_checkIfReady(d,expectedInstances,numRetries),d.promise},reset:function(){_ctr=0,_proms.length=0},decrement:function(){_ctr>0&&(_ctr-=1),_proms.length&&(_proms.length-=1)}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapLinked",["uiGmapBaseObject",function(BaseObject){var Linked;return Linked=function(superClass){function Linked(scope,element,attrs,ctrls){this.scope=scope,this.element=element,this.attrs=attrs,this.ctrls=ctrls}return extend(Linked,superClass),Linked}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapLogger",["$log",function($log){var LEVELS,Logger,log,maybeExecLevel;return LEVELS={log:1,info:2,debug:3,warn:4,error:5,none:6},maybeExecLevel=function(level,current,fn){return level>=current?fn():void 0},log=function(logLevelFnName,msg){return null!=$log?$log[logLevelFnName](msg):console[logLevelFnName](msg)},new(Logger=function(){function Logger(){var logFns;this.doLog=!0,logFns={},["log","info","debug","warn","error"].forEach(function(_this){return function(level){return logFns[level]=function(msg){return _this.doLog?maybeExecLevel(LEVELS[level],_this.currentLevel,function(){return log(level,msg)}):void 0}}}(this)),this.LEVELS=LEVELS,this.currentLevel=LEVELS.error,this.log=logFns.log,this.info=logFns.info,this.debug=logFns.debug,this.warn=logFns.warn,this.error=logFns.error}return Logger.prototype.spawn=function(){return new Logger},Logger.prototype.setLog=function(someLogger){return $log=someLogger},Logger}())}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelKey",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapPromise","$q","$timeout",function(BaseObject,GmapUtil,uiGmapPromise,$q,$timeout){var ModelKey;return ModelKey=function(superClass){function ModelKey(scope1){this.scope=scope1,this.modelsLength=bind(this.modelsLength,this),this.updateChild=bind(this.updateChild,this),this.destroy=bind(this.destroy,this),this.onDestroy=bind(this.onDestroy,this),this.setChildScope=bind(this.setChildScope,this),this.getChanges=bind(this.getChanges,this),this.getProp=bind(this.getProp,this),this.setIdKey=bind(this.setIdKey,this),this.modelKeyComparison=bind(this.modelKeyComparison,this),ModelKey.__super__.constructor.call(this),this["interface"]={},this["interface"].scopeKeys=[],this.defaultIdKey="id",this.idKey=void 0}return extend(ModelKey,superClass),ModelKey.prototype.evalModelHandle=function(model,modelKey){return null!=model&&null!=modelKey?"self"===modelKey?model:(_.isFunction(modelKey)&&(modelKey=modelKey()),GmapUtil.getPath(model,modelKey)):void 0},ModelKey.prototype.modelKeyComparison=function(model1,model2){var hasCoords,isEqual,scope;if(hasCoords=_.contains(this["interface"].scopeKeys,"coords"),(hasCoords&&null!=this.scope.coords||!hasCoords)&&(scope=this.scope),null==scope)throw"No scope set!";return hasCoords&&(isEqual=GmapUtil.equalCoords(this.scopeOrModelVal("coords",scope,model1),this.scopeOrModelVal("coords",scope,model2)),!isEqual)?isEqual:isEqual=_.every(_.without(this["interface"].scopeKeys,"coords"),function(_this){return function(k){return _this.scopeOrModelVal(scope[k],scope,model1)===_this.scopeOrModelVal(scope[k],scope,model2)}}(this))},ModelKey.prototype.setIdKey=function(scope){return this.idKey=null!=scope.idKey?scope.idKey:this.defaultIdKey},ModelKey.prototype.setVal=function(model,key,newValue){var thingToSet;return thingToSet=this.modelOrKey(model,key),thingToSet=newValue,model},ModelKey.prototype.modelOrKey=function(model,key){return null!=key?"self"!==key?GmapUtil.getPath(model,key):model:void 0},ModelKey.prototype.getProp=function(propName,scope,model){return this.scopeOrModelVal(propName,scope,model)},ModelKey.prototype.getChanges=function(now,prev,whitelistedProps){var c,changes,prop;whitelistedProps&&(prev=_.pick(prev,whitelistedProps),now=_.pick(now,whitelistedProps)),changes={},prop={},c={};for(prop in now)prev&&prev[prop]===now[prop]||(_.isArray(now[prop])?changes[prop]=now[prop]:_.isObject(now[prop])?(c=this.getChanges(now[prop],prev?prev[prop]:null),_.isEmpty(c)||(changes[prop]=c)):changes[prop]=now[prop]);return changes},ModelKey.prototype.scopeOrModelVal=function(key,scope,model,doWrap){var maybeWrap,modelKey,modelProp,scopeProp;return null==doWrap&&(doWrap=!1),maybeWrap=function(isScope,ret,doWrap){return null==doWrap&&(doWrap=!1),doWrap?{isScope:isScope,value:ret}:ret},scopeProp=_.get(scope,key),_.isFunction(scopeProp)?maybeWrap(!0,scopeProp(model),doWrap):_.isObject(scopeProp)?maybeWrap(!0,scopeProp,doWrap):_.isString(scopeProp)?(modelKey=scopeProp,modelProp=modelKey?"self"===modelKey?model:_.get(model,modelKey):_.get(model,key),_.isFunction(modelProp)?maybeWrap(!1,modelProp(),doWrap):maybeWrap(!1,modelProp,doWrap)):maybeWrap(!0,scopeProp,doWrap)},ModelKey.prototype.setChildScope=function(keys,childScope,model){return _.each(keys,function(_this){return function(name){var isScopeObj,newValue;return isScopeObj=_this.scopeOrModelVal(name,childScope,model,!0),null!=(null!=isScopeObj?isScopeObj.value:void 0)&&(newValue=isScopeObj.value,newValue!==childScope[name])?childScope[name]=newValue:void 0}}(this)),childScope.model=model},ModelKey.prototype.onDestroy=function(scope){},ModelKey.prototype.destroy=function(manualOverride){var ref;return null==manualOverride&&(manualOverride=!1),null==this.scope||(null!=(ref=this.scope)?ref.$$destroyed:void 0)||!this.needToManualDestroy&&!manualOverride?this.clean():this.scope.$destroy()},ModelKey.prototype.updateChild=function(child,model){return null==model[this.idKey]?void this.$log.error("Model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):child.updateModel(model)},ModelKey.prototype.modelsLength=function(arrayOrObjModels){var len,toCheck;return null==arrayOrObjModels&&(arrayOrObjModels=void 0),len=0,toCheck=arrayOrObjModels?arrayOrObjModels:this.scope.models,null==toCheck?len:len=angular.isArray(toCheck)||null!=toCheck.length?toCheck.length:Object.keys(toCheck).length},ModelKey}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapModelsWatcher",["uiGmapLogger","uiGmap_async","$q","uiGmapPromise",function(Logger,_async,$q,uiGmapPromise){return{didQueueInitPromise:function(existingPiecesObj,scope){return 0===scope.models.length?(_async.promiseLock(existingPiecesObj,uiGmapPromise.promiseTypes.init,null,null,function(_this){return function(){return uiGmapPromise.resolve()}}(this)),!0):!1},figureOutState:function(idKey,scope,childObjects,comparison,callBack){var adds,children,mappedScopeModelIds,removals,updates;return adds=[],mappedScopeModelIds={},removals=[],updates=[],scope.models.forEach(function(m){var child;return null==m[idKey]?Logger.error(" id missing for model #{m.toString()},\ncan not use do comparison/insertion"):(mappedScopeModelIds[m[idKey]]={},null==childObjects.get(m[idKey])?adds.push(m):(child=childObjects.get(m[idKey]),comparison(m,child.clonedModel,scope)?void 0:updates.push({model:m,child:child})))}),children=childObjects.values(),children.forEach(function(c){var id;return null==c?void Logger.error("child undefined in ModelsWatcher."):null==c.model?void Logger.error("child.model undefined in ModelsWatcher."):(id=c.model[idKey],null==mappedScopeModelIds[id]?removals.push(c):void 0)}),{adds:adds,removals:removals,updates:updates}}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").service("uiGmapPromise",["$q","$timeout","uiGmapLogger",function($q,$timeout,$log){var ExposedPromise,SniffedPromise,defer,isInProgress,isResolved,promise,promiseStatus,promiseStatuses,promiseTypes,resolve,strPromiseStatuses;return promiseTypes={create:"create",update:"update","delete":"delete",init:"init"},promiseStatuses={IN_PROGRESS:0,RESOLVED:1,REJECTED:2},strPromiseStatuses=function(){var obj;return obj={},obj[""+promiseStatuses.IN_PROGRESS]="in-progress",obj[""+promiseStatuses.RESOLVED]="resolved",obj[""+promiseStatuses.REJECTED]="rejected",obj}(),isInProgress=function(promise){return promise.$$state?promise.$$state.status===promiseStatuses.IN_PROGRESS:promise.hasOwnProperty("$$v")?void 0:!0},isResolved=function(promise){return promise.$$state?promise.$$state.status===promiseStatuses.RESOLVED:promise.hasOwnProperty("$$v")?!0:void 0},promiseStatus=function(status){return strPromiseStatuses[status]||"done w error"},ExposedPromise=function(promise){var cancelDeferred,combined,wrapped;return cancelDeferred=$q.defer(),combined=$q.all([promise,cancelDeferred.promise]),wrapped=$q.defer(),promise.then(cancelDeferred.resolve,function(){},function(notify){return cancelDeferred.notify(notify),wrapped.notify(notify)}),combined.then(function(successes){return wrapped.resolve(successes[0]||successes[1])},function(error){return wrapped.reject(error)}),wrapped.promise.cancel=function(reason){return null==reason&&(reason="canceled"),cancelDeferred.reject(reason)},wrapped.promise.notify=function(msg){return null==msg&&(msg="cancel safe"),wrapped.notify(msg),promise.hasOwnProperty("notify")?promise.notify(msg):void 0},null!=promise.promiseType&&(wrapped.promise.promiseType=promise.promiseType),wrapped.promise},SniffedPromise=function(fnPromise,promiseType){return{promise:fnPromise,promiseType:promiseType}},defer=function(){return $q.defer()},resolve=function(){var d;return d=$q.defer(),d.resolve.apply(void 0,arguments),d.promise},promise=function(fnToWrap){var d;return _.isFunction(fnToWrap)?(d=$q.defer(),$timeout(function(){var result;return result=fnToWrap(),d.resolve(result)}),d.promise):void $log.error("uiGmapPromise.promise() only accepts functions")},{defer:defer,promise:promise,resolve:resolve,promiseTypes:promiseTypes,isInProgress:isInProgress,isResolved:isResolved,promiseStatus:promiseStatus,ExposedPromise:ExposedPromise,SniffedPromise:SniffedPromise}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropMap",function(){var PropMap;return PropMap=function(){function PropMap(){this.removeAll=bind(this.removeAll,this),this.slice=bind(this.slice,this),this.push=bind(this.push,this),this.keys=bind(this.keys,this),this.values=bind(this.values,this),this.remove=bind(this.remove,this),this.put=bind(this.put,this),this.stateChanged=bind(this.stateChanged,this),this.get=bind(this.get,this),this.length=0,this.dict={},this.didValsStateChange=!1,this.didKeysStateChange=!1,this.allVals=[],this.allKeys=[]}return PropMap.prototype.get=function(key){return this.dict[key]},PropMap.prototype.stateChanged=function(){return this.didValsStateChange=!0,this.didKeysStateChange=!0},PropMap.prototype.put=function(key,value){return null==this.get(key)&&this.length++,this.stateChanged(),this.dict[key]=value},PropMap.prototype.remove=function(key,isSafe){var value;return null==isSafe&&(isSafe=!1),isSafe&&!this.get(key)?void 0:(value=this.dict[key],delete this.dict[key],this.length--,this.stateChanged(),value)},PropMap.prototype.valuesOrKeys=function(str){var keys,vals;return null==str&&(str="Keys"),this["did"+str+"StateChange"]?(vals=[],keys=[],_.each(this.dict,function(v,k){return vals.push(v),keys.push(k)}),this.didKeysStateChange=!1,this.didValsStateChange=!1,this.allVals=vals,this.allKeys=keys,this["all"+str]):this["all"+str]},PropMap.prototype.values=function(){return this.valuesOrKeys("Vals")},PropMap.prototype.keys=function(){return this.valuesOrKeys()},PropMap.prototype.push=function(obj,key){return null==key&&(key="key"),this.put(obj[key],obj)},PropMap.prototype.slice=function(){return this.keys().map(function(_this){return function(k){return _this.remove(k)}}(this))},PropMap.prototype.removeAll=function(){return this.slice()},PropMap.prototype.each=function(cb){return _.each(this.dict,function(v,k){return cb(v)})},PropMap.prototype.map=function(cb){return _.map(this.dict,function(v,k){return cb(v)})},PropMap}()})}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapPropertyAction",["uiGmapLogger",function(Logger){var PropertyAction;return PropertyAction=function(setterFn){return this.setIfChange=function(newVal,oldVal){var callingKey;return callingKey=this.exp,_.isEqual(oldVal,newVal)?void 0:setterFn(callingKey,newVal)},this.sic=this.setIfChange,this}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapClustererMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function($log,FitHelper,PropMap){var ClustererMarkerManager;return ClustererMarkerManager=function(){function ClustererMarkerManager(gMap,opt_markers,opt_options,opt_events){null==opt_markers&&(opt_markers={}),this.opt_options=null!=opt_options?opt_options:{},this.opt_events=opt_events,this.checkSync=bind(this.checkSync,this),this.getGMarkers=bind(this.getGMarkers,this),this.fit=bind(this.fit,this),this.destroy=bind(this.destroy,this),this.clear=bind(this.clear,this),this.draw=bind(this.draw,this),this.removeMany=bind(this.removeMany,this),this.remove=bind(this.remove,this),this.addMany=bind(this.addMany,this),this.update=bind(this.update,this),this.add=bind(this.add,this),this.type=ClustererMarkerManager.type,this.clusterer=new NgMapMarkerClusterer(gMap,opt_markers,this.opt_options),this.propMapGMarkers=new PropMap,this.attachEvents(this.opt_events,"opt_events"),this.clusterer.setIgnoreHidden(!0),this.noDrawOnSingleAddRemoves=!0,$log.info(this)}return ClustererMarkerManager.type="ClustererMarkerManager",ClustererMarkerManager.prototype.checkKey=function(gMarker){var msg;return null==gMarker.key?(msg="gMarker.key undefined and it is REQUIRED!!",$log.error(msg)):void 0},ClustererMarkerManager.prototype.add=function(gMarker){return this.checkKey(gMarker),this.clusterer.addMarker(gMarker,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.put(gMarker.key,gMarker),this.checkSync()},ClustererMarkerManager.prototype.update=function(gMarker){return this.remove(gMarker),this.add(gMarker)},ClustererMarkerManager.prototype.addMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(gMarker){return _this.add(gMarker)}}(this))},ClustererMarkerManager.prototype.remove=function(gMarker){var exists;return this.checkKey(gMarker),exists=this.propMapGMarkers.get(gMarker.key),exists&&(this.clusterer.removeMarker(gMarker,this.noDrawOnSingleAddRemoves),this.propMapGMarkers.remove(gMarker.key)),this.checkSync()},ClustererMarkerManager.prototype.removeMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(gMarker){return _this.remove(gMarker)}}(this))},ClustererMarkerManager.prototype.draw=function(){return this.clusterer.repaint()},ClustererMarkerManager.prototype.clear=function(){return this.removeMany(this.getGMarkers()),this.clusterer.repaint()},ClustererMarkerManager.prototype.attachEvents=function(options,optionsName){var eventHandler,eventName,results;if(angular.isDefined(options)&&null!=options&&angular.isObject(options)){results=[];for(eventName in options)eventHandler=options[eventName],options.hasOwnProperty(eventName)&&angular.isFunction(options[eventName])?($log.info(optionsName+": Attaching event: "+eventName+" to clusterer"),results.push(google.maps.event.addListener(this.clusterer,eventName,options[eventName]))):results.push(void 0);return results}},ClustererMarkerManager.prototype.clearEvents=function(options,optionsName){var eventHandler,eventName,results;if(angular.isDefined(options)&&null!=options&&angular.isObject(options)){results=[];for(eventName in options)eventHandler=options[eventName],options.hasOwnProperty(eventName)&&angular.isFunction(options[eventName])?($log.info(optionsName+": Clearing event: "+eventName+" to clusterer"),results.push(google.maps.event.clearListeners(this.clusterer,eventName))):results.push(void 0);return results}},ClustererMarkerManager.prototype.destroy=function(){return this.clearEvents(this.opt_events,"opt_events"),this.clear()},ClustererMarkerManager.prototype.fit=function(){return FitHelper.fit(this.getGMarkers(),this.clusterer.getMap())},ClustererMarkerManager.prototype.getGMarkers=function(){return this.clusterer.getMarkers().values()},ClustererMarkerManager.prototype.checkSync=function(){},ClustererMarkerManager}()}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps.directives.api.managers").factory("uiGmapMarkerManager",["uiGmapLogger","uiGmapFitHelper","uiGmapPropMap",function(Logger,FitHelper,PropMap){var MarkerManager;return MarkerManager=function(){function MarkerManager(gMap,opt_markers,opt_options){this.getGMarkers=bind(this.getGMarkers,this),this.fit=bind(this.fit,this),this.handleOptDraw=bind(this.handleOptDraw,this),this.clear=bind(this.clear,this),this.draw=bind(this.draw,this),this.removeMany=bind(this.removeMany,this),this.remove=bind(this.remove,this),this.addMany=bind(this.addMany,this),this.update=bind(this.update,this),this.add=bind(this.add,this),this.type=MarkerManager.type,this.gMap=gMap,this.gMarkers=new PropMap,this.$log=Logger,this.$log.info(this)}return MarkerManager.type="MarkerManager",MarkerManager.prototype.add=function(gMarker,optDraw){var exists,msg;if(null==optDraw&&(optDraw=!0),null==gMarker.key)throw msg="gMarker.key undefined and it is REQUIRED!!",Logger.error(msg),msg;return exists=this.gMarkers.get(gMarker.key),exists?void 0:(this.handleOptDraw(gMarker,optDraw,!0),this.gMarkers.put(gMarker.key,gMarker))},MarkerManager.prototype.update=function(gMarker,optDraw){return null==optDraw&&(optDraw=!0),this.remove(gMarker,optDraw),this.add(gMarker,optDraw)},MarkerManager.prototype.addMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(gMarker){return _this.add(gMarker)}}(this))},MarkerManager.prototype.remove=function(gMarker,optDraw){return null==optDraw&&(optDraw=!0),this.handleOptDraw(gMarker,optDraw,!1),this.gMarkers.get(gMarker.key)?this.gMarkers.remove(gMarker.key):void 0},MarkerManager.prototype.removeMany=function(gMarkers){return gMarkers.forEach(function(_this){return function(marker){return _this.remove(marker)}}(this))},MarkerManager.prototype.draw=function(){var deletes;return deletes=[],this.gMarkers.each(function(_this){return function(gMarker){return gMarker.isDrawn?void 0:gMarker.doAdd?(gMarker.setMap(_this.gMap),gMarker.isDrawn=!0):deletes.push(gMarker)}}(this)),deletes.forEach(function(_this){return function(gMarker){return gMarker.isDrawn=!1,_this.remove(gMarker,!0)}}(this))},MarkerManager.prototype.clear=function(){return this.gMarkers.each(function(gMarker){return gMarker.setMap(null)}),delete this.gMarkers,this.gMarkers=new PropMap},MarkerManager.prototype.handleOptDraw=function(gMarker,optDraw,doAdd){return optDraw===!0?(doAdd?gMarker.setMap(this.gMap):gMarker.setMap(null),gMarker.isDrawn=!0):(gMarker.isDrawn=!1,gMarker.doAdd=doAdd)},MarkerManager.prototype.fit=function(){return FitHelper.fit(this.getGMarkers(),this.gMap)},MarkerManager.prototype.getGMarkers=function(){return this.gMarkers.values()},MarkerManager}()}])}.call(this),function(){angular.module("uiGmapgoogle-maps").factory("uiGmapadd-events",["$timeout",function($timeout){var addEvent,addEvents;return addEvent=function(target,eventName,handler){return google.maps.event.addListener(target,eventName,function(){return handler.apply(this,arguments),$timeout(function(){},!0)})},addEvents=function(target,eventName,handler){var remove;return handler?addEvent(target,eventName,handler):(remove=[],angular.forEach(eventName,function(_handler,key){return remove.push(addEvent(target,key,_handler))}),function(){return angular.forEach(remove,function(listener){return google.maps.event.removeListener(listener)}),remove=null})}}])}.call(this),function(){angular.module("uiGmapgoogle-maps").factory("uiGmaparray-sync",["uiGmapadd-events",function(mapEvents){return function(mapArray,scope,pathEval,pathChangedFn){var geojsonArray,geojsonHandlers,geojsonWatcher,isSetFromScope,legacyHandlers,legacyWatcher,mapArrayListener,scopePath,watchListener;return isSetFromScope=!1,scopePath=scope.$eval(pathEval),scope["static"]||(legacyHandlers={set_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index)))return value.lng&&value.lat?(scopePath[index].latitude=value.lat(),scopePath[index].longitude=value.lng()):scopePath[index]=value},insert_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index)))return value.lng&&value.lat?scopePath.splice(index,0,{latitude:value.lat(),longitude:value.lng()}):scopePath.splice(index,0,value)},remove_at:function(index){return isSetFromScope?void 0:scopePath.splice(index,1)}},"Polygon"===scopePath.type?geojsonArray=scopePath.coordinates[0]:"LineString"===scopePath.type&&(geojsonArray=scopePath.coordinates),geojsonHandlers={set_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index),value&&value.lng&&value.lat))return geojsonArray[index][1]=value.lat(),geojsonArray[index][0]=value.lng()},insert_at:function(index){var value;if(!isSetFromScope&&(value=mapArray.getAt(index),value&&value.lng&&value.lat))return geojsonArray.splice(index,0,[value.lng(),value.lat()])},remove_at:function(index){return isSetFromScope?void 0:geojsonArray.splice(index,1)}},mapArrayListener=mapEvents(mapArray,angular.isUndefined(scopePath.type)?legacyHandlers:geojsonHandlers)),legacyWatcher=function(newPath){var changed,i,l,newLength,newValue,oldArray,oldLength,oldValue;if(isSetFromScope=!0,oldArray=mapArray,changed=!1,newPath){for(i=0,oldLength=oldArray.getLength(),newLength=newPath.length,l=Math.min(oldLength,newLength),newValue=void 0;l>i;)oldValue=oldArray.getAt(i),newValue=newPath[i],"function"==typeof newValue.equals?newValue.equals(oldValue)||(oldArray.setAt(i,newValue),changed=!0):(oldValue.lat()!==newValue.latitude||oldValue.lng()!==newValue.longitude)&&(oldArray.setAt(i,new google.maps.LatLng(newValue.latitude,newValue.longitude)),changed=!0),i++;for(;newLength>i;)newValue=newPath[i],"function"==typeof newValue.lat&&"function"==typeof newValue.lng?oldArray.push(newValue):oldArray.push(new google.maps.LatLng(newValue.latitude,newValue.longitude)),changed=!0,i++;for(;oldLength>i;)oldArray.pop(),changed=!0,i++}return isSetFromScope=!1,changed?pathChangedFn(oldArray):void 0},geojsonWatcher=function(newPath){var array,changed,i,l,newLength,newValue,oldArray,oldLength,oldValue;if(isSetFromScope=!0,oldArray=mapArray,changed=!1,newPath){for("Polygon"===scopePath.type?array=newPath.coordinates[0]:"LineString"===scopePath.type&&(array=newPath.coordinates),i=0,oldLength=oldArray.getLength(),newLength=array.length,l=Math.min(oldLength,newLength),newValue=void 0;l>i;)oldValue=oldArray.getAt(i),newValue=array[i],(oldValue.lat()!==newValue[1]||oldValue.lng()!==newValue[0])&&(oldArray.setAt(i,new google.maps.LatLng(newValue[1],newValue[0])),changed=!0),i++;for(;newLength>i;)newValue=array[i],oldArray.push(new google.maps.LatLng(newValue[1],newValue[0])),changed=!0,i++;for(;oldLength>i;)oldArray.pop(),changed=!0,i++}return isSetFromScope=!1,changed?pathChangedFn(oldArray):void 0},scope["static"]||(watchListener=angular.isUndefined(scopePath.type)?scope.$watchCollection(pathEval,legacyWatcher):scope.$watch(pathEval,geojsonWatcher,!0)),function(){return mapArrayListener&&(mapArrayListener(),mapArrayListener=null),watchListener?(watchListener(),watchListener=null):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.utils").factory("uiGmapChromeFixes",["$timeout",function($timeout){return{maybeRepaint:function(el){return el?(el.style.opacity=.9,$timeout(function(){return el.style.opacity=1})):void 0}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps").service("uiGmapObjectIterators",function(){var _ignores,_iterators,_slapForEach,_slapMap;return _ignores=["length","forEach","map"],_iterators=[],_slapForEach=function(object){return object.forEach=function(cb){return _.each(_.omit(object,_ignores),function(val){return _.isFunction(val)?void 0:cb(val)})},object},_iterators.push(_slapForEach),_slapMap=function(object){return object.map=function(cb){return _.map(_.omit(object,_ignores),function(val){return _.isFunction(val)?void 0:cb(val)})},object},_iterators.push(_slapMap),{slapMap:_slapMap,slapForEach:_slapForEach,slapAll:function(object){return _iterators.forEach(function(it){return it(object)}),object}}})}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.options.builders").service("uiGmapCommonOptionsBuilder",["uiGmapBaseObject","uiGmapLogger","uiGmapModelKey",function(BaseObject,$log,ModelKey){var CommonOptionsBuilder;return CommonOptionsBuilder=function(superClass){function CommonOptionsBuilder(){return this.watchProps=bind(this.watchProps,this),this.buildOpts=bind(this.buildOpts,this),CommonOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(CommonOptionsBuilder,superClass),CommonOptionsBuilder.prototype.props=["clickable","draggable","editable","visible",{prop:"stroke",isColl:!0}],CommonOptionsBuilder.prototype.getCorrectModel=function(scope){return angular.isDefined(null!=scope?scope.model:void 0)?scope.model:scope},CommonOptionsBuilder.prototype.buildOpts=function(customOpts,cachedEval,forEachOpts){var model,opts,stroke;return null==customOpts&&(customOpts={}),null==forEachOpts&&(forEachOpts={}),this.scope?this.map?(model=this.getCorrectModel(this.scope),stroke=this.scopeOrModelVal("stroke",this.scope,model),opts=angular.extend(customOpts,this.DEFAULTS,{map:this.map,strokeColor:null!=stroke?stroke.color:void 0,strokeOpacity:null!=stroke?stroke.opacity:void 0,strokeWeight:null!=stroke?stroke.weight:void 0}),angular.forEach(angular.extend(forEachOpts,{
clickable:!0,draggable:!1,editable:!1,"static":!1,fit:!1,visible:!0,zIndex:0,icons:[]}),function(_this){return function(defaultValue,key){var val;return val=cachedEval?cachedEval[key]:_this.scopeOrModelVal(key,_this.scope,model),angular.isUndefined(val)?opts[key]=defaultValue:opts[key]=model[key]}}(this)),opts["static"]&&(opts.editable=!1),opts):void $log.error("this.map not defined in CommonOptionsBuilder can not buildOpts"):void $log.error("this.scope not defined in CommonOptionsBuilder can not buildOpts")},CommonOptionsBuilder.prototype.watchProps=function(props){return null==props&&(props=this.props),props.forEach(function(_this){return function(prop){return null!=_this.attrs[prop]||null!=_this.attrs[null!=prop?prop.prop:void 0]?(null!=prop?prop.isColl:void 0)?_this.scope.$watchCollection(prop.prop,_this.setMyOptions):_this.scope.$watch(prop,_this.setMyOptions):void 0}}(this))},CommonOptionsBuilder}(ModelKey)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.options.builders").factory("uiGmapPolylineOptionsBuilder",["uiGmapCommonOptionsBuilder",function(CommonOptionsBuilder){var PolylineOptionsBuilder;return PolylineOptionsBuilder=function(superClass){function PolylineOptionsBuilder(){return PolylineOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(PolylineOptionsBuilder,superClass),PolylineOptionsBuilder.prototype.buildOpts=function(pathPoints,cachedEval){return PolylineOptionsBuilder.__super__.buildOpts.call(this,{path:pathPoints},cachedEval,{geodesic:!1})},PolylineOptionsBuilder}(CommonOptionsBuilder)}]).factory("uiGmapShapeOptionsBuilder",["uiGmapCommonOptionsBuilder",function(CommonOptionsBuilder){var ShapeOptionsBuilder;return ShapeOptionsBuilder=function(superClass){function ShapeOptionsBuilder(){return ShapeOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(ShapeOptionsBuilder,superClass),ShapeOptionsBuilder.prototype.buildOpts=function(customOpts,cachedEval,forEachOpts){var fill,model;return model=this.getCorrectModel(this.scope),fill=cachedEval?cachedEval.fill:this.scopeOrModelVal("fill",this.scope,model),customOpts=angular.extend(customOpts,{fillColor:null!=fill?fill.color:void 0,fillOpacity:null!=fill?fill.opacity:void 0}),ShapeOptionsBuilder.__super__.buildOpts.call(this,customOpts,cachedEval,forEachOpts)},ShapeOptionsBuilder}(CommonOptionsBuilder)}]).factory("uiGmapPolygonOptionsBuilder",["uiGmapShapeOptionsBuilder",function(ShapeOptionsBuilder){var PolygonOptionsBuilder;return PolygonOptionsBuilder=function(superClass){function PolygonOptionsBuilder(){return PolygonOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(PolygonOptionsBuilder,superClass),PolygonOptionsBuilder.prototype.buildOpts=function(pathPoints,cachedEval){return PolygonOptionsBuilder.__super__.buildOpts.call(this,{path:pathPoints},cachedEval,{geodesic:!1})},PolygonOptionsBuilder}(ShapeOptionsBuilder)}]).factory("uiGmapRectangleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(ShapeOptionsBuilder){var RectangleOptionsBuilder;return RectangleOptionsBuilder=function(superClass){function RectangleOptionsBuilder(){return RectangleOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(RectangleOptionsBuilder,superClass),RectangleOptionsBuilder.prototype.buildOpts=function(bounds,cachedEval){return RectangleOptionsBuilder.__super__.buildOpts.call(this,{bounds:bounds},cachedEval)},RectangleOptionsBuilder}(ShapeOptionsBuilder)}]).factory("uiGmapCircleOptionsBuilder",["uiGmapShapeOptionsBuilder",function(ShapeOptionsBuilder){var CircleOptionsBuilder;return CircleOptionsBuilder=function(superClass){function CircleOptionsBuilder(){return CircleOptionsBuilder.__super__.constructor.apply(this,arguments)}return extend(CircleOptionsBuilder,superClass),CircleOptionsBuilder.prototype.buildOpts=function(center,radius,cachedEval){return CircleOptionsBuilder.__super__.buildOpts.call(this,{center:center,radius:radius},cachedEval)},CircleOptionsBuilder}(ShapeOptionsBuilder)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.options").service("uiGmapMarkerOptions",["uiGmapLogger","uiGmapGmapUtil",function($log,GmapUtil){return _.extend(GmapUtil,{createOptions:function(coords,icon,defaults,map){var opts;return null==defaults&&(defaults={}),opts=angular.extend({},defaults,{position:null!=defaults.position?defaults.position:GmapUtil.getCoords(coords),visible:null!=defaults.visible?defaults.visible:GmapUtil.validateCoords(coords)}),(null!=defaults.icon||null!=icon)&&(opts=angular.extend(opts,{icon:null!=defaults.icon?defaults.icon:icon})),null!=map&&(opts.map=map),opts},isLabel:function(options){return null==options?!1:null!=options.labelContent||null!=options.labelAnchor||null!=options.labelClass||null!=options.labelStyle||null!=options.labelVisible}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapBasePolyChildModel",["uiGmapLogger","$timeout","uiGmaparray-sync","uiGmapGmapUtil","uiGmapEventsHelper",function($log,$timeout,arraySync,GmapUtil,EventsHelper){return function(Builder,gFactory){var BasePolyChildModel;return BasePolyChildModel=function(superClass){function BasePolyChildModel(scope,attrs,map,defaults,model){var create;this.scope=scope,this.attrs=attrs,this.map=map,this.defaults=defaults,this.model=model,this.clean=bind(this.clean,this),this.clonedModel=_.clone(this.model,!0),this.isDragging=!1,this.internalEvents={dragend:function(_this){return function(){return _.defer(function(){return _this.isDragging=!1})}}(this),dragstart:function(_this){return function(){return _this.isDragging=!0}}(this)},create=function(_this){return function(){var maybeCachedEval,pathPoints;if(!_this.isDragging)return pathPoints=_this.convertPathPoints(_this.scope.path),null!=_this.gObject&&_this.clean(),null!=_this.scope.model&&(maybeCachedEval=_this.scope),pathPoints.length>0&&(_this.gObject=gFactory(_this.buildOpts(pathPoints,maybeCachedEval))),_this.gObject?(_this.scope.fit&&_this.extendMapBounds(_this.map,pathPoints),arraySync(_this.gObject.getPath(),_this.scope,"path",function(pathPoints){return _this.scope.fit?_this.extendMapBounds(_this.map,pathPoints):void 0}),angular.isDefined(_this.scope.events)&&angular.isObject(_this.scope.events)&&(_this.listeners=_this.model?EventsHelper.setEvents(_this.gObject,_this.scope,_this.model):EventsHelper.setEvents(_this.gObject,_this.scope,_this.scope)),_this.internalListeners=_this.model?EventsHelper.setEvents(_this.gObject,{events:_this.internalEvents},_this.model):EventsHelper.setEvents(_this.gObject,{events:_this.internalEvents},_this.scope)):void 0}}(this),create(),this.scope.$watch("path",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)&&_this.gObject?void 0:create()}}(this),!0),!this.scope["static"]&&angular.isDefined(this.scope.editable)&&this.scope.$watch("editable",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue?(newValue=!_this.isFalse(newValue),null!=(ref=_this.gObject)?ref.setEditable(newValue):void 0):void 0}}(this),!0),angular.isDefined(this.scope.draggable)&&this.scope.$watch("draggable",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue?(newValue=!_this.isFalse(newValue),null!=(ref=_this.gObject)?ref.setDraggable(newValue):void 0):void 0}}(this),!0),angular.isDefined(this.scope.visible)&&this.scope.$watch("visible",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&(newValue=!_this.isFalse(newValue)),null!=(ref=_this.gObject)?ref.setVisible(newValue):void 0}}(this),!0),angular.isDefined(this.scope.geodesic)&&this.scope.$watch("geodesic",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue?(newValue=!_this.isFalse(newValue),null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0):void 0}}(this),!0),angular.isDefined(this.scope.stroke)&&angular.isDefined(this.scope.stroke.weight)&&this.scope.$watch("stroke.weight",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),angular.isDefined(this.scope.stroke)&&angular.isDefined(this.scope.stroke.color)&&this.scope.$watch("stroke.color",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),angular.isDefined(this.scope.stroke)&&angular.isDefined(this.scope.stroke.opacity)&&this.scope.$watch("stroke.opacity",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),angular.isDefined(this.scope.icons)&&this.scope.$watch("icons",function(_this){return function(newValue,oldValue){var ref;return newValue!==oldValue&&null!=(ref=_this.gObject)?ref.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this),!0),this.scope.$on("$destroy",function(_this){return function(){return _this.clean(),_this.scope=null}}(this)),angular.isDefined(this.scope.fill)&&angular.isDefined(this.scope.fill.color)&&this.scope.$watch("fill.color",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.gObject.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this)),angular.isDefined(this.scope.fill)&&angular.isDefined(this.scope.fill.opacity)&&this.scope.$watch("fill.opacity",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.gObject.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this)),angular.isDefined(this.scope.zIndex)&&this.scope.$watch("zIndex",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.gObject.setOptions(_this.buildOpts(_this.gObject.getPath())):void 0}}(this))}return extend(BasePolyChildModel,superClass),BasePolyChildModel.include(GmapUtil),BasePolyChildModel.prototype.clean=function(){var ref;return EventsHelper.removeEvents(this.listeners),EventsHelper.removeEvents(this.internalListeners),null!=(ref=this.gObject)&&ref.setMap(null),this.gObject=null},BasePolyChildModel}(Builder)}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapDrawFreeHandChildModel",["uiGmapLogger","$q",function($log,$q){var drawFreeHand,freeHandMgr;return drawFreeHand=function(map,polys,done){var move,poly;return poly=new google.maps.Polyline({map:map,clickable:!1}),move=google.maps.event.addListener(map,"mousemove",function(e){return poly.getPath().push(e.latLng)}),void google.maps.event.addListenerOnce(map,"mouseup",function(e){var path;return google.maps.event.removeListener(move),path=poly.getPath(),poly.setMap(null),polys.push(new google.maps.Polygon({map:map,path:path})),poly=null,google.maps.event.clearListeners(map.getDiv(),"mousedown"),done()})},freeHandMgr=function(map1,scope){var disableMap,enableMap;return this.map=map1,disableMap=function(_this){return function(){var mapOptions;return mapOptions={draggable:!1,disableDefaultUI:!0,scrollwheel:!1,disableDoubleClickZoom:!1},$log.info("disabling map move"),_this.map.setOptions(mapOptions)}}(this),enableMap=function(_this){return function(){var mapOptions,ref;return mapOptions={draggable:!0,disableDefaultUI:!1,scrollwheel:!0,disableDoubleClickZoom:!0},null!=(ref=_this.deferred)&&ref.resolve(),_.defer(function(){return _this.map.setOptions(_.extend(mapOptions,scope.options))})}}(this),this.engage=function(_this){return function(polys1){return _this.polys=polys1,_this.deferred=$q.defer(),disableMap(),$log.info("DrawFreeHandChildModel is engaged (drawing)."),google.maps.event.addDomListener(_this.map.getDiv(),"mousedown",function(e){return drawFreeHand(_this.map,_this.polys,enableMap)}),_this.deferred.promise}}(this),this}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapMarkerChildModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger","uiGmapEventsHelper","uiGmapPropertyAction","uiGmapMarkerOptions","uiGmapIMarker","uiGmapMarkerManager","uiGmapPromise",function(ModelKey,GmapUtil,$log,EventsHelper,PropertyAction,MarkerOptions,IMarker,MarkerManager,uiGmapPromise){var MarkerChildModel;return MarkerChildModel=function(superClass){function MarkerChildModel(scope,model1,keys,gMap,defaults,doClick,gManager,doDrawSelf,trackModel,needRedraw){var action;this.model=model1,this.keys=keys,this.gMap=gMap,this.defaults=defaults,this.doClick=doClick,this.gManager=gManager,this.doDrawSelf=null!=doDrawSelf?doDrawSelf:!0,this.trackModel=null!=trackModel?trackModel:!0,this.needRedraw=null!=needRedraw?needRedraw:!1,this.internalEvents=bind(this.internalEvents,this),this.setLabelOptions=bind(this.setLabelOptions,this),this.setOptions=bind(this.setOptions,this),this.setIcon=bind(this.setIcon,this),this.setCoords=bind(this.setCoords,this),this.isNotValid=bind(this.isNotValid,this),this.maybeSetScopeValue=bind(this.maybeSetScopeValue,this),this.createMarker=bind(this.createMarker,this),this.setMyScope=bind(this.setMyScope,this),this.updateModel=bind(this.updateModel,this),this.handleModelChanges=bind(this.handleModelChanges,this),this.destroy=bind(this.destroy,this),this.clonedModel=_.clone(this.model,!0),this.deferred=uiGmapPromise.defer(),_.each(this.keys,function(_this){return function(v,k){var keyValue;return keyValue=_this.keys[k],null!=keyValue&&!_.isFunction(keyValue)&&_.isString(keyValue)?_this[k+"Key"]=keyValue:void 0}}(this)),this.idKey=this.idKeyKey||"id",null!=this.model[this.idKey]&&(this.id=this.model[this.idKey]),MarkerChildModel.__super__.constructor.call(this,scope),this.scope.getGMarker=function(_this){return function(){return _this.gObject}}(this),this.firstTime=!0,this.trackModel?(this.scope.model=this.model,this.scope.$watch("model",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.handleModelChanges(newValue,oldValue):void 0}}(this),!0)):(action=new PropertyAction(function(_this){return function(calledKey,newVal){return _this.firstTime?void 0:_this.setMyScope(calledKey,scope)}}(this),!1),_.each(this.keys,function(v,k){return scope.$watch(k,action.sic,!0)})),this.scope.$on("$destroy",function(_this){return function(){return destroy(_this)}}(this)),this.createMarker(this.model),$log.info(this)}var destroy;return extend(MarkerChildModel,superClass),MarkerChildModel.include(GmapUtil),MarkerChildModel.include(EventsHelper),MarkerChildModel.include(MarkerOptions),destroy=function(child){return null!=(null!=child?child.gObject:void 0)&&(child.removeEvents(child.externalListeners),child.removeEvents(child.internalListeners),null!=child?child.gObject:void 0)?(child.removeFromManager&&child.gManager.remove(child.gObject),child.gObject.setMap(null),child.gObject=null):void 0},MarkerChildModel.prototype.destroy=function(removeFromManager){return null==removeFromManager&&(removeFromManager=!0),this.removeFromManager=removeFromManager,this.scope.$destroy()},MarkerChildModel.prototype.handleModelChanges=function(newValue,oldValue){var changes,ctr,len;return changes=this.getChanges(newValue,oldValue,IMarker.keys),this.firstTime?void 0:(ctr=0,len=_.keys(changes).length,_.each(changes,function(_this){return function(v,k){var doDraw;return ctr+=1,doDraw=len===ctr,_this.setMyScope(k,newValue,oldValue,!1,!0,doDraw),_this.needRedraw=!0}}(this)))},MarkerChildModel.prototype.updateModel=function(model){return this.clonedModel=_.clone(model,!0),this.setMyScope("all",model,this.model)},MarkerChildModel.prototype.renderGMarker=function(doDraw,validCb){var coords;if(null==doDraw&&(doDraw=!0),coords=this.getProp("coords",this.scope,this.model),null!=coords){if(!this.validateCoords(coords))return void $log.debug("MarkerChild does not have coords yet. They may be defined later.");if(null!=validCb&&validCb(),doDraw&&this.gObject)return this.gManager.add(this.gObject)}else if(doDraw&&this.gObject)return this.gManager.remove(this.gObject)},MarkerChildModel.prototype.setMyScope=function(thingThatChanged,model,oldModel,isInit,doDraw){var justCreated;switch(null==oldModel&&(oldModel=void 0),null==isInit&&(isInit=!1),null==doDraw&&(doDraw=!0),null==model?model=this.model:this.model=model,this.gObject||(this.setOptions(this.scope,doDraw),justCreated=!0),thingThatChanged){case"all":return _.each(this.keys,function(_this){return function(v,k){return _this.setMyScope(k,model,oldModel,isInit,doDraw)}}(this));case"icon":return this.maybeSetScopeValue("icon",model,oldModel,this.iconKey,this.evalModelHandle,isInit,this.setIcon,doDraw);case"coords":return this.maybeSetScopeValue("coords",model,oldModel,this.coordsKey,this.evalModelHandle,isInit,this.setCoords,doDraw);case"options":if(!justCreated)return this.createMarker(model,oldModel,isInit,doDraw)}},MarkerChildModel.prototype.createMarker=function(model,oldModel,isInit,doDraw){return null==oldModel&&(oldModel=void 0),null==isInit&&(isInit=!1),null==doDraw&&(doDraw=!0),this.maybeSetScopeValue("options",model,oldModel,this.optionsKey,this.evalModelHandle,isInit,this.setOptions,doDraw),this.firstTime=!1},MarkerChildModel.prototype.maybeSetScopeValue=function(scopePropName,model,oldModel,modelKey,evaluate,isInit,gSetter,doDraw){return null==gSetter&&(gSetter=void 0),null==doDraw&&(doDraw=!0),null!=gSetter?gSetter(this.scope,doDraw):void 0},MarkerChildModel.doDrawSelf&&doDraw&&MarkerChildModel.gManager.draw(),MarkerChildModel.prototype.isNotValid=function(scope,doCheckGmarker){var hasIdenticalScopes,hasNoGmarker;return null==doCheckGmarker&&(doCheckGmarker=!0),hasNoGmarker=doCheckGmarker?void 0===this.gObject:!1,hasIdenticalScopes=this.trackModel?!1:scope.$id!==this.scope.$id,hasIdenticalScopes||hasNoGmarker},MarkerChildModel.prototype.setCoords=function(scope,doDraw){return null==doDraw&&(doDraw=!0),this.isNotValid(scope)||null==this.gObject?void 0:this.renderGMarker(doDraw,function(_this){return function(){var newGValue,newModelVal,oldGValue;return newModelVal=_this.getProp("coords",scope,_this.model),newGValue=_this.getCoords(newModelVal),oldGValue=_this.gObject.getPosition(),null==oldGValue||null==newGValue||newGValue.lng()!==oldGValue.lng()||newGValue.lat()!==oldGValue.lat()?(_this.gObject.setPosition(newGValue),_this.gObject.setVisible(_this.validateCoords(newModelVal))):void 0}}(this))},MarkerChildModel.prototype.setIcon=function(scope,doDraw){return null==doDraw&&(doDraw=!0),this.isNotValid(scope)||null==this.gObject?void 0:this.renderGMarker(doDraw,function(_this){return function(){var coords,newValue,oldValue;return oldValue=_this.gObject.getIcon(),newValue=_this.getProp("icon",scope,_this.model),oldValue!==newValue?(_this.gObject.setIcon(newValue),coords=_this.getProp("coords",scope,_this.model),_this.gObject.setPosition(_this.getCoords(coords)),_this.gObject.setVisible(_this.validateCoords(coords))):void 0}}(this))},MarkerChildModel.prototype.setOptions=function(scope,doDraw){var ref;if(null==doDraw&&(doDraw=!0),!this.isNotValid(scope,!1)){if(this.renderGMarker(doDraw,function(_this){return function(){var _options,coords,icon;return coords=_this.getProp("coords",scope,_this.model),icon=_this.getProp("icon",scope,_this.model),_options=_this.getProp("options",scope,_this.model),_this.opts=_this.createOptions(coords,icon,_options),_this.isLabel(_this.gObject)!==_this.isLabel(_this.opts)&&null!=_this.gObject&&(_this.gManager.remove(_this.gObject),_this.gObject=void 0),null!=_this.gObject&&_this.gObject.setOptions(_this.setLabelOptions(_this.opts)),_this.gObject||(_this.isLabel(_this.opts)?_this.gObject=new MarkerWithLabel(_this.setLabelOptions(_this.opts)):_this.opts.content?(_this.gObject=new RichMarker(_this.opts),_this.gObject.getIcon=_this.gObject.getContent,_this.gObject.setIcon=_this.gObject.setContent):_this.gObject=new google.maps.Marker(_this.opts),_.extend(_this.gObject,{model:_this.model})),_this.externalListeners&&_this.removeEvents(_this.externalListeners),_this.internalListeners&&_this.removeEvents(_this.internalListeners),_this.externalListeners=_this.setEvents(_this.gObject,_this.scope,_this.model,["dragend"]),_this.internalListeners=_this.setEvents(_this.gObject,{events:_this.internalEvents(),$evalAsync:function(){}},_this.model),null!=_this.id?_this.gObject.key=_this.id:void 0}}(this)),this.gObject&&(this.gObject.getMap()||this.gManager.type!==MarkerManager.type))this.deferred.resolve(this.gObject);else{if(!this.gObject)return this.deferred.reject("gObject is null");(null!=(ref=this.gObject)?ref.getMap():0)&&this.gManager.type===MarkerManager.type||($log.debug("gObject has no map yet"),this.deferred.resolve(this.gObject))}return this.model[this.fitKey]?this.gManager.fit():void 0}},MarkerChildModel.prototype.setLabelOptions=function(opts){return opts.labelAnchor&&(opts.labelAnchor=this.getLabelPositionPoint(opts.labelAnchor)),opts},MarkerChildModel.prototype.internalEvents=function(){return{dragend:function(_this){return function(marker,eventName,model,mousearg){var events,modelToSet,newCoords;return modelToSet=_this.trackModel?_this.scope.model:_this.model,newCoords=_this.setCoordsFromEvent(_this.modelOrKey(modelToSet,_this.coordsKey),_this.gObject.getPosition()),modelToSet=_this.setVal(model,_this.coordsKey,newCoords),events=_this.scope.events,null!=(null!=events?events.dragend:void 0)&&events.dragend(marker,eventName,modelToSet,mousearg),_this.scope.$apply()}}(this),click:function(_this){return function(marker,eventName,model,mousearg){var click;return click=_this.getProp("click",_this.scope,_this.model),_this.doClick&&null!=click?_this.scope.$evalAsync(click(marker,eventName,_this.model,mousearg)):void 0}}(this)}},MarkerChildModel}(ModelKey)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygonChildModel",["uiGmapBasePolyChildModel","uiGmapPolygonOptionsBuilder",function(BaseGen,Builder){var PolygonChildModel,base,gFactory;return gFactory=function(opts){return new google.maps.Polygon(opts)},base=new BaseGen(Builder,gFactory),PolygonChildModel=function(superClass){function PolygonChildModel(){return PolygonChildModel.__super__.constructor.apply(this,arguments)}return extend(PolygonChildModel,superClass),PolygonChildModel}(base)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylineChildModel",["uiGmapBasePolyChildModel","uiGmapPolylineOptionsBuilder",function(BaseGen,Builder){var PolylineChildModel,base,gFactory;return gFactory=function(opts){return new google.maps.Polyline(opts)},base=BaseGen(Builder,gFactory),PolylineChildModel=function(superClass){function PolylineChildModel(){return PolylineChildModel.__super__.constructor.apply(this,arguments)}return extend(PolylineChildModel,superClass),PolylineChildModel}(base)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.child").factory("uiGmapWindowChildModel",["uiGmapBaseObject","uiGmapGmapUtil","uiGmapLogger","$compile","$http","$templateCache","uiGmapChromeFixes","uiGmapEventsHelper",function(BaseObject,GmapUtil,$log,$compile,$http,$templateCache,ChromeFixes,EventsHelper){var WindowChildModel;return WindowChildModel=function(superClass){function WindowChildModel(model1,scope1,opts,isIconVisibleOnClick,mapCtrl,markerScope,element,needToManualDestroy,markerIsVisibleAfterWindowClose){var maybeMarker;this.model=model1,this.scope=scope1,this.opts=opts,this.isIconVisibleOnClick=isIconVisibleOnClick,this.mapCtrl=mapCtrl,this.markerScope=markerScope,this.element=element,this.needToManualDestroy=null!=needToManualDestroy?needToManualDestroy:!1,this.markerIsVisibleAfterWindowClose=null!=markerIsVisibleAfterWindowClose?markerIsVisibleAfterWindowClose:!0,this.updateModel=bind(this.updateModel,this),this.destroy=bind(this.destroy,this),this.remove=bind(this.remove,this),this.getLatestPosition=bind(this.getLatestPosition,this),this.hideWindow=bind(this.hideWindow,this),this.showWindow=bind(this.showWindow,this),this.handleClick=bind(this.handleClick,this),this.watchOptions=bind(this.watchOptions,this),this.watchCoords=bind(this.watchCoords,this),this.createGWin=bind(this.createGWin,this),this.watchElement=bind(this.watchElement,this),this.watchAndDoShow=bind(this.watchAndDoShow,this),this.doShow=bind(this.doShow,this),this.clonedModel=_.clone(this.model,!0),this.getGmarker=function(){var ref,ref1;return null!=(null!=(ref=this.markerScope)?ref.getGMarker:void 0)&&null!=(ref1=this.markerScope)?ref1.getGMarker():void 0},this.listeners=[],this.createGWin(),maybeMarker=this.getGmarker(),null!=maybeMarker&&maybeMarker.setClickable(!0),this.watchElement(),this.watchOptions(),this.watchCoords(),this.watchAndDoShow(),this.scope.$on("$destroy",function(_this){return function(){return _this.destroy()}}(this)),$log.info(this)}return extend(WindowChildModel,superClass),WindowChildModel.include(GmapUtil),WindowChildModel.include(EventsHelper),WindowChildModel.prototype.doShow=function(wasOpen){return this.scope.show===!0||wasOpen?this.showWindow():this.hideWindow()},WindowChildModel.prototype.watchAndDoShow=function(){return null!=this.model.show&&(this.scope.show=this.model.show),this.scope.$watch("show",this.doShow,!0),this.doShow()},WindowChildModel.prototype.watchElement=function(){return this.scope.$watch(function(_this){return function(){var ref,wasOpen;if(_this.element||_this.html)return _this.html!==_this.element.html()&&_this.gObject?(null!=(ref=_this.opts)&&(ref.content=void 0),wasOpen=_this.gObject.isOpen(),_this.remove(),_this.createGWin(wasOpen)):void 0}}(this))},WindowChildModel.prototype.createGWin=function(isOpen){var _opts,defaults,maybeMarker,ref,ref1;return null==isOpen&&(isOpen=!1),maybeMarker=this.getGmarker(),defaults={},null!=this.opts&&(this.scope.coords&&(this.opts.position=this.getCoords(this.scope.coords)),defaults=this.opts),this.element&&(this.html=_.isObject(this.element)?this.element.html():this.element),_opts=this.scope.options?this.scope.options:defaults,this.opts=this.createWindowOptions(maybeMarker,this.markerScope||this.scope,this.html,_opts),null!=this.opts?(this.gObject||(this.opts.boxClass&&window.InfoBox&&"function"==typeof window.InfoBox?this.gObject=new window.InfoBox(this.opts):this.gObject=new google.maps.InfoWindow(this.opts),this.listeners.push(google.maps.event.addListener(this.gObject,"domready",function(){return ChromeFixes.maybeRepaint(this.content)})),this.listeners.push(google.maps.event.addListener(this.gObject,"closeclick",function(_this){return function(){return maybeMarker&&(maybeMarker.setAnimation(_this.oldMarkerAnimation),_this.markerIsVisibleAfterWindowClose&&_.delay(function(){return maybeMarker.setVisible(!1),maybeMarker.setVisible(_this.markerIsVisibleAfterWindowClose)},250)),_this.gObject.close(),_this.model.show=!1,null!=_this.scope.closeClick?_this.scope.$evalAsync(_this.scope.closeClick()):_this.scope.$evalAsync()}}(this)))),this.gObject.setContent(this.opts.content),this.handleClick((null!=(ref=this.scope)&&null!=(ref1=ref.options)?ref1.forceClick:void 0)||isOpen),this.doShow(this.gObject.isOpen())):void 0},WindowChildModel.prototype.watchCoords=function(){var scope;return scope=null!=this.markerScope?this.markerScope:this.scope,scope.$watch("coords",function(_this){return function(newValue,oldValue){var pos;if(newValue!==oldValue){if(null==newValue)_this.hideWindow();else if(!_this.validateCoords(newValue))return void $log.error("WindowChildMarker cannot render marker as scope.coords as no position on marker: "+JSON.stringify(_this.model));if(pos=_this.getCoords(newValue),_this.doShow(),_this.gObject.setPosition(pos),_this.opts)return _this.opts.position=pos}}}(this),!0)},WindowChildModel.prototype.watchOptions=function(){return this.scope.$watch("options",function(_this){return function(newValue,oldValue){if(newValue!==oldValue&&(_this.opts=newValue,null!=_this.gObject)){if(_this.gObject.setOptions(_this.opts),null!=_this.opts.visible&&_this.opts.visible)return _this.showWindow();if(null!=_this.opts.visible)return _this.hideWindow()}}}(this),!0)},WindowChildModel.prototype.handleClick=function(forceClick){var click,maybeMarker;if(null!=this.gObject)return maybeMarker=this.getGmarker(),click=function(_this){return function(){return null==_this.gObject&&_this.createGWin(),_this.showWindow(),null!=maybeMarker?(_this.initialMarkerVisibility=maybeMarker.getVisible(),_this.oldMarkerAnimation=maybeMarker.getAnimation(),maybeMarker.setVisible(_this.isIconVisibleOnClick)):void 0}}(this),forceClick&&click(),maybeMarker?this.listeners=this.listeners.concat(this.setEvents(maybeMarker,{events:{click:click}},this.model)):void 0},WindowChildModel.prototype.showWindow=function(){var compiled,show,templateScope;return null!=this.gObject?(show=function(_this){return function(){var isOpen,maybeMarker,pos;if(!_this.gObject.isOpen()){if(maybeMarker=_this.getGmarker(),null!=_this.gObject&&null!=_this.gObject.getPosition&&(pos=_this.gObject.getPosition()),maybeMarker&&(pos=maybeMarker.getPosition()),!pos)return;if(_this.gObject.open(_this.mapCtrl,maybeMarker),isOpen=_this.gObject.isOpen(),_this.model.show!==isOpen)return _this.model.show=isOpen}}}(this),this.scope.templateUrl?$http.get(this.scope.templateUrl,{cache:$templateCache}).then(function(_this){return function(content){var compiled,templateScope;return templateScope=_this.scope.$new(),angular.isDefined(_this.scope.templateParameter)&&(templateScope.parameter=_this.scope.templateParameter),compiled=$compile(content.data)(templateScope),_this.gObject.setContent(compiled[0]),show()}}(this)):this.scope.template?(templateScope=this.scope.$new(),angular.isDefined(this.scope.templateParameter)&&(templateScope.parameter=this.scope.templateParameter),compiled=$compile(this.scope.template)(templateScope),this.gObject.setContent(compiled[0]),show()):show()):void 0},WindowChildModel.prototype.hideWindow=function(){return null!=this.gObject&&this.gObject.isOpen()?this.gObject.close():void 0},WindowChildModel.prototype.getLatestPosition=function(overridePos){var maybeMarker;return maybeMarker=this.getGmarker(),
null==this.gObject||null==maybeMarker||overridePos?overridePos?this.gObject.setPosition(overridePos):void 0:this.gObject.setPosition(maybeMarker.getPosition())},WindowChildModel.prototype.remove=function(){return this.hideWindow(),this.removeEvents(this.listeners),this.listeners.length=0,delete this.gObject,delete this.opts},WindowChildModel.prototype.destroy=function(manualOverride){var ref;return null==manualOverride&&(manualOverride=!1),this.remove(),null==this.scope||(null!=(ref=this.scope)?ref.$$destroyed:void 0)||!this.needToManualDestroy&&!manualOverride?void 0:this.scope.$destroy()},WindowChildModel.prototype.updateModel=function(model){return this.clonedModel=_.clone(model,!0),_.extend(this.model,this.clonedModel)},WindowChildModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapBasePolysParentModel",["$timeout","uiGmapLogger","uiGmapModelKey","uiGmapModelsWatcher","uiGmapPropMap","uiGmap_async","uiGmapPromise",function($timeout,$log,ModelKey,ModelsWatcher,PropMap,_async,uiGmapPromise){return function(IPoly,PolyChildModel,gObjectName){var BasePolysParentModel;return BasePolysParentModel=function(superClass){function BasePolysParentModel(scope,element,attrs,gMap1,defaults){this.element=element,this.attrs=attrs,this.gMap=gMap1,this.defaults=defaults,this.createChild=bind(this.createChild,this),this.pieceMeal=bind(this.pieceMeal,this),this.createAllNew=bind(this.createAllNew,this),this.watchIdKey=bind(this.watchIdKey,this),this.createChildScopes=bind(this.createChildScopes,this),this.watchDestroy=bind(this.watchDestroy,this),this.onDestroy=bind(this.onDestroy,this),this.rebuildAll=bind(this.rebuildAll,this),this.doINeedToWipe=bind(this.doINeedToWipe,this),this.watchModels=bind(this.watchModels,this),BasePolysParentModel.__super__.constructor.call(this,scope),this["interface"]=IPoly,this.$log=$log,this.plurals=new PropMap,_.each(IPoly.scopeKeys,function(_this){return function(name){return _this[name+"Key"]=void 0}}(this)),this.models=void 0,this.firstTime=!0,this.$log.info(this),this.createChildScopes()}return extend(BasePolysParentModel,superClass),BasePolysParentModel.include(ModelsWatcher),BasePolysParentModel.prototype.watchModels=function(scope){return scope.$watchCollection("models",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.doINeedToWipe(newValue)||scope.doRebuildAll?_this.rebuildAll(scope,!0,!0):_this.createChildScopes(!1):void 0}}(this))},BasePolysParentModel.prototype.doINeedToWipe=function(newValue){var newValueIsEmpty;return newValueIsEmpty=null!=newValue?0===newValue.length:!0,this.plurals.length>0&&newValueIsEmpty},BasePolysParentModel.prototype.rebuildAll=function(scope,doCreate,doDelete){return this.onDestroy(doDelete).then(function(_this){return function(){return doCreate?_this.createChildScopes():void 0}}(this))},BasePolysParentModel.prototype.onDestroy=function(scope){return BasePolysParentModel.__super__.onDestroy.call(this,this.scope),_async.promiseLock(this,uiGmapPromise.promiseTypes["delete"],void 0,void 0,function(_this){return function(){return _async.each(_this.plurals.values(),function(child){return child.destroy(!0)},_async.chunkSizeFrom(_this.scope.cleanchunk,!1)).then(function(){var ref;return null!=(ref=_this.plurals)?ref.removeAll():void 0})}}(this))},BasePolysParentModel.prototype.watchDestroy=function(scope){return scope.$on("$destroy",function(_this){return function(){return _this.rebuildAll(scope,!1,!0)}}(this))},BasePolysParentModel.prototype.createChildScopes=function(isCreatingFromScratch){return null==isCreatingFromScratch&&(isCreatingFromScratch=!0),angular.isUndefined(this.scope.models)?void this.$log.error("No models to create "+gObjectName+"s from! I Need direct models!"):null!=this.gMap&&null!=this.scope.models?(this.watchIdKey(this.scope),isCreatingFromScratch?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1)):void 0},BasePolysParentModel.prototype.watchIdKey=function(scope){return this.setIdKey(scope),scope.$watch("idKey",function(_this){return function(newValue,oldValue){return newValue!==oldValue&&null==newValue?(_this.idKey=newValue,_this.rebuildAll(scope,!0,!0)):void 0}}(this))},BasePolysParentModel.prototype.createAllNew=function(scope,isArray){var maybeCanceled;return null==isArray&&(isArray=!1),this.models=scope.models,this.firstTime&&(this.watchModels(scope),this.watchDestroy(scope)),this.didQueueInitPromise(this,scope)?void 0:(maybeCanceled=null,_async.promiseLock(this,uiGmapPromise.promiseTypes.create,"createAllNew",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return _async.each(scope.models,function(model){var child;return child=_this.createChild(model,_this.gMap),maybeCanceled&&($log.debug("createNew should fall through safely"),child.isEnabled=!1),maybeCanceled},_async.chunkSizeFrom(scope.chunk)).then(function(){return _this.firstTime=!1})}}(this)))},BasePolysParentModel.prototype.pieceMeal=function(scope,isArray){var maybeCanceled,payload;return null==isArray&&(isArray=!0),scope.$$destroyed?void 0:(maybeCanceled=null,payload=null,this.models=scope.models,null!=scope&&this.modelsLength()&&this.plurals.length?_async.promiseLock(this,uiGmapPromise.promiseTypes.update,"pieceMeal",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return uiGmapPromise.promise(function(){return _this.figureOutState(_this.idKey,scope,_this.plurals,_this.modelKeyComparison)}).then(function(state){return payload=state,payload.updates.length&&$log.info("polygons updates: "+payload.updates.length+" will be missed"),_async.each(payload.removals,function(child){return null!=child?(child.destroy(),_this.plurals.remove(child.model[_this.idKey]),maybeCanceled):void 0},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.adds,function(modelToAdd){return maybeCanceled&&$log.debug("pieceMeal should fall through safely"),_this.createChild(modelToAdd,_this.gMap),maybeCanceled},_async.chunkSizeFrom(scope.chunk))})}}(this)):(this.inProgress=!1,this.rebuildAll(this.scope,!0,!0)))},BasePolysParentModel.prototype.createChild=function(model,gMap){var child,childScope;return childScope=this.scope.$new(!1),this.setChildScope(IPoly.scopeKeys,childScope,model),childScope.$watch("model",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.setChildScope(childScope,newValue):void 0}}(this),!0),childScope["static"]=this.scope["static"],child=new PolyChildModel(childScope,this.attrs,gMap,this.defaults,model),null==model[this.idKey]?void this.$log.error(gObjectName+" model has no id to assign a child to.\nThis is required for performance. Please assign id,\nor redirect id to a different key."):(this.plurals.put(model[this.idKey],child),child)},BasePolysParentModel}(ModelKey)}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapCircleParentModel",["uiGmapLogger","$timeout","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapCircleOptionsBuilder",function($log,$timeout,GmapUtil,EventsHelper,Builder){var CircleParentModel;return CircleParentModel=function(superClass){function CircleParentModel(scope,element,attrs,map,DEFAULTS){var clean,gObject,lastRadius;this.attrs=attrs,this.map=map,this.DEFAULTS=DEFAULTS,this.scope=scope,lastRadius=null,clean=function(_this){return function(){return lastRadius=null,null!=_this.listeners?(_this.removeEvents(_this.listeners),_this.listeners=void 0):void 0}}(this),gObject=new google.maps.Circle(this.buildOpts(GmapUtil.getCoords(scope.center),scope.radius)),this.setMyOptions=function(_this){return function(newVals,oldVals){return _.isEqual(newVals,oldVals)?void 0:gObject.setOptions(_this.buildOpts(GmapUtil.getCoords(scope.center),scope.radius))}}(this),this.props=this.props.concat([{prop:"center",isColl:!0},{prop:"fill",isColl:!0},"radius","zIndex"]),this.watchProps(),null!=this.scope.control&&(this.scope.control.getCircle=function(){return gObject}),clean(),this.listeners=this.setEvents(gObject,scope,scope,["radius_changed"]),null!=this.listeners&&this.listeners.push(google.maps.event.addListener(gObject,"radius_changed",function(){var newRadius,work;return newRadius=gObject.getRadius(),newRadius!==lastRadius?(lastRadius=newRadius,work=function(){var ref,ref1;return newRadius!==scope.radius&&(scope.radius=newRadius),(null!=(ref=scope.events)?ref.radius_changed:void 0)&&_.isFunction(null!=(ref1=scope.events)?ref1.radius_changed:void 0)?scope.events.radius_changed(gObject,"radius_changed",scope,arguments):void 0},angular.mock?work():scope.$evalAsync(function(){return work()})):void 0})),null!=this.listeners&&this.listeners.push(google.maps.event.addListener(gObject,"center_changed",function(){return scope.$evalAsync(function(){return angular.isDefined(scope.center.type)?(scope.center.coordinates[1]=gObject.getCenter().lat(),scope.center.coordinates[0]=gObject.getCenter().lng()):(scope.center.latitude=gObject.getCenter().lat(),scope.center.longitude=gObject.getCenter().lng())})})),scope.$on("$destroy",function(_this){return function(){return clean(),gObject.setMap(null)}}(this)),$log.info(this)}return extend(CircleParentModel,superClass),CircleParentModel.include(GmapUtil),CircleParentModel.include(EventsHelper),CircleParentModel}(Builder)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapDrawingManagerParentModel",["uiGmapLogger","$timeout","uiGmapBaseObject","uiGmapEventsHelper",function($log,$timeout,BaseObject,EventsHelper){var DrawingManagerParentModel;return DrawingManagerParentModel=function(superClass){function DrawingManagerParentModel(scope,element,attrs,map){var gObject,listeners;this.scope=scope,this.attrs=attrs,this.map=map,gObject=new google.maps.drawing.DrawingManager(this.scope.options),gObject.setMap(this.map),listeners=void 0,null!=this.scope.control&&(this.scope.control.getDrawingManager=function(){return gObject}),!this.scope["static"]&&this.scope.options&&this.scope.$watch("options",function(newValue){return null!=gObject?gObject.setOptions(newValue):void 0},!0),null!=this.scope.events&&(listeners=this.setEvents(gObject,this.scope,this.scope),this.scope.$watch("events",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:(null!=listeners&&_this.removeEvents(listeners),listeners=_this.setEvents(gObject,_this.scope,_this.scope))}}(this))),this.scope.$on("$destroy",function(_this){return function(){return null!=listeners&&_this.removeEvents(listeners),gObject.setMap(null),gObject=null}}(this))}return extend(DrawingManagerParentModel,superClass),DrawingManagerParentModel.include(EventsHelper),DrawingManagerParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIMarkerParentModel",["uiGmapModelKey","uiGmapLogger",function(ModelKey,Logger){var IMarkerParentModel;return IMarkerParentModel=function(superClass){function IMarkerParentModel(scope1,element,attrs,map){if(this.scope=scope1,this.element=element,this.attrs=attrs,this.map=map,this.onWatch=bind(this.onWatch,this),this.watch=bind(this.watch,this),this.validateScope=bind(this.validateScope,this),IMarkerParentModel.__super__.constructor.call(this,this.scope),this.$log=Logger,!this.validateScope(this.scope))throw new String("Unable to construct IMarkerParentModel due to invalid scope");this.doClick=angular.isDefined(this.attrs.click),null!=this.scope.options&&(this.DEFAULTS=this.scope.options),this.watch("coords",this.scope),this.watch("icon",this.scope),this.watch("options",this.scope),this.scope.$on("$destroy",function(_this){return function(){return _this.onDestroy(_this.scope)}}(this))}return extend(IMarkerParentModel,superClass),IMarkerParentModel.prototype.DEFAULTS={},IMarkerParentModel.prototype.validateScope=function(scope){var ret;return null==scope?(this.$log.error(this.constructor.name+": invalid scope used"),!1):(ret=null!=scope.coords,ret?ret:(this.$log.error(this.constructor.name+": no valid coords attribute found"),!1))},IMarkerParentModel.prototype.watch=function(propNameToWatch,scope,equalityCheck){return null==equalityCheck&&(equalityCheck=!0),scope.$watch(propNameToWatch,function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:_this.onWatch(propNameToWatch,scope,newValue,oldValue)}}(this),equalityCheck)},IMarkerParentModel.prototype.onWatch=function(propNameToWatch,scope,newValue,oldValue){},IMarkerParentModel}(ModelKey)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapIWindowParentModel",["uiGmapModelKey","uiGmapGmapUtil","uiGmapLogger",function(ModelKey,GmapUtil,Logger){var IWindowParentModel;return IWindowParentModel=function(superClass){function IWindowParentModel(scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache){IWindowParentModel.__super__.constructor.call(this,scope),this.$log=Logger,this.$timeout=$timeout,this.$compile=$compile,this.$http=$http,this.$templateCache=$templateCache,this.DEFAULTS={},null!=scope.options&&(this.DEFAULTS=scope.options)}return extend(IWindowParentModel,superClass),IWindowParentModel.include(GmapUtil),IWindowParentModel.prototype.getItem=function(scope,modelsPropToIterate,index){return"models"===modelsPropToIterate?scope[modelsPropToIterate][index]:scope[modelsPropToIterate].get(index)},IWindowParentModel}(ModelKey)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapLayerParentModel",["uiGmapBaseObject","uiGmapLogger","$timeout",function(BaseObject,Logger,$timeout){var LayerParentModel;return LayerParentModel=function(superClass){function LayerParentModel(scope,element,attrs,gMap,onLayerCreated,$log){return this.scope=scope,this.element=element,this.attrs=attrs,this.gMap=gMap,this.onLayerCreated=null!=onLayerCreated?onLayerCreated:void 0,this.$log=null!=$log?$log:Logger,this.createGoogleLayer=bind(this.createGoogleLayer,this),null==this.attrs.type?void this.$log.info("type attribute for the layer directive is mandatory. Layer creation aborted!!"):(this.createGoogleLayer(),this.doShow=!0,angular.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.gObject.setMap(this.gMap),this.scope.$watch("show",function(_this){return function(newValue,oldValue){return newValue!==oldValue?(_this.doShow=newValue,newValue?_this.gObject.setMap(_this.gMap):_this.gObject.setMap(null)):void 0}}(this),!0),this.scope.$watch("options",function(_this){return function(newValue,oldValue){return newValue!==oldValue?(_this.gObject.setMap(null),_this.gObject=null,_this.createGoogleLayer()):void 0}}(this),!0),void this.scope.$on("$destroy",function(_this){return function(){return _this.gObject.setMap(null)}}(this)))}return extend(LayerParentModel,superClass),LayerParentModel.prototype.createGoogleLayer=function(){var base;return null==this.attrs.options?this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type]:new google.maps[this.attrs.namespace][this.attrs.type]:this.gObject=void 0===this.attrs.namespace?new google.maps[this.attrs.type](this.scope.options):new google.maps[this.attrs.namespace][this.attrs.type](this.scope.options),null!=this.gObject&&null!=this.onLayerCreated&&"function"==typeof(base=this.onLayerCreated(this.scope,this.gObject))?base(this.gObject):void 0},LayerParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMapTypeParentModel",["uiGmapBaseObject","uiGmapLogger",function(BaseObject,Logger){var MapTypeParentModel;return MapTypeParentModel=function(superClass){function MapTypeParentModel(scope,element,attrs,gMap,$log){return this.scope=scope,this.element=element,this.attrs=attrs,this.gMap=gMap,this.$log=null!=$log?$log:Logger,this.hideOverlay=bind(this.hideOverlay,this),this.showOverlay=bind(this.showOverlay,this),this.refreshMapType=bind(this.refreshMapType,this),this.createMapType=bind(this.createMapType,this),null==this.attrs.options?void this.$log.info("options attribute for the map-type directive is mandatory. Map type creation aborted!!"):(this.id=this.gMap.overlayMapTypesCount=this.gMap.overlayMapTypesCount+1||0,this.doShow=!0,this.createMapType(),angular.isDefined(this.attrs.show)&&(this.doShow=this.scope.show),this.doShow&&null!=this.gMap&&this.showOverlay(),this.scope.$watch("show",function(_this){return function(newValue,oldValue){return newValue!==oldValue?(_this.doShow=newValue,newValue?_this.showOverlay():_this.hideOverlay()):void 0}}(this),!0),this.scope.$watch("options",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:_this.refreshMapType()}}(this),!0),angular.isDefined(this.attrs.refresh)&&this.scope.$watch("refresh",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:_this.refreshMapType()}}(this),!0),void this.scope.$on("$destroy",function(_this){return function(){return _this.hideOverlay(),_this.mapType=null}}(this)))}return extend(MapTypeParentModel,superClass),MapTypeParentModel.prototype.createMapType=function(){if(null!=this.scope.options.getTile)this.mapType=this.scope.options;else{if(null==this.scope.options.getTileUrl)return void this.$log.info("options should provide either getTile or getTileUrl methods. Map type creation aborted!!");this.mapType=new google.maps.ImageMapType(this.scope.options)}return this.attrs.id&&this.scope.id&&(this.gMap.mapTypes.set(this.scope.id,this.mapType),angular.isDefined(this.attrs.show)||(this.doShow=!1)),this.mapType.layerId=this.id},MapTypeParentModel.prototype.refreshMapType=function(){return this.hideOverlay(),this.mapType=null,this.createMapType(),this.doShow&&null!=this.gMap?this.showOverlay():void 0},MapTypeParentModel.prototype.showOverlay=function(){return this.gMap.overlayMapTypes.push(this.mapType)},MapTypeParentModel.prototype.hideOverlay=function(){var found;return found=!1,this.gMap.overlayMapTypes.forEach(function(_this){return function(mapType,index){found||mapType.layerId!==_this.id||(found=!0,_this.gMap.overlayMapTypes.removeAt(index))}}(this))},MapTypeParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapMarkersParentModel",["uiGmapIMarkerParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapMarkerChildModel","uiGmap_async","uiGmapClustererMarkerManager","uiGmapMarkerManager","$timeout","uiGmapIMarker","uiGmapPromise","uiGmapGmapUtil","uiGmapLogger",function(IMarkerParentModel,ModelsWatcher,PropMap,MarkerChildModel,_async,ClustererMarkerManager,MarkerManager,$timeout,IMarker,uiGmapPromise,GmapUtil,$log){var MarkersParentModel,_setPlurals;return _setPlurals=function(val,objToSet){return objToSet.plurals=new PropMap,objToSet.scope.plurals=objToSet.plurals,objToSet},MarkersParentModel=function(superClass){function MarkersParentModel(scope,element,attrs,map){this.onDestroy=bind(this.onDestroy,this),this.newChildMarker=bind(this.newChildMarker,this),this.pieceMeal=bind(this.pieceMeal,this),this.rebuildAll=bind(this.rebuildAll,this),this.createAllNew=bind(this.createAllNew,this),this.createChildScopes=bind(this.createChildScopes,this),this.validateScope=bind(this.validateScope,this),this.onWatch=bind(this.onWatch,this);var self;MarkersParentModel.__super__.constructor.call(this,scope,element,attrs,map),this["interface"]=IMarker,self=this,_setPlurals(new PropMap,this),this.scope.pluralsUpdate={updateCtr:0},this.$log.info(this),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,this.setIdKey(this.scope),this.scope.$watch("doRebuildAll",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.doRebuildAll=newValue:void 0}}(this)),this.modelsLength()||(this.modelsRendered=!1),this.scope.$watch("models",function(_this){return function(newValue,oldValue){if(!_.isEqual(newValue,oldValue)||!_this.modelsRendered){if(0===newValue.length&&0===oldValue.length)return;return _this.modelsRendered=!0,_this.onWatch("models",_this.scope,newValue,oldValue)}}}(this),!this.isTrue(attrs.modelsbyref)),this.watch("doCluster",this.scope),this.watch("clusterOptions",this.scope),this.watch("clusterEvents",this.scope),this.watch("fit",this.scope),this.watch("idKey",this.scope),this.gManager=void 0,this.createAllNew(this.scope)}return extend(MarkersParentModel,superClass),MarkersParentModel.include(GmapUtil),MarkersParentModel.include(ModelsWatcher),MarkersParentModel.prototype.onWatch=function(propNameToWatch,scope,newValue,oldValue){return"idKey"===propNameToWatch&&newValue!==oldValue&&(this.idKey=newValue),this.doRebuildAll||"doCluster"===propNameToWatch?this.rebuildAll(scope):this.pieceMeal(scope)},MarkersParentModel.prototype.validateScope=function(scope){var modelsNotDefined;return modelsNotDefined=angular.isUndefined(scope.models)||void 0===scope.models,modelsNotDefined&&this.$log.error(this.constructor.name+": no valid models attribute found"),MarkersParentModel.__super__.validateScope.call(this,scope)||modelsNotDefined},MarkersParentModel.prototype.createChildScopes=function(isCreatingFromScratch){return null!=this.gMap&&null!=this.scope.models?isCreatingFromScratch?this.createAllNew(this.scope,!1):this.pieceMeal(this.scope,!1):void 0},MarkersParentModel.prototype.createAllNew=function(scope){var maybeCanceled,ref,ref1,ref2,self;return null!=this.gManager&&(this.gManager.clear(),delete this.gManager),scope.doCluster?(scope.clusterEvents&&(self=this,this.origClusterEvents?angular.extend(scope.clusterEvents,this.origClusterEvents):this.origClusterEvents={click:null!=(ref=scope.clusterEvents)?ref.click:void 0,mouseout:null!=(ref1=scope.clusterEvents)?ref1.mouseout:void 0,mouseover:null!=(ref2=scope.clusterEvents)?ref2.mouseover:void 0},angular.extend(scope.clusterEvents,{click:function(cluster){return self.maybeExecMappedEvent(cluster,"click")},mouseout:function(cluster){return self.maybeExecMappedEvent(cluster,"mouseout")},mouseover:function(cluster){return self.maybeExecMappedEvent(cluster,"mouseover")}})),this.gManager=new ClustererMarkerManager(this.map,void 0,scope.clusterOptions,scope.clusterEvents)):this.gManager=new MarkerManager(this.map),this.didQueueInitPromise(this,scope)?void 0:(maybeCanceled=null,_async.promiseLock(this,uiGmapPromise.promiseTypes.create,"createAllNew",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return _async.each(scope.models,function(model){return _this.newChildMarker(model,scope),maybeCanceled},_async.chunkSizeFrom(scope.chunk)).then(function(){return _this.modelsRendered=!0,scope.fit&&_this.gManager.fit(),_this.gManager.draw(),_this.scope.pluralsUpdate.updateCtr+=1},_async.chunkSizeFrom(scope.chunk))}}(this)))},MarkersParentModel.prototype.rebuildAll=function(scope){var ref;if(scope.doRebuild||void 0===scope.doRebuild)return(null!=(ref=this.scope.plurals)?ref.length:void 0)?this.onDestroy(scope).then(function(_this){return function(){return _this.createAllNew(scope)}}(this)):this.createAllNew(scope)},MarkersParentModel.prototype.pieceMeal=function(scope){var maybeCanceled,payload;if(!scope.$$destroyed)return maybeCanceled=null,payload=null,this.modelsLength()&&this.scope.plurals.length?_async.promiseLock(this,uiGmapPromise.promiseTypes.update,"pieceMeal",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return uiGmapPromise.promise(function(){return _this.figureOutState(_this.idKey,scope,_this.scope.plurals,_this.modelKeyComparison)}).then(function(state){return payload=state,_async.each(payload.removals,function(child){return null!=child?(null!=child.destroy&&child.destroy(),_this.scope.plurals.remove(child.id),maybeCanceled):void 0},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.adds,function(modelToAdd){return _this.newChildMarker(modelToAdd,scope),maybeCanceled},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.updates,function(update){return _this.updateChild(update.child,update.model),maybeCanceled},_async.chunkSizeFrom(scope.chunk))}).then(function(){return(payload.adds.length>0||payload.removals.length>0||payload.updates.length>0)&&(scope.plurals=_this.scope.plurals,scope.fit&&_this.gManager.fit(),_this.gManager.draw()),_this.scope.pluralsUpdate.updateCtr+=1})}}(this)):(this.inProgress=!1,this.rebuildAll(scope))},MarkersParentModel.prototype.newChildMarker=function(model,scope){var child,childScope,doDrawSelf,keys;return null==model[this.idKey]?void this.$log.error("Marker model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.$log.info("child",child,"markers",this.scope.markerModels),childScope=scope.$new(!1),childScope.events=scope.events,keys={},IMarker.scopeKeys.forEach(function(k){return keys[k]=scope[k]}),child=new MarkerChildModel(childScope,model,keys,this.map,this.DEFAULTS,this.doClick,this.gManager,doDrawSelf=!1),this.scope.plurals.put(model[this.idKey],child),child)},MarkersParentModel.prototype.onDestroy=function(scope){return MarkersParentModel.__super__.onDestroy.call(this,scope),_async.promiseLock(this,uiGmapPromise.promiseTypes["delete"],void 0,void 0,function(_this){return function(){return _async.each(_this.scope.plurals.values(),function(model){return null!=model?model.destroy(!1):void 0},_async.chunkSizeFrom(_this.scope.cleanchunk,!1)).then(function(){return null!=_this.gManager&&_this.gManager.clear(),_this.plurals.removeAll(),_this.plurals!==_this.scope.plurals&&console.error("plurals out of sync for MarkersParentModel"),_this.scope.pluralsUpdate.updateCtr+=1})}}(this))},MarkersParentModel.prototype.maybeExecMappedEvent=function(cluster,fnName){var pair,ref;return _.isFunction(null!=(ref=this.scope.clusterEvents)?ref[fnName]:void 0)&&(pair=this.mapClusterToPlurals(cluster),this.origClusterEvents[fnName])?this.origClusterEvents[fnName](pair.cluster,pair.mapped):void 0},MarkersParentModel.prototype.mapClusterToPlurals=function(cluster){var mapped;return mapped=cluster.getMarkers().map(function(_this){return function(g){return _this.scope.plurals.get(g.key).model}}(this)),{cluster:cluster,mapped:mapped}},MarkersParentModel.prototype.getItem=function(scope,modelsPropToIterate,index){return"models"===modelsPropToIterate?scope[modelsPropToIterate][index]:scope[modelsPropToIterate].get(index)},MarkersParentModel}(IMarkerParentModel)}])}.call(this),function(){["Polygon","Polyline"].forEach(function(name){return angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmap"+name+"sParentModel",["uiGmapBasePolysParentModel","uiGmap"+name+"ChildModel","uiGmapI"+name,function(BasePolysParentModel,ChildModel,IPoly){return BasePolysParentModel(IPoly,ChildModel,name)}])})}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapRectangleParentModel",["uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper","uiGmapRectangleOptionsBuilder",function($log,GmapUtil,EventsHelper,Builder){var RectangleParentModel;return RectangleParentModel=function(superClass){function RectangleParentModel(scope,element,attrs,map,DEFAULTS){var bounds,clear,createBounds,dragging,fit,gObject,init,listeners,myListeners,settingBoundsFromScope,updateBounds;this.scope=scope,this.attrs=attrs,this.map=map,this.DEFAULTS=DEFAULTS,bounds=void 0,dragging=!1,myListeners=[],listeners=void 0,fit=function(_this){return function(){return _this.isTrue(_this.attrs.fit)?_this.fitMapBounds(_this.map,bounds):void 0}}(this),createBounds=function(_this){return function(){var ref,ref1,ref2;return null!=_this.scope.bounds&&null!=(null!=(ref=_this.scope.bounds)?ref.sw:void 0)&&null!=(null!=(ref1=_this.scope.bounds)?ref1.ne:void 0)&&_this.validateBoundPoints(_this.scope.bounds)?(bounds=_this.convertBoundPoints(_this.scope.bounds),$log.info("new new bounds created: "+JSON.stringify(bounds))):null!=_this.scope.bounds.getNorthEast&&null!=_this.scope.bounds.getSouthWest?bounds=_this.scope.bounds:null!=_this.scope.bounds?$log.error("Invalid bounds for newValue: "+JSON.stringify(null!=(ref2=_this.scope)?ref2.bounds:void 0)):void 0}}(this),createBounds(),gObject=new google.maps.Rectangle(this.buildOpts(bounds)),$log.info("gObject (rectangle) created: "+gObject),settingBoundsFromScope=!1,updateBounds=function(_this){return function(){var b,ne,sw;return b=gObject.getBounds(),ne=b.getNorthEast(),sw=b.getSouthWest(),settingBoundsFromScope?void 0:_this.scope.$evalAsync(function(s){return null!=s.bounds&&null!=s.bounds.sw&&null!=s.bounds.ne&&(s.bounds.ne={latitude:ne.lat(),longitude:ne.lng()},s.bounds.sw={latitude:sw.lat(),longitude:sw.lng()}),null!=s.bounds.getNorthEast&&null!=s.bounds.getSouthWest?s.bounds=b:void 0})}}(this),init=function(_this){return function(){return fit(),_this.removeEvents(myListeners),myListeners.push(google.maps.event.addListener(gObject,"dragstart",function(){return dragging=!0})),myListeners.push(google.maps.event.addListener(gObject,"dragend",function(){
return dragging=!1,updateBounds()})),myListeners.push(google.maps.event.addListener(gObject,"bounds_changed",function(){return dragging?void 0:updateBounds()}))}}(this),clear=function(_this){return function(){return _this.removeEvents(myListeners),null!=listeners&&_this.removeEvents(listeners),gObject.setMap(null)}}(this),null!=bounds&&init(),this.scope.$watch("bounds",function(newValue,oldValue){var isNew;if(!(_.isEqual(newValue,oldValue)&&null!=bounds||dragging))return settingBoundsFromScope=!0,null==newValue?void clear():(null==bounds?isNew=!0:fit(),createBounds(),gObject.setBounds(bounds),settingBoundsFromScope=!1,isNew&&null!=bounds?init():void 0)},!0),this.setMyOptions=function(_this){return function(newVals,oldVals){return _.isEqual(newVals,oldVals)||null==bounds||null==newVals?void 0:gObject.setOptions(_this.buildOpts(bounds))}}(this),this.props.push("bounds"),this.watchProps(this.props),null!=this.attrs.events&&(listeners=this.setEvents(gObject,this.scope,this.scope),this.scope.$watch("events",function(_this){return function(newValue,oldValue){return _.isEqual(newValue,oldValue)?void 0:(null!=listeners&&_this.removeEvents(listeners),listeners=_this.setEvents(gObject,_this.scope,_this.scope))}}(this))),this.scope.$on("$destroy",function(_this){return function(){return clear()}}(this)),$log.info(this)}return extend(RectangleParentModel,superClass),RectangleParentModel.include(GmapUtil),RectangleParentModel.include(EventsHelper),RectangleParentModel}(Builder)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapSearchBoxParentModel",["uiGmapBaseObject","uiGmapLogger","uiGmapEventsHelper","$timeout","$http","$templateCache",function(BaseObject,Logger,EventsHelper,$timeout,$http,$templateCache){var SearchBoxParentModel;return SearchBoxParentModel=function(superClass){function SearchBoxParentModel(scope,element,attrs,gMap,ctrlPosition,template,$log){var controlDiv;return this.scope=scope,this.element=element,this.attrs=attrs,this.gMap=gMap,this.ctrlPosition=ctrlPosition,this.template=template,this.$log=null!=$log?$log:Logger,this.setVisibility=bind(this.setVisibility,this),this.getBounds=bind(this.getBounds,this),this.setBounds=bind(this.setBounds,this),this.createSearchBox=bind(this.createSearchBox,this),this.addToParentDiv=bind(this.addToParentDiv,this),this.addAsMapControl=bind(this.addAsMapControl,this),this.init=bind(this.init,this),null==this.attrs.template?void this.$log.error("template attribute for the search-box directive is mandatory. Places Search Box creation aborted!!"):(angular.isUndefined(this.scope.options)&&(this.scope.options={},this.scope.options.visible=!0),angular.isUndefined(this.scope.options.visible)&&(this.scope.options.visible=!0),angular.isUndefined(this.scope.options.autocomplete)&&(this.scope.options.autocomplete=!1),this.visible=this.scope.options.visible,this.autocomplete=this.scope.options.autocomplete,controlDiv=angular.element("<div></div>"),controlDiv.append(this.template),this.input=controlDiv.find("input")[0],void this.init())}return extend(SearchBoxParentModel,superClass),SearchBoxParentModel.include(EventsHelper),SearchBoxParentModel.prototype.init=function(){return this.createSearchBox(),this.scope.$watch("options",function(_this){return function(newValue,oldValue){return angular.isObject(newValue)&&(null!=newValue.bounds&&_this.setBounds(newValue.bounds),null!=newValue.visible&&_this.visible!==newValue.visible)?_this.setVisibility(newValue.visible):void 0}}(this),!0),null!=this.attrs.parentdiv?this.addToParentDiv():this.addAsMapControl(),this.autocomplete?this.listener=google.maps.event.addListener(this.gObject,"place_changed",function(_this){return function(){return _this.places=_this.gObject.getPlace()}}(this)):this.listener=google.maps.event.addListener(this.gObject,"places_changed",function(_this){return function(){return _this.places=_this.gObject.getPlaces()}}(this)),this.listeners=this.setEvents(this.gObject,this.scope,this.scope),this.$log.info(this),this.scope.$on("$destroy",function(_this){return function(){return _this.gObject=null}}(this))},SearchBoxParentModel.prototype.addAsMapControl=function(){return this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input)},SearchBoxParentModel.prototype.addToParentDiv=function(){return this.parentDiv=angular.element(document.getElementById(this.scope.parentdiv)),this.parentDiv.append(this.input)},SearchBoxParentModel.prototype.createSearchBox=function(){return this.autocomplete?this.gObject=new google.maps.places.Autocomplete(this.input,this.scope.options):this.gObject=new google.maps.places.SearchBox(this.input,this.scope.options)},SearchBoxParentModel.prototype.setBounds=function(bounds){if(angular.isUndefined(bounds.isEmpty))this.$log.error("Error: SearchBoxParentModel setBounds. Bounds not an instance of LatLngBounds.");else if(bounds.isEmpty()===!1&&null!=this.gObject)return this.gObject.setBounds(bounds)},SearchBoxParentModel.prototype.getBounds=function(){return this.gObject.getBounds()},SearchBoxParentModel.prototype.setVisibility=function(val){return null!=this.attrs.parentdiv?val===!1?this.parentDiv.addClass("ng-hide"):this.parentDiv.removeClass("ng-hide"):val===!1?this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].clear():this.gMap.controls[google.maps.ControlPosition[this.ctrlPosition]].push(this.input),this.visible=val},SearchBoxParentModel}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api.models.parent").factory("uiGmapWindowsParentModel",["uiGmapIWindowParentModel","uiGmapModelsWatcher","uiGmapPropMap","uiGmapWindowChildModel","uiGmapLinked","uiGmap_async","uiGmapLogger","$timeout","$compile","$http","$templateCache","$interpolate","uiGmapPromise","uiGmapIWindow","uiGmapGmapUtil",function(IWindowParentModel,ModelsWatcher,PropMap,WindowChildModel,Linked,_async,$log,$timeout,$compile,$http,$templateCache,$interpolate,uiGmapPromise,IWindow,GmapUtil){var WindowsParentModel;return WindowsParentModel=function(superClass){function WindowsParentModel(scope,element,attrs,ctrls,gMap1,markersScope){this.gMap=gMap1,this.markersScope=markersScope,this.modelKeyComparison=bind(this.modelKeyComparison,this),this.interpolateContent=bind(this.interpolateContent,this),this.setChildScope=bind(this.setChildScope,this),this.createWindow=bind(this.createWindow,this),this.setContentKeys=bind(this.setContentKeys,this),this.pieceMeal=bind(this.pieceMeal,this),this.createAllNew=bind(this.createAllNew,this),this.watchIdKey=bind(this.watchIdKey,this),this.createChildScopes=bind(this.createChildScopes,this),this.watchOurScope=bind(this.watchOurScope,this),this.watchDestroy=bind(this.watchDestroy,this),this.onDestroy=bind(this.onDestroy,this),this.rebuildAll=bind(this.rebuildAll,this),this.doINeedToWipe=bind(this.doINeedToWipe,this),this.watchModels=bind(this.watchModels,this),this.go=bind(this.go,this),WindowsParentModel.__super__.constructor.call(this,scope,element,attrs,ctrls,$timeout,$compile,$http,$templateCache),this["interface"]=IWindow,this.plurals=new PropMap,_.each(IWindow.scopeKeys,function(_this){return function(name){return _this[name+"Key"]=void 0}}(this)),this.linked=new Linked(scope,element,attrs,ctrls),this.contentKeys=void 0,this.isIconVisibleOnClick=void 0,this.firstTime=!0,this.firstWatchModels=!0,this.$log.info(self),this.parentScope=void 0,this.go(scope)}return extend(WindowsParentModel,superClass),WindowsParentModel.include(ModelsWatcher),WindowsParentModel.prototype.go=function(scope){return this.watchOurScope(scope),this.doRebuildAll=null!=this.scope.doRebuildAll?this.scope.doRebuildAll:!1,scope.$watch("doRebuildAll",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.doRebuildAll=newValue:void 0}}(this)),this.createChildScopes()},WindowsParentModel.prototype.watchModels=function(scope){var itemToWatch;return itemToWatch=null!=this.markersScope?"pluralsUpdate":"models",scope.$watch(itemToWatch,function(_this){return function(newValue,oldValue){var doScratch;return!_.isEqual(newValue,oldValue)||_this.firstWatchModels?(_this.firstWatchModels=!1,_this.doRebuildAll||_this.doINeedToWipe(scope.models)?_this.rebuildAll(scope,!0,!0):(doScratch=0===_this.plurals.length,null!=_this.existingPieces?_.last(_this.existingPieces._content).then(function(){return _this.createChildScopes(doScratch)}):_this.createChildScopes(doScratch))):void 0}}(this),!0)},WindowsParentModel.prototype.doINeedToWipe=function(newValue){var newValueIsEmpty;return newValueIsEmpty=null!=newValue?0===newValue.length:!0,this.plurals.length>0&&newValueIsEmpty},WindowsParentModel.prototype.rebuildAll=function(scope,doCreate,doDelete){return this.onDestroy(doDelete).then(function(_this){return function(){return doCreate?_this.createChildScopes():void 0}}(this))},WindowsParentModel.prototype.onDestroy=function(scope){return WindowsParentModel.__super__.onDestroy.call(this,this.scope),_async.promiseLock(this,uiGmapPromise.promiseTypes["delete"],void 0,void 0,function(_this){return function(){return _async.each(_this.plurals.values(),function(child){return child.destroy()},_async.chunkSizeFrom(_this.scope.cleanchunk,!1)).then(function(){var ref;return null!=(ref=_this.plurals)?ref.removeAll():void 0})}}(this))},WindowsParentModel.prototype.watchDestroy=function(scope){return scope.$on("$destroy",function(_this){return function(){return _this.firstWatchModels=!0,_this.firstTime=!0,_this.rebuildAll(scope,!1,!0)}}(this))},WindowsParentModel.prototype.watchOurScope=function(scope){return _.each(IWindow.scopeKeys,function(_this){return function(name){var nameKey;return nameKey=name+"Key",_this[nameKey]="function"==typeof scope[name]?scope[name]():scope[name]}}(this))},WindowsParentModel.prototype.createChildScopes=function(isCreatingFromScratch){var modelsNotDefined,ref,ref1;return null==isCreatingFromScratch&&(isCreatingFromScratch=!0),this.isIconVisibleOnClick=!0,angular.isDefined(this.linked.attrs.isiconvisibleonclick)&&(this.isIconVisibleOnClick=this.linked.scope.isIconVisibleOnClick),modelsNotDefined=angular.isUndefined(this.linked.scope.models),!modelsNotDefined||void 0!==this.markersScope&&void 0!==(null!=(ref=this.markersScope)?ref.plurals:void 0)&&void 0!==(null!=(ref1=this.markersScope)?ref1.models:void 0)?null!=this.gMap?null!=this.linked.scope.models?(this.watchIdKey(this.linked.scope),isCreatingFromScratch?this.createAllNew(this.linked.scope,!1):this.pieceMeal(this.linked.scope,!1)):(this.parentScope=this.markersScope,this.watchIdKey(this.parentScope),isCreatingFromScratch?this.createAllNew(this.markersScope,!0,"plurals",!1):this.pieceMeal(this.markersScope,!0,"plurals",!1)):void 0:void this.$log.error("No models to create windows from! Need direct models or models derived from markers!")},WindowsParentModel.prototype.watchIdKey=function(scope){return this.setIdKey(scope),scope.$watch("idKey",function(_this){return function(newValue,oldValue){return newValue!==oldValue&&null==newValue?(_this.idKey=newValue,_this.rebuildAll(scope,!0,!0)):void 0}}(this))},WindowsParentModel.prototype.createAllNew=function(scope,hasGMarker,modelsPropToIterate,isArray){var maybeCanceled;return null==modelsPropToIterate&&(modelsPropToIterate="models"),null==isArray&&(isArray=!1),this.firstTime&&(this.watchModels(scope),this.watchDestroy(scope)),this.setContentKeys(scope.models),this.didQueueInitPromise(this,scope)?void 0:(maybeCanceled=null,_async.promiseLock(this,uiGmapPromise.promiseTypes.create,"createAllNew",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return _async.each(scope.models,function(model){var gMarker,ref;return gMarker=hasGMarker&&null!=(ref=_this.getItem(scope,modelsPropToIterate,model[_this.idKey]))?ref.gObject:void 0,maybeCanceled||(!gMarker&&_this.markersScope&&$log.error("Unable to get gMarker from markersScope!"),_this.createWindow(model,gMarker,_this.gMap)),maybeCanceled},_async.chunkSizeFrom(scope.chunk)).then(function(){return _this.firstTime=!1})}}(this)))},WindowsParentModel.prototype.pieceMeal=function(scope,hasGMarker,modelsPropToIterate,isArray){var maybeCanceled,payload;return null==modelsPropToIterate&&(modelsPropToIterate="models"),null==isArray&&(isArray=!0),scope.$$destroyed?void 0:(maybeCanceled=null,payload=null,null!=scope&&this.modelsLength()&&this.plurals.length?_async.promiseLock(this,uiGmapPromise.promiseTypes.update,"pieceMeal",function(canceledMsg){return maybeCanceled=canceledMsg},function(_this){return function(){return uiGmapPromise.promise(function(){return _this.figureOutState(_this.idKey,scope,_this.plurals,_this.modelKeyComparison)}).then(function(state){return payload=state,_async.each(payload.removals,function(child){return null!=child?(_this.plurals.remove(child.id),null!=child.destroy&&child.destroy(!0),maybeCanceled):void 0},_async.chunkSizeFrom(scope.chunk))}).then(function(){return _async.each(payload.adds,function(modelToAdd){var gMarker,ref;if(gMarker=null!=(ref=_this.getItem(scope,modelsPropToIterate,modelToAdd[_this.idKey]))?ref.gObject:void 0,!gMarker)throw"Gmarker undefined";return _this.createWindow(modelToAdd,gMarker,_this.gMap),maybeCanceled})}).then(function(){return _async.each(payload.updates,function(update){return _this.updateChild(update.child,update.model),maybeCanceled},_async.chunkSizeFrom(scope.chunk))})}}(this)):($log.debug("pieceMeal: rebuildAll"),this.rebuildAll(this.scope,!0,!0)))},WindowsParentModel.prototype.setContentKeys=function(models){return this.modelsLength(models)?this.contentKeys=Object.keys(models[0]):void 0},WindowsParentModel.prototype.createWindow=function(model,gMarker,gMap){var child,childScope,fakeElement,opts,ref,ref1;return childScope=this.linked.scope.$new(!1),this.setChildScope(childScope,model),childScope.$watch("model",function(_this){return function(newValue,oldValue){return newValue!==oldValue?_this.setChildScope(childScope,newValue):void 0}}(this),!0),fakeElement={html:function(_this){return function(){return _this.interpolateContent(_this.linked.element.html(),model)}}(this)},this.DEFAULTS=this.scopeOrModelVal(this.optionsKey,this.scope,model)||{},opts=this.createWindowOptions(gMarker,childScope,fakeElement.html(),this.DEFAULTS),child=new WindowChildModel(model,childScope,opts,this.isIconVisibleOnClick,gMap,null!=(ref=this.markersScope)&&null!=(ref1=ref.plurals.get(model[this.idKey]))?ref1.scope:void 0,fakeElement,!1,!0),null==model[this.idKey]?void this.$log.error("Window model has no id to assign a child to. This is required for performance. Please assign id, or redirect id to a different key."):(this.plurals.put(model[this.idKey],child),child)},WindowsParentModel.prototype.setChildScope=function(childScope,model){return _.each(IWindow.scopeKeys,function(_this){return function(name){var nameKey,newValue;return nameKey=name+"Key",newValue="self"===_this[nameKey]?model:model[_this[nameKey]],newValue!==childScope[name]?childScope[name]=newValue:void 0}}(this)),childScope.model=model},WindowsParentModel.prototype.interpolateContent=function(content,model){var exp,i,interpModel,key,len,ref;if(void 0!==this.contentKeys&&0!==this.contentKeys.length){for(exp=$interpolate(content),interpModel={},ref=this.contentKeys,i=0,len=ref.length;len>i;i++)key=ref[i],interpModel[key]=model[key];return exp(interpModel)}},WindowsParentModel.prototype.modelKeyComparison=function(model1,model2){var isEqual,scope;if(scope=null!=this.scope.coords?this.scope:this.parentScope,null==scope)throw"No scope or parentScope set!";return(isEqual=GmapUtil.equalCoords(this.evalModelHandle(model1,scope.coords),this.evalModelHandle(model2,scope.coords)))?isEqual=_.every(_.without(this["interface"].scopeKeys,"coords"),function(_this){return function(k){return _this.evalModelHandle(model1,scope[k])===_this.evalModelHandle(model2,scope[k])}}(this)):isEqual},WindowsParentModel}(IWindowParentModel)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapCircle",["uiGmapICircle","uiGmapCircleParentModel",function(ICircle,CircleParentModel){return _.extend(ICircle,{link:function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return new CircleParentModel(scope,element,attrs,map)}}(this))}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapControl",["uiGmapIControl","$http","$templateCache","$compile","$controller","uiGmapGoogleMapApi",function(IControl,$http,$templateCache,$compile,$controller,GoogleMapApi){var Control;return Control=function(superClass){function Control(){this.link=bind(this.link,this),Control.__super__.constructor.call(this)}return extend(Control,superClass),Control.prototype.link=function(scope,element,attrs,ctrl){return GoogleMapApi.then(function(_this){return function(maps){var index,position;return angular.isUndefined(scope.template)?void _this.$log.error("mapControl: could not find a valid template property"):(index=angular.isDefined(scope.index&&!isNaN(parseInt(scope.index)))?parseInt(scope.index):void 0,position=angular.isDefined(scope.position)?scope.position.toUpperCase().replace(/-/g,"_"):"TOP_CENTER",maps.ControlPosition[position]?IControl.mapPromise(scope,ctrl).then(function(map){var control,controlDiv;return control=void 0,controlDiv=angular.element("<div></div>"),$http.get(scope.template,{cache:$templateCache}).success(function(template){var templateCtrl,templateScope;return templateScope=scope.$new(),controlDiv.append(template),angular.isDefined(scope.controller)&&(templateCtrl=$controller(scope.controller,{$scope:templateScope}),controlDiv.children().data("$ngControllerController",templateCtrl)),control=$compile(controlDiv.children())(templateScope),index?control[0].index=index:void 0}).error(function(error){return _this.$log.error("mapControl: template could not be found")}).then(function(){return map.controls[google.maps.ControlPosition[position]].push(control[0])})}):void _this.$log.error("mapControl: invalid position property"))}}(this))},Control}(IControl)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapDragZoom",["uiGmapCtrlHandle","uiGmapPropertyAction",function(CtrlHandle,PropertyAction){return{restrict:"EMA",transclude:!0,template:'<div class="angular-google-map-dragzoom" ng-transclude style="display: none"></div>',require:"^uiGmapGoogleMap",scope:{keyboardkey:"=",options:"=",spec:"="},controller:["$scope","$element",function($scope,$element){return $scope.ctrlType="uiGmapDragZoom",_.extend(this,CtrlHandle.handle($scope,$element))}],link:function(scope,element,attrs,ctrl){return CtrlHandle.mapPromise(scope,ctrl).then(function(map){var enableKeyDragZoom,setKeyAction,setOptionsAction;return enableKeyDragZoom=function(opts){return map.enableKeyDragZoom(opts),scope.spec?scope.spec.enableKeyDragZoom(opts):void 0},setKeyAction=new PropertyAction(function(key,newVal){return newVal?enableKeyDragZoom({key:newVal}):enableKeyDragZoom()}),setOptionsAction=new PropertyAction(function(key,newVal){return newVal?enableKeyDragZoom(newVal):void 0}),scope.$watch("keyboardkey",setKeyAction.sic),setKeyAction.sic(scope.keyboardkey),scope.$watch("options",setOptionsAction.sic),setOptionsAction.sic(scope.options)})}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapDrawingManager",["uiGmapIDrawingManager","uiGmapDrawingManagerParentModel",function(IDrawingManager,DrawingManagerParentModel){return _.extend(IDrawingManager,{link:function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(map){return new DrawingManagerParentModel(scope,element,attrs,map)})}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapApiFreeDrawPolygons",["uiGmapLogger","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapDrawFreeHandChildModel","uiGmapLodash",function($log,BaseObject,CtrlHandle,DrawFreeHandChildModel,uiGmapLodash){var FreeDrawPolygons;return FreeDrawPolygons=function(superClass){function FreeDrawPolygons(){return this.link=bind(this.link,this),FreeDrawPolygons.__super__.constructor.apply(this,arguments)}return extend(FreeDrawPolygons,superClass),FreeDrawPolygons.include(CtrlHandle),FreeDrawPolygons.prototype.restrict="EMA",FreeDrawPolygons.prototype.replace=!0,FreeDrawPolygons.prototype.require="^uiGmapGoogleMap",FreeDrawPolygons.prototype.scope={polygons:"=",draw:"="},FreeDrawPolygons.prototype.link=function(scope,element,attrs,ctrl){return this.mapPromise(scope,ctrl).then(function(_this){return function(map){var freeHand,listener;return scope.polygons?_.isArray(scope.polygons)?(freeHand=new DrawFreeHandChildModel(map,ctrl.getScope()),listener=void 0,scope.draw=function(){return"function"==typeof listener&&listener(),freeHand.engage(scope.polygons).then(function(){var firstTime;return firstTime=!0,listener=scope.$watchCollection("polygons",function(newValue,oldValue){var removals;return firstTime||newValue===oldValue?void(firstTime=!1):(removals=uiGmapLodash.differenceObjects(oldValue,newValue),removals.forEach(function(p){return p.setMap(null)}))})})}):$log.error("Free Draw Polygons must be of type Array!"):$log.error("No polygons to bind to!")}}(this))},FreeDrawPolygons}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapICircle",[function(){var DEFAULTS;return DEFAULTS={},{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{center:"=center",radius:"=radius",stroke:"=stroke",fill:"=fill",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=icons",visible:"=",events:"=",control:"=",zIndex:"=zindex"}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIControl",["uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(BaseObject,Logger,CtrlHandle){var IControl;return IControl=function(superClass){function IControl(){this.restrict="EA",this.replace=!0,this.require="^uiGmapGoogleMap",this.scope={template:"@template",position:"@position",controller:"@controller",index:"@index"},this.$log=Logger}return extend(IControl,superClass),IControl.extend(CtrlHandle),IControl.prototype.link=function(scope,element,attrs,ctrl){throw new Exception("Not implemented!!")},IControl}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapIDrawingManager",[function(){return{restrict:"EA",replace:!0,require:"^uiGmapGoogleMap",scope:{"static":"@",control:"=",options:"=",events:"="}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIMarker",["uiGmapBaseObject","uiGmapCtrlHandle",function(BaseObject,CtrlHandle){var IMarker;return IMarker=function(superClass){function IMarker(){this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.replace=!0,this.scope=_.extend(this.scope||{},IMarker.scope)}return extend(IMarker,superClass),IMarker.scope={coords:"=coords",icon:"=icon",click:"&click",options:"=options",events:"=events",fit:"=fit",idKey:"=idkey",control:"=control"},IMarker.scopeKeys=_.keys(IMarker.scope),IMarker.keys=IMarker.scopeKeys,IMarker.extend(CtrlHandle),IMarker}(BaseObject)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolygon",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(GmapUtil,BaseObject,Logger,CtrlHandle){var IPolygon;return IPolygon=function(superClass){function IPolygon(){}return extend(IPolygon,superClass),IPolygon.scope={path:"=path",stroke:"=stroke",clickable:"=",draggable:"=",editable:"=",geodesic:"=",fill:"=",icons:"=icons",visible:"=","static":"=",events:"=",zIndex:"=zindex",fit:"=",control:"=control"},IPolygon.scopeKeys=_.keys(IPolygon.scope),IPolygon.include(GmapUtil),IPolygon.extend(CtrlHandle),IPolygon.prototype.restrict="EMA",IPolygon.prototype.replace=!0,IPolygon.prototype.require="^uiGmapGoogleMap",IPolygon.prototype.scope=IPolygon.scope,IPolygon.prototype.DEFAULTS={},IPolygon.prototype.$log=Logger,IPolygon}(BaseObject)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIPolyline",["uiGmapGmapUtil","uiGmapBaseObject","uiGmapLogger","uiGmapCtrlHandle",function(GmapUtil,BaseObject,Logger,CtrlHandle){var IPolyline;return IPolyline=function(superClass){function IPolyline(){}return extend(IPolyline,superClass),IPolyline.scope={path:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",geodesic:"=",icons:"=",visible:"=","static":"=",fit:"=",events:"=",zIndex:"=zindex"},IPolyline.scopeKeys=_.keys(IPolyline.scope),IPolyline.include(GmapUtil),IPolyline.extend(CtrlHandle),IPolyline.prototype.restrict="EMA",IPolyline.prototype.replace=!0,IPolyline.prototype.require="^uiGmapGoogleMap",IPolyline.prototype.scope=IPolyline.scope,IPolyline.prototype.DEFAULTS={},IPolyline.prototype.$log=Logger,IPolyline}(BaseObject)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapIRectangle",[function(){var DEFAULTS;return DEFAULTS={},{restrict:"EMA",require:"^uiGmapGoogleMap",replace:!0,scope:{bounds:"=",stroke:"=",clickable:"=",draggable:"=",editable:"=",fill:"=",visible:"=",events:"="}}}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapIWindow",["uiGmapBaseObject","uiGmapChildEvents","uiGmapCtrlHandle",function(BaseObject,ChildEvents,CtrlHandle){var IWindow;return IWindow=function(superClass){function IWindow(){this.restrict="EMA",this.template=void 0,this.transclude=!0,this.priority=-100,this.require="^uiGmapGoogleMap",this.replace=!0,this.scope=_.extend(this.scope||{},IWindow.scope)}return extend(IWindow,superClass),IWindow.scope={coords:"=coords",template:"=template",templateUrl:"=templateurl",templateParameter:"=templateparameter",isIconVisibleOnClick:"=isiconvisibleonclick",closeClick:"&closeclick",options:"=options",control:"=control",show:"=show"},IWindow.scopeKeys=_.keys(IWindow.scope),IWindow.include(ChildEvents),IWindow.extend(CtrlHandle),IWindow}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMap",["$timeout","$q","uiGmapLogger","uiGmapGmapUtil","uiGmapBaseObject","uiGmapCtrlHandle","uiGmapIsReady","uiGmapuuid","uiGmapExtendGWin","uiGmapExtendMarkerClusterer","uiGmapGoogleMapsUtilV3","uiGmapGoogleMapApi","uiGmapEventsHelper",function($timeout,$q,$log,GmapUtil,BaseObject,CtrlHandle,IsReady,uuid,ExtendGWin,ExtendMarkerClusterer,GoogleMapsUtilV3,GoogleMapApi,EventsHelper){var DEFAULTS,Map,initializeItems;return DEFAULTS=void 0,initializeItems=[GoogleMapsUtilV3,ExtendGWin,ExtendMarkerClusterer],Map=function(superClass){function Map(){this.link=bind(this.link,this);var ctrlFn,self;ctrlFn=function($scope){var ctrlObj,retCtrl;return retCtrl=void 0,$scope.$on("$destroy",function(){return IsReady.decrement()}),ctrlObj=CtrlHandle.handle($scope),$scope.ctrlType="Map",$scope.deferred.promise.then(function(){return initializeItems.forEach(function(i){return i.init()})}),ctrlObj.getMap=function(){return $scope.map},retCtrl=_.extend(this,ctrlObj)},this.controller=["$scope",ctrlFn],self=this}return extend(Map,superClass),Map.include(GmapUtil),Map.prototype.restrict="EMA",Map.prototype.transclude=!0,Map.prototype.replace=!1,Map.prototype.template='<div class="angular-google-map"><div class="angular-google-map-container"></div><div ng-transclude style="display: none"></div></div>',Map.prototype.scope={center:"=",zoom:"=",dragging:"=",control:"=",options:"=",events:"=",eventOpts:"=",styles:"=",bounds:"=",update:"="},Map.prototype.link=function(scope,element,attrs){var listeners,unbindCenterWatch;return listeners=[],scope.$on("$destroy",function(){return EventsHelper.removeEvents(listeners)}),scope.idleAndZoomChanged=!1,null==scope.center?void(unbindCenterWatch=scope.$watch("center",function(_this){return function(){return scope.center?(unbindCenterWatch(),_this.link(scope,element,attrs)):void 0}}(this))):GoogleMapApi.then(function(_this){return function(maps){var _gMap,customListeners,disabledEvents,dragging,el,eventName,getEventHandler,mapOptions,maybeHookToEvent,opts,ref,resolveSpawned,settingFromDirective,spawned,type,updateCenter,zoomPromise;if(DEFAULTS={mapTypeId:maps.MapTypeId.ROADMAP},spawned=IsReady.spawn(),resolveSpawned=function(){return spawned.deferred.resolve({instance:spawned.instance,map:_gMap})},!_this.validateCoords(scope.center))return void $log.error("angular-google-maps: could not find a valid center property");if(!angular.isDefined(scope.zoom))return void $log.error("angular-google-maps: map zoom property not set");if(el=angular.element(element),el.addClass("angular-google-map"),opts={options:{}},attrs.options&&(opts.options=scope.options),attrs.styles&&(opts.styles=scope.styles),attrs.type&&(type=attrs.type.toUpperCase(),google.maps.MapTypeId.hasOwnProperty(type)?opts.mapTypeId=google.maps.MapTypeId[attrs.type.toUpperCase()]:$log.error("angular-google-maps: invalid map type '"+attrs.type+"'")),
mapOptions=angular.extend({},DEFAULTS,opts,{center:_this.getCoords(scope.center),zoom:scope.zoom,bounds:scope.bounds}),_gMap=new google.maps.Map(el.find("div")[1],mapOptions),_gMap.uiGmap_id=uuid.generate(),dragging=!1,listeners.push(google.maps.event.addListenerOnce(_gMap,"idle",function(){return scope.deferred.resolve(_gMap),resolveSpawned()})),disabledEvents=attrs.events&&null!=(null!=(ref=scope.events)?ref.blacklist:void 0)?scope.events.blacklist:[],_.isString(disabledEvents)&&(disabledEvents=[disabledEvents]),maybeHookToEvent=function(eventName,fn,prefn){return _.contains(disabledEvents,eventName)?void 0:(prefn&&prefn(),listeners.push(google.maps.event.addListener(_gMap,eventName,function(){var ref1;return(null!=(ref1=scope.update)?ref1.lazy:void 0)?void 0:fn()})))},_.contains(disabledEvents,"all")||(maybeHookToEvent("dragstart",function(){return dragging=!0,scope.$evalAsync(function(s){return null!=s.dragging?s.dragging=dragging:void 0})}),maybeHookToEvent("dragend",function(){return dragging=!1,scope.$evalAsync(function(s){return null!=s.dragging?s.dragging=dragging:void 0})}),updateCenter=function(c,s){if(null==c&&(c=_gMap.center),null==s&&(s=scope),!_.contains(disabledEvents,"center"))if(angular.isDefined(s.center.type)){if(s.center.coordinates[1]!==c.lat()&&(s.center.coordinates[1]=c.lat()),s.center.coordinates[0]!==c.lng())return s.center.coordinates[0]=c.lng()}else if(s.center.latitude!==c.lat()&&(s.center.latitude=c.lat()),s.center.longitude!==c.lng())return s.center.longitude=c.lng()},settingFromDirective=!1,maybeHookToEvent("idle",function(){var b,ne,sw;return b=_gMap.getBounds(),ne=b.getNorthEast(),sw=b.getSouthWest(),settingFromDirective=!0,scope.$evalAsync(function(s){return updateCenter(),null===s.bounds||s.bounds===undefined||void 0===s.bounds||_.contains(disabledEvents,"bounds")||(s.bounds.northeast={latitude:ne.lat(),longitude:ne.lng()},s.bounds.southwest={latitude:sw.lat(),longitude:sw.lng()}),_.contains(disabledEvents,"zoom")||(s.zoom=_gMap.zoom,scope.idleAndZoomChanged=!scope.idleAndZoomChanged),settingFromDirective=!1})})),angular.isDefined(scope.events)&&null!==scope.events&&angular.isObject(scope.events)){getEventHandler=function(eventName){return function(){return scope.events[eventName].apply(scope,[_gMap,eventName,arguments])}},customListeners=[];for(eventName in scope.events)scope.events.hasOwnProperty(eventName)&&angular.isFunction(scope.events[eventName])&&customListeners.push(google.maps.event.addListener(_gMap,eventName,getEventHandler(eventName)));listeners.concat(customListeners)}return _gMap.getOptions=function(){return mapOptions},scope.map=_gMap,null!=attrs.control&&null!=scope.control&&(scope.control.refresh=function(maybeCoords){var coords,ref1,ref2;if(null!=_gMap)return null!=("undefined"!=typeof google&&null!==google&&null!=(ref1=google.maps)&&null!=(ref2=ref1.event)?ref2.trigger:void 0)&&null!=_gMap&&google.maps.event.trigger(_gMap,"resize"),null!=(null!=maybeCoords?maybeCoords.latitude:void 0)&&null!=(null!=maybeCoords?maybeCoords.longitude:void 0)?(coords=_this.getCoords(maybeCoords),_this.isTrue(attrs.pan)?_gMap.panTo(coords):_gMap.setCenter(coords)):void 0},scope.control.getGMap=function(){return _gMap},scope.control.getMapOptions=function(){return mapOptions},scope.control.getCustomEventListeners=function(){return customListeners},scope.control.removeEvents=function(yourListeners){return EventsHelper.removeEvents(yourListeners)}),scope.$watch("center",function(newValue,oldValue){var coords,settingCenterFromScope;if(newValue!==oldValue&&!settingFromDirective&&(coords=_this.getCoords(scope.center),coords.lat()!==_gMap.center.lat()||coords.lng()!==_gMap.center.lng()))return settingCenterFromScope=!0,dragging||(_this.validateCoords(newValue)||$log.error("Invalid center for newValue: "+JSON.stringify(newValue)),_this.isTrue(attrs.pan)&&scope.zoom===_gMap.zoom?_gMap.panTo(coords):_gMap.setCenter(coords)),settingCenterFromScope=!1},!0),zoomPromise=null,scope.$watch("zoom",function(newValue,oldValue){var ref1,ref2,settingZoomFromScope;if(null!=newValue&&!_.isEqual(newValue,oldValue)&&(null!=_gMap?_gMap.getZoom():void 0)!==(null!=scope?scope.zoom:void 0)&&!settingFromDirective)return settingZoomFromScope=!0,null!=zoomPromise&&$timeout.cancel(zoomPromise),zoomPromise=$timeout(function(){return _gMap.setZoom(newValue),settingZoomFromScope=!1},(null!=(ref1=scope.eventOpts)&&null!=(ref2=ref1.debounce)?ref2.zoomMs:void 0)+20,!1)}),scope.$watch("bounds",function(newValue,oldValue){var bounds,ne,ref1,ref2,ref3,ref4,sw;if(newValue!==oldValue)return null==(null!=newValue&&null!=(ref1=newValue.northeast)?ref1.latitude:void 0)||null==(null!=newValue&&null!=(ref2=newValue.northeast)?ref2.longitude:void 0)||null==(null!=newValue&&null!=(ref3=newValue.southwest)?ref3.latitude:void 0)||null==(null!=newValue&&null!=(ref4=newValue.southwest)?ref4.longitude:void 0)?void $log.error("Invalid map bounds for new value: "+JSON.stringify(newValue)):(ne=new google.maps.LatLng(newValue.northeast.latitude,newValue.northeast.longitude),sw=new google.maps.LatLng(newValue.southwest.latitude,newValue.southwest.longitude),bounds=new google.maps.LatLngBounds(sw,ne),_gMap.fitBounds(bounds))}),["options","styles"].forEach(function(toWatch){return scope.$watch(toWatch,function(newValue,oldValue){var watchItem;return watchItem=this.exp,_.isEqual(newValue,oldValue)?void 0:("options"===watchItem?opts.options=newValue:opts.options[watchItem]=newValue,null!=_gMap?_gMap.setOptions(opts):void 0)},!0)})}}(this))},Map}(BaseObject)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarker",["uiGmapIMarker","uiGmapMarkerChildModel","uiGmapMarkerManager","uiGmapLogger",function(IMarker,MarkerChildModel,MarkerManager,$log){var Marker;return Marker=function(superClass){function Marker(){this.link=bind(this.link,this),Marker.__super__.constructor.call(this),this.template='<span class="angular-google-map-marker" ng-transclude></span>',$log.info(this)}return extend(Marker,superClass),Marker.prototype.controller=["$scope","$element",function($scope,$element){return $scope.ctrlType="Marker",_.extend(this,IMarker.handle($scope,$element))}],Marker.prototype.link=function(scope,element,attrs,ctrl){var mapPromise;return mapPromise=IMarker.mapPromise(scope,ctrl),mapPromise.then(function(_this){return function(map){var doClick,doDrawSelf,gManager,keys,m,trackModel;return gManager=new MarkerManager(map),keys=_.object(IMarker.keys,IMarker.keys),m=new MarkerChildModel(scope,scope,keys,map,{},doClick=!0,gManager,doDrawSelf=!1,trackModel=!1),m.deferred.promise.then(function(gMarker){return scope.deferred.resolve(gMarker)}),null!=scope.control?scope.control.getGMarkers=gManager.getGMarkers:void 0}}(this)),scope.$on("$destroy",function(_this){return function(){var gManager;return"undefined"!=typeof gManager&&null!==gManager&&gManager.clear(),gManager=null}}(this))},Marker}(IMarker)}])}.call(this),function(){var extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapMarkers",["uiGmapIMarker","uiGmapPlural","uiGmapMarkersParentModel","uiGmap_sync","uiGmapLogger",function(IMarker,Plural,MarkersParentModel,_sync,$log){var Markers;return Markers=function(superClass){function Markers(){Markers.__super__.constructor.call(this),this.template='<span class="angular-google-map-markers" ng-transclude></span>',Plural.extend(this,{doCluster:"=docluster",clusterOptions:"=clusteroptions",clusterEvents:"=clusterevents",modelsByRef:"=modelsbyref"}),$log.info(this)}return extend(Markers,superClass),Markers.prototype.controller=["$scope","$element",function($scope,$element){return $scope.ctrlType="Markers",_.extend(this,IMarker.handle($scope,$element))}],Markers.prototype.link=function(scope,element,attrs,ctrl){var parentModel,ready;return parentModel=void 0,ready=function(){return scope.deferred.resolve()},IMarker.mapPromise(scope,ctrl).then(function(map){var mapScope;return mapScope=ctrl.getScope(),mapScope.$watch("idleAndZoomChanged",function(){return _.defer(parentModel.gManager.draw)}),parentModel=new MarkersParentModel(scope,element,attrs,map),Plural.link(scope,parentModel),null!=scope.control&&(scope.control.getGMarkers=function(){var ref;return null!=(ref=parentModel.gManager)?ref.getGMarkers():void 0},scope.control.getChildMarkers=function(){return parentModel.plurals}),_.last(parentModel.existingPieces._content).then(function(){return ready()})})},Markers}(IMarker)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").service("uiGmapPlural",[function(){var _initControl;return _initControl=function(scope,parent){return null!=scope.control?(scope.control.updateModels=function(models){return scope.models=models,parent.createChildScopes(!1)},scope.control.newModels=function(models){return scope.models=models,parent.rebuildAll(scope,!0,!0)},scope.control.clean=function(){return parent.rebuildAll(scope,!1,!0)},scope.control.getPlurals=function(){return parent.plurals},scope.control.getManager=function(){return parent.gManager},scope.control.hasManager=function(){return null!=parent.gManager==!0},scope.control.managerDraw=function(){var ref;return scope.control.hasManager()&&null!=(ref=scope.control.getManager())?ref.draw():void 0}):void 0},{extend:function(obj,obj2){return _.extend(obj.scope||{},obj2||{},{idKey:"=idkey",doRebuildAll:"=dorebuildall",models:"=models",chunk:"=chunk",cleanchunk:"=cleanchunk",control:"=control"})},link:function(scope,parent){return _initControl(scope,parent)}}}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygon",["uiGmapIPolygon","$timeout","uiGmaparray-sync","uiGmapPolygonChildModel",function(IPolygon,$timeout,arraySync,PolygonChild){var Polygon;return Polygon=function(superClass){function Polygon(){return this.link=bind(this.link,this),Polygon.__super__.constructor.apply(this,arguments)}return extend(Polygon,superClass),Polygon.prototype.link=function(scope,element,attrs,mapCtrl){var children,promise;return children=[],promise=IPolygon.mapPromise(scope,mapCtrl),null!=scope.control&&(scope.control.getInstance=this,scope.control.polygons=children,scope.control.promise=promise),promise.then(function(_this){return function(map){return children.push(new PolygonChild(scope,attrs,map,_this.DEFAULTS))}}(this))},Polygon}(IPolygon)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolygons",["uiGmapIPolygon","$timeout","uiGmaparray-sync","uiGmapPolygonsParentModel","uiGmapPlural",function(Interface,$timeout,arraySync,ParentModel,Plural){var Polygons;return Polygons=function(superClass){function Polygons(){this.link=bind(this.link,this),Polygons.__super__.constructor.call(this),Plural.extend(this),this.$log.info(this)}return extend(Polygons,superClass),Polygons.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return(angular.isUndefined(scope.path)||null===scope.path)&&_this.$log.warn("polygons: no valid path attribute found"),scope.models||_this.$log.warn("polygons: no models found to create from"),Plural.link(scope,new ParentModel(scope,element,attrs,map,_this.DEFAULTS))}}(this))},Polygons}(Interface)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolyline",["uiGmapIPolyline","$timeout","uiGmaparray-sync","uiGmapPolylineChildModel",function(IPolyline,$timeout,arraySync,PolylineChildModel){var Polyline;return Polyline=function(superClass){function Polyline(){return this.link=bind(this.link,this),Polyline.__super__.constructor.apply(this,arguments)}return extend(Polyline,superClass),Polyline.prototype.link=function(scope,element,attrs,mapCtrl){return IPolyline.mapPromise(scope,mapCtrl).then(function(_this){return function(map){return(angular.isUndefined(scope.path)||null===scope.path||!_this.validatePath(scope.path))&&_this.$log.warn("polyline: no valid path attribute found"),new PolylineChildModel(scope,attrs,map,_this.DEFAULTS)}}(this))},Polyline}(IPolyline)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapPolylines",["uiGmapIPolyline","$timeout","uiGmaparray-sync","uiGmapPolylinesParentModel","uiGmapPlural",function(IPolyline,$timeout,arraySync,PolylinesParentModel,Plural){var Polylines;return Polylines=function(superClass){function Polylines(){this.link=bind(this.link,this),Polylines.__super__.constructor.call(this),Plural.extend(this),this.$log.info(this)}return extend(Polylines,superClass),Polylines.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return(angular.isUndefined(scope.path)||null===scope.path)&&_this.$log.warn("polylines: no valid path attribute found"),scope.models||_this.$log.warn("polylines: no models found to create from"),Plural.link(scope,new PolylinesParentModel(scope,element,attrs,map,_this.DEFAULTS))}}(this))},Polylines}(IPolyline)}])}.call(this),function(){angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapRectangle",["uiGmapLogger","uiGmapGmapUtil","uiGmapIRectangle","uiGmapRectangleParentModel",function($log,GmapUtil,IRectangle,RectangleParentModel){return _.extend(IRectangle,{link:function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return new RectangleParentModel(scope,element,attrs,map)}}(this))}})}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindow",["uiGmapIWindow","uiGmapGmapUtil","uiGmapWindowChildModel","uiGmapLodash","uiGmapLogger",function(IWindow,GmapUtil,WindowChildModel,uiGmapLodash,$log){var Window;return Window=function(superClass){function Window(){this.link=bind(this.link,this),Window.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarker"],this.template='<span class="angular-google-maps-window" ng-transclude></span>',$log.debug(this),this.childWindows=[]}return extend(Window,superClass),Window.include(GmapUtil),Window.prototype.link=function(scope,element,attrs,ctrls){var markerCtrl,markerScope;return markerCtrl=ctrls.length>1&&null!=ctrls[1]?ctrls[1]:void 0,markerScope=null!=markerCtrl?markerCtrl.getScope():void 0,this.mapPromise=IWindow.mapPromise(scope,ctrls[0]),this.mapPromise.then(function(_this){return function(mapCtrl){var isIconVisibleOnClick;return isIconVisibleOnClick=!0,angular.isDefined(attrs.isiconvisibleonclick)&&(isIconVisibleOnClick=scope.isIconVisibleOnClick),markerCtrl?markerScope.deferred.promise.then(function(gMarker){return _this.init(scope,element,isIconVisibleOnClick,mapCtrl,markerScope)}):void _this.init(scope,element,isIconVisibleOnClick,mapCtrl)}}(this))},Window.prototype.init=function(scope,element,isIconVisibleOnClick,mapCtrl,markerScope){var childWindow,defaults,gMarker,hasScopeCoords,opts;return defaults=null!=scope.options?scope.options:{},hasScopeCoords=null!=scope&&this.validateCoords(scope.coords),null!=(null!=markerScope?markerScope.getGMarker:void 0)&&(gMarker=markerScope.getGMarker()),opts=hasScopeCoords?this.createWindowOptions(gMarker,scope,element.html(),defaults):defaults,null!=mapCtrl&&(childWindow=new WindowChildModel({},scope,opts,isIconVisibleOnClick,mapCtrl,markerScope,element),this.childWindows.push(childWindow),scope.$on("$destroy",function(_this){return function(){return _this.childWindows=uiGmapLodash.withoutObjects(_this.childWindows,[childWindow],function(child1,child2){return child1.scope.$id===child2.scope.$id}),_this.childWindows.length=0}}(this))),null!=scope.control&&(scope.control.getGWindows=function(_this){return function(){return _this.childWindows.map(function(child){return child.gObject})}}(this),scope.control.getChildWindows=function(_this){return function(){return _this.childWindows}}(this),scope.control.getPlurals=scope.control.getChildWindows,scope.control.showWindow=function(_this){return function(){return _this.childWindows.map(function(child){return child.showWindow()})}}(this),scope.control.hideWindow=function(_this){return function(){return _this.childWindows.map(function(child){return child.hideWindow()})}}(this)),null!=this.onChildCreation&&null!=childWindow?this.onChildCreation(childWindow):void 0},Window}(IWindow)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}},extend=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},hasProp={}.hasOwnProperty;angular.module("uiGmapgoogle-maps.directives.api").factory("uiGmapWindows",["uiGmapIWindow","uiGmapPlural","uiGmapWindowsParentModel","uiGmapPromise","uiGmapLogger",function(IWindow,Plural,WindowsParentModel,uiGmapPromise,$log){var Windows;return Windows=function(superClass){function Windows(){this.init=bind(this.init,this),this.link=bind(this.link,this),Windows.__super__.constructor.call(this),this.require=["^uiGmapGoogleMap","^?uiGmapMarkers"],this.template='<span class="angular-google-maps-windows" ng-transclude></span>',Plural.extend(this),$log.debug(this)}return extend(Windows,superClass),Windows.prototype.link=function(scope,element,attrs,ctrls){var mapScope,markerCtrl,markerScope;return mapScope=ctrls[0].getScope(),markerCtrl=ctrls.length>1&&null!=ctrls[1]?ctrls[1]:void 0,markerScope=null!=markerCtrl?markerCtrl.getScope():void 0,mapScope.deferred.promise.then(function(_this){return function(map){var promise,ref;return promise=(null!=markerScope&&null!=(ref=markerScope.deferred)?ref.promise:void 0)||uiGmapPromise.resolve(),promise.then(function(){var pieces,ref1;return pieces=null!=(ref1=_this.parentModel)?ref1.existingPieces:void 0,pieces?pieces.then(function(){return _this.init(scope,element,attrs,ctrls,map,markerScope)}):_this.init(scope,element,attrs,ctrls,map,markerScope)})}}(this))},Windows.prototype.init=function(scope,element,attrs,ctrls,map,additionalScope){var parentModel;return parentModel=new WindowsParentModel(scope,element,attrs,ctrls,map,additionalScope),Plural.link(scope,parentModel),null!=scope.control?(scope.control.getGWindows=function(_this){return function(){return parentModel.plurals.map(function(child){return child.gObject})}}(this),scope.control.getChildWindows=function(_this){return function(){return parentModel.plurals}}(this)):void 0},Windows}(IWindow)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapGoogleMap",["uiGmapMap",function(Map){return new Map}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapMarker",["$timeout","uiGmapMarker",function($timeout,Marker){return new Marker($timeout)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapMarkers",["$timeout","uiGmapMarkers",function($timeout,Markers){return new Markers($timeout)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolygon",["uiGmapPolygon",function(Polygon){return new Polygon}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapCircle",["uiGmapCircle",function(Circle){return Circle}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolyline",["uiGmapPolyline",function(Polyline){return new Polyline}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolylines",["uiGmapPolylines",function(Polylines){return new Polylines}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapRectangle",["uiGmapLogger","uiGmapRectangle",function($log,Rectangle){return Rectangle}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapWindow",["$timeout","$compile","$http","$templateCache","uiGmapWindow",function($timeout,$compile,$http,$templateCache,Window){return new Window($timeout,$compile,$http,$templateCache)}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapWindows",["$timeout","$compile","$http","$templateCache","$interpolate","uiGmapWindows",function($timeout,$compile,$http,$templateCache,$interpolate,Windows){return new Windows($timeout,$compile,$http,$templateCache,$interpolate)}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps").directive("uiGmapLayer",["$timeout","uiGmapLogger","uiGmapLayerParentModel",function($timeout,Logger,LayerParentModel){var Layer;return new(Layer=function(){function Layer(){this.link=bind(this.link,this),this.$log=Logger,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-layer' ng-transclude></span>",this.replace=!0,this.scope={show:"=show",type:"=type",namespace:"=namespace",options:"=options",onCreated:"&oncreated"}}return Layer.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return null!=scope.onCreated?new LayerParentModel(scope,element,attrs,map,scope.onCreated):new LayerParentModel(scope,element,attrs,map)}}(this))},Layer}())}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapMapControl",["uiGmapControl",function(Control){return new Control}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapDragZoom",["uiGmapDragZoom",function(DragZoom){return DragZoom}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapDrawingManager",["uiGmapDrawingManager",function(DrawingManager){return DrawingManager}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapFreeDrawPolygons",["uiGmapApiFreeDrawPolygons",function(FreeDrawPolygons){return new FreeDrawPolygons}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps").directive("uiGmapMapType",["$timeout","uiGmapLogger","uiGmapMapTypeParentModel",function($timeout,Logger,MapTypeParentModel){var MapType;return new(MapType=function(){function MapType(){this.link=bind(this.link,this),this.$log=Logger,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template='<span class="angular-google-map-layer" ng-transclude></span>',this.replace=!0,this.scope={show:"=show",options:"=options",refresh:"=refresh",id:"@"}}return MapType.prototype.link=function(scope,element,attrs,mapCtrl){return mapCtrl.getScope().deferred.promise.then(function(_this){return function(map){return new MapTypeParentModel(scope,element,attrs,map)}}(this))},MapType}())}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapPolygons",["uiGmapPolygons",function(Polygons){return new Polygons}])}.call(this),function(){var bind=function(fn,me){return function(){return fn.apply(me,arguments)}};angular.module("uiGmapgoogle-maps").directive("uiGmapSearchBox",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapSearchBoxParentModel","$http","$templateCache","$compile",function(GoogleMapApi,Logger,SearchBoxParentModel,$http,$templateCache,$compile){var SearchBox;return new(SearchBox=function(){function SearchBox(){this.link=bind(this.link,this),this.$log=Logger,this.restrict="EMA",this.require="^uiGmapGoogleMap",this.priority=-1,this.transclude=!0,this.template="<span class='angular-google-map-search' ng-transclude></span>",this.replace=!0,this.scope={template:"=template",events:"=events",position:"=?position",options:"=?options",parentdiv:"=?parentdiv",ngModel:"=?"}}return SearchBox.prototype.require="ngModel",SearchBox.prototype.link=function(scope,element,attrs,mapCtrl){return GoogleMapApi.then(function(_this){return function(maps){return null==scope.template&&($templateCache.put("uigmap-searchbox-default.tpl.html",'<input type="text">'),scope.template="uigmap-searchbox-default.tpl.html"),$http.get(scope.template,{cache:$templateCache}).success(function(template){return angular.isUndefined(scope.events)?void _this.$log.error("searchBox: the events property is required"):mapCtrl.getScope().deferred.promise.then(function(map){var ctrlPosition;return ctrlPosition=angular.isDefined(scope.position)?scope.position.toUpperCase().replace(/-/g,"_"):"TOP_LEFT",maps.ControlPosition[ctrlPosition]?new SearchBoxParentModel(scope,element,attrs,map,ctrlPosition,$compile(template)(scope)):void _this.$log.error("searchBox: invalid position property")})})}}(this))},SearchBox}())}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapShow",["$animate","uiGmapLogger",function($animate,$log){return{scope:{uiGmapShow:"=",uiGmapAfterShow:"&",uiGmapAfterHide:"&"},link:function(scope,element){var angular_post_1_3_handle,angular_pre_1_3_handle,handle;return angular_post_1_3_handle=function(animateAction,cb){return $animate[animateAction](element,"ng-hide").then(function(){return cb()})},angular_pre_1_3_handle=function(animateAction,cb){return $animate[animateAction](element,"ng-hide",cb)},handle=function(animateAction,cb){return angular.version.major>1?$log.error("uiGmapShow is not supported for Angular Major greater than 1.\nYour Major is "+angular.version.major+'"'):1===angular.version.major&&angular.version.minor<3?angular_pre_1_3_handle(animateAction,cb):angular_post_1_3_handle(animateAction,cb)},scope.$watch("uiGmapShow",function(show){return show&&handle("removeClass",scope.uiGmapAfterShow),show?void 0:handle("addClass",scope.uiGmapAfterHide)})}}}])}.call(this),function(){angular.module("uiGmapgoogle-maps").directive("uiGmapStreetViewPanorama",["uiGmapGoogleMapApi","uiGmapLogger","uiGmapGmapUtil","uiGmapEventsHelper",function(GoogleMapApi,$log,GmapUtil,EventsHelper){var name;return name="uiGmapStreetViewPanorama",{restrict:"EMA",template:'<div class="angular-google-map-street-view-panorama"></div>',replace:!0,scope:{focalcoord:"=",radius:"=?",events:"=?",options:"=?",control:"=?",povoptions:"=?",imagestatus:"="},link:function(scope,element,attrs){return GoogleMapApi.then(function(_this){return function(maps){var clean,create,didCreateOptionsFromDirective,firstTime,handleSettings,listeners,opts,pano,povOpts,sv;return pano=void 0,sv=void 0,didCreateOptionsFromDirective=!1,listeners=void 0,opts=null,povOpts=null,clean=function(){return EventsHelper.removeEvents(listeners),null!=pano&&(pano.unbind("position"),pano.setVisible(!1)),null!=sv?(null!=(null!=sv?sv.setVisible:void 0)&&sv.setVisible(!1),sv=void 0):void 0},handleSettings=function(perspectivePoint,focalPoint){var heading;return heading=google.maps.geometry.spherical.computeHeading(perspectivePoint,focalPoint),didCreateOptionsFromDirective=!0,scope.radius=scope.radius||50,povOpts=angular.extend({heading:heading,zoom:1,pitch:0},scope.povoptions||{}),opts=opts=angular.extend({navigationControl:!1,addressControl:!1,linksControl:!1,position:perspectivePoint,pov:povOpts,visible:!0},scope.options||{}),didCreateOptionsFromDirective=!1},create=function(){var focalPoint;return scope.focalcoord?scope.radius?(clean(),null==sv&&(sv=new google.maps.StreetViewService),scope.events&&(listeners=EventsHelper.setEvents(sv,scope,scope)),focalPoint=GmapUtil.getCoords(scope.focalcoord),sv.getPanoramaByLocation(focalPoint,scope.radius,function(streetViewPanoramaData,status){var ele,perspectivePoint,ref;return null!=scope.imagestatus&&(scope.imagestatus=status),null!=(null!=(ref=scope.events)?ref.image_status_changed:void 0)&&scope.events.image_status_changed(sv,"image_status_changed",scope,status),"OK"===status?(perspectivePoint=streetViewPanoramaData.location.latLng,handleSettings(perspectivePoint,focalPoint),ele=element[0],pano=new google.maps.StreetViewPanorama(ele,opts)):void 0})):void $log.error(name+": needs a radius to set the camera view from its focal target."):void $log.error(name+": focalCoord needs to be defined")},null!=scope.control&&(scope.control.getOptions=function(){return opts},scope.control.getPovOptions=function(){return povOpts},scope.control.getGObject=function(){return sv},scope.control.getGPano=function(){return pano}),scope.$watch("options",function(newValue,oldValue){return newValue===oldValue||newValue===opts||didCreateOptionsFromDirective?void 0:create()}),firstTime=!0,scope.$watch("focalcoord",function(newValue,oldValue){return newValue===oldValue&&!firstTime||null==newValue?void 0:(firstTime=!1,create())}),scope.$on("$destroy",function(){return clean()})}}(this))}}}])}.call(this),angular.module("uiGmapgoogle-maps.wrapped").service("uiGmapuuid",function(){function UUID(){}return UUID.generate=function(){var a=UUID._gri,b=UUID._ha;return b(a(32),8)+"-"+b(a(16),4)+"-"+b(16384|a(12),4)+"-"+b(32768|a(14),4)+"-"+b(a(48),12)},UUID._gri=function(a){return 0>a?NaN:30>=a?0|Math.random()*(1<<a):53>=a?(0|1073741824*Math.random())+1073741824*(0|Math.random()*(1<<a-30)):NaN},UUID._ha=function(a,b){for(var c=a.toString(16),d=b-c.length,e="0";d>0;d>>>=1,e+=e)1&d&&(c=e+c);return c},UUID}),angular.module("uiGmapgoogle-maps.wrapped").service("uiGmapGoogleMapsUtilV3",function(){return{init:_.once(function(){function InfoBox(opt_opts){opt_opts=opt_opts||{},google.maps.OverlayView.apply(this,arguments),this.content_=opt_opts.content||"",this.disableAutoPan_=opt_opts.disableAutoPan||!1,this.maxWidth_=opt_opts.maxWidth||0,this.pixelOffset_=opt_opts.pixelOffset||new google.maps.Size(0,0),this.position_=opt_opts.position||new google.maps.LatLng(0,0),this.zIndex_=opt_opts.zIndex||null,this.boxClass_=opt_opts.boxClass||"infoBox",this.boxStyle_=opt_opts.boxStyle||{},this.closeBoxMargin_=opt_opts.closeBoxMargin||"2px",this.closeBoxURL_=opt_opts.closeBoxURL||"http://www.google.com/intl/en_us/mapfiles/close.gif",
""===opt_opts.closeBoxURL&&(this.closeBoxURL_=""),this.infoBoxClearance_=opt_opts.infoBoxClearance||new google.maps.Size(1,1),"undefined"==typeof opt_opts.visible&&("undefined"==typeof opt_opts.isHidden?opt_opts.visible=!0:opt_opts.visible=!opt_opts.isHidden),this.isHidden_=!opt_opts.visible,this.alignBottom_=opt_opts.alignBottom||!1,this.pane_=opt_opts.pane||"floatPane",this.enableEventPropagation_=opt_opts.enableEventPropagation||!1,this.div_=null,this.closeListener_=null,this.moveListener_=null,this.contextListener_=null,this.eventListeners_=null,this.fixedWidthSet_=null}function ClusterIcon(cluster,styles){cluster.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.cluster_=cluster,this.className_=cluster.getMarkerClusterer().getClusterClass(),this.styles_=styles,this.center_=null,this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(cluster.getMap())}function Cluster(mc){this.markerClusterer_=mc,this.map_=mc.getMap(),this.gridSize_=mc.getGridSize(),this.minClusterSize_=mc.getMinimumClusterSize(),this.averageCenter_=mc.getAverageCenter(),this.markers_=[],this.center_=null,this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,mc.getStyles())}function MarkerClusterer(map,opt_markers,opt_options){this.extend(MarkerClusterer,google.maps.OverlayView),opt_markers=opt_markers||[],opt_options=opt_options||{},this.markers_=[],this.clusters_=[],this.listeners_=[],this.activeMap_=null,this.ready_=!1,this.gridSize_=opt_options.gridSize||60,this.minClusterSize_=opt_options.minimumClusterSize||2,this.maxZoom_=opt_options.maxZoom||null,this.styles_=opt_options.styles||[],this.title_=opt_options.title||"",this.zoomOnClick_=!0,opt_options.zoomOnClick!==undefined&&(this.zoomOnClick_=opt_options.zoomOnClick),this.averageCenter_=!1,opt_options.averageCenter!==undefined&&(this.averageCenter_=opt_options.averageCenter),this.ignoreHidden_=!1,opt_options.ignoreHidden!==undefined&&(this.ignoreHidden_=opt_options.ignoreHidden),this.enableRetinaIcons_=!1,opt_options.enableRetinaIcons!==undefined&&(this.enableRetinaIcons_=opt_options.enableRetinaIcons),this.imagePath_=opt_options.imagePath||MarkerClusterer.IMAGE_PATH,this.imageExtension_=opt_options.imageExtension||MarkerClusterer.IMAGE_EXTENSION,this.imageSizes_=opt_options.imageSizes||MarkerClusterer.IMAGE_SIZES,this.calculator_=opt_options.calculator||MarkerClusterer.CALCULATOR,this.batchSize_=opt_options.batchSize||MarkerClusterer.BATCH_SIZE,this.batchSizeIE_=opt_options.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE,this.clusterClass_=opt_options.clusterClass||"cluster",-1!==navigator.userAgent.toLowerCase().indexOf("msie")&&(this.batchSize_=this.batchSizeIE_),this.setupStyles_(),this.addMarkers(opt_markers,!0),this.setMap(map)}function inherits(childCtor,parentCtor){function tempCtor(){}tempCtor.prototype=parentCtor.prototype,childCtor.superClass_=parentCtor.prototype,childCtor.prototype=new tempCtor,childCtor.prototype.constructor=childCtor}function MarkerLabel_(marker,crossURL,handCursorURL){this.marker_=marker,this.handCursorURL_=marker.handCursorURL,this.labelDiv_=document.createElement("div"),this.labelDiv_.style.cssText="position: absolute; overflow: hidden;",this.eventDiv_=document.createElement("div"),this.eventDiv_.style.cssText=this.labelDiv_.style.cssText,this.eventDiv_.setAttribute("onselectstart","return false;"),this.eventDiv_.setAttribute("ondragstart","return false;"),this.crossDiv_=MarkerLabel_.getSharedCross(crossURL)}function MarkerWithLabel(opt_options){opt_options=opt_options||{},opt_options.labelContent=opt_options.labelContent||"",opt_options.labelAnchor=opt_options.labelAnchor||new google.maps.Point(0,0),opt_options.labelClass=opt_options.labelClass||"markerLabels",opt_options.labelStyle=opt_options.labelStyle||{},opt_options.labelInBackground=opt_options.labelInBackground||!1,"undefined"==typeof opt_options.labelVisible&&(opt_options.labelVisible=!0),"undefined"==typeof opt_options.raiseOnDrag&&(opt_options.raiseOnDrag=!0),"undefined"==typeof opt_options.clickable&&(opt_options.clickable=!0),"undefined"==typeof opt_options.draggable&&(opt_options.draggable=!1),"undefined"==typeof opt_options.optimized&&(opt_options.optimized=!1),opt_options.crossImage=opt_options.crossImage||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/drag_cross_67_16.png",opt_options.handCursor=opt_options.handCursor||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/intl/en_us/mapfiles/closedhand_8_8.cur",opt_options.optimized=!1,this.label=new MarkerLabel_(this,opt_options.crossImage,opt_options.handCursor),google.maps.Marker.apply(this,arguments)}function RichMarker(opt_options){var options=opt_options||{};this.ready_=!1,this.dragging_=!1,opt_options.visible==undefined&&(opt_options.visible=!0),opt_options.shadow==undefined&&(opt_options.shadow="7px -3px 5px rgba(88,88,88,0.7)"),opt_options.anchor==undefined&&(opt_options.anchor=RichMarkerPosition.BOTTOM),this.setValues(options)}InfoBox.prototype=new google.maps.OverlayView,InfoBox.prototype.createInfoBoxDiv_=function(){var i,events,bw,me=this,cancelHandler=function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},ignoreHandler=function(e){e.returnValue=!1,e.preventDefault&&e.preventDefault(),me.enableEventPropagation_||cancelHandler(e)};if(!this.div_){if(this.div_=document.createElement("div"),this.setBoxStyle_(),"undefined"==typeof this.content_.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+this.content_:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(this.content_)),this.getPanes()[this.pane_].appendChild(this.div_),this.addClickHandler_(),this.div_.style.width?this.fixedWidthSet_=!0:0!==this.maxWidth_&&this.div_.offsetWidth>this.maxWidth_?(this.div_.style.width=this.maxWidth_,this.div_.style.overflow="auto",this.fixedWidthSet_=!0):(bw=this.getBoxWidths_(),this.div_.style.width=this.div_.offsetWidth-bw.left-bw.right+"px",this.fixedWidthSet_=!1),this.panBox_(this.disableAutoPan_),!this.enableEventPropagation_){for(this.eventListeners_=[],events=["mousedown","mouseover","mouseout","mouseup","click","dblclick","touchstart","touchend","touchmove"],i=0;i<events.length;i++)this.eventListeners_.push(google.maps.event.addDomListener(this.div_,events[i],cancelHandler));this.eventListeners_.push(google.maps.event.addDomListener(this.div_,"mouseover",function(e){this.style.cursor="default"}))}this.contextListener_=google.maps.event.addDomListener(this.div_,"contextmenu",ignoreHandler),google.maps.event.trigger(this,"domready")}},InfoBox.prototype.getCloseBoxImg_=function(){var img="";return""!==this.closeBoxURL_&&(img="<img",img+=" src='"+this.closeBoxURL_+"'",img+=" align=right",img+=" style='",img+=" position: relative;",img+=" cursor: pointer;",img+=" margin: "+this.closeBoxMargin_+";",img+="'>"),img},InfoBox.prototype.addClickHandler_=function(){var closeBox;""!==this.closeBoxURL_?(closeBox=this.div_.firstChild,this.closeListener_=google.maps.event.addDomListener(closeBox,"click",this.getCloseClickHandler_())):this.closeListener_=null},InfoBox.prototype.getCloseClickHandler_=function(){var me=this;return function(e){e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation(),google.maps.event.trigger(me,"closeclick"),me.close()}},InfoBox.prototype.panBox_=function(disablePan){var map,bounds,xOffset=0,yOffset=0;if(!disablePan&&(map=this.getMap(),map instanceof google.maps.Map)){map.getBounds().contains(this.position_)||map.setCenter(this.position_),bounds=map.getBounds();var mapDiv=map.getDiv(),mapWidth=mapDiv.offsetWidth,mapHeight=mapDiv.offsetHeight,iwOffsetX=this.pixelOffset_.width,iwOffsetY=this.pixelOffset_.height,iwWidth=this.div_.offsetWidth,iwHeight=this.div_.offsetHeight,padX=this.infoBoxClearance_.width,padY=this.infoBoxClearance_.height,pixPosition=this.getProjection().fromLatLngToContainerPixel(this.position_);if(pixPosition.x<-iwOffsetX+padX?xOffset=pixPosition.x+iwOffsetX-padX:pixPosition.x+iwWidth+iwOffsetX+padX>mapWidth&&(xOffset=pixPosition.x+iwWidth+iwOffsetX+padX-mapWidth),this.alignBottom_?pixPosition.y<-iwOffsetY+padY+iwHeight?yOffset=pixPosition.y+iwOffsetY-padY-iwHeight:pixPosition.y+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwOffsetY+padY-mapHeight):pixPosition.y<-iwOffsetY+padY?yOffset=pixPosition.y+iwOffsetY-padY:pixPosition.y+iwHeight+iwOffsetY+padY>mapHeight&&(yOffset=pixPosition.y+iwHeight+iwOffsetY+padY-mapHeight),0!==xOffset||0!==yOffset){map.getCenter();map.panBy(xOffset,yOffset)}}},InfoBox.prototype.setBoxStyle_=function(){var i,boxStyle;if(this.div_){this.div_.className=this.boxClass_,this.div_.style.cssText="",boxStyle=this.boxStyle_;for(i in boxStyle)boxStyle.hasOwnProperty(i)&&(this.div_.style[i]=boxStyle[i]);this.div_.style.WebkitTransform="translateZ(0)","undefined"!=typeof this.div_.style.opacity&&""!==this.div_.style.opacity&&(this.div_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(Opacity='+100*this.div_.style.opacity+')"',this.div_.style.filter="alpha(opacity="+100*this.div_.style.opacity+")"),this.div_.style.position="absolute",this.div_.style.visibility="hidden",null!==this.zIndex_&&(this.div_.style.zIndex=this.zIndex_)}},InfoBox.prototype.getBoxWidths_=function(){var computedStyle,bw={top:0,bottom:0,left:0,right:0},box=this.div_;return document.defaultView&&document.defaultView.getComputedStyle?(computedStyle=box.ownerDocument.defaultView.getComputedStyle(box,""),computedStyle&&(bw.top=parseInt(computedStyle.borderTopWidth,10)||0,bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0,bw.left=parseInt(computedStyle.borderLeftWidth,10)||0,bw.right=parseInt(computedStyle.borderRightWidth,10)||0)):document.documentElement.currentStyle&&box.currentStyle&&(bw.top=parseInt(box.currentStyle.borderTopWidth,10)||0,bw.bottom=parseInt(box.currentStyle.borderBottomWidth,10)||0,bw.left=parseInt(box.currentStyle.borderLeftWidth,10)||0,bw.right=parseInt(box.currentStyle.borderRightWidth,10)||0),bw},InfoBox.prototype.onRemove=function(){this.div_&&(this.div_.parentNode.removeChild(this.div_),this.div_=null)},InfoBox.prototype.draw=function(){this.createInfoBoxDiv_();var pixPosition=this.getProjection().fromLatLngToDivPixel(this.position_);this.div_.style.left=pixPosition.x+this.pixelOffset_.width+"px",this.alignBottom_?this.div_.style.bottom=-(pixPosition.y+this.pixelOffset_.height)+"px":this.div_.style.top=pixPosition.y+this.pixelOffset_.height+"px",this.isHidden_?this.div_.style.visibility="hidden":this.div_.style.visibility="visible"},InfoBox.prototype.setOptions=function(opt_opts){"undefined"!=typeof opt_opts.boxClass&&(this.boxClass_=opt_opts.boxClass,this.setBoxStyle_()),"undefined"!=typeof opt_opts.boxStyle&&(this.boxStyle_=opt_opts.boxStyle,this.setBoxStyle_()),"undefined"!=typeof opt_opts.content&&this.setContent(opt_opts.content),"undefined"!=typeof opt_opts.disableAutoPan&&(this.disableAutoPan_=opt_opts.disableAutoPan),"undefined"!=typeof opt_opts.maxWidth&&(this.maxWidth_=opt_opts.maxWidth),"undefined"!=typeof opt_opts.pixelOffset&&(this.pixelOffset_=opt_opts.pixelOffset),"undefined"!=typeof opt_opts.alignBottom&&(this.alignBottom_=opt_opts.alignBottom),"undefined"!=typeof opt_opts.position&&this.setPosition(opt_opts.position),"undefined"!=typeof opt_opts.zIndex&&this.setZIndex(opt_opts.zIndex),"undefined"!=typeof opt_opts.closeBoxMargin&&(this.closeBoxMargin_=opt_opts.closeBoxMargin),"undefined"!=typeof opt_opts.closeBoxURL&&(this.closeBoxURL_=opt_opts.closeBoxURL),"undefined"!=typeof opt_opts.infoBoxClearance&&(this.infoBoxClearance_=opt_opts.infoBoxClearance),"undefined"!=typeof opt_opts.isHidden&&(this.isHidden_=opt_opts.isHidden),"undefined"!=typeof opt_opts.visible&&(this.isHidden_=!opt_opts.visible),"undefined"!=typeof opt_opts.enableEventPropagation&&(this.enableEventPropagation_=opt_opts.enableEventPropagation),this.div_&&this.draw()},InfoBox.prototype.setContent=function(content){this.content_=content,this.div_&&(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.fixedWidthSet_||(this.div_.style.width=""),"undefined"==typeof content.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+content:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(content)),this.fixedWidthSet_||(this.div_.style.width=this.div_.offsetWidth+"px","undefined"==typeof content.nodeType?this.div_.innerHTML=this.getCloseBoxImg_()+content:(this.div_.innerHTML=this.getCloseBoxImg_(),this.div_.appendChild(content))),this.addClickHandler_()),google.maps.event.trigger(this,"content_changed")},InfoBox.prototype.setPosition=function(latlng){this.position_=latlng,this.div_&&this.draw(),google.maps.event.trigger(this,"position_changed")},InfoBox.prototype.setZIndex=function(index){this.zIndex_=index,this.div_&&(this.div_.style.zIndex=index),google.maps.event.trigger(this,"zindex_changed")},InfoBox.prototype.setVisible=function(isVisible){this.isHidden_=!isVisible,this.div_&&(this.div_.style.visibility=this.isHidden_?"hidden":"visible")},InfoBox.prototype.getContent=function(){return this.content_},InfoBox.prototype.getPosition=function(){return this.position_},InfoBox.prototype.getZIndex=function(){return this.zIndex_},InfoBox.prototype.getVisible=function(){var isVisible;return isVisible="undefined"==typeof this.getMap()||null===this.getMap()?!1:!this.isHidden_},InfoBox.prototype.show=function(){this.isHidden_=!1,this.div_&&(this.div_.style.visibility="visible")},InfoBox.prototype.hide=function(){this.isHidden_=!0,this.div_&&(this.div_.style.visibility="hidden")},InfoBox.prototype.open=function(map,anchor){var me=this;anchor&&(this.position_=anchor.getPosition(),this.moveListener_=google.maps.event.addListener(anchor,"position_changed",function(){me.setPosition(this.getPosition())})),this.setMap(map),this.div_&&this.panBox_()},InfoBox.prototype.close=function(){var i;if(this.closeListener_&&(google.maps.event.removeListener(this.closeListener_),this.closeListener_=null),this.eventListeners_){for(i=0;i<this.eventListeners_.length;i++)google.maps.event.removeListener(this.eventListeners_[i]);this.eventListeners_=null}this.moveListener_&&(google.maps.event.removeListener(this.moveListener_),this.moveListener_=null),this.contextListener_&&(google.maps.event.removeListener(this.contextListener_),this.contextListener_=null),this.setMap(null)},function(){function DragZoom(map,opt_zoomOpts){var me=this,ov=new google.maps.OverlayView;ov.onAdd=function(){me.init_(map,opt_zoomOpts)},ov.draw=function(){},ov.onRemove=function(){},ov.setMap(map),this.prjov_=ov}var toPixels=function(widthValue){var px;switch(widthValue){case"thin":px="2px";break;case"medium":px="4px";break;case"thick":px="6px";break;default:px=widthValue}return px},getBorderWidths=function(h){var computedStyle,bw={};if(document.defaultView&&document.defaultView.getComputedStyle){if(computedStyle=h.ownerDocument.defaultView.getComputedStyle(h,""))return bw.top=parseInt(computedStyle.borderTopWidth,10)||0,bw.bottom=parseInt(computedStyle.borderBottomWidth,10)||0,bw.left=parseInt(computedStyle.borderLeftWidth,10)||0,bw.right=parseInt(computedStyle.borderRightWidth,10)||0,bw}else if(document.documentElement.currentStyle&&h.currentStyle)return bw.top=parseInt(toPixels(h.currentStyle.borderTopWidth),10)||0,bw.bottom=parseInt(toPixels(h.currentStyle.borderBottomWidth),10)||0,bw.left=parseInt(toPixels(h.currentStyle.borderLeftWidth),10)||0,bw.right=parseInt(toPixels(h.currentStyle.borderRightWidth),10)||0,bw;return bw.top=parseInt(h.style["border-top-width"],10)||0,bw.bottom=parseInt(h.style["border-bottom-width"],10)||0,bw.left=parseInt(h.style["border-left-width"],10)||0,bw.right=parseInt(h.style["border-right-width"],10)||0,bw},scroll={x:0,y:0},getScrollValue=function(e){scroll.x="undefined"!=typeof document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,scroll.y="undefined"!=typeof document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop};getScrollValue();var getMousePosition=function(e){var posX=0,posY=0;return e=e||window.event,"undefined"!=typeof e.pageX?(posX=e.pageX,posY=e.pageY):"undefined"!=typeof e.clientX&&(posX=e.clientX+scroll.x,posY=e.clientY+scroll.y),{left:posX,top:posY}},getElementPosition=function(h){for(var posX=h.offsetLeft,posY=h.offsetTop,parent=h.offsetParent;null!==parent;){parent!==document.body&&parent!==document.documentElement&&(posX-=parent.scrollLeft,posY-=parent.scrollTop);var m=parent,moffx=m.offsetLeft,moffy=m.offsetTop;if(!moffx&&!moffy&&window.getComputedStyle){var matrix=document.defaultView.getComputedStyle(m,null).MozTransform||document.defaultView.getComputedStyle(m,null).WebkitTransform;if(matrix&&"string"==typeof matrix){var parms=matrix.split(",");moffx+=parseInt(parms[4],10)||0,moffy+=parseInt(parms[5],10)||0}}posX+=moffx,posY+=moffy,parent=parent.offsetParent}return{left:posX,top:posY}},setVals=function(obj,vals){if(obj&&vals)for(var x in vals)vals.hasOwnProperty(x)&&(obj[x]=vals[x]);return obj},setOpacity=function(h,op){"undefined"!=typeof op&&(h.style.opacity=op),"undefined"!=typeof h.style.opacity&&""!==h.style.opacity&&(h.style.filter="alpha(opacity="+100*h.style.opacity+")")};DragZoom.prototype.init_=function(map,opt_zoomOpts){var i,me=this;for(this.map_=map,opt_zoomOpts=opt_zoomOpts||{},this.key_=opt_zoomOpts.key||"shift",this.key_=this.key_.toLowerCase(),this.borderWidths_=getBorderWidths(this.map_.getDiv()),this.veilDiv_=[],i=0;4>i;i++)this.veilDiv_[i]=document.createElement("div"),this.veilDiv_[i].onselectstart=function(){return!1},setVals(this.veilDiv_[i].style,{backgroundColor:"gray",opacity:.25,cursor:"crosshair"}),setVals(this.veilDiv_[i].style,opt_zoomOpts.paneStyle),setVals(this.veilDiv_[i].style,opt_zoomOpts.veilStyle),setVals(this.veilDiv_[i].style,{position:"absolute",overflow:"hidden",display:"none"}),"shift"===this.key_&&(this.veilDiv_[i].style.MozUserSelect="none"),setOpacity(this.veilDiv_[i]),"transparent"===this.veilDiv_[i].style.backgroundColor&&(this.veilDiv_[i].style.backgroundColor="white",setOpacity(this.veilDiv_[i],0)),this.map_.getDiv().appendChild(this.veilDiv_[i]);this.noZoom_=opt_zoomOpts.noZoom||!1,this.visualEnabled_=opt_zoomOpts.visualEnabled||!1,this.visualClass_=opt_zoomOpts.visualClass||"",this.visualPosition_=opt_zoomOpts.visualPosition||google.maps.ControlPosition.LEFT_TOP,this.visualPositionOffset_=opt_zoomOpts.visualPositionOffset||new google.maps.Size(35,0),this.visualPositionIndex_=opt_zoomOpts.visualPositionIndex||null,this.visualSprite_=opt_zoomOpts.visualSprite||"http"+("https:"===document.location.protocol?"s":"")+"://maps.gstatic.com/mapfiles/ftr/controls/dragzoom_btn.png",this.visualSize_=opt_zoomOpts.visualSize||new google.maps.Size(20,20),this.visualTips_=opt_zoomOpts.visualTips||{},this.visualTips_.off=this.visualTips_.off||"Turn on drag zoom mode",this.visualTips_.on=this.visualTips_.on||"Turn off drag zoom mode",this.boxDiv_=document.createElement("div"),setVals(this.boxDiv_.style,{border:"4px solid #736AFF"}),setVals(this.boxDiv_.style,opt_zoomOpts.boxStyle),setVals(this.boxDiv_.style,{position:"absolute",display:"none"}),setOpacity(this.boxDiv_),this.map_.getDiv().appendChild(this.boxDiv_),this.boxBorderWidths_=getBorderWidths(this.boxDiv_),this.listeners_=[google.maps.event.addDomListener(document,"keydown",function(e){me.onKeyDown_(e)}),google.maps.event.addDomListener(document,"keyup",function(e){me.onKeyUp_(e)}),google.maps.event.addDomListener(this.veilDiv_[0],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[1],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[2],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(this.veilDiv_[3],"mousedown",function(e){me.onMouseDown_(e)}),google.maps.event.addDomListener(document,"mousedown",function(e){me.onMouseDownDocument_(e)}),google.maps.event.addDomListener(document,"mousemove",function(e){me.onMouseMove_(e)}),google.maps.event.addDomListener(document,"mouseup",function(e){me.onMouseUp_(e)}),google.maps.event.addDomListener(window,"scroll",getScrollValue)],this.hotKeyDown_=!1,this.mouseDown_=!1,this.dragging_=!1,this.startPt_=null,this.endPt_=null,this.mapWidth_=null,this.mapHeight_=null,this.mousePosn_=null,this.mapPosn_=null,this.visualEnabled_&&(this.buttonDiv_=this.initControl_(this.visualPositionOffset_),null!==this.visualPositionIndex_&&(this.buttonDiv_.index=this.visualPositionIndex_),this.map_.controls[this.visualPosition_].push(this.buttonDiv_),this.controlIndex_=this.map_.controls[this.visualPosition_].length-1)},DragZoom.prototype.initControl_=function(offset){var control,image,me=this;return control=document.createElement("div"),control.className=this.visualClass_,control.style.position="relative",control.style.overflow="hidden",control.style.height=this.visualSize_.height+"px",control.style.width=this.visualSize_.width+"px",control.title=this.visualTips_.off,image=document.createElement("img"),image.src=this.visualSprite_,image.style.position="absolute",image.style.left=-(2*this.visualSize_.width)+"px",image.style.top="0px",control.appendChild(image),control.onclick=function(e){me.hotKeyDown_=!me.hotKeyDown_,me.hotKeyDown_?(me.buttonDiv_.firstChild.style.left=-(0*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.on,me.activatedByControl_=!0,google.maps.event.trigger(me,"activate")):(me.buttonDiv_.firstChild.style.left=-(2*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.off,google.maps.event.trigger(me,"deactivate")),me.onMouseMove_(e)},control.onmouseover=function(){me.buttonDiv_.firstChild.style.left=-(1*me.visualSize_.width)+"px"},control.onmouseout=function(){me.hotKeyDown_?(me.buttonDiv_.firstChild.style.left=-(0*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.on):(me.buttonDiv_.firstChild.style.left=-(2*me.visualSize_.width)+"px",me.buttonDiv_.title=me.visualTips_.off)},control.ondragstart=function(){return!1},setVals(control.style,{cursor:"pointer",marginTop:offset.height+"px",marginLeft:offset.width+"px"}),control},DragZoom.prototype.isHotKeyDown_=function(e){var isHot;if(e=e||window.event,isHot=e.shiftKey&&"shift"===this.key_||e.altKey&&"alt"===this.key_||e.ctrlKey&&"ctrl"===this.key_,!isHot)switch(e.keyCode){case 16:"shift"===this.key_&&(isHot=!0);break;case 17:"ctrl"===this.key_&&(isHot=!0);break;case 18:"alt"===this.key_&&(isHot=!0)}return isHot},DragZoom.prototype.isMouseOnMap_=function(){var mousePosn=this.mousePosn_;if(mousePosn){var mapPosn=this.mapPosn_,mapDiv=this.map_.getDiv();return mousePosn.left>mapPosn.left&&mousePosn.left<mapPosn.left+mapDiv.offsetWidth&&mousePosn.top>mapPosn.top&&mousePosn.top<mapPosn.top+mapDiv.offsetHeight}return!1},DragZoom.prototype.setVeilVisibility_=function(){var i;if(this.map_&&this.hotKeyDown_&&this.isMouseOnMap_()){var mapDiv=this.map_.getDiv();if(this.mapWidth_=mapDiv.offsetWidth-(this.borderWidths_.left+this.borderWidths_.right),this.mapHeight_=mapDiv.offsetHeight-(this.borderWidths_.top+this.borderWidths_.bottom),this.activatedByControl_){var left=parseInt(this.buttonDiv_.style.left,10)+this.visualPositionOffset_.width,top=parseInt(this.buttonDiv_.style.top,10)+this.visualPositionOffset_.height,width=this.visualSize_.width,height=this.visualSize_.height;for(this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=left+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=left+width+"px",this.veilDiv_[1].style.width=this.mapWidth_-(left+width)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=left+"px",this.veilDiv_[2].style.width=width+"px",this.veilDiv_[2].style.height=top+"px",this.veilDiv_[3].style.top=top+height+"px",this.veilDiv_[3].style.left=left+"px",this.veilDiv_[3].style.width=width+"px",this.veilDiv_[3].style.height=this.mapHeight_-(top+height)+"px",i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="block"}else{for(this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.width=this.mapWidth_+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",i=1;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.width="0px",this.veilDiv_[i].style.height="0px";for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="block"}}else for(i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="none"},DragZoom.prototype.onKeyDown_=function(e){this.map_&&!this.hotKeyDown_&&this.isHotKeyDown_(e)&&(this.mapPosn_=getElementPosition(this.map_.getDiv()),this.hotKeyDown_=!0,this.activatedByControl_=!1,this.setVeilVisibility_(),google.maps.event.trigger(this,"activate"))},DragZoom.prototype.getMousePoint_=function(e){var mousePosn=getMousePosition(e),p=new google.maps.Point;return p.x=mousePosn.left-this.mapPosn_.left-this.borderWidths_.left,p.y=mousePosn.top-this.mapPosn_.top-this.borderWidths_.top,p.x=Math.min(p.x,this.mapWidth_),p.y=Math.min(p.y,this.mapHeight_),p.x=Math.max(p.x,0),p.y=Math.max(p.y,0),p},DragZoom.prototype.onMouseDown_=function(e){if(this.map_&&this.hotKeyDown_){this.mapPosn_=getElementPosition(this.map_.getDiv()),this.dragging_=!0,this.startPt_=this.endPt_=this.getMousePoint_(e),this.boxDiv_.style.width=this.boxDiv_.style.height="0px";var prj=this.prjov_.getProjection(),latlng=prj.fromContainerPixelToLatLng(this.startPt_);google.maps.event.trigger(this,"dragstart",latlng)}},DragZoom.prototype.onMouseDownDocument_=function(e){this.mouseDown_=!0},DragZoom.prototype.onMouseMove_=function(e){if(this.mousePosn_=getMousePosition(e),this.dragging_){this.endPt_=this.getMousePoint_(e);var left=Math.min(this.startPt_.x,this.endPt_.x),top=Math.min(this.startPt_.y,this.endPt_.y),width=Math.abs(this.startPt_.x-this.endPt_.x),height=Math.abs(this.startPt_.y-this.endPt_.y),boxWidth=Math.max(0,width-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)),boxHeight=Math.max(0,height-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom));this.veilDiv_[0].style.top="0px",this.veilDiv_[0].style.left="0px",this.veilDiv_[0].style.width=left+"px",this.veilDiv_[0].style.height=this.mapHeight_+"px",this.veilDiv_[1].style.top="0px",this.veilDiv_[1].style.left=left+width+"px",this.veilDiv_[1].style.width=this.mapWidth_-(left+width)+"px",this.veilDiv_[1].style.height=this.mapHeight_+"px",this.veilDiv_[2].style.top="0px",this.veilDiv_[2].style.left=left+"px",this.veilDiv_[2].style.width=width+"px",this.veilDiv_[2].style.height=top+"px",this.veilDiv_[3].style.top=top+height+"px",this.veilDiv_[3].style.left=left+"px",this.veilDiv_[3].style.width=width+"px",this.veilDiv_[3].style.height=this.mapHeight_-(top+height)+"px",this.boxDiv_.style.top=top+"px",this.boxDiv_.style.left=left+"px",this.boxDiv_.style.width=boxWidth+"px",this.boxDiv_.style.height=boxHeight+"px",this.boxDiv_.style.display="block",google.maps.event.trigger(this,"drag",new google.maps.Point(left,top+height),new google.maps.Point(left+width,top),this.prjov_.getProjection())}else this.mouseDown_||(this.mapPosn_=getElementPosition(this.map_.getDiv()),this.setVeilVisibility_())},DragZoom.prototype.onMouseUp_=function(e){var z,me=this;if(this.mouseDown_=!1,this.dragging_){if(this.getMousePoint_(e).x===this.startPt_.x&&this.getMousePoint_(e).y===this.startPt_.y)return void this.onKeyUp_(e);var left=Math.min(this.startPt_.x,this.endPt_.x),top=Math.min(this.startPt_.y,this.endPt_.y),width=Math.abs(this.startPt_.x-this.endPt_.x),height=Math.abs(this.startPt_.y-this.endPt_.y),kGoogleCenteringBug=!0;kGoogleCenteringBug&&(left+=this.borderWidths_.left,top+=this.borderWidths_.top);var prj=this.prjov_.getProjection(),sw=prj.fromContainerPixelToLatLng(new google.maps.Point(left,top+height)),ne=prj.fromContainerPixelToLatLng(new google.maps.Point(left+width,top)),bnds=new google.maps.LatLngBounds(sw,ne);if(this.noZoom_)this.boxDiv_.style.display="none";else{z=this.map_.getZoom(),this.map_.fitBounds(bnds),this.map_.getZoom()<z&&this.map_.setZoom(z);var swPt=prj.fromLatLngToContainerPixel(sw),nePt=prj.fromLatLngToContainerPixel(ne);kGoogleCenteringBug&&(swPt.x-=this.borderWidths_.left,swPt.y-=this.borderWidths_.top,nePt.x-=this.borderWidths_.left,nePt.y-=this.borderWidths_.top),this.boxDiv_.style.left=swPt.x+"px",this.boxDiv_.style.top=nePt.y+"px",this.boxDiv_.style.width=Math.abs(nePt.x-swPt.x)-(this.boxBorderWidths_.left+this.boxBorderWidths_.right)+"px",this.boxDiv_.style.height=Math.abs(nePt.y-swPt.y)-(this.boxBorderWidths_.top+this.boxBorderWidths_.bottom)+"px",setTimeout(function(){me.boxDiv_.style.display="none"},1e3)}this.dragging_=!1,this.onMouseMove_(e),google.maps.event.trigger(this,"dragend",bnds),this.isHotKeyDown_(e)||this.onKeyUp_(e)}},DragZoom.prototype.onKeyUp_=function(e){var i,left,top,width,height,prj,sw,ne,bnds=null;if(this.map_&&this.hotKeyDown_){for(this.hotKeyDown_=!1,this.dragging_&&(this.boxDiv_.style.display="none",this.dragging_=!1,left=Math.min(this.startPt_.x,this.endPt_.x),top=Math.min(this.startPt_.y,this.endPt_.y),width=Math.abs(this.startPt_.x-this.endPt_.x),height=Math.abs(this.startPt_.y-this.endPt_.y),prj=this.prjov_.getProjection(),sw=prj.fromContainerPixelToLatLng(new google.maps.Point(left,top+height)),ne=prj.fromContainerPixelToLatLng(new google.maps.Point(left+width,top)),bnds=new google.maps.LatLngBounds(sw,ne)),i=0;i<this.veilDiv_.length;i++)this.veilDiv_[i].style.display="none";this.visualEnabled_&&(this.buttonDiv_.firstChild.style.left=-(2*this.visualSize_.width)+"px",this.buttonDiv_.title=this.visualTips_.off,this.buttonDiv_.style.display=""),google.maps.event.trigger(this,"deactivate",bnds)}},google.maps.Map.prototype.enableKeyDragZoom=function(opt_zoomOpts){this.dragZoom_=new DragZoom(this,opt_zoomOpts)},google.maps.Map.prototype.disableKeyDragZoom=function(){var i,d=this.dragZoom_;if(d){for(i=0;i<d.listeners_.length;++i)google.maps.event.removeListener(d.listeners_[i]);for(this.getDiv().removeChild(d.boxDiv_),i=0;i<d.veilDiv_.length;i++)this.getDiv().removeChild(d.veilDiv_[i]);d.visualEnabled_&&this.controls[d.visualPosition_].removeAt(d.controlIndex_),d.prjov_.setMap(null),this.dragZoom_=null}},google.maps.Map.prototype.keyDragZoomEnabled=function(){return null!==this.dragZoom_},google.maps.Map.prototype.getDragZoomObject=function(){return this.dragZoom_}}(),ClusterIcon.prototype.onAdd=function(){var cMouseDownInCluster,cDraggingMapByCluster,cClusterIcon=this;this.div_=document.createElement("div"),this.div_.className=this.className_,this.visible_&&this.show(),this.getPanes().overlayMouseTarget.appendChild(this.div_),this.boundsChangedListener_=google.maps.event.addListener(this.getMap(),"bounds_changed",function(){cDraggingMapByCluster=cMouseDownInCluster}),google.maps.event.addDomListener(this.div_,"mousedown",function(){cMouseDownInCluster=!0,cDraggingMapByCluster=!1}),google.maps.event.addDomListener(this.div_,"click",function(e){if(cMouseDownInCluster=!1,!cDraggingMapByCluster){var theBounds,mz,mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"click",cClusterIcon.cluster_),google.maps.event.trigger(mc,"clusterclick",cClusterIcon.cluster_),mc.getZoomOnClick()&&(mz=mc.getMaxZoom(),theBounds=cClusterIcon.cluster_.getBounds(),mc.getMap().fitBounds(theBounds),setTimeout(function(){mc.getMap().fitBounds(theBounds),null!==mz&&mc.getMap().getZoom()>mz&&mc.getMap().setZoom(mz+1)},100)),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()}}),google.maps.event.addDomListener(this.div_,"mouseover",function(){var mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"mouseover",cClusterIcon.cluster_)}),google.maps.event.addDomListener(this.div_,"mouseout",function(){var mc=cClusterIcon.cluster_.getMarkerClusterer();google.maps.event.trigger(mc,"mouseout",cClusterIcon.cluster_)})},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),google.maps.event.removeListener(this.boundsChangedListener_),google.maps.event.clearInstanceListeners(this.div_),
this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.draw=function(){if(this.visible_){var pos=this.getPosFromLatLng_(this.center_);this.div_.style.top=pos.y+"px",this.div_.style.left=pos.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var img="",bp=this.backgroundPosition_.split(" "),spriteH=parseInt(bp[0].trim(),10),spriteV=parseInt(bp[1].trim(),10),pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos),img="<img src='"+this.url_+"' style='position: absolute; top: "+spriteV+"px; left: "+spriteH+"px; ",this.cluster_.getMarkerClusterer().enableRetinaIcons_||(img+="clip: rect("+-1*spriteV+"px, "+(-1*spriteH+this.width_)+"px, "+(-1*spriteV+this.height_)+"px, "+-1*spriteH+"px);"),img+="'>",this.div_.innerHTML=img+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.useStyle=function(sums){this.sums_=sums;var index=Math.max(0,sums.index-1);index=Math.min(this.styles_.length-1,index);var style=this.styles_[index];this.url_=style.url,this.height_=style.height,this.width_=style.width,this.anchorText_=style.anchorText||[0,0],this.anchorIcon_=style.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)],this.textColor_=style.textColor||"black",this.textSize_=style.textSize||11,this.textDecoration_=style.textDecoration||"none",this.fontWeight_=style.fontWeight||"bold",this.fontStyle_=style.fontStyle||"normal",this.fontFamily_=style.fontFamily||"Arial,sans-serif",this.backgroundPosition_=style.backgroundPosition||"0 0"},ClusterIcon.prototype.setCenter=function(center){this.center_=center},ClusterIcon.prototype.createCss=function(pos){var style=[];return style.push("cursor: pointer;"),style.push("position: absolute; top: "+pos.y+"px; left: "+pos.x+"px;"),style.push("width: "+this.width_+"px; height: "+this.height_+"px;"),style.join("")},ClusterIcon.prototype.getPosFromLatLng_=function(latlng){var pos=this.getProjection().fromLatLngToDivPixel(latlng);return pos.x-=this.anchorIcon_[1],pos.y-=this.anchorIcon_[0],pos.x=parseInt(pos.x,10),pos.y=parseInt(pos.y,10),pos},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){var i,bounds=new google.maps.LatLngBounds(this.center_,this.center_),markers=this.getMarkers();for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());return bounds},Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=[],delete this.markers_},Cluster.prototype.addMarker=function(marker){var i,mCount,mz;if(this.isMarkerAlreadyAdded_(marker))return!1;if(this.center_){if(this.averageCenter_){var l=this.markers_.length+1,lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l,lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng),this.calculateBounds_()}}else this.center_=marker.getPosition(),this.calculateBounds_();if(marker.isAdded=!0,this.markers_.push(marker),mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom(),null!==mz&&this.map_.getZoom()>mz)marker.getMap()!==this.map_&&marker.setMap(this.map_);else if(mCount<this.minClusterSize_)marker.getMap()!==this.map_&&marker.setMap(this.map_);else if(mCount===this.minClusterSize_)for(i=0;mCount>i;i++)this.markers_[i].setMap(null);else marker.setMap(null);return this.updateIcon_(),!0},Cluster.prototype.isMarkerInClusterBounds=function(marker){return this.bounds_.contains(marker.getPosition())},Cluster.prototype.calculateBounds_=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(bounds)},Cluster.prototype.updateIcon_=function(){var mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom();if(null!==mz&&this.map_.getZoom()>mz)return void this.clusterIcon_.hide();if(mCount<this.minClusterSize_)return void this.clusterIcon_.hide();var numStyles=this.markerClusterer_.getStyles().length,sums=this.markerClusterer_.getCalculator()(this.markers_,numStyles);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.useStyle(sums),this.clusterIcon_.show()},Cluster.prototype.isMarkerAlreadyAdded_=function(marker){var i;if(this.markers_.indexOf)return-1!==this.markers_.indexOf(marker);for(i=0;i<this.markers_.length;i++)if(marker===this.markers_[i])return!0;return!1},MarkerClusterer.prototype.onAdd=function(){var cMarkerClusterer=this;this.activeMap_=this.getMap(),this.ready_=!0,this.repaint(),this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){cMarkerClusterer.resetViewport_(!1),(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom"))&&google.maps.event.trigger(this,"idle")}),google.maps.event.addListener(this.getMap(),"idle",function(){cMarkerClusterer.redraw_()})]},MarkerClusterer.prototype.onRemove=function(){var i;for(i=0;i<this.markers_.length;i++)this.markers_[i].getMap()!==this.activeMap_&&this.markers_[i].setMap(this.activeMap_);for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();for(this.clusters_=[],i=0;i<this.listeners_.length;i++)google.maps.event.removeListener(this.listeners_[i]);this.listeners_=[],this.activeMap_=null,this.ready_=!1},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){var i,size;if(!(this.styles_.length>0))for(i=0;i<this.imageSizes_.length;i++)size=this.imageSizes_[i],this.styles_.push({url:this.imagePath_+(i+1)+"."+this.imageExtension_,height:size,width:size})},MarkerClusterer.prototype.fitMapToMarkers=function(){var i,markers=this.getMarkers(),bounds=new google.maps.LatLngBounds;for(i=0;i<markers.length;i++)bounds.extend(markers[i].getPosition());this.getMap().fitBounds(bounds)},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(gridSize){this.gridSize_=gridSize},MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinimumClusterSize=function(minimumClusterSize){this.minClusterSize_=minimumClusterSize},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.setMaxZoom=function(maxZoom){this.maxZoom_=maxZoom},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.setStyles=function(styles){this.styles_=styles},MarkerClusterer.prototype.getTitle=function(){return this.title_},MarkerClusterer.prototype.setTitle=function(title){this.title_=title},MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.setZoomOnClick=function(zoomOnClick){this.zoomOnClick_=zoomOnClick},MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.setAverageCenter=function(averageCenter){this.averageCenter_=averageCenter},MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_},MarkerClusterer.prototype.setIgnoreHidden=function(ignoreHidden){this.ignoreHidden_=ignoreHidden},MarkerClusterer.prototype.getEnableRetinaIcons=function(){return this.enableRetinaIcons_},MarkerClusterer.prototype.setEnableRetinaIcons=function(enableRetinaIcons){this.enableRetinaIcons_=enableRetinaIcons},MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_},MarkerClusterer.prototype.setImageExtension=function(imageExtension){this.imageExtension_=imageExtension},MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_},MarkerClusterer.prototype.setImagePath=function(imagePath){this.imagePath_=imagePath},MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_},MarkerClusterer.prototype.setImageSizes=function(imageSizes){this.imageSizes_=imageSizes},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.setCalculator=function(calculator){this.calculator_=calculator},MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_},MarkerClusterer.prototype.setBatchSizeIE=function(batchSizeIE){this.batchSizeIE_=batchSizeIE},MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_},MarkerClusterer.prototype.setClusterClass=function(clusterClass){this.clusterClass_=clusterClass},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.getClusters=function(){return this.clusters_},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.addMarker=function(marker,opt_nodraw){this.pushMarkerTo_(marker),opt_nodraw||this.redraw_()},MarkerClusterer.prototype.addMarkers=function(markers,opt_nodraw){var key;for(key in markers)markers.hasOwnProperty(key)&&this.pushMarkerTo_(markers[key]);opt_nodraw||this.redraw_()},MarkerClusterer.prototype.pushMarkerTo_=function(marker){if(marker.getDraggable()){var cMarkerClusterer=this;google.maps.event.addListener(marker,"dragend",function(){cMarkerClusterer.ready_&&(this.isAdded=!1,cMarkerClusterer.repaint())})}marker.isAdded=!1,this.markers_.push(marker)},MarkerClusterer.prototype.removeMarker=function(marker,opt_nodraw){var removed=this.removeMarker_(marker);return!opt_nodraw&&removed&&this.repaint(),removed},MarkerClusterer.prototype.removeMarkers=function(markers,opt_nodraw){var i,r,removed=!1;for(i=0;i<markers.length;i++)r=this.removeMarker_(markers[i]),removed=removed||r;return!opt_nodraw&&removed&&this.repaint(),removed},MarkerClusterer.prototype.removeMarker_=function(marker){var i,index=-1;if(this.markers_.indexOf)index=this.markers_.indexOf(marker);else for(i=0;i<this.markers_.length;i++)if(marker===this.markers_[i]){index=i;break}return-1===index?!1:(marker.setMap(null),this.markers_.splice(index,1),!0)},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=[]},MarkerClusterer.prototype.repaint=function(){var oldClusters=this.clusters_.slice();this.clusters_=[],this.resetViewport_(!1),this.redraw_(),setTimeout(function(){var i;for(i=0;i<oldClusters.length;i++)oldClusters[i].remove()},0)},MarkerClusterer.prototype.getExtendedBounds=function(bounds){var projection=this.getProjection(),tr=new google.maps.LatLng(bounds.getNorthEast().lat(),bounds.getNorthEast().lng()),bl=new google.maps.LatLng(bounds.getSouthWest().lat(),bounds.getSouthWest().lng()),trPix=projection.fromLatLngToDivPixel(tr);trPix.x+=this.gridSize_,trPix.y-=this.gridSize_;var blPix=projection.fromLatLngToDivPixel(bl);blPix.x-=this.gridSize_,blPix.y+=this.gridSize_;var ne=projection.fromDivPixelToLatLng(trPix),sw=projection.fromDivPixelToLatLng(blPix);return bounds.extend(ne),bounds.extend(sw),bounds},MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},MarkerClusterer.prototype.resetViewport_=function(opt_hide){var i,marker;for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();for(this.clusters_=[],i=0;i<this.markers_.length;i++)marker=this.markers_[i],marker.isAdded=!1,opt_hide&&marker.setMap(null)},MarkerClusterer.prototype.distanceBetweenPoints_=function(p1,p2){var R=6371,dLat=(p2.lat()-p1.lat())*Math.PI/180,dLon=(p2.lng()-p1.lng())*Math.PI/180,a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(p1.lat()*Math.PI/180)*Math.cos(p2.lat()*Math.PI/180)*Math.sin(dLon/2)*Math.sin(dLon/2),c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a)),d=R*c;return d},MarkerClusterer.prototype.isMarkerInBounds_=function(marker,bounds){return bounds.contains(marker.getPosition())},MarkerClusterer.prototype.addToClosestCluster_=function(marker){var i,d,cluster,center,distance=4e4,clusterToAddTo=null;for(i=0;i<this.clusters_.length;i++)cluster=this.clusters_[i],center=cluster.getCenter(),center&&(d=this.distanceBetweenPoints_(center,marker.getPosition()),distance>d&&(distance=d,clusterToAddTo=cluster));clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)?clusterToAddTo.addMarker(marker):(cluster=new Cluster(this),cluster.addMarker(marker),this.clusters_.push(cluster))},MarkerClusterer.prototype.createClusters_=function(iFirst){var i,marker,mapBounds,cMarkerClusterer=this;if(this.ready_){0===iFirst&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),mapBounds=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var bounds=this.getExtendedBounds(mapBounds),iLast=Math.min(iFirst+this.batchSize_,this.markers_.length);for(i=iFirst;iLast>i;i++)marker=this.markers_[i],!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)&&(!this.ignoreHidden_||this.ignoreHidden_&&marker.getVisible())&&this.addToClosestCluster_(marker);iLast<this.markers_.length?this.timerRefStatic=setTimeout(function(){cMarkerClusterer.createClusters_(iLast)},0):(delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this))}},MarkerClusterer.prototype.extend=function(obj1,obj2){return function(object){var property;for(property in object.prototype)this.prototype[property]=object.prototype[property];return this}.apply(obj1,[obj2])},MarkerClusterer.CALCULATOR=function(markers,numStyles){for(var index=0,title="",count=markers.length.toString(),dv=count;0!==dv;)dv=parseInt(dv/10,10),index++;return index=Math.min(index,numStyles),{text:count,index:index,title:title}},MarkerClusterer.BATCH_SIZE=2e3,MarkerClusterer.BATCH_SIZE_IE=500,MarkerClusterer.IMAGE_PATH="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclustererplus/images/m",MarkerClusterer.IMAGE_EXTENSION="png",MarkerClusterer.IMAGE_SIZES=[53,56,66,78,90],inherits(MarkerLabel_,google.maps.OverlayView),MarkerLabel_.getSharedCross=function(crossURL){var div;return"undefined"==typeof MarkerLabel_.getSharedCross.crossDiv&&(div=document.createElement("img"),div.style.cssText="position: absolute; z-index: 1000002; display: none;",div.style.marginLeft="-8px",div.style.marginTop="-9px",div.src=crossURL,MarkerLabel_.getSharedCross.crossDiv=div),MarkerLabel_.getSharedCross.crossDiv},MarkerLabel_.prototype.onAdd=function(){var cSavedZIndex,cLatOffset,cLngOffset,cIgnoreClick,cRaiseEnabled,cStartPosition,cStartCenter,me=this,cMouseIsDown=!1,cDraggingLabel=!1,cRaiseOffset=20,cDraggingCursor="url("+this.handCursorURL_+")",cAbortEvent=function(e){e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.stopPropagation&&e.stopPropagation()},cStopBounce=function(){me.marker_.setAnimation(null)};this.getPanes().overlayImage.appendChild(this.labelDiv_),this.getPanes().overlayMouseTarget.appendChild(this.eventDiv_),"undefined"==typeof MarkerLabel_.getSharedCross.processed&&(this.getPanes().overlayImage.appendChild(this.crossDiv_),MarkerLabel_.getSharedCross.processed=!0),this.listeners_=[google.maps.event.addDomListener(this.eventDiv_,"mouseover",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(this.style.cursor="pointer",google.maps.event.trigger(me.marker_,"mouseover",e))}),google.maps.event.addDomListener(this.eventDiv_,"mouseout",function(e){!me.marker_.getDraggable()&&!me.marker_.getClickable()||cDraggingLabel||(this.style.cursor=me.marker_.getCursor(),google.maps.event.trigger(me.marker_,"mouseout",e))}),google.maps.event.addDomListener(this.eventDiv_,"mousedown",function(e){cDraggingLabel=!1,me.marker_.getDraggable()&&(cMouseIsDown=!0,this.style.cursor=cDraggingCursor),(me.marker_.getDraggable()||me.marker_.getClickable())&&(google.maps.event.trigger(me.marker_,"mousedown",e),cAbortEvent(e))}),google.maps.event.addDomListener(document,"mouseup",function(mEvent){var position;if(cMouseIsDown&&(cMouseIsDown=!1,me.eventDiv_.style.cursor="pointer",google.maps.event.trigger(me.marker_,"mouseup",mEvent)),cDraggingLabel){if(cRaiseEnabled){position=me.getProjection().fromLatLngToDivPixel(me.marker_.getPosition()),position.y+=cRaiseOffset,me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position));try{me.marker_.setAnimation(google.maps.Animation.BOUNCE),setTimeout(cStopBounce,1406)}catch(e){}}me.crossDiv_.style.display="none",me.marker_.setZIndex(cSavedZIndex),cIgnoreClick=!0,cDraggingLabel=!1,mEvent.latLng=me.marker_.getPosition(),google.maps.event.trigger(me.marker_,"dragend",mEvent)}}),google.maps.event.addListener(me.marker_.getMap(),"mousemove",function(mEvent){var position;cMouseIsDown&&(cDraggingLabel?(mEvent.latLng=new google.maps.LatLng(mEvent.latLng.lat()-cLatOffset,mEvent.latLng.lng()-cLngOffset),position=me.getProjection().fromLatLngToDivPixel(mEvent.latLng),cRaiseEnabled&&(me.crossDiv_.style.left=position.x+"px",me.crossDiv_.style.top=position.y+"px",me.crossDiv_.style.display="",position.y-=cRaiseOffset),me.marker_.setPosition(me.getProjection().fromDivPixelToLatLng(position)),cRaiseEnabled&&(me.eventDiv_.style.top=position.y+cRaiseOffset+"px"),google.maps.event.trigger(me.marker_,"drag",mEvent)):(cLatOffset=mEvent.latLng.lat()-me.marker_.getPosition().lat(),cLngOffset=mEvent.latLng.lng()-me.marker_.getPosition().lng(),cSavedZIndex=me.marker_.getZIndex(),cStartPosition=me.marker_.getPosition(),cStartCenter=me.marker_.getMap().getCenter(),cRaiseEnabled=me.marker_.get("raiseOnDrag"),cDraggingLabel=!0,me.marker_.setZIndex(1e6),mEvent.latLng=me.marker_.getPosition(),google.maps.event.trigger(me.marker_,"dragstart",mEvent)))}),google.maps.event.addDomListener(document,"keydown",function(e){cDraggingLabel&&27===e.keyCode&&(cRaiseEnabled=!1,me.marker_.setPosition(cStartPosition),me.marker_.getMap().setCenter(cStartCenter),google.maps.event.trigger(document,"mouseup",e))}),google.maps.event.addDomListener(this.eventDiv_,"click",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(cIgnoreClick?cIgnoreClick=!1:(google.maps.event.trigger(me.marker_,"click",e),cAbortEvent(e)))}),google.maps.event.addDomListener(this.eventDiv_,"dblclick",function(e){(me.marker_.getDraggable()||me.marker_.getClickable())&&(google.maps.event.trigger(me.marker_,"dblclick",e),cAbortEvent(e))}),google.maps.event.addListener(this.marker_,"dragstart",function(mEvent){cDraggingLabel||(cRaiseEnabled=this.get("raiseOnDrag"))}),google.maps.event.addListener(this.marker_,"drag",function(mEvent){cDraggingLabel||cRaiseEnabled&&(me.setPosition(cRaiseOffset),me.labelDiv_.style.zIndex=1e6+(this.get("labelInBackground")?-1:1))}),google.maps.event.addListener(this.marker_,"dragend",function(mEvent){cDraggingLabel||cRaiseEnabled&&me.setPosition(0)}),google.maps.event.addListener(this.marker_,"position_changed",function(){me.setPosition()}),google.maps.event.addListener(this.marker_,"zindex_changed",function(){me.setZIndex()}),google.maps.event.addListener(this.marker_,"visible_changed",function(){me.setVisible()}),google.maps.event.addListener(this.marker_,"labelvisible_changed",function(){me.setVisible()}),google.maps.event.addListener(this.marker_,"title_changed",function(){me.setTitle()}),google.maps.event.addListener(this.marker_,"labelcontent_changed",function(){me.setContent()}),google.maps.event.addListener(this.marker_,"labelanchor_changed",function(){me.setAnchor()}),google.maps.event.addListener(this.marker_,"labelclass_changed",function(){me.setStyles()}),google.maps.event.addListener(this.marker_,"labelstyle_changed",function(){me.setStyles()})]},MarkerLabel_.prototype.onRemove=function(){var i;for(this.labelDiv_.parentNode.removeChild(this.labelDiv_),this.eventDiv_.parentNode.removeChild(this.eventDiv_),i=0;i<this.listeners_.length;i++)google.maps.event.removeListener(this.listeners_[i])},MarkerLabel_.prototype.draw=function(){this.setContent(),this.setTitle(),this.setStyles()},MarkerLabel_.prototype.setContent=function(){var content=this.marker_.get("labelContent");"undefined"==typeof content.nodeType?(this.labelDiv_.innerHTML=content,this.eventDiv_.innerHTML=this.labelDiv_.innerHTML):(this.labelDiv_.innerHTML="",this.labelDiv_.appendChild(content),content=content.cloneNode(!0),this.eventDiv_.innerHTML="",this.eventDiv_.appendChild(content))},MarkerLabel_.prototype.setTitle=function(){this.eventDiv_.title=this.marker_.getTitle()||""},MarkerLabel_.prototype.setStyles=function(){var i,labelStyle;this.labelDiv_.className=this.marker_.get("labelClass"),this.eventDiv_.className=this.labelDiv_.className,this.labelDiv_.style.cssText="",this.eventDiv_.style.cssText="",labelStyle=this.marker_.get("labelStyle");for(i in labelStyle)labelStyle.hasOwnProperty(i)&&(this.labelDiv_.style[i]=labelStyle[i],this.eventDiv_.style[i]=labelStyle[i]);this.setMandatoryStyles()},MarkerLabel_.prototype.setMandatoryStyles=function(){this.labelDiv_.style.position="absolute",this.labelDiv_.style.overflow="hidden","undefined"!=typeof this.labelDiv_.style.opacity&&""!==this.labelDiv_.style.opacity&&(this.labelDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity='+100*this.labelDiv_.style.opacity+')"',this.labelDiv_.style.filter="alpha(opacity="+100*this.labelDiv_.style.opacity+")"),this.eventDiv_.style.position=this.labelDiv_.style.position,this.eventDiv_.style.overflow=this.labelDiv_.style.overflow,this.eventDiv_.style.opacity=.01,this.eventDiv_.style.MsFilter='"progid:DXImageTransform.Microsoft.Alpha(opacity=1)"',this.eventDiv_.style.filter="alpha(opacity=1)",this.setAnchor(),this.setPosition(),this.setVisible()},MarkerLabel_.prototype.setAnchor=function(){var anchor=this.marker_.get("labelAnchor");this.labelDiv_.style.marginLeft=-anchor.x+"px",this.labelDiv_.style.marginTop=-anchor.y+"px",this.eventDiv_.style.marginLeft=-anchor.x+"px",this.eventDiv_.style.marginTop=-anchor.y+"px"},MarkerLabel_.prototype.setPosition=function(yOffset){var position=this.getProjection().fromLatLngToDivPixel(this.marker_.getPosition());"undefined"==typeof yOffset&&(yOffset=0),this.labelDiv_.style.left=Math.round(position.x)+"px",this.labelDiv_.style.top=Math.round(position.y-yOffset)+"px",this.eventDiv_.style.left=this.labelDiv_.style.left,this.eventDiv_.style.top=this.labelDiv_.style.top,this.setZIndex()},MarkerLabel_.prototype.setZIndex=function(){var zAdjust=this.marker_.get("labelInBackground")?-1:1;"undefined"==typeof this.marker_.getZIndex()?(this.labelDiv_.style.zIndex=parseInt(this.labelDiv_.style.top,10)+zAdjust,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex):(this.labelDiv_.style.zIndex=this.marker_.getZIndex()+zAdjust,this.eventDiv_.style.zIndex=this.labelDiv_.style.zIndex)},MarkerLabel_.prototype.setVisible=function(){this.marker_.get("labelVisible")?this.labelDiv_.style.display=this.marker_.getVisible()?"block":"none":this.labelDiv_.style.display="none",this.eventDiv_.style.display=this.labelDiv_.style.display},inherits(MarkerWithLabel,google.maps.Marker),MarkerWithLabel.prototype.setMap=function(theMap){google.maps.Marker.prototype.setMap.apply(this,arguments),this.label.setMap(theMap)},RichMarker.prototype=new google.maps.OverlayView,window.RichMarker=RichMarker,RichMarker.prototype.getVisible=function(){return this.get("visible")},RichMarker.prototype.getVisible=RichMarker.prototype.getVisible,RichMarker.prototype.setVisible=function(visible){this.set("visible",visible)},RichMarker.prototype.setVisible=RichMarker.prototype.setVisible,RichMarker.prototype.visible_changed=function(){this.ready_&&(this.markerWrapper_.style.display=this.getVisible()?"":"none",this.draw())},RichMarker.prototype.visible_changed=RichMarker.prototype.visible_changed,RichMarker.prototype.setFlat=function(flat){this.set("flat",!!flat)},RichMarker.prototype.setFlat=RichMarker.prototype.setFlat,RichMarker.prototype.getFlat=function(){return this.get("flat")},RichMarker.prototype.getFlat=RichMarker.prototype.getFlat,RichMarker.prototype.getWidth=function(){return this.get("width")},RichMarker.prototype.getWidth=RichMarker.prototype.getWidth,RichMarker.prototype.getHeight=function(){return this.get("height")},RichMarker.prototype.getHeight=RichMarker.prototype.getHeight,RichMarker.prototype.setShadow=function(shadow){this.set("shadow",shadow),this.flat_changed()},RichMarker.prototype.setShadow=RichMarker.prototype.setShadow,RichMarker.prototype.getShadow=function(){return this.get("shadow")},RichMarker.prototype.getShadow=RichMarker.prototype.getShadow,RichMarker.prototype.flat_changed=function(){this.ready_&&(this.markerWrapper_.style.boxShadow=this.markerWrapper_.style.webkitBoxShadow=this.markerWrapper_.style.MozBoxShadow=this.getFlat()?"":this.getShadow())},RichMarker.prototype.flat_changed=RichMarker.prototype.flat_changed,RichMarker.prototype.setZIndex=function(index){this.set("zIndex",index)},RichMarker.prototype.setZIndex=RichMarker.prototype.setZIndex,RichMarker.prototype.getZIndex=function(){return this.get("zIndex")},RichMarker.prototype.getZIndex=RichMarker.prototype.getZIndex,RichMarker.prototype.zIndex_changed=function(){this.getZIndex()&&this.ready_&&(this.markerWrapper_.style.zIndex=this.getZIndex())},RichMarker.prototype.zIndex_changed=RichMarker.prototype.zIndex_changed,RichMarker.prototype.getDraggable=function(){return this.get("draggable")},RichMarker.prototype.getDraggable=RichMarker.prototype.getDraggable,RichMarker.prototype.setDraggable=function(draggable){this.set("draggable",!!draggable)},RichMarker.prototype.setDraggable=RichMarker.prototype.setDraggable,RichMarker.prototype.draggable_changed=function(){this.ready_&&(this.getDraggable()?this.addDragging_(this.markerWrapper_):this.removeDragListeners_())},RichMarker.prototype.draggable_changed=RichMarker.prototype.draggable_changed,RichMarker.prototype.getPosition=function(){return this.get("position")},RichMarker.prototype.getPosition=RichMarker.prototype.getPosition,RichMarker.prototype.setPosition=function(position){this.set("position",position)},RichMarker.prototype.setPosition=RichMarker.prototype.setPosition,RichMarker.prototype.position_changed=function(){this.draw()},RichMarker.prototype.position_changed=RichMarker.prototype.position_changed,RichMarker.prototype.getAnchor=function(){return this.get("anchor")},RichMarker.prototype.getAnchor=RichMarker.prototype.getAnchor,RichMarker.prototype.setAnchor=function(anchor){this.set("anchor",anchor)},RichMarker.prototype.setAnchor=RichMarker.prototype.setAnchor,RichMarker.prototype.anchor_changed=function(){this.draw()},RichMarker.prototype.anchor_changed=RichMarker.prototype.anchor_changed,RichMarker.prototype.htmlToDocumentFragment_=function(htmlString){var tempDiv=document.createElement("DIV");if(tempDiv.innerHTML=htmlString,1==tempDiv.childNodes.length)return tempDiv.removeChild(tempDiv.firstChild);for(var fragment=document.createDocumentFragment();tempDiv.firstChild;)fragment.appendChild(tempDiv.firstChild);return fragment},RichMarker.prototype.removeChildren_=function(node){if(node)for(var child;child=node.firstChild;)node.removeChild(child)},RichMarker.prototype.setContent=function(content){this.set("content",content)},RichMarker.prototype.setContent=RichMarker.prototype.setContent,RichMarker.prototype.getContent=function(){return this.get("content")},RichMarker.prototype.getContent=RichMarker.prototype.getContent,RichMarker.prototype.content_changed=function(){if(this.markerContent_){this.removeChildren_(this.markerContent_);var content=this.getContent();if(content){"string"==typeof content&&(content=content.replace(/^\s*([\S\s]*)\b\s*$/,"$1"),content=this.htmlToDocumentFragment_(content)),this.markerContent_.appendChild(content);for(var image,that=this,images=this.markerContent_.getElementsByTagName("IMG"),i=0;image=images[i];i++)google.maps.event.addDomListener(image,"mousedown",function(e){that.getDraggable()&&(e.preventDefault&&e.preventDefault(),e.returnValue=!1)}),google.maps.event.addDomListener(image,"load",function(){that.draw()});google.maps.event.trigger(this,"domready")}this.ready_&&this.draw()}},RichMarker.prototype.content_changed=RichMarker.prototype.content_changed,RichMarker.prototype.setCursor_=function(whichCursor){if(this.ready_){var cursor="";-1!==navigator.userAgent.indexOf("Gecko/")?("dragging"==whichCursor&&(cursor="-moz-grabbing"),"dragready"==whichCursor&&(cursor="-moz-grab"),"draggable"==whichCursor&&(cursor="pointer")):(("dragging"==whichCursor||"dragready"==whichCursor)&&(cursor="move"),"draggable"==whichCursor&&(cursor="pointer")),this.markerWrapper_.style.cursor!=cursor&&(this.markerWrapper_.style.cursor=cursor)}},RichMarker.prototype.startDrag=function(e){if(this.getDraggable()&&!this.dragging_){this.dragging_=!0;var map=this.getMap();this.mapDraggable_=map.get("draggable"),map.set("draggable",!1),this.mouseX_=e.clientX,this.mouseY_=e.clientY,this.setCursor_("dragready"),this.markerWrapper_.style.MozUserSelect="none",this.markerWrapper_.style.KhtmlUserSelect="none",this.markerWrapper_.style.WebkitUserSelect="none",this.markerWrapper_.unselectable="on",this.markerWrapper_.onselectstart=function(){return!1},this.addDraggingListeners_(),google.maps.event.trigger(this,"dragstart")}},RichMarker.prototype.stopDrag=function(){this.getDraggable()&&this.dragging_&&(this.dragging_=!1,this.getMap().set("draggable",this.mapDraggable_),this.mouseX_=this.mouseY_=this.mapDraggable_=null,this.markerWrapper_.style.MozUserSelect="",this.markerWrapper_.style.KhtmlUserSelect="",this.markerWrapper_.style.WebkitUserSelect="",this.markerWrapper_.unselectable="off",this.markerWrapper_.onselectstart=function(){},this.removeDraggingListeners_(),this.setCursor_("draggable"),google.maps.event.trigger(this,"dragend"),this.draw())},RichMarker.prototype.drag=function(e){if(!this.getDraggable()||!this.dragging_)return void this.stopDrag();var dx=this.mouseX_-e.clientX,dy=this.mouseY_-e.clientY;this.mouseX_=e.clientX,this.mouseY_=e.clientY;var left=parseInt(this.markerWrapper_.style.left,10)-dx,top=parseInt(this.markerWrapper_.style.top,10)-dy;this.markerWrapper_.style.left=left+"px",this.markerWrapper_.style.top=top+"px";var offset=this.getOffset_(),point=new google.maps.Point(left-offset.width,top-offset.height),projection=this.getProjection();this.setPosition(projection.fromDivPixelToLatLng(point)),this.setCursor_("dragging"),google.maps.event.trigger(this,"drag")},RichMarker.prototype.removeDragListeners_=function(){this.draggableListener_&&(google.maps.event.removeListener(this.draggableListener_),delete this.draggableListener_),this.setCursor_("")},RichMarker.prototype.addDragging_=function(node){if(node){var that=this;this.draggableListener_=google.maps.event.addDomListener(node,"mousedown",function(e){that.startDrag(e)}),this.setCursor_("draggable")}},RichMarker.prototype.addDraggingListeners_=function(){var that=this;this.markerWrapper_.setCapture?(this.markerWrapper_.setCapture(!0),this.draggingListeners_=[google.maps.event.addDomListener(this.markerWrapper_,"mousemove",function(e){that.drag(e)},!0),google.maps.event.addDomListener(this.markerWrapper_,"mouseup",function(){that.stopDrag(),that.markerWrapper_.releaseCapture()},!0)]):this.draggingListeners_=[google.maps.event.addDomListener(window,"mousemove",function(e){that.drag(e)},!0),google.maps.event.addDomListener(window,"mouseup",function(){
that.stopDrag()},!0)]},RichMarker.prototype.removeDraggingListeners_=function(){if(this.draggingListeners_){for(var listener,i=0;listener=this.draggingListeners_[i];i++)google.maps.event.removeListener(listener);this.draggingListeners_.length=0}},RichMarker.prototype.getOffset_=function(){var anchor=this.getAnchor();if("object"==typeof anchor)return anchor;var offset=new google.maps.Size(0,0);if(!this.markerContent_)return offset;var width=this.markerContent_.offsetWidth,height=this.markerContent_.offsetHeight;switch(anchor){case RichMarkerPosition.TOP_LEFT:break;case RichMarkerPosition.TOP:offset.width=-width/2;break;case RichMarkerPosition.TOP_RIGHT:offset.width=-width;break;case RichMarkerPosition.LEFT:offset.height=-height/2;break;case RichMarkerPosition.MIDDLE:offset.width=-width/2,offset.height=-height/2;break;case RichMarkerPosition.RIGHT:offset.width=-width,offset.height=-height/2;break;case RichMarkerPosition.BOTTOM_LEFT:offset.height=-height;break;case RichMarkerPosition.BOTTOM:offset.width=-width/2,offset.height=-height;break;case RichMarkerPosition.BOTTOM_RIGHT:offset.width=-width,offset.height=-height}return offset},RichMarker.prototype.onAdd=function(){if(this.markerWrapper_||(this.markerWrapper_=document.createElement("DIV"),this.markerWrapper_.style.position="absolute"),this.getZIndex()&&(this.markerWrapper_.style.zIndex=this.getZIndex()),this.markerWrapper_.style.display=this.getVisible()?"":"none",!this.markerContent_){this.markerContent_=document.createElement("DIV"),this.markerWrapper_.appendChild(this.markerContent_);var that=this;google.maps.event.addDomListener(this.markerContent_,"click",function(e){google.maps.event.trigger(that,"click")}),google.maps.event.addDomListener(this.markerContent_,"mouseover",function(e){google.maps.event.trigger(that,"mouseover")}),google.maps.event.addDomListener(this.markerContent_,"mouseout",function(e){google.maps.event.trigger(that,"mouseout")})}this.ready_=!0,this.content_changed(),this.flat_changed(),this.draggable_changed();var panes=this.getPanes();panes&&panes.overlayMouseTarget.appendChild(this.markerWrapper_),google.maps.event.trigger(this,"ready")},RichMarker.prototype.onAdd=RichMarker.prototype.onAdd,RichMarker.prototype.draw=function(){if(this.ready_&&!this.dragging_){var projection=this.getProjection();if(projection){var latLng=this.get("position"),pos=projection.fromLatLngToDivPixel(latLng),offset=this.getOffset_();this.markerWrapper_.style.top=pos.y+offset.height+"px",this.markerWrapper_.style.left=pos.x+offset.width+"px";var height=this.markerContent_.offsetHeight,width=this.markerContent_.offsetWidth;width!=this.get("width")&&this.set("width",width),height!=this.get("height")&&this.set("height",height)}}},RichMarker.prototype.draw=RichMarker.prototype.draw,RichMarker.prototype.onRemove=function(){this.markerWrapper_&&this.markerWrapper_.parentNode&&this.markerWrapper_.parentNode.removeChild(this.markerWrapper_),this.removeDragListeners_()},RichMarker.prototype.onRemove=RichMarker.prototype.onRemove;var RichMarkerPosition={TOP_LEFT:1,TOP:2,TOP_RIGHT:3,LEFT:4,MIDDLE:5,RIGHT:6,BOTTOM_LEFT:7,BOTTOM:8,BOTTOM_RIGHT:9};window.RichMarkerPosition=RichMarkerPosition,window.InfoBox=InfoBox,window.Cluster=Cluster,window.ClusterIcon=ClusterIcon,window.MarkerClusterer=MarkerClusterer,window.MarkerLabel_=MarkerLabel_,window.MarkerWithLabel=MarkerWithLabel,window.RichMarker=RichMarker})}}),function(modules){function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:!1};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.loaded=!0,module.exports}var installedModules={};return __webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.p="",__webpack_require__(0)}([function(module,exports,__webpack_require__){angular.module("uiGmapgoogle-maps.wrapped").service("uiGmapDataStructures",function(){return{Graph:__webpack_require__(1).Graph,Queue:__webpack_require__(1).Queue}})},function(module,exports,__webpack_require__){(function(){module.exports={Graph:__webpack_require__(2),Heap:__webpack_require__(3),LinkedList:__webpack_require__(4),Map:__webpack_require__(5),Queue:__webpack_require__(6),RedBlackTree:__webpack_require__(7),Trie:__webpack_require__(8)}}).call(this)},function(module,exports){(function(){var Graph,__hasProp={}.hasOwnProperty;Graph=function(){function Graph(){this._nodes={},this.nodeSize=0,this.edgeSize=0}return Graph.prototype.addNode=function(id){return this._nodes[id]?void 0:(this.nodeSize++,this._nodes[id]={_outEdges:{},_inEdges:{}})},Graph.prototype.getNode=function(id){return this._nodes[id]},Graph.prototype.removeNode=function(id){var inEdgeId,nodeToRemove,outEdgeId,_ref,_ref1;if(nodeToRemove=this._nodes[id]){_ref=nodeToRemove._outEdges;for(outEdgeId in _ref)__hasProp.call(_ref,outEdgeId)&&this.removeEdge(id,outEdgeId);_ref1=nodeToRemove._inEdges;for(inEdgeId in _ref1)__hasProp.call(_ref1,inEdgeId)&&this.removeEdge(inEdgeId,id);return this.nodeSize--,delete this._nodes[id],nodeToRemove}},Graph.prototype.addEdge=function(fromId,toId,weight){var edgeToAdd,fromNode,toNode;return null==weight&&(weight=1),!this.getEdge(fromId,toId)&&(fromNode=this._nodes[fromId],toNode=this._nodes[toId],fromNode&&toNode)?(edgeToAdd={weight:weight},fromNode._outEdges[toId]=edgeToAdd,toNode._inEdges[fromId]=edgeToAdd,this.edgeSize++,edgeToAdd):void 0},Graph.prototype.getEdge=function(fromId,toId){var fromNode,toNode;return fromNode=this._nodes[fromId],toNode=this._nodes[toId],fromNode&&toNode?fromNode._outEdges[toId]:void 0},Graph.prototype.removeEdge=function(fromId,toId){var edgeToDelete,fromNode,toNode;return fromNode=this._nodes[fromId],toNode=this._nodes[toId],(edgeToDelete=this.getEdge(fromId,toId))?(delete fromNode._outEdges[toId],delete toNode._inEdges[fromId],this.edgeSize--,edgeToDelete):void 0},Graph.prototype.getInEdgesOf=function(nodeId){var fromId,inEdges,toNode,_ref;toNode=this._nodes[nodeId],inEdges=[],_ref=null!=toNode?toNode._inEdges:void 0;for(fromId in _ref)__hasProp.call(_ref,fromId)&&inEdges.push(this.getEdge(fromId,nodeId));return inEdges},Graph.prototype.getOutEdgesOf=function(nodeId){var fromNode,outEdges,toId,_ref;fromNode=this._nodes[nodeId],outEdges=[],_ref=null!=fromNode?fromNode._outEdges:void 0;for(toId in _ref)__hasProp.call(_ref,toId)&&outEdges.push(this.getEdge(nodeId,toId));return outEdges},Graph.prototype.getAllEdgesOf=function(nodeId){var i,inEdges,outEdges,selfEdge,_i,_ref,_ref1;if(inEdges=this.getInEdgesOf(nodeId),outEdges=this.getOutEdgesOf(nodeId),0===inEdges.length)return outEdges;for(selfEdge=this.getEdge(nodeId,nodeId),i=_i=0,_ref=inEdges.length;_ref>=0?_ref>_i:_i>_ref;i=_ref>=0?++_i:--_i)if(inEdges[i]===selfEdge){_ref1=[inEdges[inEdges.length-1],inEdges[i]],inEdges[i]=_ref1[0],inEdges[inEdges.length-1]=_ref1[1],inEdges.pop();break}return inEdges.concat(outEdges)},Graph.prototype.forEachNode=function(operation){var nodeId,nodeObject,_ref;_ref=this._nodes;for(nodeId in _ref)__hasProp.call(_ref,nodeId)&&(nodeObject=_ref[nodeId],operation(nodeObject,nodeId))},Graph.prototype.forEachEdge=function(operation){var edgeObject,nodeId,nodeObject,toId,_ref,_ref1;_ref=this._nodes;for(nodeId in _ref)if(__hasProp.call(_ref,nodeId)){nodeObject=_ref[nodeId],_ref1=nodeObject._outEdges;for(toId in _ref1)__hasProp.call(_ref1,toId)&&(edgeObject=_ref1[toId],operation(edgeObject))}},Graph}(),module.exports=Graph}).call(this)},function(module,exports){(function(){var Heap,_leftChild,_parent,_rightChild;Heap=function(){function Heap(dataToHeapify){var i,item,_i,_j,_len,_ref;for(null==dataToHeapify&&(dataToHeapify=[]),this._data=[void 0],_i=0,_len=dataToHeapify.length;_len>_i;_i++)item=dataToHeapify[_i],null!=item&&this._data.push(item);if(this._data.length>1)for(i=_j=2,_ref=this._data.length;_ref>=2?_ref>_j:_j>_ref;i=_ref>=2?++_j:--_j)this._upHeap(i);this.size=this._data.length-1}return Heap.prototype.add=function(value){return null!=value?(this._data.push(value),this._upHeap(this._data.length-1),this.size++,value):void 0},Heap.prototype.removeMin=function(){var min;if(1!==this._data.length)return this.size--,2===this._data.length?this._data.pop():(min=this._data[1],this._data[1]=this._data.pop(),this._downHeap(),min)},Heap.prototype.peekMin=function(){return this._data[1]},Heap.prototype._upHeap=function(index){var valueHolder,_ref;for(valueHolder=this._data[index];this._data[index]<this._data[_parent(index)]&&index>1;)_ref=[this._data[_parent(index)],this._data[index]],this._data[index]=_ref[0],this._data[_parent(index)]=_ref[1],index=_parent(index)},Heap.prototype._downHeap=function(){var currentIndex,smallerChildIndex,_ref;for(currentIndex=1;_leftChild(currentIndex<this._data.length)&&(smallerChildIndex=_leftChild(currentIndex),smallerChildIndex<this._data.length-1&&this._data[_rightChild(currentIndex)]<this._data[smallerChildIndex]&&(smallerChildIndex=_rightChild(currentIndex)),this._data[smallerChildIndex]<this._data[currentIndex]);)_ref=[this._data[currentIndex],this._data[smallerChildIndex]],this._data[smallerChildIndex]=_ref[0],this._data[currentIndex]=_ref[1],currentIndex=smallerChildIndex},Heap}(),_parent=function(index){return index>>1},_leftChild=function(index){return index<<1},_rightChild=function(index){return(index<<1)+1},module.exports=Heap}).call(this)},function(module,exports){(function(){var LinkedList;LinkedList=function(){function LinkedList(valuesToAdd){var value,_i,_len;for(null==valuesToAdd&&(valuesToAdd=[]),this.head={prev:void 0,value:void 0,next:void 0},this.tail={prev:void 0,value:void 0,next:void 0},this.size=0,_i=0,_len=valuesToAdd.length;_len>_i;_i++)value=valuesToAdd[_i],this.add(value)}return LinkedList.prototype.at=function(position){var currentNode,i,_i,_j,_ref;if(-this.size<=position&&position<this.size){if(position=this._adjust(position),2*position<this.size)for(currentNode=this.head,i=_i=1;position>=_i;i=_i+=1)currentNode=currentNode.next;else for(currentNode=this.tail,i=_j=1,_ref=this.size-position-1;_ref>=_j;i=_j+=1)currentNode=currentNode.prev;return currentNode}},LinkedList.prototype.add=function(value,position){var currentNode,nodeToAdd,_ref,_ref1,_ref2;return null==position&&(position=this.size),-this.size<=position&&position<=this.size?(nodeToAdd={value:value},position=this._adjust(position),0===this.size?this.head=nodeToAdd:0===position?(_ref=[nodeToAdd,this.head,nodeToAdd],this.head.prev=_ref[0],nodeToAdd.next=_ref[1],this.head=_ref[2]):(currentNode=this.at(position-1),_ref1=[currentNode.next,nodeToAdd,nodeToAdd,currentNode],nodeToAdd.next=_ref1[0],null!=(_ref2=currentNode.next)?_ref2.prev=_ref1[1]:void 0,currentNode.next=_ref1[2],nodeToAdd.prev=_ref1[3]),position===this.size&&(this.tail=nodeToAdd),this.size++,value):void 0},LinkedList.prototype.removeAt=function(position){var currentNode,valueToReturn,_ref;return null==position&&(position=this.size-1),-this.size<=position&&position<this.size&&0!==this.size?(position=this._adjust(position),1===this.size?(valueToReturn=this.head.value,this.head.value=this.tail.value=void 0):0===position?(valueToReturn=this.head.value,this.head=this.head.next,this.head.prev=void 0):(currentNode=this.at(position),valueToReturn=currentNode.value,currentNode.prev.next=currentNode.next,null!=(_ref=currentNode.next)&&(_ref.prev=currentNode.prev),position===this.size-1&&(this.tail=currentNode.prev)),this.size--,valueToReturn):void 0},LinkedList.prototype.remove=function(value){var currentNode;if(null!=value){for(currentNode=this.head;currentNode&&currentNode.value!==value;)currentNode=currentNode.next;if(currentNode)return 1===this.size?this.head.value=this.tail.value=void 0:currentNode===this.head?(this.head=this.head.next,this.head.prev=void 0):currentNode===this.tail?(this.tail=this.tail.prev,this.tail.next=void 0):(currentNode.prev.next=currentNode.next,currentNode.next.prev=currentNode.prev),this.size--,value}},LinkedList.prototype.indexOf=function(value,startingPosition){var currentNode,position;if(null==startingPosition&&(startingPosition=0),null==this.head.value&&!this.head.next||startingPosition>=this.size)return-1;for(startingPosition=Math.max(0,this._adjust(startingPosition)),currentNode=this.at(startingPosition),position=startingPosition;currentNode&&currentNode.value!==value;)currentNode=currentNode.next,position++;return position===this.size?-1:position},LinkedList.prototype._adjust=function(position){return 0>position?this.size+position:position},LinkedList}(),module.exports=LinkedList}).call(this)},function(module,exports){(function(){var Map,SPECIAL_TYPE_KEY_PREFIX,_extractDataType,_isSpecialType,__hasProp={}.hasOwnProperty;SPECIAL_TYPE_KEY_PREFIX="_mapId_",Map=function(){function Map(objectToMap){var key,value;this._content={},this._itemId=0,this._id=Map._newMapId(),this.size=0;for(key in objectToMap)__hasProp.call(objectToMap,key)&&(value=objectToMap[key],this.set(key,value))}return Map._mapIdTracker=0,Map._newMapId=function(){return this._mapIdTracker++},Map.prototype.hash=function(key,makeHash){var propertyForMap,type;return null==makeHash&&(makeHash=!1),type=_extractDataType(key),_isSpecialType(key)?(propertyForMap=SPECIAL_TYPE_KEY_PREFIX+this._id,makeHash&&!key[propertyForMap]&&(key[propertyForMap]=this._itemId++),propertyForMap+"_"+key[propertyForMap]):type+"_"+key},Map.prototype.set=function(key,value){return this.has(key)||this.size++,this._content[this.hash(key,!0)]=[value,key],value},Map.prototype.get=function(key){var _ref;return null!=(_ref=this._content[this.hash(key)])?_ref[0]:void 0},Map.prototype.has=function(key){return this.hash(key)in this._content},Map.prototype["delete"]=function(key){var hashedKey;return hashedKey=this.hash(key),hashedKey in this._content?(delete this._content[hashedKey],_isSpecialType(key)&&delete key[SPECIAL_TYPE_KEY_PREFIX+this._id],this.size--,!0):!1},Map.prototype.forEach=function(operation){var key,value,_ref;_ref=this._content;for(key in _ref)__hasProp.call(_ref,key)&&(value=_ref[key],operation(value[1],value[0]))},Map}(),_isSpecialType=function(key){var simpleHashableTypes,simpleType,type,_i,_len;for(simpleHashableTypes=["Boolean","Number","String","Undefined","Null","RegExp","Function"],type=_extractDataType(key),_i=0,_len=simpleHashableTypes.length;_len>_i;_i++)if(simpleType=simpleHashableTypes[_i],type===simpleType)return!1;return!0},_extractDataType=function(type){return Object.prototype.toString.apply(type).match(/\[object (.+)\]/)[1]},module.exports=Map}).call(this)},function(module,exports){(function(){var Queue;Queue=function(){function Queue(initialArray){null==initialArray&&(initialArray=[]),this._content=initialArray,this._dequeueIndex=0,this.size=this._content.length}return Queue.prototype.enqueue=function(item){return this.size++,this._content.push(item),item},Queue.prototype.dequeue=function(){var itemToDequeue;if(0!==this.size)return this.size--,itemToDequeue=this._content[this._dequeueIndex],this._dequeueIndex++,2*this._dequeueIndex>this._content.length&&(this._content=this._content.slice(this._dequeueIndex),this._dequeueIndex=0),itemToDequeue},Queue.prototype.peek=function(){return this._content[this._dequeueIndex]},Queue}(),module.exports=Queue}).call(this)},function(module,exports){(function(){var BLACK,NODE_FOUND,NODE_TOO_BIG,NODE_TOO_SMALL,RED,RedBlackTree,STOP_SEARCHING,_findNode,_grandParentOf,_isLeft,_leftOrRight,_peekMaxNode,_peekMinNode,_siblingOf,_uncleOf;NODE_FOUND=0,NODE_TOO_BIG=1,NODE_TOO_SMALL=2,STOP_SEARCHING=3,RED=1,BLACK=2,RedBlackTree=function(){function RedBlackTree(valuesToAdd){var value,_i,_len;for(null==valuesToAdd&&(valuesToAdd=[]),this._root,this.size=0,_i=0,_len=valuesToAdd.length;_len>_i;_i++)value=valuesToAdd[_i],null!=value&&this.add(value)}return RedBlackTree.prototype.add=function(value){var currentNode,foundNode,nodeToInsert,_ref;if(null!=value){if(this.size++,nodeToInsert={value:value,_color:RED},this._root){if(foundNode=_findNode(this._root,function(node){return value===node.value?NODE_FOUND:value<node.value?node._left?NODE_TOO_BIG:(nodeToInsert._parent=node,node._left=nodeToInsert,STOP_SEARCHING):node._right?NODE_TOO_SMALL:(nodeToInsert._parent=node,node._right=nodeToInsert,STOP_SEARCHING)}),null!=foundNode)return}else this._root=nodeToInsert;for(currentNode=nodeToInsert;;){if(currentNode===this._root){currentNode._color=BLACK;break}if(currentNode._parent._color===BLACK)break;{if((null!=(_ref=_uncleOf(currentNode))?_ref._color:void 0)!==RED){!_isLeft(currentNode)&&_isLeft(currentNode._parent)?(this._rotateLeft(currentNode._parent),currentNode=currentNode._left):_isLeft(currentNode)&&!_isLeft(currentNode._parent)&&(this._rotateRight(currentNode._parent),currentNode=currentNode._right),currentNode._parent._color=BLACK,_grandParentOf(currentNode)._color=RED,_isLeft(currentNode)?this._rotateRight(_grandParentOf(currentNode)):this._rotateLeft(_grandParentOf(currentNode));break}currentNode._parent._color=BLACK,_uncleOf(currentNode)._color=BLACK,_grandParentOf(currentNode)._color=RED,currentNode=_grandParentOf(currentNode)}}return value}},RedBlackTree.prototype.has=function(value){var foundNode;return foundNode=_findNode(this._root,function(node){return value===node.value?NODE_FOUND:value<node.value?NODE_TOO_BIG:NODE_TOO_SMALL}),foundNode?!0:!1},RedBlackTree.prototype.peekMin=function(){var _ref;return null!=(_ref=_peekMinNode(this._root))?_ref.value:void 0},RedBlackTree.prototype.peekMax=function(){var _ref;return null!=(_ref=_peekMaxNode(this._root))?_ref.value:void 0},RedBlackTree.prototype.remove=function(value){var foundNode;return(foundNode=_findNode(this._root,function(node){return value===node.value?NODE_FOUND:value<node.value?NODE_TOO_BIG:NODE_TOO_SMALL}))?(this._removeNode(this._root,foundNode),this.size--,value):void 0},RedBlackTree.prototype.removeMin=function(){var nodeToRemove,valueToReturn;return(nodeToRemove=_peekMinNode(this._root))?(valueToReturn=nodeToRemove.value,this._removeNode(this._root,nodeToRemove),valueToReturn):void 0},RedBlackTree.prototype.removeMax=function(){var nodeToRemove,valueToReturn;return(nodeToRemove=_peekMaxNode(this._root))?(valueToReturn=nodeToRemove.value,this._removeNode(this._root,nodeToRemove),valueToReturn):void 0},RedBlackTree.prototype._removeNode=function(root,node){var sibling,successor,_ref,_ref1,_ref2,_ref3,_ref4,_ref5,_ref6,_ref7;if(node._left&&node._right&&(successor=_peekMinNode(node._right),node.value=successor.value,node=successor),successor=node._left||node._right,successor||(successor={color:BLACK,_right:void 0,_left:void 0,isLeaf:!0}),successor._parent=node._parent,null!=(_ref=node._parent)&&(_ref[_leftOrRight(node)]=successor),node._color===BLACK)if(successor._color===RED)successor._color=BLACK,successor._parent||(this._root=successor);else for(;;){if(!successor._parent){successor.isLeaf?this._root=void 0:this._root=successor;break}if(sibling=_siblingOf(successor),(null!=sibling?sibling._color:void 0)===RED&&(successor._parent._color=RED,sibling._color=BLACK,_isLeft(successor)?this._rotateLeft(successor._parent):this._rotateRight(successor._parent)),sibling=_siblingOf(successor),successor._parent._color!==BLACK||sibling&&(sibling._color!==BLACK||sibling._left&&sibling._left._color!==BLACK||sibling._right&&sibling._right._color!==BLACK)){if(!(successor._parent._color!==RED||sibling&&(sibling._color!==BLACK||sibling._left&&(null!=(_ref1=sibling._left)?_ref1._color:void 0)!==BLACK||sibling._right&&(null!=(_ref2=sibling._right)?_ref2._color:void 0)!==BLACK))){null!=sibling&&(sibling._color=RED),successor._parent._color=BLACK;break}if((null!=sibling?sibling._color:void 0)===BLACK){!_isLeft(successor)||sibling._right&&sibling._right._color!==BLACK||(null!=(_ref3=sibling._left)?_ref3._color:void 0)!==RED?_isLeft(successor)||sibling._left&&sibling._left._color!==BLACK||(null!=(_ref5=sibling._right)?_ref5._color:void 0)!==RED||(sibling._color=RED,null!=(_ref6=sibling._right)&&(_ref6._color=BLACK),this._rotateLeft(sibling)):(sibling._color=RED,null!=(_ref4=sibling._left)&&(_ref4._color=BLACK),this._rotateRight(sibling));break}sibling=_siblingOf(successor),sibling._color=successor._parent._color,_isLeft(successor)?(sibling._right._color=BLACK,this._rotateRight(successor._parent)):(sibling._left._color=BLACK,this._rotateLeft(successor._parent))}else null!=sibling&&(sibling._color=RED),successor.isLeaf&&(successor._parent[_leftOrRight(successor)]=void 0),successor=successor._parent}return successor.isLeaf&&null!=(_ref7=successor._parent)?_ref7[_leftOrRight(successor)]=void 0:void 0},RedBlackTree.prototype._rotateLeft=function(node){var _ref,_ref1;return null!=(_ref=node._parent)&&(_ref[_leftOrRight(node)]=node._right),node._right._parent=node._parent,node._parent=node._right,node._right=node._right._left,node._parent._left=node,null!=(_ref1=node._right)&&(_ref1._parent=node),null==node._parent._parent?this._root=node._parent:void 0},RedBlackTree.prototype._rotateRight=function(node){var _ref,_ref1;return null!=(_ref=node._parent)&&(_ref[_leftOrRight(node)]=node._left),node._left._parent=node._parent,node._parent=node._left,node._left=node._left._right,node._parent._right=node,null!=(_ref1=node._left)&&(_ref1._parent=node),null==node._parent._parent?this._root=node._parent:void 0},RedBlackTree}(),_isLeft=function(node){return node===node._parent._left},_leftOrRight=function(node){return _isLeft(node)?"_left":"_right"},_findNode=function(startingNode,comparator){var comparisonResult,currentNode,foundNode;for(currentNode=startingNode,foundNode=void 0;currentNode;){if(comparisonResult=comparator(currentNode),comparisonResult===NODE_FOUND){foundNode=currentNode;break}if(comparisonResult===NODE_TOO_BIG)currentNode=currentNode._left;else if(comparisonResult===NODE_TOO_SMALL)currentNode=currentNode._right;else if(comparisonResult===STOP_SEARCHING)break}return foundNode},_peekMinNode=function(startingNode){return _findNode(startingNode,function(node){return node._left?NODE_TOO_BIG:NODE_FOUND})},_peekMaxNode=function(startingNode){return _findNode(startingNode,function(node){return node._right?NODE_TOO_SMALL:NODE_FOUND})},_grandParentOf=function(node){var _ref;return null!=(_ref=node._parent)?_ref._parent:void 0},_uncleOf=function(node){return _grandParentOf(node)?_isLeft(node._parent)?_grandParentOf(node)._right:_grandParentOf(node)._left:void 0},_siblingOf=function(node){return _isLeft(node)?node._parent._right:node._parent._left},module.exports=RedBlackTree}).call(this)},function(module,exports,__webpack_require__){(function(){var Queue,Trie,WORD_END,_hasAtLeastNChildren,__hasProp={}.hasOwnProperty;Queue=__webpack_require__(6),WORD_END="end",Trie=function(){function Trie(words){var word,_i,_len;for(null==words&&(words=[]),this._root={},this.size=0,_i=0,_len=words.length;_len>_i;_i++)word=words[_i],this.add(word)}return Trie.prototype.add=function(word){var currentNode,letter,_i,_len;if(null!=word){for(this.size++,currentNode=this._root,_i=0,_len=word.length;_len>_i;_i++)letter=word[_i],null==currentNode[letter]&&(currentNode[letter]={}),currentNode=currentNode[letter];return currentNode[WORD_END]=!0,word}},Trie.prototype.has=function(word){var currentNode,letter,_i,_len;if(null==word)return!1;for(currentNode=this._root,_i=0,_len=word.length;_len>_i;_i++){if(letter=word[_i],null==currentNode[letter])return!1;currentNode=currentNode[letter]}return currentNode[WORD_END]?!0:!1},Trie.prototype.longestPrefixOf=function(word){var currentNode,letter,prefix,_i,_len;if(null==word)return"";for(currentNode=this._root,prefix="",_i=0,_len=word.length;_len>_i&&(letter=word[_i],null!=currentNode[letter]);_i++)prefix+=letter,currentNode=currentNode[letter];return prefix},Trie.prototype.wordsWithPrefix=function(prefix){var accumulatedLetters,currentNode,letter,node,queue,subNode,words,_i,_len,_ref;if(null==prefix)return[];for(null!=prefix||(prefix=""),words=[],currentNode=this._root,_i=0,_len=prefix.length;_len>_i;_i++)if(letter=prefix[_i],currentNode=currentNode[letter],null==currentNode)return[];for(queue=new Queue,queue.enqueue([currentNode,""]);0!==queue.size;){_ref=queue.dequeue(),node=_ref[0],accumulatedLetters=_ref[1],node[WORD_END]&&words.push(prefix+accumulatedLetters);for(letter in node)__hasProp.call(node,letter)&&(subNode=node[letter],queue.enqueue([subNode,accumulatedLetters+letter]))}return words},Trie.prototype.remove=function(word){var currentNode,i,letter,prefix,_i,_j,_len,_ref;if(null!=word){for(currentNode=this._root,prefix=[],_i=0,_len=word.length;_len>_i;_i++){if(letter=word[_i],null==currentNode[letter])return;currentNode=currentNode[letter],prefix.push([letter,currentNode])}if(currentNode[WORD_END]){if(this.size--,delete currentNode[WORD_END],_hasAtLeastNChildren(currentNode,1))return word;for(i=_j=_ref=prefix.length-1;(1>=_ref?1>=_j:_j>=1)&&!_hasAtLeastNChildren(prefix[i][1],1);i=1>=_ref?++_j:--_j)delete prefix[i-1][1][prefix[i][0]];return _hasAtLeastNChildren(this._root[prefix[0][0]],1)||delete this._root[prefix[0][0]],word}}},Trie}(),_hasAtLeastNChildren=function(node,n){var child,childCount;if(0===n)return!0;childCount=0;for(child in node)if(__hasProp.call(node,child)&&(childCount++,childCount>=n))return!0;return!1},module.exports=Trie}).call(this)}]),angular.module("uiGmapgoogle-maps.extensions").service("uiGmapExtendMarkerClusterer",["uiGmapLodash","uiGmapPropMap",function(uiGmapLodash,PropMap){return{init:_.once(function(){(function(){var __hasProp={}.hasOwnProperty,__extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child};window.NgMapCluster=function(_super){function NgMapCluster(opts){NgMapCluster.__super__.constructor.call(this,opts),this.markers_=new PropMap}return __extends(NgMapCluster,_super),NgMapCluster.prototype.addMarker=function(marker){var mCount,mz;if(this.isMarkerAlreadyAdded_(marker)){var oldMarker=this.markers_.get(marker.key);if(oldMarker.getPosition().lat()==marker.getPosition().lat()&&oldMarker.getPosition().lon()==marker.getPosition().lon())return!1}if(this.center_){if(this.averageCenter_){var l=this.markers_.length+1,lat=(this.center_.lat()*(l-1)+marker.getPosition().lat())/l,lng=(this.center_.lng()*(l-1)+marker.getPosition().lng())/l;this.center_=new google.maps.LatLng(lat,lng),this.calculateBounds_()}}else this.center_=marker.getPosition(),this.calculateBounds_();return marker.isAdded=!0,this.markers_.push(marker),mCount=this.markers_.length,mz=this.markerClusterer_.getMaxZoom(),null!==mz&&this.map_.getZoom()>mz?marker.getMap()!==this.map_&&marker.setMap(this.map_):mCount<this.minClusterSize_?marker.getMap()!==this.map_&&marker.setMap(this.map_):mCount===this.minClusterSize_?this.markers_.each(function(m){m.setMap(null)}):marker.setMap(null),!0},NgMapCluster.prototype.isMarkerAlreadyAdded_=function(marker){return uiGmapLodash.isNullOrUndefined(this.markers_.get(marker.key))},NgMapCluster.prototype.getBounds=function(){var bounds=new google.maps.LatLngBounds(this.center_,this.center_);return this.getMarkers().each(function(m){bounds.extend(m.getPosition())}),bounds},NgMapCluster.prototype.remove=function(){this.clusterIcon_.setMap(null),this.markers_=new PropMap,delete this.markers_},NgMapCluster}(Cluster),window.NgMapMarkerClusterer=function(_super){function NgMapMarkerClusterer(map,opt_markers,opt_options){NgMapMarkerClusterer.__super__.constructor.call(this,map,opt_markers,opt_options),this.markers_=new PropMap}return __extends(NgMapMarkerClusterer,_super),NgMapMarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(!0),this.markers_=new PropMap},NgMapMarkerClusterer.prototype.removeMarker_=function(marker){return this.markers_.get(marker.key)?(marker.setMap(null),this.markers_.remove(marker.key),!0):!1},NgMapMarkerClusterer.prototype.createClusters_=function(iFirst){var i,marker,mapBounds,cMarkerClusterer=this;if(this.ready_){0===iFirst&&(google.maps.event.trigger(this,"clusteringbegin",this),"undefined"!=typeof this.timerRefStatic&&(clearTimeout(this.timerRefStatic),delete this.timerRefStatic)),mapBounds=this.getMap().getZoom()>3?new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast()):new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625));var bounds=this.getExtendedBounds(mapBounds),iLast=Math.min(iFirst+this.batchSize_,this.markers_.length),_ms=this.markers_.values();for(i=iFirst;iLast>i;i++)marker=_ms[i],!marker.isAdded&&this.isMarkerInBounds_(marker,bounds)&&(!this.ignoreHidden_||this.ignoreHidden_&&marker.getVisible())&&this.addToClosestCluster_(marker);if(iLast<this.markers_.length)this.timerRefStatic=setTimeout(function(){cMarkerClusterer.createClusters_(iLast)},0);else{for(i=0;i<this.clusters_.length;i++)this.clusters_[i].updateIcon_();delete this.timerRefStatic,google.maps.event.trigger(this,"clusteringend",this)}}},NgMapMarkerClusterer.prototype.addToClosestCluster_=function(marker){var i,d,cluster,center,distance=4e4,clusterToAddTo=null;for(i=0;i<this.clusters_.length;i++)cluster=this.clusters_[i],center=cluster.getCenter(),center&&(d=this.distanceBetweenPoints_(center,marker.getPosition()),distance>d&&(distance=d,clusterToAddTo=cluster));clusterToAddTo&&clusterToAddTo.isMarkerInClusterBounds(marker)?clusterToAddTo.addMarker(marker):(cluster=new NgMapCluster(this),cluster.addMarker(marker),this.clusters_.push(cluster))},NgMapMarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)},NgMapMarkerClusterer.prototype.resetViewport_=function(opt_hide){var i;for(i=0;i<this.clusters_.length;i++)this.clusters_[i].remove();this.clusters_=[],this.markers_.each(function(marker){marker.isAdded=!1,opt_hide&&marker.setMap(null)})},NgMapMarkerClusterer.prototype.extend=function(obj1,obj2){return function(object){var property;for(property in object.prototype)"constructor"!==property&&(this.prototype[property]=object.prototype[property]);return this}.apply(obj1,[obj2])},ClusterIcon.prototype.show=function(){if(this.div_){var img="",bp=this.backgroundPosition_.split(" "),spriteH=parseInt(bp[0].trim(),10),spriteV=parseInt(bp[1].trim(),10),pos=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(pos),img="<img src='"+this.url_+"' style='position: absolute; top: "+spriteV+"px; left: "+spriteH+"px; ",img+=this.cluster_.getMarkerClusterer().enableRetinaIcons_?"width: "+this.width_+"px;height: "+this.height_+"px;":"clip: rect("+-1*spriteV+"px, "+(-1*spriteH+this.width_)+"px, "+(-1*spriteV+this.height_)+"px, "+-1*spriteH+"px);",img+="'>",this.div_.innerHTML=img+"<div style='position: absolute;top: "+this.anchorText_[0]+"px;left: "+this.anchorText_[1]+"px;color: "+this.textColor_+";font-size: "+this.textSize_+"px;font-family: "+this.fontFamily_+";font-weight: "+this.fontWeight_+";font-style: "+this.fontStyle_+";text-decoration: "+this.textDecoration_+";text-align: center;width: "+this.width_+"px;line-height:"+this.height_+"px;'>"+this.sums_.text+"</div>","undefined"==typeof this.sums_.title||""===this.sums_.title?this.div_.title=this.cluster_.getMarkerClusterer().getTitle():this.div_.title=this.sums_.title,this.div_.style.display=""}this.visible_=!0},NgMapMarkerClusterer}(MarkerClusterer)}).call(this)})}}])}(window,angular),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-popup.html","template/tooltip/tooltip-popup.html","template/tooltip/tooltip-template-popup.html","template/popover/popover-html.html","template/popover/popover-template.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),
angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$injector",function($animate,$injector){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){function expand(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animateCss?$animateCss(element,{addClass:"in",easing:"ease",to:{height:element[0].scrollHeight+"px"}}).start()["finally"](expandDone):$animate.addClass(element,"in",{to:{height:element[0].scrollHeight+"px"}}).then(expandDone)}function expandDone(){element.removeClass("collapsing").addClass("collapse").css({height:"auto"})}function collapse(){return element.hasClass("collapse")||element.hasClass("in")?(element.css({height:element[0].scrollHeight+"px"}).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void($animateCss?$animateCss(element,{removeClass:"in",to:{height:"0"}}).start()["finally"](collapseDone):$animate.removeClass(element,"in",{to:{height:"0"}}).then(collapseDone))):collapseDone()}function collapseDone(){element.css({height:"0"}),element.removeClass("collapsing").addClass("collapse")}scope.$watch(attrs.uibCollapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.collapse").value("$collapseSuppressWarning",!1).directive("collapse",["$animate","$injector","$log","$collapseSuppressWarning",function($animate,$injector,$log,$collapseSuppressWarning){var $animateCss=$injector.has("$animateCss")?$injector.get("$animateCss"):null;return{link:function(scope,element,attrs){function expand(){element.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),$animateCss?$animateCss(element,{easing:"ease",to:{height:element[0].scrollHeight+"px"}}).start().done(expandDone):$animate.animate(element,{},{height:element[0].scrollHeight+"px"}).then(expandDone)}function expandDone(){element.removeClass("collapsing").addClass("collapse in").css({height:"auto"})}function collapse(){return element.hasClass("collapse")||element.hasClass("in")?(element.css({height:element[0].scrollHeight+"px"}).removeClass("collapse in").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),void($animateCss?$animateCss(element,{to:{height:"0"}}).start().done(collapseDone):$animate.animate(element,{},{height:"0"}).then(collapseDone))):collapseDone()}function collapseDone(){element.css({height:"0"}),element.removeClass("collapsing").addClass("collapse")}$collapseSuppressWarning||$log.warn("collapse is now deprecated. Use uib-collapse instead."),scope.$watch(attrs.collapse,function(shouldCollapse){shouldCollapse?collapse():expand()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function($scope,$attrs,accordionConfig){this.groups=[],this.closeOthers=function(openGroup){var closeOthers=angular.isDefined($attrs.closeOthers)?$scope.$eval($attrs.closeOthers):accordionConfig.closeOthers;closeOthers&&angular.forEach(this.groups,function(group){group!==openGroup&&(group.isOpen=!1)})},this.addGroup=function(groupScope){var that=this;this.groups.push(groupScope),groupScope.$on("$destroy",function(event){that.removeGroup(groupScope)})},this.removeGroup=function(group){var index=this.groups.indexOf(group);-1!==index&&this.groups.splice(index,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){accordionCtrl.addGroup(scope),scope.openClass=attrs.openClass||"panel-open",scope.panelClass=attrs.panelClass,scope.$watch("isOpen",function(value){element.toggleClass(scope.openClass,!!value),value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function($event){scope.isDisabled||$event&&32!==$event.which||(scope.isOpen=!scope.isOpen)}}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(scope,element,attrs,accordionGroupCtrl,transclude){accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:["?^uibAccordionGroup","?^accordionGroup"],link:function(scope,element,attrs,controller){controller=controller[0]?controller[0]:controller[1],scope.$watch(function(){return controller[attrs.uibAccordionTransclude]},function(heading){heading&&(element.find("span").html(""),element.find("span").append(heading))})}}}),angular.module("ui.bootstrap.accordion").value("$accordionSuppressWarning",!1).controller("AccordionController",["$scope","$attrs","$controller","$log","$accordionSuppressWarning",function($scope,$attrs,$controller,$log,$accordionSuppressWarning){$accordionSuppressWarning||$log.warn("AccordionController is now deprecated. Use UibAccordionController instead."),angular.extend(this,$controller("UibAccordionController",{$scope:$scope,$attrs:$attrs}))}]).directive("accordion",["$log","$accordionSuppressWarning",function($log,$accordionSuppressWarning){return{restrict:"EA",controller:"AccordionController",controllerAs:"accordion",transclude:!0,replace:!1,templateUrl:function(element,attrs){return attrs.templateUrl||"template/accordion/accordion.html"},link:function(){$accordionSuppressWarning||$log.warn("accordion is now deprecated. Use uib-accordion instead.")}}}]).directive("accordionGroup",["$log","$accordionSuppressWarning",function($log,$accordionSuppressWarning){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/accordion/accordion-group.html"},scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(element){this.heading=element}},link:function(scope,element,attrs,accordionCtrl){$accordionSuppressWarning||$log.warn("accordion-group is now deprecated. Use uib-accordion-group instead."),accordionCtrl.addGroup(scope),scope.openClass=attrs.openClass||"panel-open",scope.panelClass=attrs.panelClass,scope.$watch("isOpen",function(value){element.toggleClass(scope.openClass,!!value),value&&accordionCtrl.closeOthers(scope)}),scope.toggleOpen=function($event){scope.isDisabled||$event&&32!==$event.which||(scope.isOpen=!scope.isOpen)}}}}]).directive("accordionHeading",["$log","$accordionSuppressWarning",function($log,$accordionSuppressWarning){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(scope,element,attr,accordionGroupCtrl,transclude){$accordionSuppressWarning||$log.warn("accordion-heading is now deprecated. Use uib-accordion-heading instead."),accordionGroupCtrl.setHeading(transclude(scope,angular.noop))}}}]).directive("accordionTransclude",["$log","$accordionSuppressWarning",function($log,$accordionSuppressWarning){return{require:"^accordionGroup",link:function(scope,element,attr,controller){$accordionSuppressWarning||$log.warn("accordion-transclude is now deprecated. Use uib-accordion-transclude instead."),scope.$watch(function(){return controller[attr.accordionTransclude]},function(heading){heading&&(element.find("span").html(""),element.find("span").append(heading))})}}}]),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$attrs","$interpolate","$timeout",function($scope,$attrs,$interpolate,$timeout){$scope.closeable=!!$attrs.close;var dismissOnTimeout=angular.isDefined($attrs.dismissOnTimeout)?$interpolate($attrs.dismissOnTimeout)($scope.$parent):null;dismissOnTimeout&&$timeout(function(){$scope.close()},parseInt(dismissOnTimeout,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",templateUrl:function(element,attrs){return attrs.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}),angular.module("ui.bootstrap.alert").value("$alertSuppressWarning",!1).controller("AlertController",["$scope","$attrs","$controller","$log","$alertSuppressWarning",function($scope,$attrs,$controller,$log,$alertSuppressWarning){$alertSuppressWarning||$log.warn("AlertController is now deprecated. Use UibAlertController instead."),angular.extend(this,$controller("UibAlertController",{$scope:$scope,$attrs:$attrs}))}]).directive("alert",["$log","$alertSuppressWarning",function($log,$alertSuppressWarning){return{controller:"AlertController",controllerAs:"alert",templateUrl:function(element,attrs){return attrs.templateUrl||"template/alert/alert.html"},transclude:!0,replace:!0,scope:{type:"@",close:"&"},link:function(){$alertSuppressWarning||$log.warn("alert is now deprecated. Use uib-alert instead.")}}}]),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(buttonConfig){this.activeClass=buttonConfig.activeClass||"active",this.toggleEvent=buttonConfig.toggleEvent||"click"}]).directive("uibBtnRadio",function(){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(scope,element,attrs,ctrls){var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.uibBtnRadio)))},element.on(buttonsCtrl.toggleEvent,function(){if(!attrs.disabled){var isActive=element.hasClass(buttonsCtrl.activeClass);(!isActive||angular.isDefined(attrs.uncheckable))&&scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.uibBtnRadio)),ngModelCtrl.$render()})}})}}}).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attribute,defaultValue){return angular.isDefined(attribute)?scope.$eval(attribute):defaultValue}var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.on(buttonsCtrl.toggleEvent,function(){attrs.disabled||scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}),angular.module("ui.bootstrap.buttons").value("$buttonsSuppressWarning",!1).controller("ButtonsController",["$controller","$log","$buttonsSuppressWarning",function($controller,$log,$buttonsSuppressWarning){$buttonsSuppressWarning||$log.warn("ButtonsController is now deprecated. Use UibButtonsController instead."),angular.extend(this,$controller("UibButtonsController"))}]).directive("btnRadio",["$log","$buttonsSuppressWarning",function($log,$buttonsSuppressWarning){return{require:["btnRadio","ngModel"],controller:"ButtonsController",controllerAs:"buttons",link:function(scope,element,attrs,ctrls){$buttonsSuppressWarning||$log.warn("btn-radio is now deprecated. Use uib-btn-radio instead.");var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,scope.$eval(attrs.btnRadio)))},element.bind(buttonsCtrl.toggleEvent,function(){if(!attrs.disabled){var isActive=element.hasClass(buttonsCtrl.activeClass);(!isActive||angular.isDefined(attrs.uncheckable))&&scope.$apply(function(){ngModelCtrl.$setViewValue(isActive?null:scope.$eval(attrs.btnRadio)),ngModelCtrl.$render()})}})}}}]).directive("btnCheckbox",["$document","$log","$buttonsSuppressWarning",function($document,$log,$buttonsSuppressWarning){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",controllerAs:"button",link:function(scope,element,attrs,ctrls){function getTrueValue(){return getCheckboxValue(attrs.btnCheckboxTrue,!0)}function getFalseValue(){return getCheckboxValue(attrs.btnCheckboxFalse,!1)}function getCheckboxValue(attributeValue,defaultValue){var val=scope.$eval(attributeValue);return angular.isDefined(val)?val:defaultValue}$buttonsSuppressWarning||$log.warn("btn-checkbox is now deprecated. Use uib-btn-checkbox instead.");var buttonsCtrl=ctrls[0],ngModelCtrl=ctrls[1];element.find("input").css({display:"none"}),ngModelCtrl.$render=function(){element.toggleClass(buttonsCtrl.activeClass,angular.equals(ngModelCtrl.$modelValue,getTrueValue()))},element.bind(buttonsCtrl.toggleEvent,function(){attrs.disabled||scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})}),element.on("keypress",function(e){attrs.disabled||32!==e.which||$document[0].activeElement!==element[0]||scope.$apply(function(){ngModelCtrl.$setViewValue(element.hasClass(buttonsCtrl.activeClass)?getFalseValue():getTrueValue()),ngModelCtrl.$render()})})}}}]),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$animate",function($scope,$element,$interval,$animate){function goNext(slide,index,direction){destroyed||(angular.extend(slide,{direction:direction,active:!0}),angular.extend(self.currentSlide||{},{direction:direction,active:!1}),$animate.enabled()&&!$scope.noTransition&&!$scope.$currentTransition&&slide.$element&&self.slides.length>1&&(slide.$element.data(SLIDE_DIRECTION,slide.direction),self.currentSlide&&self.currentSlide.$element&&self.currentSlide.$element.data(SLIDE_DIRECTION,slide.direction),$scope.$currentTransition=!0,NEW_ANIMATE?$animate.on("addClass",slide.$element,function(element,phase){"close"===phase&&($scope.$currentTransition=null,$animate.off("addClass",element))}):slide.$element.one("$animate:close",function(){$scope.$currentTransition=null})),self.currentSlide=slide,currentIndex=index,restartTimer())}function getSlideByIndex(index){if(angular.isUndefined(slides[index].index))return slides[index];var i;slides.length;for(i=0;i<slides.length;++i)if(slides[i].index==index)return slides[i]}function restartTimer(){resetTimer();var interval=+$scope.interval;!isNaN(interval)&&interval>0&&(currentInterval=$interval(timerFn,interval))}function resetTimer(){currentInterval&&($interval.cancel(currentInterval),currentInterval=null)}function timerFn(){var interval=+$scope.interval;isPlaying&&!isNaN(interval)&&interval>0&&slides.length?$scope.next():$scope.pause()}function resetTransition(slides){slides.length||($scope.$currentTransition=null)}var currentInterval,isPlaying,self=this,slides=self.slides=$scope.slides=[],NEW_ANIMATE=angular.version.minor>=4,NO_TRANSITION="uib-noTransition",SLIDE_DIRECTION="uib-slideDirection",currentIndex=-1;self.currentSlide=null;var destroyed=!1;self.select=$scope.select=function(nextSlide,direction){var nextIndex=$scope.indexOfSlide(nextSlide);void 0===direction&&(direction=nextIndex>self.getCurrentIndex()?"next":"prev"),nextSlide&&nextSlide!==self.currentSlide&&!$scope.$currentTransition&&goNext(nextSlide,nextIndex,direction)},$scope.$on("$destroy",function(){destroyed=!0}),self.getCurrentIndex=function(){return self.currentSlide&&angular.isDefined(self.currentSlide.index)?+self.currentSlide.index:currentIndex},$scope.indexOfSlide=function(slide){return angular.isDefined(slide.index)?+slide.index:slides.indexOf(slide)},$scope.next=function(){var newIndex=(self.getCurrentIndex()+1)%slides.length;return 0===newIndex&&$scope.noWrap()?void $scope.pause():self.select(getSlideByIndex(newIndex),"next")},$scope.prev=function(){var newIndex=self.getCurrentIndex()-1<0?slides.length-1:self.getCurrentIndex()-1;return $scope.noWrap()&&newIndex===slides.length-1?void $scope.pause():self.select(getSlideByIndex(newIndex),"prev")},$scope.isActive=function(slide){return self.currentSlide===slide},$scope.$watch("interval",restartTimer),$scope.$watchCollection("slides",resetTransition),$scope.$on("$destroy",resetTimer),$scope.play=function(){isPlaying||(isPlaying=!0,restartTimer())},$scope.pause=function(){$scope.noPause||(isPlaying=!1,resetTimer())},self.addSlide=function(slide,element){slide.$element=element,slides.push(slide),1===slides.length||slide.active?(self.select(slides[slides.length-1]),1===slides.length&&$scope.play()):slide.active=!1},self.removeSlide=function(slide){angular.isDefined(slide.index)&&slides.sort(function(a,b){return+a.index>+b.index});var index=slides.indexOf(slide);slides.splice(index,1),slides.length>0&&slide.active?index>=slides.length?self.select(slides[index-1]):self.select(slides[index]):currentIndex>index&&currentIndex--,0===slides.length&&(self.currentSlide=null)},$scope.$watch("noTransition",function(noTransition){$element.data(NO_TRANSITION,noTransition)})}]).directive("uibCarousel",[function(){return{transclude:!0,replace:!0,controller:"UibCarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(element,attrs){return attrs.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}]).directive("uibSlide",function(){return{require:"^uibCarousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}).animation(".item",["$injector","$animate",function($injector,$animate){function removeClass(element,className,callback){element.removeClass(className),callback&&callback()}var NO_TRANSITION="uib-noTransition",SLIDE_DIRECTION="uib-slideDirection",$animateCss=null;return $injector.has("$animateCss")&&($animateCss=$injector.get("$animateCss")),{beforeAddClass:function(element,className,done){if("active"==className&&element.parent()&&element.parent().parent()&&!element.parent().parent().data(NO_TRANSITION)){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"==direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass+" "+direction,done);return element.addClass(direction),$animateCss?$animateCss(element,{addClass:directionClass}).start().done(removeClassFn):$animate.addClass(element,directionClass).then(function(){stopped||removeClassFn(),done()}),function(){stopped=!0}}done()},beforeRemoveClass:function(element,className,done){if("active"===className&&element.parent()&&element.parent().parent()&&!element.parent().parent().data(NO_TRANSITION)){var stopped=!1,direction=element.data(SLIDE_DIRECTION),directionClass="next"==direction?"left":"right",removeClassFn=removeClass.bind(this,element,directionClass,done);return $animateCss?$animateCss(element,{addClass:directionClass}).start().done(removeClassFn):$animate.addClass(element,directionClass).then(function(){stopped||removeClassFn(),done()}),function(){stopped=!0}}done()}}}]),angular.module("ui.bootstrap.carousel").value("$carouselSuppressWarning",!1).controller("CarouselController",["$scope","$element","$controller","$log","$carouselSuppressWarning",function($scope,$element,$controller,$log,$carouselSuppressWarning){$carouselSuppressWarning||$log.warn("CarouselController is now deprecated. Use UibCarouselController instead."),angular.extend(this,$controller("UibCarouselController",{$scope:$scope,$element:$element}))}]).directive("carousel",["$log","$carouselSuppressWarning",function($log,$carouselSuppressWarning){return{transclude:!0,replace:!0,controller:"CarouselController",controllerAs:"carousel",require:"carousel",templateUrl:function(element,attrs){return attrs.templateUrl||"template/carousel/carousel.html"},scope:{interval:"=",noTransition:"=",noPause:"=",noWrap:"&"},link:function(){$carouselSuppressWarning||$log.warn("carousel is now deprecated. Use uib-carousel instead.")}}}]).directive("slide",["$log","$carouselSuppressWarning",function($log,$carouselSuppressWarning){return{require:"^carousel",transclude:!0,replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/carousel/slide.html"},scope:{active:"=?",actual:"=?",index:"=?"},link:function(scope,element,attrs,carouselCtrl){$carouselSuppressWarning||$log.warn("slide is now deprecated. Use uib-slide instead."),carouselCtrl.addSlide(scope,element),scope.$on("$destroy",function(){carouselCtrl.removeSlide(scope)}),scope.$watch("active",function(active){active&&carouselCtrl.select(scope)})}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","orderByFilter",function($log,$locale,orderByFilter){function createParser(format){var map=[],regex=format.split("");return angular.forEach(formatCodeToRegex,function(data,code){var index=format.indexOf(code);if(index>-1){format=format.split(""),regex[index]="("+data.regex+")",format[index]="$";for(var i=index+1,n=index+code.length;n>i;i++)regex[i]="",format[i]="$";format=format.join(""),map.push({index:index,apply:data.apply})}}),{regex:new RegExp("^"+regex.join("")+"$"),map:orderByFilter(map,"index")}}function isValid(year,month,date){return 1>date?!1:1===month&&date>28?29===date&&(year%4===0&&year%100!==0||year%400===0):3===month||5===month||8===month||10===month?31>date:!0}var localeId,formatCodeToRegex,SPECIAL_CHARACTERS_REGEXP=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){localeId=$locale.id,this.parsers={},formatCodeToRegex={yyyy:{regex:"\\d{4}",apply:function(value){this.year=+value}},yy:{regex:"\\d{2}",apply:function(value){this.year=+value+2e3}},y:{regex:"\\d{1,4}",apply:function(value){this.year=+value}},MMMM:{regex:$locale.DATETIME_FORMATS.MONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.MONTH.indexOf(value)}},MMM:{regex:$locale.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(value){this.month=$locale.DATETIME_FORMATS.SHORTMONTH.indexOf(value)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(value){this.month=value-1}},M:{regex:"[1-9]|1[0-2]",apply:function(value){this.month=value-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(value){this.date=+value}},EEEE:{regex:$locale.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:$locale.DATETIME_FORMATS.SHORTDAY.join("|")},HH:{regex:"(?:0|1)[0-9]|2[0-3]",apply:function(value){this.hours=+value}},hh:{regex:"0[0-9]|1[0-2]",apply:function(value){this.hours=+value}},H:{regex:"1?[0-9]|2[0-3]",apply:function(value){this.hours=+value}},h:{regex:"[0-9]|1[0-2]",apply:function(value){this.hours=+value}},mm:{regex:"[0-5][0-9]",apply:function(value){this.minutes=+value}},m:{regex:"[0-9]|[1-5][0-9]",apply:function(value){this.minutes=+value}},sss:{regex:"[0-9][0-9][0-9]",apply:function(value){this.milliseconds=+value}},ss:{regex:"[0-5][0-9]",apply:function(value){this.seconds=+value}},s:{regex:"[0-9]|[1-5][0-9]",apply:function(value){this.seconds=+value}},a:{regex:$locale.DATETIME_FORMATS.AMPMS.join("|"),apply:function(value){12===this.hours&&(this.hours=0),"PM"===value&&(this.hours+=12)}}}},this.init(),this.parse=function(input,format,baseDate){if(!angular.isString(input)||!format)return input;format=$locale.DATETIME_FORMATS[format]||format,format=format.replace(SPECIAL_CHARACTERS_REGEXP,"\\$&"),$locale.id!==localeId&&this.init(),this.parsers[format]||(this.parsers[format]=createParser(format));var parser=this.parsers[format],regex=parser.regex,map=parser.map,results=input.match(regex);if(results&&results.length){var fields,dt;angular.isDate(baseDate)&&!isNaN(baseDate.getTime())?fields={year:baseDate.getFullYear(),month:baseDate.getMonth(),date:baseDate.getDate(),hours:baseDate.getHours(),minutes:baseDate.getMinutes(),seconds:baseDate.getSeconds(),milliseconds:baseDate.getMilliseconds()}:(baseDate&&$log.warn("dateparser:","baseDate is not a valid date"),fields={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var i=1,n=results.length;n>i;i++){var mapper=map[i-1];mapper.apply&&mapper.apply.call(fields,results[i])}return isValid(fields.year,fields.month,fields.date)&&(angular.isDate(baseDate)&&!isNaN(baseDate.getTime())?(dt=new Date(baseDate),dt.setFullYear(fields.year,fields.month,fields.date,fields.hours,fields.minutes,fields.seconds,fields.milliseconds||0)):dt=new Date(fields.year,fields.month,fields.date,fields.hours,fields.minutes,fields.seconds,fields.milliseconds||0)),dt}}}]),angular.module("ui.bootstrap.dateparser").value("$dateParserSuppressWarning",!1).service("dateParser",["$log","$dateParserSuppressWarning","uibDateParser",function($log,$dateParserSuppressWarning,uibDateParser){$dateParserSuppressWarning||$log.warn("dateParser is now deprecated. Use uibDateParser instead."),angular.extend(this,uibDateParser)}]),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function($document,$window){function getStyle(el,cssprop){return el.currentStyle?el.currentStyle[cssprop]:$window.getComputedStyle?$window.getComputedStyle(el)[cssprop]:el.style[cssprop]}function isStaticPositioned(element){return"static"===(getStyle(element,"position")||"static")}var parentOffsetEl=function(element){for(var docDomEl=$document[0],offsetParent=element.offsetParent||docDomEl;offsetParent&&offsetParent!==docDomEl&&isStaticPositioned(offsetParent);)offsetParent=offsetParent.offsetParent;return offsetParent||docDomEl};return{position:function(element){var elBCR=this.offset(element),offsetParentBCR={top:0,left:0},offsetParentEl=parentOffsetEl(element[0]);offsetParentEl!=$document[0]&&(offsetParentBCR=this.offset(angular.element(offsetParentEl)),offsetParentBCR.top+=offsetParentEl.clientTop-offsetParentEl.scrollTop,offsetParentBCR.left+=offsetParentEl.clientLeft-offsetParentEl.scrollLeft);var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:elBCR.top-offsetParentBCR.top,left:elBCR.left-offsetParentBCR.left}},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:boundingClientRect.width||element.prop("offsetWidth"),height:boundingClientRect.height||element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].documentElement.scrollLeft)}},positionElements:function(hostEl,targetEl,positionStr,appendToBody){var hostElPos,targetElWidth,targetElHeight,targetElPos,positionStrParts=positionStr.split("-"),pos0=positionStrParts[0],pos1=positionStrParts[1]||"center";hostElPos=appendToBody?this.offset(hostEl):this.position(hostEl),targetElWidth=targetEl.prop("offsetWidth"),targetElHeight=targetEl.prop("offsetHeight");var shiftWidth={center:function(){return hostElPos.left+hostElPos.width/2-targetElWidth/2},left:function(){return hostElPos.left},right:function(){return hostElPos.left+hostElPos.width}},shiftHeight={center:function(){return hostElPos.top+hostElPos.height/2-targetElHeight/2},top:function(){return hostElPos.top},bottom:function(){return hostElPos.top+hostElPos.height}};switch(pos0){case"right":targetElPos={top:shiftHeight[pos1](),left:shiftWidth[pos0]()};break;case"left":targetElPos={top:shiftHeight[pos1](),left:hostElPos.left-targetElWidth};break;case"bottom":targetElPos={top:shiftHeight[pos0](),left:shiftWidth[pos1]()};break;default:targetElPos={top:hostElPos.top-targetElHeight,left:shiftWidth[pos1]()}}return targetElPos}}}]),angular.module("ui.bootstrap.position").value("$positionSuppressWarning",!1).service("$position",["$log","$positionSuppressWarning","$uibPosition",function($log,$positionSuppressWarning,$uibPosition){$positionSuppressWarning||$log.warn("$position is now deprecated. Use $uibPosition instead."),angular.extend(this,$uibPosition)}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).value("$datepickerSuppressError",!1).constant("uibDatepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null,shortcutPropagation:!1}).controller("UibDatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError",function($scope,$attrs,$parse,$interpolate,$log,dateFilter,datepickerConfig,$datepickerSuppressError){var self=this,ngModelCtrl={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(key,index){self[key]=angular.isDefined($attrs[key])?6>index?$interpolate($attrs[key])($scope.$parent):$scope.$parent.$eval($attrs[key]):datepickerConfig[key]}),angular.forEach(["minDate","maxDate"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=value?new Date(value):null,self.refreshView()}):self[key]=datepickerConfig[key]?new Date(datepickerConfig[key]):null}),angular.forEach(["minMode","maxMode"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=angular.isDefined(value)?value:$attrs[key],$scope[key]=self[key],("minMode"==key&&self.modes.indexOf($scope.datepickerMode)<self.modes.indexOf(self[key])||"maxMode"==key&&self.modes.indexOf($scope.datepickerMode)>self.modes.indexOf(self[key]))&&($scope.datepickerMode=self[key])}):(self[key]=datepickerConfig[key]||null,$scope[key]=self[key])}),$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode,$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined($attrs.initDate)?(this.activeDate=$scope.$parent.$eval($attrs.initDate)||new Date,$scope.$parent.$watch($attrs.initDate,function(initDate){initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)&&(self.activeDate=initDate,self.refreshView())})):this.activeDate=new Date,$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)?($scope.activeDateId=dateObject.uid,!0):!1},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);isValid?this.activeDate=date:$datepickerSuppressError||$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;return{date:date,label:dateFilter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),
current:0===this.compare(date,new Date),customClass:this.customClass(date)}},this.isDisabled=function(date){return this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1]},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&-1===direction||($scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction])},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};$scope.$on("uib:datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey)if(evt.preventDefault(),self.shortcutPropagation||evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate)}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):$scope.toggleMode("up"===key?1:-1)}}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){function getDaysInMonth(year,month){return 1!==month||year%4!==0||year%100===0&&year%400!==0?DAYS_IN_MONTH[month]:29}function getISO8601WeekNumber(date){var checkDate=new Date(date);checkDate.setDate(checkDate.getDate()+4-(checkDate.getDay()||7));var time=checkDate.getTime();return checkDate.setMonth(0),checkDate.setDate(1),Math.floor(Math.round((time-checkDate)/864e5)/7)+1}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),scope.showWeeks=ctrl.showWeeks,ctrl.refreshView()},this.getDates=function(startDate,n){for(var date,dates=new Array(n),current=new Date(startDate),i=0;n>i;)date=new Date(current),dates[i++]=date,current.setDate(current.getDate()+1);return dates},this._refreshView=function(){var year=this.activeDate.getFullYear(),month=this.activeDate.getMonth(),firstDayOfMonth=new Date(this.activeDate);firstDayOfMonth.setFullYear(year,month,1);var difference=this.startingDay-firstDayOfMonth.getDay(),numDisplayedFromPreviousMonth=difference>0?7-difference:-difference,firstDate=new Date(firstDayOfMonth);numDisplayedFromPreviousMonth>0&&firstDate.setDate(-numDisplayedFromPreviousMonth+1);for(var days=this.getDates(firstDate,42),i=0;42>i;i++)days[i]=angular.extend(this.createDateObject(days[i],this.formatDay),{secondary:days[i].getMonth()!==month,uid:scope.uniqueId+"-"+i});scope.labels=new Array(7);for(var j=0;7>j;j++)scope.labels[j]={abbr:dateFilter(days[j].date,this.formatDayHeader),full:dateFilter(days[j].date,"EEEE")};if(scope.title=dateFilter(this.activeDate,this.formatDayTitle),scope.rows=this.split(days,7),scope.showWeeks){scope.weekNumbers=[];for(var thursdayIndex=(11-this.startingDay)%7,numWeeks=scope.rows.length,curWeek=0;numWeeks>curWeek;curWeek++)scope.weekNumbers.push(getISO8601WeekNumber(scope.rows[curWeek][thursdayIndex].date))}},this.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},this.handleKeyDown=function(key,evt){var date=this.activeDate.getDate();if("left"===key)date-=1;else if("up"===key)date-=7;else if("right"===key)date+=1;else if("down"===key)date+=7;else if("pageup"===key||"pagedown"===key){var month=this.activeDate.getMonth()+("pageup"===key?-1:1);this.activeDate.setMonth(month,1),date=Math.min(getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()),date)}else"home"===key?date=1:"end"===key&&(date=getDaysInMonth(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(date)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){this.step={years:1},this.element=$element,this.init=function(ctrl){angular.extend(ctrl,this),ctrl.refreshView()},this._refreshView=function(){for(var date,months=new Array(12),year=this.activeDate.getFullYear(),i=0;12>i;i++)date=new Date(this.activeDate),date.setFullYear(year,i,1),months[i]=angular.extend(this.createDateObject(date,this.formatMonth),{uid:scope.uniqueId+"-"+i});scope.title=dateFilter(this.activeDate,this.formatMonthTitle),scope.rows=this.split(months,3)},this.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth())-new Date(date2.getFullYear(),date2.getMonth())},this.handleKeyDown=function(key,evt){var date=this.activeDate.getMonth();if("left"===key)date-=1;else if("up"===key)date-=3;else if("right"===key)date+=1;else if("down"===key)date+=3;else if("pageup"===key||"pagedown"===key){var year=this.activeDate.getFullYear()+("pageup"===key?-1:1);this.activeDate.setFullYear(year)}else"home"===key?date=0:"end"===key&&(date=11);this.activeDate.setMonth(date)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(scope,$element,dateFilter){function getStartingYear(year){return parseInt((year-1)/range,10)*range+1}var range;this.element=$element,this.yearpickerInit=function(){range=this.yearRange,this.step={years:range}},this._refreshView=function(){for(var date,years=new Array(range),i=0,start=getStartingYear(this.activeDate.getFullYear());range>i;i++)date=new Date(this.activeDate),date.setFullYear(start+i,0,1),years[i]=angular.extend(this.createDateObject(date,this.formatYear),{uid:scope.uniqueId+"-"+i});scope.title=[years[0].label,years[range-1].label].join(" - "),scope.rows=this.split(years,5)},this.compare=function(date1,date2){return date1.getFullYear()-date2.getFullYear()},this.handleKeyDown=function(key,evt){var date=this.activeDate.getFullYear();"left"===key?date-=1:"up"===key?date-=5:"right"===key?date+=1:"down"===key?date+=5:"pageup"===key||"pagedown"===key?date+=("pageup"===key?-1:1)*this.step.years:"home"===key?date=getStartingYear(this.activeDate.getFullYear()):"end"===key&&(date=getStartingYear(this.activeDate.getFullYear())+range-1),this.activeDate.setFullYear(date)}}]).directive("uibDatepicker",function(){return{replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["uibDatepicker","^ngModel"],controller:"UibDatepickerController",controllerAs:"datepicker",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}}).directive("uibDaypicker",function(){return{replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/day.html"},require:["^?uibDatepicker","uibDaypicker","^?datepicker"],controller:"UibDaypickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0]||ctrls[2],daypickerCtrl=ctrls[1];daypickerCtrl.init(datepickerCtrl)}}}).directive("uibMonthpicker",function(){return{replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/month.html"},require:["^?uibDatepicker","uibMonthpicker","^?datepicker"],controller:"UibMonthpickerController",link:function(scope,element,attrs,ctrls){var datepickerCtrl=ctrls[0]||ctrls[2],monthpickerCtrl=ctrls[1];monthpickerCtrl.init(datepickerCtrl)}}}).directive("uibYearpicker",function(){return{replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/year.html"},require:["^?uibDatepicker","uibYearpicker","^?datepicker"],controller:"UibYearpickerController",link:function(scope,element,attrs,ctrls){var ctrl=ctrls[0]||ctrls[2];angular.extend(ctrl,ctrls[1]),ctrl.yearpickerInit(),ctrl.refreshView()}}}).constant("uibDatepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"template/datepicker/popup.html",datepickerTemplateUrl:"template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0,onOpenFocus:!0}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$parse","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout",function(scope,element,attrs,$compile,$parse,$document,$rootScope,$position,dateFilter,dateParser,datepickerPopupConfig,$timeout){function cameltoDash(string){return string.replace(/([A-Z])/g,function($1){return"-"+$1.toLowerCase()})}function parseDate(viewValue){if(angular.isNumber(viewValue)&&(viewValue=new Date(viewValue)),viewValue){if(angular.isDate(viewValue)&&!isNaN(viewValue))return viewValue;if(angular.isString(viewValue)){var date=dateParser.parse(viewValue,dateFormat,scope.date);return isNaN(date)?void 0:date}return void 0}return null}function validator(modelValue,viewValue){var value=modelValue||viewValue;if(!attrs.ngRequired&&!value)return!0;if(angular.isNumber(value)&&(value=new Date(value)),value){if(angular.isDate(value)&&!isNaN(value))return!0;if(angular.isString(value)){var date=dateParser.parse(value,dateFormat);return!isNaN(date)}return!1}return!0}function documentClickBind(event){var popup=$popup[0],dpContainsTarget=element[0].contains(event.target),popupContainsTarget=void 0!==popup.contains&&popup.contains(event.target);!scope.isOpen||dpContainsTarget||popupContainsTarget||scope.$apply(function(){scope.isOpen=!1})}function inputKeydownBind(evt){27===evt.which&&scope.isOpen?(evt.preventDefault(),evt.stopPropagation(),scope.$apply(function(){scope.isOpen=!1}),element[0].focus()):40!==evt.which||scope.isOpen||(evt.preventDefault(),evt.stopPropagation(),scope.$apply(function(){scope.isOpen=!0}))}var dateFormat,closeOnDateSelection,appendToBody,onOpenFocus,datepickerPopupTemplateUrl,datepickerTemplateUrl,popupEl,datepickerEl,ngModel,$popup,cache={},isHtml5DateInput=!1;scope.watchData={},this.init=function(_ngModel_){if(ngModel=_ngModel_,closeOnDateSelection=angular.isDefined(attrs.closeOnDateSelection)?scope.$parent.$eval(attrs.closeOnDateSelection):datepickerPopupConfig.closeOnDateSelection,appendToBody=angular.isDefined(attrs.datepickerAppendToBody)?scope.$parent.$eval(attrs.datepickerAppendToBody):datepickerPopupConfig.appendToBody,onOpenFocus=angular.isDefined(attrs.onOpenFocus)?scope.$parent.$eval(attrs.onOpenFocus):datepickerPopupConfig.onOpenFocus,datepickerPopupTemplateUrl=angular.isDefined(attrs.datepickerPopupTemplateUrl)?attrs.datepickerPopupTemplateUrl:datepickerPopupConfig.datepickerPopupTemplateUrl,datepickerTemplateUrl=angular.isDefined(attrs.datepickerTemplateUrl)?attrs.datepickerTemplateUrl:datepickerPopupConfig.datepickerTemplateUrl,scope.showButtonBar=angular.isDefined(attrs.showButtonBar)?scope.$parent.$eval(attrs.showButtonBar):datepickerPopupConfig.showButtonBar,datepickerPopupConfig.html5Types[attrs.type]?(dateFormat=datepickerPopupConfig.html5Types[attrs.type],isHtml5DateInput=!0):(dateFormat=attrs.datepickerPopup||attrs.uibDatepickerPopup||datepickerPopupConfig.datepickerPopup,attrs.$observe("uibDatepickerPopup",function(value,oldValue){var newDateFormat=value||datepickerPopupConfig.datepickerPopup;if(newDateFormat!==dateFormat&&(dateFormat=newDateFormat,ngModel.$modelValue=null,!dateFormat))throw new Error("uibDatepickerPopup must have a date format specified.")})),!dateFormat)throw new Error("uibDatepickerPopup must have a date format specified.");if(isHtml5DateInput&&attrs.datepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");if(popupEl=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>"),popupEl.attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":datepickerPopupTemplateUrl}),datepickerEl=angular.element(popupEl.children()[0]),datepickerEl.attr("template-url",datepickerTemplateUrl),isHtml5DateInput&&"month"===attrs.type&&(datepickerEl.attr("datepicker-mode",'"month"'),datepickerEl.attr("min-mode","month")),attrs.datepickerOptions){var options=scope.$parent.$eval(attrs.datepickerOptions);options&&options.initDate&&(scope.initDate=options.initDate,datepickerEl.attr("init-date","initDate"),delete options.initDate),angular.forEach(options,function(value,option){datepickerEl.attr(cameltoDash(option),value)})}angular.forEach(["minMode","maxMode","minDate","maxDate","datepickerMode","initDate","shortcutPropagation"],function(key){if(attrs[key]){var getAttribute=$parse(attrs[key]);if(scope.$parent.$watch(getAttribute,function(value){scope.watchData[key]=value,("minDate"===key||"maxDate"===key)&&(cache[key]=new Date(value))}),datepickerEl.attr(cameltoDash(key),"watchData."+key),"datepickerMode"===key){var setAttribute=getAttribute.assign;scope.$watch("watchData."+key,function(value,oldvalue){angular.isFunction(setAttribute)&&value!==oldvalue&&setAttribute(scope.$parent,value)})}}}),attrs.dateDisabled&&datepickerEl.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),attrs.showWeeks&&datepickerEl.attr("show-weeks",attrs.showWeeks),attrs.customClass&&datepickerEl.attr("custom-class","customClass({ date: date, mode: mode })"),isHtml5DateInput?ngModel.$formatters.push(function(value){return scope.date=value,value}):(ngModel.$$parserName="date",ngModel.$validators.date=validator,ngModel.$parsers.unshift(parseDate),ngModel.$formatters.push(function(value){return scope.date=value,ngModel.$isEmpty(value)?value:dateFilter(value,dateFormat)})),ngModel.$viewChangeListeners.push(function(){scope.date=dateParser.parse(ngModel.$viewValue,dateFormat,scope.date)}),element.bind("keydown",inputKeydownBind),$popup=$compile(popupEl)(scope),popupEl.remove(),appendToBody?$document.find("body").append($popup):element.after($popup),scope.$on("$destroy",function(){scope.isOpen===!0&&($rootScope.$$phase||scope.$apply(function(){scope.isOpen=!1})),$popup.remove(),element.unbind("keydown",inputKeydownBind),$document.unbind("click",documentClickBind)})},scope.getText=function(key){return scope[key+"Text"]||datepickerPopupConfig[key+"Text"]},scope.isDisabled=function(date){return"today"===date&&(date=new Date),scope.watchData.minDate&&scope.compare(date,cache.minDate)<0||scope.watchData.maxDate&&scope.compare(date,cache.maxDate)>0},scope.compare=function(date1,date2){return new Date(date1.getFullYear(),date1.getMonth(),date1.getDate())-new Date(date2.getFullYear(),date2.getMonth(),date2.getDate())},scope.dateSelection=function(dt){angular.isDefined(dt)&&(scope.date=dt);var date=scope.date?dateFilter(scope.date,dateFormat):null;element.val(date),ngModel.$setViewValue(date),closeOnDateSelection&&(scope.isOpen=!1,element[0].focus())},scope.keydown=function(evt){27===evt.which&&(scope.isOpen=!1,element[0].focus())},scope.select=function(date){if("today"===date){var today=new Date;angular.isDate(scope.date)?(date=new Date(scope.date),date.setFullYear(today.getFullYear(),today.getMonth(),today.getDate())):date=new Date(today.setHours(0,0,0,0))}scope.dateSelection(date)},scope.close=function(){scope.isOpen=!1,element[0].focus()},scope.$watch("isOpen",function(value){value?(scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top=scope.position.top+element.prop("offsetHeight"),$timeout(function(){onOpenFocus&&scope.$broadcast("uib:datepicker.focus"),$document.bind("click",documentClickBind)},0,!1)):$document.unbind("click",documentClickBind)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(scope,element,attrs,ctrls){var ngModel=ctrls[0],ctrl=ctrls[1];ctrl.init(ngModel)}}}).directive("uibDatepickerPopupWrap",function(){return{replace:!0,transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/popup.html"}}}),angular.module("ui.bootstrap.datepicker").value("$datepickerSuppressWarning",!1).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$log","dateFilter","uibDatepickerConfig","$datepickerSuppressError","$datepickerSuppressWarning",function($scope,$attrs,$parse,$interpolate,$log,dateFilter,datepickerConfig,$datepickerSuppressError,$datepickerSuppressWarning){$datepickerSuppressWarning||$log.warn("DatepickerController is now deprecated. Use UibDatepickerController instead.");var self=this,ngModelCtrl={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","showWeeks","startingDay","yearRange","shortcutPropagation"],function(key,index){self[key]=angular.isDefined($attrs[key])?6>index?$interpolate($attrs[key])($scope.$parent):$scope.$parent.$eval($attrs[key]):datepickerConfig[key]}),angular.forEach(["minDate","maxDate"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=value?new Date(value):null,self.refreshView()}):self[key]=datepickerConfig[key]?new Date(datepickerConfig[key]):null}),angular.forEach(["minMode","maxMode"],function(key){$attrs[key]?$scope.$parent.$watch($parse($attrs[key]),function(value){self[key]=angular.isDefined(value)?value:$attrs[key],$scope[key]=self[key],("minMode"==key&&self.modes.indexOf($scope.datepickerMode)<self.modes.indexOf(self[key])||"maxMode"==key&&self.modes.indexOf($scope.datepickerMode)>self.modes.indexOf(self[key]))&&($scope.datepickerMode=self[key])}):(self[key]=datepickerConfig[key]||null,$scope[key]=self[key])}),$scope.datepickerMode=$scope.datepickerMode||datepickerConfig.datepickerMode,$scope.uniqueId="datepicker-"+$scope.$id+"-"+Math.floor(1e4*Math.random()),angular.isDefined($attrs.initDate)?(this.activeDate=$scope.$parent.$eval($attrs.initDate)||new Date,$scope.$parent.$watch($attrs.initDate,function(initDate){initDate&&(ngModelCtrl.$isEmpty(ngModelCtrl.$modelValue)||ngModelCtrl.$invalid)&&(self.activeDate=initDate,self.refreshView())})):this.activeDate=new Date,$scope.isActive=function(dateObject){return 0===self.compare(dateObject.date,self.activeDate)?($scope.activeDateId=dateObject.uid,!0):!1},this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=function(){self.render()}},this.render=function(){if(ngModelCtrl.$viewValue){var date=new Date(ngModelCtrl.$viewValue),isValid=!isNaN(date);isValid?this.activeDate=date:$datepickerSuppressError||$log.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var date=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;ngModelCtrl.$setValidity("dateDisabled",!date||this.element&&!this.isDisabled(date))}},this.createDateObject=function(date,format){var model=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):null;return{date:date,label:dateFilter(date,format),selected:model&&0===this.compare(date,model),disabled:this.isDisabled(date),current:0===this.compare(date,new Date),customClass:this.customClass(date)}},this.isDisabled=function(date){return this.minDate&&this.compare(date,this.minDate)<0||this.maxDate&&this.compare(date,this.maxDate)>0||$attrs.dateDisabled&&$scope.dateDisabled({date:date,mode:$scope.datepickerMode})},this.customClass=function(date){return $scope.customClass({date:date,mode:$scope.datepickerMode})},this.split=function(arr,size){for(var arrays=[];arr.length>0;)arrays.push(arr.splice(0,size));return arrays},this.fixTimeZone=function(date){var hours=date.getHours();date.setHours(23===hours?hours+2:0)},$scope.select=function(date){if($scope.datepickerMode===self.minMode){var dt=ngModelCtrl.$viewValue?new Date(ngModelCtrl.$viewValue):new Date(0,0,0,0,0,0,0);dt.setFullYear(date.getFullYear(),date.getMonth(),date.getDate()),ngModelCtrl.$setViewValue(dt),ngModelCtrl.$render()}else self.activeDate=date,$scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)-1]},$scope.move=function(direction){var year=self.activeDate.getFullYear()+direction*(self.step.years||0),month=self.activeDate.getMonth()+direction*(self.step.months||0);self.activeDate.setFullYear(year,month,1),self.refreshView()},$scope.toggleMode=function(direction){direction=direction||1,$scope.datepickerMode===self.maxMode&&1===direction||$scope.datepickerMode===self.minMode&&-1===direction||($scope.datepickerMode=self.modes[self.modes.indexOf($scope.datepickerMode)+direction])},$scope.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var focusElement=function(){self.element[0].focus()};$scope.$on("uib:datepicker.focus",focusElement),$scope.keydown=function(evt){var key=$scope.keys[evt.which];if(key&&!evt.shiftKey&&!evt.altKey)if(evt.preventDefault(),self.shortcutPropagation||evt.stopPropagation(),"enter"===key||"space"===key){if(self.isDisabled(self.activeDate))return;$scope.select(self.activeDate)}else!evt.ctrlKey||"up"!==key&&"down"!==key?(self.handleKeyDown(key,evt),self.refreshView()):$scope.toggleMode("up"===key?1:-1)}}]).directive("datepicker",["$log","$datepickerSuppressWarning",function($log,$datepickerSuppressWarning){return{replace:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/datepicker.html"},scope:{datepickerMode:"=?",dateDisabled:"&",customClass:"&",shortcutPropagation:"&?"},require:["datepicker","^ngModel"],controller:"DatepickerController",controllerAs:"datepicker",link:function(scope,element,attrs,ctrls){$datepickerSuppressWarning||$log.warn("datepicker is now deprecated. Use uib-datepicker instead.");var datepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];datepickerCtrl.init(ngModelCtrl)}}}]).directive("daypicker",["$log","$datepickerSuppressWarning",function($log,$datepickerSuppressWarning){return{replace:!0,templateUrl:"template/datepicker/day.html",require:["^datepicker","daypicker"],controller:"UibDaypickerController",link:function(scope,element,attrs,ctrls){$datepickerSuppressWarning||$log.warn("daypicker is now deprecated. Use uib-daypicker instead.");var datepickerCtrl=ctrls[0],daypickerCtrl=ctrls[1];daypickerCtrl.init(datepickerCtrl)}}}]).directive("monthpicker",["$log","$datepickerSuppressWarning",function($log,$datepickerSuppressWarning){return{replace:!0,templateUrl:"template/datepicker/month.html",require:["^datepicker","monthpicker"],controller:"UibMonthpickerController",link:function(scope,element,attrs,ctrls){$datepickerSuppressWarning||$log.warn("monthpicker is now deprecated. Use uib-monthpicker instead.");var datepickerCtrl=ctrls[0],monthpickerCtrl=ctrls[1];monthpickerCtrl.init(datepickerCtrl)}}}]).directive("yearpicker",["$log","$datepickerSuppressWarning",function($log,$datepickerSuppressWarning){return{replace:!0,templateUrl:"template/datepicker/year.html",require:["^datepicker","yearpicker"],controller:"UibYearpickerController",link:function(scope,element,attrs,ctrls){$datepickerSuppressWarning||$log.warn("yearpicker is now deprecated. Use uib-yearpicker instead.");var ctrl=ctrls[0];angular.extend(ctrl,ctrls[1]),ctrl.yearpickerInit(),ctrl.refreshView()}}}]).directive("datepickerPopup",["$log","$datepickerSuppressWarning",function($log,$datepickerSuppressWarning){return{require:["ngModel","datepickerPopup"],controller:"UibDatepickerPopupController",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&",customClass:"&"},link:function(scope,element,attrs,ctrls){$datepickerSuppressWarning||$log.warn("datepicker-popup is now deprecated. Use uib-datepicker-popup instead.");var ngModel=ctrls[0],ctrl=ctrls[1];ctrl.init(ngModel)}}}]).directive("datepickerPopupWrap",["$log","$datepickerSuppressWarning",function($log,$datepickerSuppressWarning){return{replace:!0,transclude:!0,templateUrl:function(element,attrs){return attrs.templateUrl||"template/datepicker/popup.html"},link:function(){$datepickerSuppressWarning||$log.warn("datepicker-popup-wrap is now deprecated. Use uib-datepicker-popup-wrap instead.")}}}]),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.position"]).constant("uibDropdownConfig",{openClass:"open"}).service("uibDropdownService",["$document","$rootScope",function($document,$rootScope){var openScope=null;this.open=function(dropdownScope){openScope||($document.bind("click",closeDropdown),$document.bind("keydown",keybindFilter)),openScope&&openScope!==dropdownScope&&(openScope.isOpen=!1),openScope=dropdownScope},this.close=function(dropdownScope){openScope===dropdownScope&&(openScope=null,$document.unbind("click",closeDropdown),$document.unbind("keydown",keybindFilter))};var closeDropdown=function(evt){if(openScope&&(!evt||"disabled"!==openScope.getAutoClose())){var toggleElement=openScope.getToggleElement();if(!(evt&&toggleElement&&toggleElement[0].contains(evt.target))){var dropdownElement=openScope.getDropdownElement();evt&&"outsideClick"===openScope.getAutoClose()&&dropdownElement&&dropdownElement[0].contains(evt.target)||(openScope.isOpen=!1,$rootScope.$$phase||openScope.$apply())}}},keybindFilter=function(evt){27===evt.which?(openScope.focusToggleElement(),closeDropdown()):openScope.isKeynavEnabled()&&/(38|40)/.test(evt.which)&&openScope.isOpen&&(evt.preventDefault(),evt.stopPropagation(),openScope.focusDropdownEntry(evt.which))}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest){var templateScope,getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,appendToBody=!1,keynavEnabled=!1;$element.addClass("dropdown"),this.init=function(){$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),appendToBody=angular.isDefined($attrs.dropdownAppendToBody),keynavEnabled=angular.isDefined($attrs.uibKeyboardNav),appendToBody&&self.dropdownMenu&&($document.find("body").append(self.dropdownMenu),$element.on("$destroy",function(){self.dropdownMenu.remove()}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return $element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):angular.element($element).find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:angular.isNumber(self.selectedOption)?self.selectedOption=0===self.selectedOption?0:self.selectedOption-1:self.selectedOption=elems.length-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){if(appendToBody&&self.dropdownMenu){var pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",!0),css={top:pos.top+"px",display:isOpen?"block":"none"},rightalign=self.dropdownMenu.hasClass("dropdown-menu-right");rightalign?(css.left="auto",css.right=window.innerWidth-(pos.left+$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),self.dropdownMenu.css(css)}if($animate[isOpen?"addClass":"removeClass"]($element,openClass).then(function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),isOpen)self.dropdownMenuTemplateUrl&&$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl})}),scope.focusToggleElement(),uibDropdownService.open(scope);else{if(self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}uibDropdownService.close(scope),self.selectedOption=null}angular.isFunction(setIsOpen)&&setIsOpen($scope,isOpen)}),$scope.$on("$locationChangeSuccess",function(){"disabled"!==scope.getAutoClose()&&(scope.isOpen=!1)});var offDestroy=$scope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy)}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(scope,element,attrs,dropdownCtrl){dropdownCtrl.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"AC",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl&&!angular.isDefined(attrs.dropdownNested)){element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}}).directive("uibKeyboardNav",function(){return{restrict:"A",require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){element.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var elems=dropdownCtrl.dropdownMenu.find("a");switch(e.which){case 40:angular.isNumber(dropdownCtrl.selectedOption)?dropdownCtrl.selectedOption=dropdownCtrl.selectedOption===elems.length-1?dropdownCtrl.selectedOption:dropdownCtrl.selectedOption+1:dropdownCtrl.selectedOption=0;break;case 38:angular.isNumber(dropdownCtrl.selectedOption)?dropdownCtrl.selectedOption=0===dropdownCtrl.selectedOption?0:dropdownCtrl.selectedOption-1:dropdownCtrl.selectedOption=elems.length-1}elems[dropdownCtrl.selectedOption].focus()}})}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}),angular.module("ui.bootstrap.dropdown").value("$dropdownSuppressWarning",!1).service("dropdownService",["$log","$dropdownSuppressWarning","uibDropdownService",function($log,$dropdownSuppressWarning,uibDropdownService){$dropdownSuppressWarning||$log.warn("dropdownService is now deprecated. Use uibDropdownService instead."),
angular.extend(this,uibDropdownService)}]).controller("DropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest","$log","$dropdownSuppressWarning",function($scope,$element,$attrs,$parse,dropdownConfig,uibDropdownService,$animate,$position,$document,$compile,$templateRequest,$log,$dropdownSuppressWarning){$dropdownSuppressWarning||$log.warn("DropdownController is now deprecated. Use UibDropdownController instead.");var templateScope,getIsOpen,self=this,scope=$scope.$new(),openClass=dropdownConfig.openClass,setIsOpen=angular.noop,toggleInvoker=$attrs.onToggle?$parse($attrs.onToggle):angular.noop,appendToBody=!1,keynavEnabled=!1;$element.addClass("dropdown"),this.init=function(){$attrs.isOpen&&(getIsOpen=$parse($attrs.isOpen),setIsOpen=getIsOpen.assign,$scope.$watch(getIsOpen,function(value){scope.isOpen=!!value})),appendToBody=angular.isDefined($attrs.dropdownAppendToBody),keynavEnabled=angular.isDefined($attrs.uibKeyboardNav),appendToBody&&self.dropdownMenu&&($document.find("body").append(self.dropdownMenu),$element.on("$destroy",function(){self.dropdownMenu.remove()}))},this.toggle=function(open){return scope.isOpen=arguments.length?!!open:!scope.isOpen},this.isOpen=function(){return scope.isOpen},scope.getToggleElement=function(){return self.toggleElement},scope.getAutoClose=function(){return $attrs.autoClose||"always"},scope.getElement=function(){return $element},scope.isKeynavEnabled=function(){return keynavEnabled},scope.focusDropdownEntry=function(keyCode){var elems=self.dropdownMenu?angular.element(self.dropdownMenu).find("a"):angular.element($element).find("ul").eq(0).find("a");switch(keyCode){case 40:angular.isNumber(self.selectedOption)?self.selectedOption=self.selectedOption===elems.length-1?self.selectedOption:self.selectedOption+1:self.selectedOption=0;break;case 38:angular.isNumber(self.selectedOption)?self.selectedOption=0===self.selectedOption?0:self.selectedOption-1:self.selectedOption=elems.length-1}elems[self.selectedOption].focus()},scope.getDropdownElement=function(){return self.dropdownMenu},scope.focusToggleElement=function(){self.toggleElement&&self.toggleElement[0].focus()},scope.$watch("isOpen",function(isOpen,wasOpen){if(appendToBody&&self.dropdownMenu){var pos=$position.positionElements($element,self.dropdownMenu,"bottom-left",!0),css={top:pos.top+"px",display:isOpen?"block":"none"},rightalign=self.dropdownMenu.hasClass("dropdown-menu-right");rightalign?(css.left="auto",css.right=window.innerWidth-(pos.left+$element.prop("offsetWidth"))+"px"):(css.left=pos.left+"px",css.right="auto"),self.dropdownMenu.css(css)}if($animate[isOpen?"addClass":"removeClass"]($element,openClass).then(function(){angular.isDefined(isOpen)&&isOpen!==wasOpen&&toggleInvoker($scope,{open:!!isOpen})}),isOpen)self.dropdownMenuTemplateUrl&&$templateRequest(self.dropdownMenuTemplateUrl).then(function(tplContent){templateScope=scope.$new(),$compile(tplContent.trim())(templateScope,function(dropdownElement){var newEl=dropdownElement;self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl})}),scope.focusToggleElement(),uibDropdownService.open(scope);else{if(self.dropdownMenuTemplateUrl){templateScope&&templateScope.$destroy();var newEl=angular.element('<ul class="dropdown-menu"></ul>');self.dropdownMenu.replaceWith(newEl),self.dropdownMenu=newEl}uibDropdownService.close(scope),self.selectedOption=null}angular.isFunction(setIsOpen)&&setIsOpen($scope,isOpen)}),$scope.$on("$locationChangeSuccess",function(){"disabled"!==scope.getAutoClose()&&(scope.isOpen=!1)});var offDestroy=$scope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy)}]).directive("dropdown",["$log","$dropdownSuppressWarning",function($log,$dropdownSuppressWarning){return{controller:"DropdownController",link:function(scope,element,attrs,dropdownCtrl){$dropdownSuppressWarning||$log.warn("dropdown is now deprecated. Use uib-dropdown instead."),dropdownCtrl.init()}}}]).directive("dropdownMenu",["$log","$dropdownSuppressWarning",function($log,$dropdownSuppressWarning){return{restrict:"AC",require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){if(dropdownCtrl&&!angular.isDefined(attrs.dropdownNested)){$dropdownSuppressWarning||$log.warn("dropdown-menu is now deprecated. Use uib-dropdown-menu instead."),element.addClass("dropdown-menu");var tplUrl=attrs.templateUrl;tplUrl&&(dropdownCtrl.dropdownMenuTemplateUrl=tplUrl),dropdownCtrl.dropdownMenu||(dropdownCtrl.dropdownMenu=element)}}}}]).directive("keyboardNav",["$log","$dropdownSuppressWarning",function($log,$dropdownSuppressWarning){return{restrict:"A",require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){$dropdownSuppressWarning||$log.warn("keyboard-nav is now deprecated. Use uib-keyboard-nav instead."),element.bind("keydown",function(e){if(-1!==[38,40].indexOf(e.which)){e.preventDefault(),e.stopPropagation();var elems=dropdownCtrl.dropdownMenu.find("a");switch(e.which){case 40:angular.isNumber(dropdownCtrl.selectedOption)?dropdownCtrl.selectedOption=dropdownCtrl.selectedOption===elems.length-1?dropdownCtrl.selectedOption:dropdownCtrl.selectedOption+1:dropdownCtrl.selectedOption=0;break;case 38:angular.isNumber(dropdownCtrl.selectedOption)?dropdownCtrl.selectedOption=0===dropdownCtrl.selectedOption?0:dropdownCtrl.selectedOption-1:dropdownCtrl.selectedOption=elems.length-1}elems[dropdownCtrl.selectedOption].focus()}})}}}]).directive("dropdownToggle",["$log","$dropdownSuppressWarning",function($log,$dropdownSuppressWarning){return{require:"?^dropdown",link:function(scope,element,attrs,dropdownCtrl){if($dropdownSuppressWarning||$log.warn("dropdown-toggle is now deprecated. Use uib-dropdown-toggle instead."),dropdownCtrl){element.addClass("dropdown-toggle"),dropdownCtrl.toggleElement=element;var toggleDropdown=function(event){event.preventDefault(),element.hasClass("disabled")||attrs.disabled||scope.$apply(function(){dropdownCtrl.toggle()})};element.bind("click",toggleDropdown),element.attr({"aria-haspopup":!0,"aria-expanded":!1}),scope.$watch(dropdownCtrl.isOpen,function(isOpen){element.attr("aria-expanded",!!isOpen)}),scope.$on("$destroy",function(){element.unbind("click",toggleDropdown)})}}}}]),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var stack=[];return{add:function(key,value){stack.push({key:key,value:value})},get:function(key){for(var i=0;i<stack.length;i++)if(key==stack[i].key)return stack[i]},keys:function(){for(var keys=[],i=0;i<stack.length;i++)keys.push(stack[i].key);return keys},top:function(){return stack[stack.length-1]},remove:function(key){for(var idx=-1,i=0;i<stack.length;i++)if(key==stack[i].key){idx=i;break}return stack.splice(idx,1)[0]},removeTop:function(){return stack.splice(stack.length-1,1)[0]},length:function(){return stack.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.stackedMap"]).factory("$$multiMap",function(){return{createNew:function(){var map={};return{entries:function(){return Object.keys(map).map(function(key){return{key:key,value:map[key]}})},get:function(key){return map[key]},hasKey:function(key){return!!map[key]},keys:function(){return Object.keys(map)},put:function(key,value){map[key]||(map[key]=[]),map[key].push(value)},remove:function(key,value){var values=map[key];if(values){var idx=values.indexOf(value);-1!==idx&&values.splice(idx,1),values.length||delete map[key]}}}}}}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function($animate,$injector,$modalStack){function linkFn(scope,element,attrs){element.addClass("modal-backdrop"),attrs.modalInClass&&($animateCss?$animateCss(element,{addClass:attrs.modalInClass}).start():$animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss?$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done):$animate.removeClass(element,attrs.modalInClass).then(done)}))}var $animateCss=null;return $injector.has("$animateCss")&&($animateCss=$injector.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(tElement,tAttrs){return tElement.addClass(tAttrs.backdropClass),linkFn}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animate","$injector",function($modalStack,$q,$animate,$injector){var $animateCss=null;return $injector.has("$animateCss")&&($animateCss=$injector.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"template/modal/window.html"},link:function(scope,element,attrs){element.addClass(attrs.windowClass||""),element.addClass(attrs.windowTopClass||""),scope.size=attrs.size,scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!==modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))},element.on("click",scope.close),scope.$isRendered=!0;var modalRenderDeferObj=$q.defer();attrs.$observe("modalRender",function(value){"true"==value&&modalRenderDeferObj.resolve()}),modalRenderDeferObj.promise.then(function(){var animationPromise=null;attrs.modalInClass&&(animationPromise=$animateCss?$animateCss(element,{addClass:attrs.modalInClass}).start():$animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss?$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done):$animate.removeClass(element,attrs.modalInClass).then(done)})),$q.when(animationPromise).then(function(){var inputWithAutofocus=element[0].querySelector("[autofocus]");inputWithAutofocus?inputWithAutofocus.focus():element[0].focus()});var modal=$modalStack.getTop();modal&&$modalStack.modalRendered(modal.key)})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(tElement,tAttrs){tAttrs.modalAnimation&&tElement.addClass(tAttrs.uibModalAnimationClass)}}}).directive("uibModalTransclude",function(){return{link:function($scope,$element,$attrs,controller,$transclude){$transclude($scope.$parent,function(clone){$element.empty(),$element.append(clone)})}}}).factory("$uibModalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap",function($animate,$timeout,$document,$compile,$rootScope,$q,$injector,$$multiMap,$$stackedMap){function backdropIndex(){for(var topBackdropIndex=-1,opened=openedWindows.keys(),i=0;i<opened.length;i++)openedWindows.get(opened[i]).value.backdrop&&(topBackdropIndex=i);return topBackdropIndex}function removeModalWindow(modalInstance,elementToReceiveFocus){var body=$document.find("body").eq(0),modalWindow=openedWindows.get(modalInstance).value;openedWindows.remove(modalInstance),removeAfterAnimate(modalWindow.modalDomEl,modalWindow.modalScope,function(){var modalBodyClass=modalWindow.openedClass||OPENED_MODAL_CLASS;openedClasses.remove(modalBodyClass,modalInstance),body.toggleClass(modalBodyClass,openedClasses.hasKey(modalBodyClass)),toggleTopWindowClass(!0)}),checkRemoveBackdrop(),elementToReceiveFocus&&elementToReceiveFocus.focus?elementToReceiveFocus.focus():body.focus()}function toggleTopWindowClass(toggleSwitch){var modalWindow;openedWindows.length()>0&&(modalWindow=openedWindows.top().value,modalWindow.modalDomEl.toggleClass(modalWindow.windowTopClass||"",toggleSwitch))}function checkRemoveBackdrop(){if(backdropDomEl&&-1==backdropIndex()){var backdropScopeRef=backdropScope;removeAfterAnimate(backdropDomEl,backdropScope,function(){backdropScopeRef=null}),backdropDomEl=void 0,backdropScope=void 0}}function removeAfterAnimate(domEl,scope,done){function afterAnimating(){afterAnimating.done||(afterAnimating.done=!0,$animateCss?$animateCss(domEl,{event:"leave"}).start().then(function(){domEl.remove()}):$animate.leave(domEl),scope.$destroy(),done&&done())}var asyncDeferred,asyncPromise=null,setIsAsync=function(){return asyncDeferred||(asyncDeferred=$q.defer(),asyncPromise=asyncDeferred.promise),function(){asyncDeferred.resolve()}};return scope.$broadcast($modalStack.NOW_CLOSING_EVENT,setIsAsync),$q.when(asyncPromise).then(afterAnimating)}function broadcastClosing(modalWindow,resultOrReason,closing){return!modalWindow.value.modalScope.$broadcast("modal.closing",resultOrReason,closing).defaultPrevented}var $animateCss=null;$injector.has("$animateCss")&&($animateCss=$injector.get("$animateCss"));var backdropDomEl,backdropScope,focusableElementList,OPENED_MODAL_CLASS="modal-open",openedWindows=$$stackedMap.createNew(),openedClasses=$$multiMap.createNew(),$modalStack={NOW_CLOSING_EVENT:"modal.stack.now-closing"},focusIndex=0,tababbleSelector="a[href], area[href], input:not([disabled]), button:not([disabled]),select:not([disabled]), textarea:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable=true]";return $rootScope.$watch(backdropIndex,function(newBackdropIndex){backdropScope&&(backdropScope.index=newBackdropIndex)}),$document.bind("keydown",function(evt){if(evt.isDefaultPrevented())return evt;var modal=openedWindows.top();if(modal&&modal.value.keyboard)switch(evt.which){case 27:evt.preventDefault(),$rootScope.$apply(function(){$modalStack.dismiss(modal.key,"escape key press")});break;case 9:$modalStack.loadFocusElementList(modal);var focusChanged=!1;evt.shiftKey?$modalStack.isFocusInFirstItem(evt)&&(focusChanged=$modalStack.focusLastFocusableElement()):$modalStack.isFocusInLastItem(evt)&&(focusChanged=$modalStack.focusFirstFocusableElement()),focusChanged&&(evt.preventDefault(),evt.stopPropagation())}}),$modalStack.open=function(modalInstance,modal){var modalOpener=$document[0].activeElement,modalBodyClass=modal.openedClass||OPENED_MODAL_CLASS;toggleTopWindowClass(!1),openedWindows.add(modalInstance,{deferred:modal.deferred,renderDeferred:modal.renderDeferred,modalScope:modal.scope,backdrop:modal.backdrop,keyboard:modal.keyboard,openedClass:modal.openedClass,windowTopClass:modal.windowTopClass}),openedClasses.put(modalBodyClass,modalInstance);var body=$document.find("body").eq(0),currBackdropIndex=backdropIndex();if(currBackdropIndex>=0&&!backdropDomEl){backdropScope=$rootScope.$new(!0),backdropScope.index=currBackdropIndex;var angularBackgroundDomEl=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>');angularBackgroundDomEl.attr("backdrop-class",modal.backdropClass),modal.animation&&angularBackgroundDomEl.attr("modal-animation","true"),backdropDomEl=$compile(angularBackgroundDomEl)(backdropScope),body.append(backdropDomEl)}var angularDomEl=angular.element('<div uib-modal-window="modal-window"></div>');angularDomEl.attr({"template-url":modal.windowTemplateUrl,"window-class":modal.windowClass,"window-top-class":modal.windowTopClass,size:modal.size,index:openedWindows.length()-1,animate:"animate"}).html(modal.content),modal.animation&&angularDomEl.attr("modal-animation","true");var modalDomEl=$compile(angularDomEl)(modal.scope);openedWindows.top().value.modalDomEl=modalDomEl,openedWindows.top().value.modalOpener=modalOpener,body.append(modalDomEl),body.addClass(modalBodyClass),$modalStack.clearFocusListCache()},$modalStack.close=function(modalInstance,result){var modalWindow=openedWindows.get(modalInstance);return modalWindow&&broadcastClosing(modalWindow,result,!0)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.resolve(result),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismiss=function(modalInstance,reason){var modalWindow=openedWindows.get(modalInstance);return modalWindow&&broadcastClosing(modalWindow,reason,!1)?(modalWindow.value.modalScope.$$uibDestructionScheduled=!0,modalWindow.value.deferred.reject(reason),removeModalWindow(modalInstance,modalWindow.value.modalOpener),!0):!modalWindow},$modalStack.dismissAll=function(reason){for(var topModal=this.getTop();topModal&&this.dismiss(topModal.key,reason);)topModal=this.getTop()},$modalStack.getTop=function(){return openedWindows.top()},$modalStack.modalRendered=function(modalInstance){var modalWindow=openedWindows.get(modalInstance);modalWindow&&modalWindow.value.renderDeferred.resolve()},$modalStack.focusFirstFocusableElement=function(){return focusableElementList.length>0?(focusableElementList[0].focus(),!0):!1},$modalStack.focusLastFocusableElement=function(){return focusableElementList.length>0?(focusableElementList[focusableElementList.length-1].focus(),!0):!1},$modalStack.isFocusInFirstItem=function(evt){return focusableElementList.length>0?(evt.target||evt.srcElement)==focusableElementList[0]:!1},$modalStack.isFocusInLastItem=function(evt){return focusableElementList.length>0?(evt.target||evt.srcElement)==focusableElementList[focusableElementList.length-1]:!1},$modalStack.clearFocusListCache=function(){focusableElementList=[],focusIndex=0},$modalStack.loadFocusElementList=function(modalWindow){if((void 0===focusableElementList||!focusableElementList.length)&&modalWindow){var modalDomE1=modalWindow.value.modalDomEl;modalDomE1&&modalDomE1.length&&(focusableElementList=modalDomE1[0].querySelectorAll(tababbleSelector))}},$modalStack}]).provider("$uibModal",function(){var $modalProvider={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$templateRequest","$controller","$uibModalStack","$modalSuppressWarning","$log",function($injector,$rootScope,$q,$templateRequest,$controller,$modalStack,$modalSuppressWarning,$log){function getTemplatePromise(options){return options.template?$q.when(options.template):$templateRequest(angular.isFunction(options.templateUrl)?options.templateUrl():options.templateUrl)}function getResolvePromises(resolves){var promisesArr=[];return angular.forEach(resolves,function(value){angular.isFunction(value)||angular.isArray(value)?promisesArr.push($q.when($injector.invoke(value))):angular.isString(value)?promisesArr.push($q.when($injector.get(value))):promisesArr.push($q.when(value))}),promisesArr}var $modal={},promiseChain=null;return $modal.getPromiseChain=function(){return promiseChain},$modal.open=function(modalOptions){function resolveWithTemplate(){return templateAndResolvePromise}var modalResultDeferred=$q.defer(),modalOpenedDeferred=$q.defer(),modalRenderDeferred=$q.defer(),modalInstance={result:modalResultDeferred.promise,opened:modalOpenedDeferred.promise,rendered:modalRenderDeferred.promise,close:function(result){return $modalStack.close(modalInstance,result)},dismiss:function(reason){return $modalStack.dismiss(modalInstance,reason)}};if(modalOptions=angular.extend({},$modalProvider.options,modalOptions),modalOptions.resolve=modalOptions.resolve||{},!modalOptions.template&&!modalOptions.templateUrl)throw new Error("One of template or templateUrl options is required.");var samePromise,templateAndResolvePromise=$q.all([getTemplatePromise(modalOptions)].concat(getResolvePromises(modalOptions.resolve)));return samePromise=promiseChain=$q.all([promiseChain]).then(resolveWithTemplate,resolveWithTemplate).then(function(tplAndVars){var modalScope=(modalOptions.scope||$rootScope).$new();modalScope.$close=modalInstance.close,modalScope.$dismiss=modalInstance.dismiss,modalScope.$on("$destroy",function(){modalScope.$$uibDestructionScheduled||modalScope.$dismiss("$uibUnscheduledDestruction")});var ctrlInstance,ctrlLocals={},resolveIter=1;modalOptions.controller&&(ctrlLocals.$scope=modalScope,ctrlLocals.$uibModalInstance=modalInstance,Object.defineProperty(ctrlLocals,"$modalInstance",{get:function(){return $modalSuppressWarning||$log.warn("$modalInstance is now deprecated. Use $uibModalInstance instead."),modalInstance}}),angular.forEach(modalOptions.resolve,function(value,key){ctrlLocals[key]=tplAndVars[resolveIter++]}),ctrlInstance=$controller(modalOptions.controller,ctrlLocals),modalOptions.controllerAs&&(modalOptions.bindToController&&angular.extend(ctrlInstance,modalScope),modalScope[modalOptions.controllerAs]=ctrlInstance)),$modalStack.open(modalInstance,{scope:modalScope,deferred:modalResultDeferred,renderDeferred:modalRenderDeferred,content:tplAndVars[0],animation:modalOptions.animation,backdrop:modalOptions.backdrop,keyboard:modalOptions.keyboard,backdropClass:modalOptions.backdropClass,windowTopClass:modalOptions.windowTopClass,windowClass:modalOptions.windowClass,windowTemplateUrl:modalOptions.windowTemplateUrl,size:modalOptions.size,openedClass:modalOptions.openedClass}),modalOpenedDeferred.resolve(!0)},function(reason){modalOpenedDeferred.reject(reason),modalResultDeferred.reject(reason)})["finally"](function(){promiseChain===samePromise&&(promiseChain=null)}),modalInstance},$modal}]};return $modalProvider}),angular.module("ui.bootstrap.modal").value("$modalSuppressWarning",!1).directive("modalBackdrop",["$animate","$injector","$modalStack","$log","$modalSuppressWarning",function($animate,$injector,$modalStack,$log,$modalSuppressWarning){function linkFn(scope,element,attrs){$modalSuppressWarning||$log.warn("modal-backdrop is now deprecated. Use uib-modal-backdrop instead."),element.addClass("modal-backdrop"),attrs.modalInClass&&($animateCss?$animateCss(element,{addClass:attrs.modalInClass}).start():$animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss?$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done):$animate.removeClass(element,attrs.modalInClass).then(done)}))}var $animateCss=null;return $injector.has("$animateCss")&&($animateCss=$injector.get("$animateCss")),{replace:!0,templateUrl:"template/modal/backdrop.html",compile:function(tElement,tAttrs){return tElement.addClass(tAttrs.backdropClass),linkFn}}}]).directive("modalWindow",["$modalStack","$q","$animate","$injector","$log","$modalSuppressWarning",function($modalStack,$q,$animate,$injector,$log,$modalSuppressWarning){var $animateCss=null;return $injector.has("$animateCss")&&($animateCss=$injector.get("$animateCss")),{scope:{index:"@"},replace:!0,transclude:!0,templateUrl:function(tElement,tAttrs){return tAttrs.templateUrl||"template/modal/window.html"},link:function(scope,element,attrs){$modalSuppressWarning||$log.warn("modal-window is now deprecated. Use uib-modal-window instead."),element.addClass(attrs.windowClass||""),element.addClass(attrs.windowTopClass||""),scope.size=attrs.size,scope.close=function(evt){var modal=$modalStack.getTop();modal&&modal.value.backdrop&&"static"!==modal.value.backdrop&&evt.target===evt.currentTarget&&(evt.preventDefault(),evt.stopPropagation(),$modalStack.dismiss(modal.key,"backdrop click"))},element.on("click",scope.close),scope.$isRendered=!0;var modalRenderDeferObj=$q.defer();attrs.$observe("modalRender",function(value){"true"==value&&modalRenderDeferObj.resolve()}),modalRenderDeferObj.promise.then(function(){var animationPromise=null;attrs.modalInClass&&(animationPromise=$animateCss?$animateCss(element,{addClass:attrs.modalInClass}).start():$animate.addClass(element,attrs.modalInClass),scope.$on($modalStack.NOW_CLOSING_EVENT,function(e,setIsAsync){var done=setIsAsync();$animateCss?$animateCss(element,{removeClass:attrs.modalInClass}).start().then(done):$animate.removeClass(element,attrs.modalInClass).then(done)})),$q.when(animationPromise).then(function(){var inputWithAutofocus=element[0].querySelector("[autofocus]");inputWithAutofocus?inputWithAutofocus.focus():element[0].focus()});var modal=$modalStack.getTop();modal&&$modalStack.modalRendered(modal.key)})}}}]).directive("modalAnimationClass",["$log","$modalSuppressWarning",function($log,$modalSuppressWarning){return{compile:function(tElement,tAttrs){$modalSuppressWarning||$log.warn("modal-animation-class is now deprecated. Use uib-modal-animation-class instead."),tAttrs.modalAnimation&&tElement.addClass(tAttrs.modalAnimationClass)}}}]).directive("modalTransclude",["$log","$modalSuppressWarning",function($log,$modalSuppressWarning){return{link:function($scope,$element,$attrs,controller,$transclude){$modalSuppressWarning||$log.warn("modal-transclude is now deprecated. Use uib-modal-transclude instead."),$transclude($scope.$parent,function(clone){$element.empty(),$element.append(clone)})}}}]).service("$modalStack",["$animate","$timeout","$document","$compile","$rootScope","$q","$injector","$$multiMap","$$stackedMap","$uibModalStack","$log","$modalSuppressWarning",function($animate,$timeout,$document,$compile,$rootScope,$q,$injector,$$multiMap,$$stackedMap,$uibModalStack,$log,$modalSuppressWarning){$modalSuppressWarning||$log.warn("$modalStack is now deprecated. Use $uibModalStack instead."),angular.extend(this,$uibModalStack)}]).provider("$modal",["$uibModalProvider",function($uibModalProvider){angular.extend(this,$uibModalProvider),this.$get=["$injector","$log","$modalSuppressWarning",function($injector,$log,$modalSuppressWarning){return $modalSuppressWarning||$log.warn("$modal is now deprecated. Use $uibModal instead."),$injector.invoke($uibModalProvider.$get)}]}]),angular.module("ui.bootstrap.pagination",[]).controller("UibPaginationController",["$scope","$attrs","$parse",function($scope,$attrs,$parse){var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_,this.config=config,ngModelCtrl.$render=function(){self.render()},$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage,$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()}),$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value),$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()})},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page,evt){evt&&evt.preventDefault();var clickAllowed=!$scope.ngDisabled||!evt;clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages&&(evt&&evt.target&&evt.target.blur(),ngModelCtrl.$setViewValue(page),ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||self.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("uibPagination",["$parse","uibPaginationConfig",function($parse,paginationConfig){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(scope,element,attrs,ctrls){function makePage(number,text,isActive){return{number:number,text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&totalPages>maxSize;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;endPage>=number;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(totalPages>endPage){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}}return pages}var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){var maxSize=angular.isDefined(attrs.maxSize)?scope.$parent.$eval(attrs.maxSize):paginationConfig.maxSize,rotate=angular.isDefined(attrs.rotate)?scope.$parent.$eval(attrs.rotate):paginationConfig.rotate;scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks,scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):paginationConfig.directionLinks,paginationCtrl.init(ngModelCtrl,paginationConfig),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10),paginationCtrl.render()});var originalRender=paginationCtrl.render;paginationCtrl.render=function(){originalRender(),scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}}}}}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("uibPager",["uibPagerConfig",function(pagerConfig){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(scope,element,attrs,ctrls){var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&(scope.align=angular.isDefined(attrs.align)?scope.$parent.$eval(attrs.align):pagerConfig.align,paginationCtrl.init(ngModelCtrl,pagerConfig))}}}]),angular.module("ui.bootstrap.pagination").value("$paginationSuppressWarning",!1).controller("PaginationController",["$scope","$attrs","$parse","$log","$paginationSuppressWarning",function($scope,$attrs,$parse,$log,$paginationSuppressWarning){$paginationSuppressWarning||$log.warn("PaginationController is now deprecated. Use UibPaginationController instead.");var self=this,ngModelCtrl={$setViewValue:angular.noop},setNumPages=$attrs.numPages?$parse($attrs.numPages).assign:angular.noop;this.init=function(ngModelCtrl_,config){ngModelCtrl=ngModelCtrl_,this.config=config,ngModelCtrl.$render=function(){self.render()},$attrs.itemsPerPage?$scope.$parent.$watch($parse($attrs.itemsPerPage),function(value){self.itemsPerPage=parseInt(value,10),$scope.totalPages=self.calculateTotalPages()}):this.itemsPerPage=config.itemsPerPage,$scope.$watch("totalItems",function(){$scope.totalPages=self.calculateTotalPages()}),$scope.$watch("totalPages",function(value){setNumPages($scope.$parent,value),$scope.page>value?$scope.selectPage(value):ngModelCtrl.$render()})},this.calculateTotalPages=function(){var totalPages=this.itemsPerPage<1?1:Math.ceil($scope.totalItems/this.itemsPerPage);return Math.max(totalPages||0,1)},this.render=function(){$scope.page=parseInt(ngModelCtrl.$viewValue,10)||1},$scope.selectPage=function(page,evt){evt&&evt.preventDefault();var clickAllowed=!$scope.ngDisabled||!evt;clickAllowed&&$scope.page!==page&&page>0&&page<=$scope.totalPages&&(evt&&evt.target&&evt.target.blur(),ngModelCtrl.$setViewValue(page),ngModelCtrl.$render())},$scope.getText=function(key){return $scope[key+"Text"]||self.config[key+"Text"]},$scope.noPrevious=function(){return 1===$scope.page},$scope.noNext=function(){return $scope.page===$scope.totalPages}}]).directive("pagination",["$parse","uibPaginationConfig","$log","$paginationSuppressWarning",function($parse,paginationConfig,$log,$paginationSuppressWarning){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["pagination","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"template/pagination/pagination.html"},replace:!0,link:function(scope,element,attrs,ctrls){function makePage(number,text,isActive){return{number:number,
text:text,active:isActive}}function getPages(currentPage,totalPages){var pages=[],startPage=1,endPage=totalPages,isMaxSized=angular.isDefined(maxSize)&&totalPages>maxSize;isMaxSized&&(rotate?(startPage=Math.max(currentPage-Math.floor(maxSize/2),1),endPage=startPage+maxSize-1,endPage>totalPages&&(endPage=totalPages,startPage=endPage-maxSize+1)):(startPage=(Math.ceil(currentPage/maxSize)-1)*maxSize+1,endPage=Math.min(startPage+maxSize-1,totalPages)));for(var number=startPage;endPage>=number;number++){var page=makePage(number,number,number===currentPage);pages.push(page)}if(isMaxSized&&!rotate){if(startPage>1){var previousPageSet=makePage(startPage-1,"...",!1);pages.unshift(previousPageSet)}if(totalPages>endPage){var nextPageSet=makePage(endPage+1,"...",!1);pages.push(nextPageSet)}}return pages}$paginationSuppressWarning||$log.warn("pagination is now deprecated. Use uib-pagination instead.");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];if(ngModelCtrl){var maxSize=angular.isDefined(attrs.maxSize)?scope.$parent.$eval(attrs.maxSize):paginationConfig.maxSize,rotate=angular.isDefined(attrs.rotate)?scope.$parent.$eval(attrs.rotate):paginationConfig.rotate;scope.boundaryLinks=angular.isDefined(attrs.boundaryLinks)?scope.$parent.$eval(attrs.boundaryLinks):paginationConfig.boundaryLinks,scope.directionLinks=angular.isDefined(attrs.directionLinks)?scope.$parent.$eval(attrs.directionLinks):paginationConfig.directionLinks,paginationCtrl.init(ngModelCtrl,paginationConfig),attrs.maxSize&&scope.$parent.$watch($parse(attrs.maxSize),function(value){maxSize=parseInt(value,10),paginationCtrl.render()});var originalRender=paginationCtrl.render;paginationCtrl.render=function(){originalRender(),scope.page>0&&scope.page<=scope.totalPages&&(scope.pages=getPages(scope.page,scope.totalPages))}}}}}]).directive("pager",["uibPagerConfig","$log","$paginationSuppressWarning",function(pagerConfig,$log,$paginationSuppressWarning){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["pager","?ngModel"],controller:"PaginationController",controllerAs:"pagination",templateUrl:function(element,attrs){return attrs.templateUrl||"template/pagination/pager.html"},replace:!0,link:function(scope,element,attrs,ctrls){$paginationSuppressWarning||$log.warn("pager is now deprecated. Use uib-pager instead.");var paginationCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&(scope.align=angular.isDefined(attrs.align)?scope.$parent.$eval(attrs.align):pagerConfig.align,paginationCtrl.init(ngModelCtrl,pagerConfig))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function snake_case(name){var regexp=/[A-Z]/g,separator="-";return name.replace(regexp,function(letter,pos){return(pos?separator:"")+letter.toLowerCase()})}var defaultOptions={placement:"top",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},triggerMap={mouseenter:"mouseleave",click:"click",focus:"blur",none:""},globalOptions={};this.options=function(value){angular.extend(globalOptions,value)},this.setTriggers=function(triggers){angular.extend(triggerMap,triggers)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function($window,$compile,$timeout,$document,$position,$interpolate,$rootScope,$parse,$$stackedMap){var openedTooltips=$$stackedMap.createNew();return $document.on("keypress",function(e){if(27===e.which){var last=openedTooltips.top();last&&(last.value.close(),openedTooltips.removeTop(),last=null)}}),function(ttType,prefix,defaultTriggerShow,options){function getTriggers(trigger){var show=(trigger||options.trigger||defaultTriggerShow).split(" "),hide=show.map(function(trigger){return triggerMap[trigger]||trigger});return{show:show,hide:hide}}options=angular.extend({},defaultOptions,globalOptions,options);var directiveName=snake_case(ttType),startSym=$interpolate.startSymbol(),endSym=$interpolate.endSymbol(),template="<div "+directiveName+'-popup title="'+startSym+"title"+endSym+'" '+(options.useContentExp?'content-exp="contentExp()" ':'content="'+startSym+"content"+endSym+'" ')+'placement="'+startSym+"placement"+endSym+'" popup-class="'+startSym+"popupClass"+endSym+'" animation="animation" is-open="isOpen"origin-scope="origScope" style="visibility: hidden; display: block; top: -9999px; left: -9999px;"></div>';return{compile:function(tElem,tAttrs){var tooltipLinker=$compile(template);return function(scope,element,attrs,tooltipCtrl){function toggleTooltipBind(){ttScope.isOpen?hideTooltipBind():showTooltipBind()}function showTooltipBind(){(!hasEnableExp||scope.$eval(attrs[prefix+"Enable"]))&&(cancelHide(),prepareTooltip(),ttScope.popupDelay?showTimeout||(showTimeout=$timeout(show,ttScope.popupDelay,!1)):show())}function hideTooltipBind(){cancelShow(),ttScope.popupCloseDelay?hideTimeout||(hideTimeout=$timeout(hide,ttScope.popupCloseDelay,!1)):hide()}function show(){return cancelShow(),cancelHide(),ttScope.content?(createTooltip(),void ttScope.$evalAsync(function(){ttScope.isOpen=!0,assignIsOpen(!0),positionTooltip()})):angular.noop}function cancelShow(){showTimeout&&($timeout.cancel(showTimeout),showTimeout=null),positionTimeout&&($timeout.cancel(positionTimeout),positionTimeout=null)}function hide(){cancelShow(),cancelHide(),ttScope&&ttScope.$evalAsync(function(){ttScope.isOpen=!1,assignIsOpen(!1),ttScope.animation?transitionTimeout||(transitionTimeout=$timeout(removeTooltip,150,!1)):removeTooltip()})}function cancelHide(){hideTimeout&&($timeout.cancel(hideTimeout),hideTimeout=null),transitionTimeout&&($timeout.cancel(transitionTimeout),transitionTimeout=null)}function createTooltip(){tooltip||(tooltipLinkedScope=ttScope.$new(),tooltip=tooltipLinker(tooltipLinkedScope,function(tooltip){appendToBody?$document.find("body").append(tooltip):element.after(tooltip)}),prepObservers())}function removeTooltip(){unregisterObservers(),transitionTimeout=null,tooltip&&(tooltip.remove(),tooltip=null),tooltipLinkedScope&&(tooltipLinkedScope.$destroy(),tooltipLinkedScope=null)}function prepareTooltip(){ttScope.title=attrs[prefix+"Title"],contentParse?ttScope.content=contentParse(scope):ttScope.content=attrs[ttType],ttScope.popupClass=attrs[prefix+"Class"],ttScope.placement=angular.isDefined(attrs[prefix+"Placement"])?attrs[prefix+"Placement"]:options.placement;var delay=parseInt(attrs[prefix+"PopupDelay"],10),closeDelay=parseInt(attrs[prefix+"PopupCloseDelay"],10);ttScope.popupDelay=isNaN(delay)?options.popupDelay:delay,ttScope.popupCloseDelay=isNaN(closeDelay)?options.popupCloseDelay:closeDelay}function assignIsOpen(isOpen){isOpenParse&&angular.isFunction(isOpenParse.assign)&&isOpenParse.assign(scope,isOpen)}function prepObservers(){observers.length=0,contentParse?(observers.push(scope.$watch(contentParse,function(val){ttScope.content=val,!val&&ttScope.isOpen&&hide()})),observers.push(tooltipLinkedScope.$watch(function(){repositionScheduled||(repositionScheduled=!0,tooltipLinkedScope.$$postDigest(function(){repositionScheduled=!1,ttScope&&ttScope.isOpen&&positionTooltip()}))}))):observers.push(attrs.$observe(ttType,function(val){ttScope.content=val,!val&&ttScope.isOpen?hide():positionTooltip()})),observers.push(attrs.$observe(prefix+"Title",function(val){ttScope.title=val,ttScope.isOpen&&positionTooltip()})),observers.push(attrs.$observe(prefix+"Placement",function(val){ttScope.placement=val?val:options.placement,ttScope.isOpen&&positionTooltip()}))}function unregisterObservers(){observers.length&&(angular.forEach(observers,function(observer){observer()}),observers.length=0)}function prepTriggers(){var val=attrs[prefix+"Trigger"];unregisterTriggers(),triggers=getTriggers(val),"none"!==triggers.show&&triggers.show.forEach(function(trigger,idx){trigger===triggers.hide[idx]?element[0].addEventListener(trigger,toggleTooltipBind):trigger&&(element[0].addEventListener(trigger,showTooltipBind),triggers.hide[idx].split(" ").forEach(function(trigger){element[0].addEventListener(trigger,hideTooltipBind)})),element.on("keypress",function(e){27===e.which&&hideTooltipBind()})})}var tooltip,tooltipLinkedScope,transitionTimeout,showTimeout,hideTimeout,positionTimeout,appendToBody=angular.isDefined(options.appendToBody)?options.appendToBody:!1,triggers=getTriggers(void 0),hasEnableExp=angular.isDefined(attrs[prefix+"Enable"]),ttScope=scope.$new(!0),repositionScheduled=!1,isOpenParse=angular.isDefined(attrs[prefix+"IsOpen"])?$parse(attrs[prefix+"IsOpen"]):!1,contentParse=options.useContentExp?$parse(attrs[ttType]):!1,observers=[],positionTooltip=function(){tooltip&&tooltip.html()&&(positionTimeout||(positionTimeout=$timeout(function(){tooltip.css({top:0,left:0});var ttCss=$position.positionElements(element,tooltip,ttScope.placement,appendToBody);ttCss.top+="px",ttCss.left+="px",ttCss.visibility="visible",tooltip.css(ttCss),positionTimeout=null},0,!1)))};ttScope.origScope=scope,ttScope.isOpen=!1,openedTooltips.add(ttScope,{close:hide}),ttScope.contentExp=function(){return ttScope.content},attrs.$observe("disabled",function(val){val&&cancelShow(),val&&ttScope.isOpen&&hide()}),isOpenParse&&scope.$watch(isOpenParse,function(val){ttScope&&!val===ttScope.isOpen&&toggleTooltipBind()});var unregisterTriggers=function(){triggers.show.forEach(function(trigger){element.unbind(trigger,showTooltipBind)}),triggers.hide.forEach(function(trigger){trigger.split(" ").forEach(function(hideTrigger){element[0].removeEventListener(hideTrigger,hideTooltipBind)})})};prepTriggers();var animation=scope.$eval(attrs[prefix+"Animation"]);ttScope.animation=angular.isDefined(animation)?!!animation:options.animation;var appendToBodyVal=scope.$eval(attrs[prefix+"AppendToBody"]);appendToBody=angular.isDefined(appendToBodyVal)?appendToBodyVal:appendToBody,appendToBody&&scope.$on("$locationChangeSuccess",function(){ttScope.isOpen&&hide()}),scope.$on("$destroy",function(){cancelShow(),cancelHide(),unregisterTriggers(),removeTooltip(),openedTooltips.remove(ttScope),ttScope=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function($animate,$sce,$compile,$templateRequest){return{link:function(scope,elem,attrs){var currentScope,previousElement,currentElement,origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope),changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(attrs.uibTooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=origScope.$new(),template=response,clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,elem)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):cleanupLastIncludeContent()}),scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("uibTooltipClasses",function(){return{restrict:"A",link:function(scope,element,attrs){scope.placement&&element.addClass(scope.placement),scope.popupClass&&element.addClass(scope.popupClass),scope.animation()&&element.addClass(attrs.tooltipAnimationClass)}}}).directive("uibTooltipPopup",function(){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(scope,element){element.addClass("tooltip")}}}).directive("uibTooltip",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(scope,element){element.addClass("tooltip")}}}).directive("uibTooltipTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(scope,element){element.addClass("tooltip")}}}).directive("uibTooltipHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.tooltip").value("$tooltipSuppressWarning",!1).provider("$tooltip",["$uibTooltipProvider",function($uibTooltipProvider){angular.extend(this,$uibTooltipProvider),this.$get=["$log","$tooltipSuppressWarning","$injector",function($log,$tooltipSuppressWarning,$injector){return $tooltipSuppressWarning||$log.warn("$tooltip is now deprecated. Use $uibTooltip instead."),$injector.invoke($uibTooltipProvider.$get)}]}]).directive("tooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest","$log","$tooltipSuppressWarning",function($animate,$sce,$compile,$templateRequest,$log,$tooltipSuppressWarning){return{link:function(scope,elem,attrs){$tooltipSuppressWarning||$log.warn("tooltip-template-transclude is now deprecated. Use uib-tooltip-template-transclude instead.");var currentScope,previousElement,currentElement,origScope=scope.$eval(attrs.tooltipTemplateTranscludeScope),changeCounter=0,cleanupLastIncludeContent=function(){previousElement&&(previousElement.remove(),previousElement=null),currentScope&&(currentScope.$destroy(),currentScope=null),currentElement&&($animate.leave(currentElement).then(function(){previousElement=null}),previousElement=currentElement,currentElement=null)};scope.$watch($sce.parseAsResourceUrl(attrs.tooltipTemplateTransclude),function(src){var thisChangeId=++changeCounter;src?($templateRequest(src,!0).then(function(response){if(thisChangeId===changeCounter){var newScope=origScope.$new(),template=response,clone=$compile(template)(newScope,function(clone){cleanupLastIncludeContent(),$animate.enter(clone,elem)});currentScope=newScope,currentElement=clone,currentScope.$emit("$includeContentLoaded",src)}},function(){thisChangeId===changeCounter&&(cleanupLastIncludeContent(),scope.$emit("$includeContentError",src))}),scope.$emit("$includeContentRequested",src)):cleanupLastIncludeContent()}),scope.$on("$destroy",cleanupLastIncludeContent)}}}]).directive("tooltipClasses",["$log","$tooltipSuppressWarning",function($log,$tooltipSuppressWarning){return{restrict:"A",link:function(scope,element,attrs){$tooltipSuppressWarning||$log.warn("tooltip-classes is now deprecated. Use uib-tooltip-classes instead."),scope.placement&&element.addClass(scope.placement),scope.popupClass&&element.addClass(scope.popupClass),scope.animation()&&element.addClass(attrs.tooltipAnimationClass)}}}]).directive("tooltipPopup",["$log","$tooltipSuppressWarning",function($log,$tooltipSuppressWarning){return{replace:!0,scope:{content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html",link:function(scope,element){$tooltipSuppressWarning||$log.warn("tooltip-popup is now deprecated. Use uib-tooltip-popup instead."),element.addClass("tooltip")}}}]).directive("tooltip",["$tooltip",function($tooltip){return $tooltip("tooltip","tooltip","mouseenter")}]).directive("tooltipTemplatePopup",["$log","$tooltipSuppressWarning",function($log,$tooltipSuppressWarning){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/tooltip/tooltip-template-popup.html",link:function(scope,element){$tooltipSuppressWarning||$log.warn("tooltip-template-popup is now deprecated. Use uib-tooltip-template-popup instead."),element.addClass("tooltip")}}}]).directive("tooltipTemplate",["$tooltip",function($tooltip){return $tooltip("tooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("tooltipHtmlPopup",["$log","$tooltipSuppressWarning",function($log,$tooltipSuppressWarning){return{replace:!0,scope:{contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-popup.html",link:function(scope,element){$tooltipSuppressWarning||$log.warn("tooltip-html-popup is now deprecated. Use uib-tooltip-html-popup instead."),element.addClass("tooltip")}}}]).directive("tooltipHtml",["$tooltip",function($tooltip){return $tooltip("tooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(scope,element){element.addClass("popover")}}}).directive("uibPopoverTemplate",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(scope,element){element.addClass("popover")}}}).directive("uibPopoverHtml",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(scope,element){element.addClass("popover")}}}).directive("uibPopover",["$uibTooltip",function($uibTooltip){return $uibTooltip("uibPopover","popover","click")}]),angular.module("ui.bootstrap.popover").value("$popoverSuppressWarning",!1).directive("popoverTemplatePopup",["$log","$popoverSuppressWarning",function($log,$popoverSuppressWarning){return{replace:!0,scope:{title:"@",contentExp:"&",placement:"@",popupClass:"@",animation:"&",isOpen:"&",originScope:"&"},templateUrl:"template/popover/popover-template.html",link:function(scope,element){$popoverSuppressWarning||$log.warn("popover-template-popup is now deprecated. Use uib-popover-template-popup instead."),element.addClass("popover")}}}]).directive("popoverTemplate",["$tooltip",function($tooltip){return $tooltip("popoverTemplate","popover","click",{useContentExp:!0})}]).directive("popoverHtmlPopup",["$log","$popoverSuppressWarning",function($log,$popoverSuppressWarning){return{replace:!0,scope:{contentExp:"&",title:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover-html.html",link:function(scope,element){$popoverSuppressWarning||$log.warn("popover-html-popup is now deprecated. Use uib-popover-html-popup instead."),element.addClass("popover")}}}]).directive("popoverHtml",["$tooltip",function($tooltip){return $tooltip("popoverHtml","popover","click",{useContentExp:!0})}]).directive("popoverPopup",["$log","$popoverSuppressWarning",function($log,$popoverSuppressWarning){return{replace:!0,scope:{title:"@",content:"@",placement:"@",popupClass:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html",link:function(scope,element){$popoverSuppressWarning||$log.warn("popover-popup is now deprecated. Use uib-popover-popup instead."),element.addClass("popover")}}}]).directive("popover",["$tooltip",function($tooltip){return $tooltip("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function($scope,$attrs,progressConfig){var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=angular.isDefined($scope.max)?$scope.max:progressConfig.max,this.addBar=function(bar,element,attrs){animate||element.css({transition:"none"}),this.bars.push(bar),bar.max=$scope.max,bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar",bar.$watch("value",function(value){bar.recalculatePercentage()}),bar.recalculatePercentage=function(){var totalPercentage=self.bars.reduce(function(total,bar){return bar.percent=+(100*bar.value/bar.max).toFixed(2),total+bar.percent},0);totalPercentage>100&&(bar.percent-=totalPercentage-100)},bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1),this.bars.forEach(function(bar){bar.recalculatePercentage()})},$scope.$watch("max",function(max){self.bars.forEach(function(bar){bar.max=$scope.max,bar.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{max:"=?"},templateUrl:"template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,element,attrs)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}}),angular.module("ui.bootstrap.progressbar").value("$progressSuppressWarning",!1).controller("ProgressController",["$scope","$attrs","uibProgressConfig","$log","$progressSuppressWarning",function($scope,$attrs,progressConfig,$log,$progressSuppressWarning){$progressSuppressWarning||$log.warn("ProgressController is now deprecated. Use UibProgressController instead.");var self=this,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.bars=[],$scope.max=angular.isDefined($scope.max)?$scope.max:progressConfig.max,this.addBar=function(bar,element,attrs){animate||element.css({transition:"none"}),this.bars.push(bar),bar.max=$scope.max,bar.title=attrs&&angular.isDefined(attrs.title)?attrs.title:"progressbar",bar.$watch("value",function(value){bar.recalculatePercentage()}),bar.recalculatePercentage=function(){bar.percent=+(100*bar.value/bar.max).toFixed(2);var totalPercentage=self.bars.reduce(function(total,bar){return total+bar.percent},0);totalPercentage>100&&(bar.percent-=totalPercentage-100)},bar.$on("$destroy",function(){element=null,self.removeBar(bar)})},this.removeBar=function(bar){this.bars.splice(this.bars.indexOf(bar),1)},$scope.$watch("max",function(max){self.bars.forEach(function(bar){bar.max=$scope.max,bar.recalculatePercentage()})})}]).directive("progress",["$log","$progressSuppressWarning",function($log,$progressSuppressWarning){return{replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{max:"=?",title:"@?"},templateUrl:"template/progressbar/progress.html",link:function(){$progressSuppressWarning||$log.warn("progress is now deprecated. Use uib-progress instead.")}}}]).directive("bar",["$log","$progressSuppressWarning",function($log,$progressSuppressWarning){return{replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(scope,element,attrs,progressCtrl){$progressSuppressWarning||$log.warn("bar is now deprecated. Use uib-bar instead."),progressCtrl.addBar(scope,element)}}}]).directive("progressbar",["$log","$progressSuppressWarning",function($log,$progressSuppressWarning){return{replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",max:"=?",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(scope,element,attrs,progressCtrl){$progressSuppressWarning||$log.warn("progressbar is now deprecated. Use uib-progressbar instead."),progressCtrl.addBar(scope,angular.element(element.children()[0]),{title:attrs.title})}}}]),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function($scope,$attrs,ratingConfig){var ngModelCtrl={$setViewValue:angular.noop};this.init=function(ngModelCtrl_){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.push(function(value){return angular.isNumber(value)&&value<<0!==value&&(value=Math.round(value)),value}),this.stateOn=angular.isDefined($attrs.stateOn)?$scope.$parent.$eval($attrs.stateOn):ratingConfig.stateOn,this.stateOff=angular.isDefined($attrs.stateOff)?$scope.$parent.$eval($attrs.stateOff):ratingConfig.stateOff;var tmpTitles=angular.isDefined($attrs.titles)?$scope.$parent.$eval($attrs.titles):ratingConfig.titles;this.titles=angular.isArray(tmpTitles)&&tmpTitles.length>0?tmpTitles:ratingConfig.titles;var ratingStates=angular.isDefined($attrs.ratingStates)?$scope.$parent.$eval($attrs.ratingStates):new Array(angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):ratingConfig.max);$scope.range=this.buildTemplateObjects(ratingStates)},this.buildTemplateObjects=function(states){for(var i=0,n=states.length;n>i;i++)states[i]=angular.extend({index:i},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(i)},states[i]);return states},this.getTitle=function(index){return index>=this.titles.length?index+1:this.titles[index]},$scope.rate=function(value){!$scope.readonly&&value>=0&&value<=$scope.range.length&&(ngModelCtrl.$setViewValue(ngModelCtrl.$viewValue===value?0:value),ngModelCtrl.$render())},$scope.enter=function(value){$scope.readonly||($scope.value=value),$scope.onHover({value:value})},$scope.reset=function(){$scope.value=ngModelCtrl.$viewValue,$scope.onLeave()},$scope.onKeydown=function(evt){/(37|38|39|40)/.test(evt.which)&&(evt.preventDefault(),evt.stopPropagation(),$scope.rate($scope.value+(38===evt.which||39===evt.which?1:-1)))},this.render=function(){$scope.value=ngModelCtrl.$viewValue}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(scope,element,attrs,ctrls){var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}}),angular.module("ui.bootstrap.rating").value("$ratingSuppressWarning",!1).controller("RatingController",["$scope","$attrs","$controller","$log","$ratingSuppressWarning",function($scope,$attrs,$controller,$log,$ratingSuppressWarning){$ratingSuppressWarning||$log.warn("RatingController is now deprecated. Use UibRatingController instead."),angular.extend(this,$controller("UibRatingController",{$scope:$scope,$attrs:$attrs}))}]).directive("rating",["$log","$ratingSuppressWarning",function($log,$ratingSuppressWarning){return{require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(scope,element,attrs,ctrls){$ratingSuppressWarning||$log.warn("rating is now deprecated. Use uib-rating instead.");var ratingCtrl=ctrls[0],ngModelCtrl=ctrls[1];ratingCtrl.init(ngModelCtrl)}}}]),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function($scope){var ctrl=this,tabs=ctrl.tabs=$scope.tabs=[];ctrl.select=function(selectedTab){angular.forEach(tabs,function(tab){tab.active&&tab!==selectedTab&&(tab.active=!1,tab.onDeselect(),selectedTab.selectCalled=!1)}),selectedTab.active=!0,selectedTab.selectCalled||(selectedTab.onSelect(),selectedTab.selectCalled=!0)},ctrl.addTab=function(tab){tabs.push(tab),1===tabs.length&&tab.active!==!1?tab.active=!0:tab.active?ctrl.select(tab):tab.active=!1},ctrl.removeTab=function(tab){var index=tabs.indexOf(tab);if(tab.active&&tabs.length>1&&!destroyed){var newActiveIndex=index==tabs.length-1?index-1:index+1;ctrl.select(tabs[newActiveIndex])}tabs.splice(index,1)};var destroyed;$scope.$on("$destroy",function(){destroyed=!0})}]).directive("uibTabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"UibTabsetController",templateUrl:"template/tabs/tabset.html",link:function(scope,element,attrs){scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):!1,scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):!1}}}).directive("uibTab",["$parse",function($parse){return{require:"^uibTabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(scope,elm,attrs,tabsetCtrl,transclude){scope.$watch("active",function(active){active&&tabsetCtrl.select(scope)}),scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value}),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:["?^uibTab","?^tab"],link:function(scope,elm){scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}).directive("uibTabContentTransclude",function(){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||node.hasAttribute("x-tab-heading")||node.hasAttribute("uib-tab-heading")||node.hasAttribute("data-uib-tab-heading")||node.hasAttribute("x-uib-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase()||"x-tab-heading"===node.tagName.toLowerCase()||"uib-tab-heading"===node.tagName.toLowerCase()||"data-uib-tab-heading"===node.tagName.toLowerCase()||"x-uib-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:["?^uibTabset","?^tabset"],link:function(scope,elm,attrs){var tab=scope.$eval(attrs.uibTabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}),angular.module("ui.bootstrap.tabs").value("$tabsSuppressWarning",!1).controller("TabsetController",["$scope","$controller","$log","$tabsSuppressWarning",function($scope,$controller,$log,$tabsSuppressWarning){$tabsSuppressWarning||$log.warn("TabsetController is now deprecated. Use UibTabsetController instead."),angular.extend(this,$controller("UibTabsetController",{$scope:$scope}))}]).directive("tabset",["$log","$tabsSuppressWarning",function($log,$tabsSuppressWarning){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(scope,element,attrs){$tabsSuppressWarning||$log.warn("tabset is now deprecated. Use uib-tabset instead."),scope.vertical=angular.isDefined(attrs.vertical)?scope.$parent.$eval(attrs.vertical):!1,scope.justified=angular.isDefined(attrs.justified)?scope.$parent.$eval(attrs.justified):!1}}}]).directive("tab",["$parse","$log","$tabsSuppressWarning",function($parse,$log,$tabsSuppressWarning){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},link:function(scope,elm,attrs,tabsetCtrl,transclude){$tabsSuppressWarning||$log.warn("tab is now deprecated. Use uib-tab instead."),scope.$watch("active",function(active){active&&tabsetCtrl.select(scope);
}),scope.disabled=!1,attrs.disable&&scope.$parent.$watch($parse(attrs.disable),function(value){scope.disabled=!!value}),scope.select=function(){scope.disabled||(scope.active=!0)},tabsetCtrl.addTab(scope),scope.$on("$destroy",function(){tabsetCtrl.removeTab(scope)}),scope.$transcludeFn=transclude}}}]).directive("tabHeadingTransclude",["$log","$tabsSuppressWarning",function($log,$tabsSuppressWarning){return{restrict:"A",require:"^tab",link:function(scope,elm){$tabsSuppressWarning||$log.warn("tab-heading-transclude is now deprecated. Use uib-tab-heading-transclude instead."),scope.$watch("headingElement",function(heading){heading&&(elm.html(""),elm.append(heading))})}}}]).directive("tabContentTransclude",["$log","$tabsSuppressWarning",function($log,$tabsSuppressWarning){function isTabHeading(node){return node.tagName&&(node.hasAttribute("tab-heading")||node.hasAttribute("data-tab-heading")||node.hasAttribute("x-tab-heading")||"tab-heading"===node.tagName.toLowerCase()||"data-tab-heading"===node.tagName.toLowerCase()||"x-tab-heading"===node.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(scope,elm,attrs){$tabsSuppressWarning||$log.warn("tab-content-transclude is now deprecated. Use uib-tab-content-transclude instead.");var tab=scope.$eval(attrs.tabContentTransclude);tab.$transcludeFn(tab.$parent,function(contents){angular.forEach(contents,function(node){isTabHeading(node)?tab.headingElement=node:elm.append(node)})})}}}]),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function($scope,$element,$attrs,$parse,$log,$locale,timepickerConfig){function getHoursFromTemplate(){var hours=parseInt($scope.hours,10),valid=$scope.showMeridian?hours>0&&13>hours:hours>=0&&24>hours;return valid?($scope.showMeridian&&(12===hours&&(hours=0),$scope.meridian===meridians[1]&&(hours+=12)),hours):void 0}function getMinutesFromTemplate(){var minutes=parseInt($scope.minutes,10);return minutes>=0&&60>minutes?minutes:void 0}function pad(value){return angular.isDefined(value)&&value.toString().length<2?"0"+value:value.toString()}function refresh(keyboardChange){makeValid(),ngModelCtrl.$setViewValue(new Date(selected)),updateTemplate(keyboardChange)}function makeValid(){ngModelCtrl.$setValidity("time",!0),$scope.invalidHours=!1,$scope.invalidMinutes=!1}function updateTemplate(keyboardChange){var hours=selected.getHours(),minutes=selected.getMinutes();$scope.showMeridian&&(hours=0===hours||12===hours?12:hours%12),$scope.hours="h"===keyboardChange?hours:pad(hours),"m"!==keyboardChange&&($scope.minutes=pad(minutes)),$scope.meridian=selected.getHours()<12?meridians[0]:meridians[1]}function addMinutes(date,minutes){var dt=new Date(date.getTime()+6e4*minutes),newDate=new Date(date);return newDate.setHours(dt.getHours(),dt.getMinutes()),newDate}function addMinutesToSelected(minutes){selected=addMinutes(selected,minutes),refresh()}var selected=new Date,ngModelCtrl={$setViewValue:angular.noop},meridians=angular.isDefined($attrs.meridians)?$scope.$parent.$eval($attrs.meridians):timepickerConfig.meridians||$locale.DATETIME_FORMATS.AMPMS;$scope.tabindex=angular.isDefined($attrs.tabindex)?$attrs.tabindex:0,$element.removeAttr("tabindex"),this.init=function(ngModelCtrl_,inputs){ngModelCtrl=ngModelCtrl_,ngModelCtrl.$render=this.render,ngModelCtrl.$formatters.unshift(function(modelValue){return modelValue?new Date(modelValue):null});var hoursInputEl=inputs.eq(0),minutesInputEl=inputs.eq(1),mousewheel=angular.isDefined($attrs.mousewheel)?$scope.$parent.$eval($attrs.mousewheel):timepickerConfig.mousewheel;mousewheel&&this.setupMousewheelEvents(hoursInputEl,minutesInputEl);var arrowkeys=angular.isDefined($attrs.arrowkeys)?$scope.$parent.$eval($attrs.arrowkeys):timepickerConfig.arrowkeys;arrowkeys&&this.setupArrowkeyEvents(hoursInputEl,minutesInputEl),$scope.readonlyInput=angular.isDefined($attrs.readonlyInput)?$scope.$parent.$eval($attrs.readonlyInput):timepickerConfig.readonlyInput,this.setupInputEvents(hoursInputEl,minutesInputEl)};var hourStep=timepickerConfig.hourStep;$attrs.hourStep&&$scope.$parent.$watch($parse($attrs.hourStep),function(value){hourStep=parseInt(value,10)});var minuteStep=timepickerConfig.minuteStep;$attrs.minuteStep&&$scope.$parent.$watch($parse($attrs.minuteStep),function(value){minuteStep=parseInt(value,10)});var min;$scope.$parent.$watch($parse($attrs.min),function(value){var dt=new Date(value);min=isNaN(dt)?void 0:dt});var max;$scope.$parent.$watch($parse($attrs.max),function(value){var dt=new Date(value);max=isNaN(dt)?void 0:dt}),$scope.noIncrementHours=function(){var incrementedSelected=addMinutes(selected,60*hourStep);return incrementedSelected>max||selected>incrementedSelected&&min>incrementedSelected},$scope.noDecrementHours=function(){var decrementedSelected=addMinutes(selected,60*-hourStep);return min>decrementedSelected||decrementedSelected>selected&&decrementedSelected>max},$scope.noIncrementMinutes=function(){var incrementedSelected=addMinutes(selected,minuteStep);return incrementedSelected>max||selected>incrementedSelected&&min>incrementedSelected},$scope.noDecrementMinutes=function(){var decrementedSelected=addMinutes(selected,-minuteStep);return min>decrementedSelected||decrementedSelected>selected&&decrementedSelected>max},$scope.noToggleMeridian=function(){return selected.getHours()<13?addMinutes(selected,720)>max:addMinutes(selected,-720)<min},$scope.showMeridian=timepickerConfig.showMeridian,$attrs.showMeridian&&$scope.$parent.$watch($parse($attrs.showMeridian),function(value){if($scope.showMeridian=!!value,ngModelCtrl.$error.time){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)&&(selected.setHours(hours),refresh())}else updateTemplate()}),this.setupMousewheelEvents=function(hoursInputEl,minutesInputEl){var isScrollingUp=function(e){e.originalEvent&&(e=e.originalEvent);var delta=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||delta>0};hoursInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementHours():$scope.decrementHours()),e.preventDefault()}),minutesInputEl.bind("mousewheel wheel",function(e){$scope.$apply(isScrollingUp(e)?$scope.incrementMinutes():$scope.decrementMinutes()),e.preventDefault()})},this.setupArrowkeyEvents=function(hoursInputEl,minutesInputEl){hoursInputEl.bind("keydown",function(e){38===e.which?(e.preventDefault(),$scope.incrementHours(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementHours(),$scope.$apply())}),minutesInputEl.bind("keydown",function(e){38===e.which?(e.preventDefault(),$scope.incrementMinutes(),$scope.$apply()):40===e.which&&(e.preventDefault(),$scope.decrementMinutes(),$scope.$apply())})},this.setupInputEvents=function(hoursInputEl,minutesInputEl){if($scope.readonlyInput)return $scope.updateHours=angular.noop,void($scope.updateMinutes=angular.noop);var invalidate=function(invalidHours,invalidMinutes){ngModelCtrl.$setViewValue(null),ngModelCtrl.$setValidity("time",!1),angular.isDefined(invalidHours)&&($scope.invalidHours=invalidHours),angular.isDefined(invalidMinutes)&&($scope.invalidMinutes=invalidMinutes)};$scope.updateHours=function(){var hours=getHoursFromTemplate(),minutes=getMinutesFromTemplate();angular.isDefined(hours)&&angular.isDefined(minutes)?(selected.setHours(hours),min>selected||selected>max?invalidate(!0):refresh("h")):invalidate(!0)},hoursInputEl.bind("blur",function(e){!$scope.invalidHours&&$scope.hours<10&&$scope.$apply(function(){$scope.hours=pad($scope.hours)})}),$scope.updateMinutes=function(){var minutes=getMinutesFromTemplate(),hours=getHoursFromTemplate();angular.isDefined(minutes)&&angular.isDefined(hours)?(selected.setMinutes(minutes),min>selected||selected>max?invalidate(void 0,!0):refresh("m")):invalidate(void 0,!0)},minutesInputEl.bind("blur",function(e){!$scope.invalidMinutes&&$scope.minutes<10&&$scope.$apply(function(){$scope.minutes=pad($scope.minutes)})})},this.render=function(){var date=ngModelCtrl.$viewValue;isNaN(date)?(ngModelCtrl.$setValidity("time",!1),$log.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(date&&(selected=date),min>selected||selected>max?(ngModelCtrl.$setValidity("time",!1),$scope.invalidHours=!0,$scope.invalidMinutes=!0):makeValid(),updateTemplate())},$scope.showSpinners=angular.isDefined($attrs.showSpinners)?$scope.$parent.$eval($attrs.showSpinners):timepickerConfig.showSpinners,$scope.incrementHours=function(){$scope.noIncrementHours()||addMinutesToSelected(60*hourStep)},$scope.decrementHours=function(){$scope.noDecrementHours()||addMinutesToSelected(60*-hourStep)},$scope.incrementMinutes=function(){$scope.noIncrementMinutes()||addMinutesToSelected(minuteStep)},$scope.decrementMinutes=function(){$scope.noDecrementMinutes()||addMinutesToSelected(-minuteStep)},$scope.toggleMeridian=function(){$scope.noToggleMeridian()||addMinutesToSelected(720*(selected.getHours()<12?1:-1))}}]).directive("uibTimepicker",function(){return{restrict:"EA",require:["uibTimepicker","?^ngModel"],controller:"UibTimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(element,attrs){return attrs.templateUrl||"template/timepicker/timepicker.html"},link:function(scope,element,attrs,ctrls){var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}),angular.module("ui.bootstrap.timepicker").value("$timepickerSuppressWarning",!1).controller("TimepickerController",["$scope","$element","$attrs","$controller","$log","$timepickerSuppressWarning",function($scope,$element,$attrs,$controller,$log,$timepickerSuppressWarning){$timepickerSuppressWarning||$log.warn("TimepickerController is now deprecated. Use UibTimepickerController instead."),angular.extend(this,$controller("UibTimepickerController",{$scope:$scope,$element:$element,$attrs:$attrs}))}]).directive("timepicker",["$log","$timepickerSuppressWarning",function($log,$timepickerSuppressWarning){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",controllerAs:"timepicker",replace:!0,scope:{},templateUrl:function(element,attrs){return attrs.templateUrl||"template/timepicker/timepicker.html"},link:function(scope,element,attrs,ctrls){$timepickerSuppressWarning||$log.warn("timepicker is now deprecated. Use uib-timepicker instead.");var timepickerCtrl=ctrls[0],ngModelCtrl=ctrls[1];ngModelCtrl&&timepickerCtrl.init(ngModelCtrl,element.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function($parse){var TYPEAHEAD_REGEXP=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(input){var match=input.match(TYPEAHEAD_REGEXP);if(!match)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+input+'".');return{itemName:match[3],source:$parse(match[4]),viewMapper:$parse(match[2]||match[1]),modelMapper:$parse(match[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","uibTypeaheadParser",function(originalScope,element,attrs,$compile,$parse,$q,$timeout,$document,$window,$rootScope,$position,typeaheadParser){function fireRecalculating(){scope.moveInProgress||(scope.moveInProgress=!0,scope.$digest()),timeoutEventPromise&&$timeout.cancel(timeoutEventPromise),timeoutEventPromise=$timeout(function(){scope.matches.length&&recalculatePosition(),scope.moveInProgress=!1},eventDebounceTime)}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top+=element.prop("offsetHeight")}var modelCtrl,ngModelOptions,HOT_KEYS=[9,13,27,38,40],eventDebounceTime=200,minLength=originalScope.$eval(attrs.typeaheadMinLength);minLength||0===minLength||(minLength=1);var hasFocus,selected,waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,onSelectCallback=$parse(attrs.typeaheadOnSelect),isSelectOnBlur=angular.isDefined(attrs.typeaheadSelectOnBlur)?originalScope.$eval(attrs.typeaheadSelectOnBlur):!1,isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop,inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=attrs.typeaheadAppendToBody?originalScope.$eval(attrs.typeaheadAppendToBody):!1,appendToElementId=attrs.typeaheadAppendToElementId||!1,focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,selectOnExact=attrs.typeaheadSelectOnExact?originalScope.$eval(attrs.typeaheadSelectOnExact):!1,parsedModel=$parse(attrs.ngModel),invokeModelSetter=$parse(attrs.ngModel+"($$$p)"),$setModelValue=function(scope,newValue){return angular.isFunction(parsedModel(originalScope))&&ngModelOptions&&ngModelOptions.$options&&ngModelOptions.$options.getterSetter?invokeModelSetter(scope,{$$$p:newValue}):parsedModel.assign(scope,newValue)},parserResult=typeaheadParser.parse(attrs.uibTypeahead),scope=originalScope.$new(),offDestroy=originalScope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var popUpEl=angular.element("<div uib-typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl),angular.isDefined(attrs.typeaheadPopupTemplateUrl)&&popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl);var resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1)},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){0>index?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var inputIsExactMatch=function(inputValue,index){return scope.matches.length>index&&inputValue?inputValue.toUpperCase()===scope.matches[index].label.toUpperCase():!1},getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),isNoResultsSetter(originalScope,!1),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1,isNoResultsSetter(originalScope,!1),scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});scope.query=inputValue,recalculatePosition(),element.attr("aria-expanded",!0),selectOnExact&&1===scope.matches.length&&inputIsExactMatch(inputValue,0)&&scope.select(0)}else resetMatches(),isNoResultsSetter(originalScope,!0);onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1),isNoResultsSetter(originalScope,!0)})};appendToBody&&(angular.element($window).bind("resize",fireRecalculating),$document.find("body").bind("scroll",fireRecalculating));var timeoutEventPromise;scope.moveInProgress=!1,scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};resetMatches(),scope.select=function(activeIdx){var model,item,locals={};selected=!0,locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)}),resetMatches(),scope.$eval(attrs.typeaheadFocusOnSelect)!==!1&&$timeout(function(){element[0].focus()},0,!1)},element.bind("keydown",function(evt){if(0!==scope.matches.length&&-1!==HOT_KEYS.indexOf(evt.which)){if(-1===scope.activeIdx&&(9===evt.which||13===evt.which))return resetMatches(),void scope.$digest();evt.preventDefault(),40===evt.which?(scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest()):38===evt.which?(scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest()):13===evt.which||9===evt.which?scope.$apply(function(){scope.select(scope.activeIdx)}):27===evt.which&&(evt.stopPropagation(),resetMatches(),scope.$digest())}}),element.bind("blur",function(){isSelectOnBlur&&scope.matches.length&&-1!==scope.activeIdx&&!selected&&(selected=!0,scope.$apply(function(){scope.select(scope.activeIdx)})),hasFocus=!1,selected=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&3!==evt.which&&0!==scope.matches.length&&(resetMatches(),$rootScope.$$phase||scope.$digest())};$document.bind("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler),(appendToBody||appendToElementId)&&$popup.remove(),appendToBody&&(angular.element($window).unbind("resize",fireRecalculating),$document.find("body").unbind("scroll",fireRecalculating)),popUpEl.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):appendToElementId!==!1?angular.element($document[0].getElementById(appendToElementId)).append($popup):element.after($popup),this.init=function(_modelCtrl,_ngModelOptions){modelCtrl=_modelCtrl,ngModelOptions=_ngModelOptions,modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,0===minLength||inputValue&&inputValue.length>=minLength?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),null)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return isEditable||modelCtrl.$setValidity("editable",!0),inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","^?ngModelOptions","uibTypeahead"],link:function(originalScope,element,attrs,ctrls){ctrls[2].init(ctrls[0],ctrls[1])}}}).directive("uibTypeaheadPopup",function(){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(element,attrs){return attrs.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(scope,element,attrs){scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){return scope.matches.length>0},scope.isActive=function(matchIdx){return scope.active==matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function($templateRequest,$compile,$parse){return{scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){$compile(tplContent.trim())(scope,function(clonedElement){element.replaceWith(clonedElement)})})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function($sce,$injector,$log){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}var isSanitizePresent;return isSanitizePresent=$injector.has("$sanitize"),function(matchItem,query){return!isSanitizePresent&&containsHtml(matchItem)&&$log.warn("Unsafe use of typeahead please use ngSanitize"),matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem,isSanitizePresent||(matchItem=$sce.trustAsHtml(matchItem)),matchItem}}]),angular.module("ui.bootstrap.typeahead").value("$typeaheadSuppressWarning",!1).service("typeaheadParser",["$parse","uibTypeaheadParser","$log","$typeaheadSuppressWarning",function($parse,uibTypeaheadParser,$log,$typeaheadSuppressWarning){return $typeaheadSuppressWarning||$log.warn("typeaheadParser is now deprecated. Use uibTypeaheadParser instead."),uibTypeaheadParser}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$window","$rootScope","$uibPosition","typeaheadParser","$log","$typeaheadSuppressWarning",function($compile,$parse,$q,$timeout,$document,$window,$rootScope,$position,typeaheadParser,$log,$typeaheadSuppressWarning){var HOT_KEYS=[9,13,27,38,40],eventDebounceTime=200;return{require:["ngModel","^?ngModelOptions"],link:function(originalScope,element,attrs,ctrls){function fireRecalculating(){scope.moveInProgress||(scope.moveInProgress=!0,scope.$digest()),timeoutEventPromise&&$timeout.cancel(timeoutEventPromise),timeoutEventPromise=$timeout(function(){scope.matches.length&&recalculatePosition(),scope.moveInProgress=!1},eventDebounceTime)}function recalculatePosition(){scope.position=appendToBody?$position.offset(element):$position.position(element),scope.position.top+=element.prop("offsetHeight")}$typeaheadSuppressWarning||$log.warn("typeahead is now deprecated. Use uib-typeahead instead.");var modelCtrl=ctrls[0],ngModelOptions=ctrls[1],minLength=originalScope.$eval(attrs.typeaheadMinLength);minLength||0===minLength||(minLength=1);var hasFocus,selected,waitTime=originalScope.$eval(attrs.typeaheadWaitMs)||0,isEditable=originalScope.$eval(attrs.typeaheadEditable)!==!1,isLoadingSetter=$parse(attrs.typeaheadLoading).assign||angular.noop,onSelectCallback=$parse(attrs.typeaheadOnSelect),isSelectOnBlur=angular.isDefined(attrs.typeaheadSelectOnBlur)?originalScope.$eval(attrs.typeaheadSelectOnBlur):!1,isNoResultsSetter=$parse(attrs.typeaheadNoResults).assign||angular.noop,inputFormatter=attrs.typeaheadInputFormatter?$parse(attrs.typeaheadInputFormatter):void 0,appendToBody=attrs.typeaheadAppendToBody?originalScope.$eval(attrs.typeaheadAppendToBody):!1,appendToElementId=attrs.typeaheadAppendToElementId||!1,focusFirst=originalScope.$eval(attrs.typeaheadFocusFirst)!==!1,selectOnExact=attrs.typeaheadSelectOnExact?originalScope.$eval(attrs.typeaheadSelectOnExact):!1,parsedModel=$parse(attrs.ngModel),invokeModelSetter=$parse(attrs.ngModel+"($$$p)"),$setModelValue=function(scope,newValue){return angular.isFunction(parsedModel(originalScope))&&ngModelOptions&&ngModelOptions.$options&&ngModelOptions.$options.getterSetter?invokeModelSetter(scope,{$$$p:newValue}):parsedModel.assign(scope,newValue)},parserResult=typeaheadParser.parse(attrs.typeahead),scope=originalScope.$new(),offDestroy=originalScope.$on("$destroy",function(){scope.$destroy()});scope.$on("$destroy",offDestroy);var popupId="typeahead-"+scope.$id+"-"+Math.floor(1e4*Math.random());element.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":popupId});var popUpEl=angular.element("<div typeahead-popup></div>");popUpEl.attr({id:popupId,matches:"matches",active:"activeIdx",select:"select(activeIdx)","move-in-progress":"moveInProgress",query:"query",position:"position"}),angular.isDefined(attrs.typeaheadTemplateUrl)&&popUpEl.attr("template-url",attrs.typeaheadTemplateUrl),angular.isDefined(attrs.typeaheadPopupTemplateUrl)&&popUpEl.attr("popup-template-url",attrs.typeaheadPopupTemplateUrl);var resetMatches=function(){scope.matches=[],scope.activeIdx=-1,element.attr("aria-expanded",!1)},getMatchId=function(index){return popupId+"-option-"+index};scope.$watch("activeIdx",function(index){0>index?element.removeAttr("aria-activedescendant"):element.attr("aria-activedescendant",getMatchId(index))});var inputIsExactMatch=function(inputValue,index){return scope.matches.length>index&&inputValue?inputValue.toUpperCase()===scope.matches[index].label.toUpperCase():!1},getMatchesAsync=function(inputValue){var locals={$viewValue:inputValue};isLoadingSetter(originalScope,!0),isNoResultsSetter(originalScope,!1),$q.when(parserResult.source(originalScope,locals)).then(function(matches){var onCurrentRequest=inputValue===modelCtrl.$viewValue;if(onCurrentRequest&&hasFocus)if(matches&&matches.length>0){scope.activeIdx=focusFirst?0:-1,isNoResultsSetter(originalScope,!1),scope.matches.length=0;for(var i=0;i<matches.length;i++)locals[parserResult.itemName]=matches[i],scope.matches.push({id:getMatchId(i),label:parserResult.viewMapper(scope,locals),model:matches[i]});scope.query=inputValue,recalculatePosition(),element.attr("aria-expanded",!0),selectOnExact&&1===scope.matches.length&&inputIsExactMatch(inputValue,0)&&scope.select(0)}else resetMatches(),isNoResultsSetter(originalScope,!0);onCurrentRequest&&isLoadingSetter(originalScope,!1)},function(){resetMatches(),isLoadingSetter(originalScope,!1),isNoResultsSetter(originalScope,!0)})};appendToBody&&(angular.element($window).bind("resize",fireRecalculating),$document.find("body").bind("scroll",fireRecalculating));var timeoutEventPromise;scope.moveInProgress=!1,resetMatches(),scope.query=void 0;var timeoutPromise,scheduleSearchWithTimeout=function(inputValue){timeoutPromise=$timeout(function(){getMatchesAsync(inputValue)},waitTime)},cancelPreviousTimeout=function(){timeoutPromise&&$timeout.cancel(timeoutPromise)};modelCtrl.$parsers.unshift(function(inputValue){return hasFocus=!0,0===minLength||inputValue&&inputValue.length>=minLength?waitTime>0?(cancelPreviousTimeout(),scheduleSearchWithTimeout(inputValue)):getMatchesAsync(inputValue):(isLoadingSetter(originalScope,!1),cancelPreviousTimeout(),resetMatches()),isEditable?inputValue:inputValue?void modelCtrl.$setValidity("editable",!1):(modelCtrl.$setValidity("editable",!0),null)}),modelCtrl.$formatters.push(function(modelValue){var candidateViewValue,emptyViewValue,locals={};return isEditable||modelCtrl.$setValidity("editable",!0),inputFormatter?(locals.$model=modelValue,inputFormatter(originalScope,locals)):(locals[parserResult.itemName]=modelValue,candidateViewValue=parserResult.viewMapper(originalScope,locals),locals[parserResult.itemName]=void 0,emptyViewValue=parserResult.viewMapper(originalScope,locals),candidateViewValue!==emptyViewValue?candidateViewValue:modelValue)}),scope.select=function(activeIdx){var model,item,locals={};selected=!0,locals[parserResult.itemName]=item=scope.matches[activeIdx].model,model=parserResult.modelMapper(originalScope,locals),$setModelValue(originalScope,model),modelCtrl.$setValidity("editable",!0),modelCtrl.$setValidity("parse",!0),onSelectCallback(originalScope,{$item:item,$model:model,$label:parserResult.viewMapper(originalScope,locals)}),resetMatches(),scope.$eval(attrs.typeaheadFocusOnSelect)!==!1&&$timeout(function(){element[0].focus()},0,!1)},element.bind("keydown",function(evt){if(0!==scope.matches.length&&-1!==HOT_KEYS.indexOf(evt.which)){if(-1===scope.activeIdx&&(9===evt.which||13===evt.which))return resetMatches(),void scope.$digest();evt.preventDefault(),40===evt.which?(scope.activeIdx=(scope.activeIdx+1)%scope.matches.length,scope.$digest()):38===evt.which?(scope.activeIdx=(scope.activeIdx>0?scope.activeIdx:scope.matches.length)-1,scope.$digest()):13===evt.which||9===evt.which?scope.$apply(function(){scope.select(scope.activeIdx)}):27===evt.which&&(evt.stopPropagation(),resetMatches(),scope.$digest())}}),element.bind("blur",function(){isSelectOnBlur&&scope.matches.length&&-1!==scope.activeIdx&&!selected&&(selected=!0,scope.$apply(function(){scope.select(scope.activeIdx)})),hasFocus=!1,selected=!1});var dismissClickHandler=function(evt){element[0]!==evt.target&&3!==evt.which&&0!==scope.matches.length&&(resetMatches(),$rootScope.$$phase||scope.$digest())};$document.bind("click",dismissClickHandler),originalScope.$on("$destroy",function(){$document.unbind("click",dismissClickHandler),(appendToBody||appendToElementId)&&$popup.remove(),appendToBody&&(angular.element($window).unbind("resize",fireRecalculating),$document.find("body").unbind("scroll",fireRecalculating)),popUpEl.remove()});var $popup=$compile(popUpEl)(scope);appendToBody?$document.find("body").append($popup):appendToElementId!==!1?angular.element($document[0].getElementById(appendToElementId)).append($popup):element.after($popup)}}}]).directive("typeaheadPopup",["$typeaheadSuppressWarning","$log",function($typeaheadSuppressWarning,$log){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&"},replace:!0,templateUrl:function(element,attrs){return attrs.popupTemplateUrl||"template/typeahead/typeahead-popup.html"},link:function(scope,element,attrs){$typeaheadSuppressWarning||$log.warn("typeahead-popup is now deprecated. Use uib-typeahead-popup instead."),scope.templateUrl=attrs.templateUrl,scope.isOpen=function(){return scope.matches.length>0},scope.isActive=function(matchIdx){return scope.active==matchIdx},scope.selectActive=function(matchIdx){scope.active=matchIdx},scope.selectMatch=function(activeIdx){scope.select({activeIdx:activeIdx})}}}}]).directive("typeaheadMatch",["$templateRequest","$compile","$parse","$typeaheadSuppressWarning","$log",function($templateRequest,$compile,$parse,$typeaheadSuppressWarning,$log){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(scope,element,attrs){$typeaheadSuppressWarning||$log.warn("typeahead-match is now deprecated. Use uib-typeahead-match instead.");var tplUrl=$parse(attrs.templateUrl)(scope.$parent)||"template/typeahead/typeahead-match.html";$templateRequest(tplUrl).then(function(tplContent){$compile(tplContent.trim())(scope,function(clonedElement){element.replaceWith(clonedElement)})})}}}]).filter("typeaheadHighlight",["$sce","$injector","$log","$typeaheadSuppressWarning",function($sce,$injector,$log,$typeaheadSuppressWarning){function escapeRegexp(queryToEscape){return queryToEscape.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function containsHtml(matchItem){return/<.*>/g.test(matchItem)}var isSanitizePresent;return isSanitizePresent=$injector.has("$sanitize"),function(matchItem,query){return $typeaheadSuppressWarning||$log.warn("typeaheadHighlight is now deprecated. Use uibTypeaheadHighlight instead."),!isSanitizePresent&&containsHtml(matchItem)&&$log.warn("Unsafe use of typeahead please use ngSanitize"),matchItem=query?(""+matchItem).replace(new RegExp(escapeRegexp(query),"gi"),"<strong>$&</strong>"):matchItem,isSanitizePresent||(matchItem=$sce.trustAsHtml(matchItem)),matchItem}}]),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion-group.html",'<div class="panel {{panelClass || \'panel-default\'}}">\n  <div class="panel-heading" ng-keypress="toggleOpen($event)">\n    <h4 class="panel-title">\n      <a href tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse collapse" uib-collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n');
}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissible\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n  <div class="carousel-inner" ng-transclude></div>\n  <a role="button" href class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n    <span class="sr-only">previous</span>\n  </a>\n  <a role="button" href class="right carousel-control" ng-click="next()" ng-show="slides.length > 1">\n    <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n    <span class="sr-only">next</span>\n  </a>\n  <ol class="carousel-indicators" ng-show="slides.length > 1">\n    <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n      <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n    </li>\n  </ol>\n</div>')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/carousel/slide.html",'<div ng-class="{\n    \'active\': active\n  }" class="item text-center" ng-transclude></div>\n')}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <uib-daypicker ng-switch-when="day" tabindex="0"></uib-daypicker>\n  <uib-monthpicker ng-switch-when="month" tabindex="0"></uib-monthpicker>\n  <uib-yearpicker ng-switch-when="year" tabindex="0"></uib-yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/popup.html",'<ul class="dropdown-menu" dropdown-nested ng-if="isOpen" style="display: block" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{::dt.uid}}" ng-class="::dt.customClass">\n        <button type="button" style="min-width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/backdrop.html",'<div uib-modal-animation-class="fade"\n     modal-in-class="in"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/modal/window.html",'<div modal-render="{{$isRendered}}" tabindex="-1" role="dialog" class="modal"\n    uib-modal-animation-class="fade"\n    modal-in-class="in"\n    ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}">\n    <div class="modal-dialog" ng-class="size ? \'modal-\' + size : \'\'"><div class="modal-content" uib-modal-transclude></div></div>\n</div>\n')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n</ul>\n')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)">{{::getText(\'first\')}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)">{{::getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)">{{page.text}}</a></li>\n  <li ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)">{{::getText(\'next\')}}</a></li>\n  <li ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)">{{::getText(\'last\')}}</a></li>\n</ul>\n')}]),angular.module("template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-html-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tooltip/tooltip-template-popup.html",'<div\n  tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner"\n    uib-tooltip-template-transclude="contentExp()"\n    tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("template/popover/popover-html.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover-html.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind-html="contentExp()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover-template.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover-template.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content"\n        uib-tooltip-template-transclude="contentExp()"\n        tooltip-template-transclude-scope="originScope()"></div>\n  </div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/popover/popover.html",'<div tooltip-animation-class="fade"\n  uib-tooltip-classes\n  ng-class="{ in: isOpen() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-if="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" style="min-width: 0;" ng-transclude></div>\n</div>\n')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}" aria-valuetext="{{r.title}}"></i>\n</span>\n')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/timepicker/timepicker.html",'<table>\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group" ng-class="{\'has-error\': invalidHours}">\n        <input style="width:50px;" type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td>:</td>\n      <td class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n        <input style="width:50px;" type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}">\n      </td>\n      <td ng-show="showMeridian"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="{{::tabindex}}"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-match.html",'<a href tabindex="-1" ng-bind-html="match.label | uibTypeaheadHighlight:query"></a>\n')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function($templateCache){$templateCache.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),!angular.$$csp()&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),function(window,angular,undefined){function ngMessageDirectiveFactory(restrict){function contains(collection,key){return collection?isArray(collection)?collection.indexOf(key)>=0:collection.hasOwnProperty(key):void 0}return["$animate",function($animate){return{restrict:"AE",transclude:"element",terminal:!0,require:"^^ngMessages",link:function(scope,element,attrs,ngMessagesCtrl,$transclude){var records,commentNode=element[0],staticExp=attrs.ngMessage||attrs.when,dynamicExp=attrs.ngMessageExp||attrs.whenExp,assignRecords=function(items){records=items?isArray(items)?items:items.split(/[\s,]+/):null,ngMessagesCtrl.reRender()};dynamicExp?(assignRecords(scope.$eval(dynamicExp)),scope.$watchCollection(dynamicExp,assignRecords)):assignRecords(staticExp);var currentElement,messageCtrl;ngMessagesCtrl.register(commentNode,messageCtrl={test:function(name){return contains(records,name)},attach:function(){currentElement||$transclude(scope,function(elm){$animate.enter(elm,null,element),currentElement=elm,currentElement.on("$destroy",function(){currentElement&&(ngMessagesCtrl.deregister(commentNode),messageCtrl.detach())})})},detach:function(){if(currentElement){var elm=currentElement;currentElement=null,$animate.leave(elm)}}})}}}]}var isArray=angular.isArray,forEach=angular.forEach,isString=angular.isString,jqLite=angular.element;angular.module("ngMessages",[]).directive("ngMessages",["$animate",function($animate){function isAttrTruthy(scope,attr){return isString(attr)&&0===attr.length||truthy(scope.$eval(attr))}function truthy(val){return isString(val)?val.length:!!val}var ACTIVE_CLASS="ng-active",INACTIVE_CLASS="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function($element,$scope,$attrs){function findPreviousMessage(parent,comment){for(var prevNode=comment,parentLookup=[];prevNode&&prevNode!==parent;){var prevKey=prevNode.$$ngMessageNode;if(prevKey&&prevKey.length)return messages[prevKey];prevNode.childNodes.length&&-1==parentLookup.indexOf(prevNode)?(parentLookup.push(prevNode),prevNode=prevNode.childNodes[prevNode.childNodes.length-1]):prevNode=prevNode.previousSibling||prevNode.parentNode}}function insertMessageNode(parent,comment,key){var messageNode=messages[key];if(ctrl.head){var match=findPreviousMessage(parent,comment);match?(messageNode.next=match.next,match.next=messageNode):(messageNode.next=ctrl.head,ctrl.head=messageNode)}else ctrl.head=messageNode}function removeMessageNode(parent,comment,key){var messageNode=messages[key],match=findPreviousMessage(parent,comment);match?match.next=messageNode.next:ctrl.head=messageNode.next}var renderLater,cachedCollection,ctrl=this,latestKey=0,messages=this.messages={};this.render=function(collection){collection=collection||{},renderLater=!1,cachedCollection=collection;for(var multiple=isAttrTruthy($scope,$attrs.ngMessagesMultiple)||isAttrTruthy($scope,$attrs.multiple),unmatchedMessages=[],matchedKeys={},messageItem=ctrl.head,messageFound=!1,totalMessages=0;null!=messageItem;){totalMessages++;var messageCtrl=messageItem.message,messageUsed=!1;messageFound||forEach(collection,function(value,key){if(!messageUsed&&truthy(value)&&messageCtrl.test(key)){if(matchedKeys[key])return;matchedKeys[key]=!0,messageUsed=!0,messageCtrl.attach()}}),messageUsed?messageFound=!multiple:unmatchedMessages.push(messageCtrl),messageItem=messageItem.next}forEach(unmatchedMessages,function(messageCtrl){messageCtrl.detach()}),unmatchedMessages.length!==totalMessages?$animate.setClass($element,ACTIVE_CLASS,INACTIVE_CLASS):$animate.setClass($element,INACTIVE_CLASS,ACTIVE_CLASS)},$scope.$watchCollection($attrs.ngMessages||$attrs["for"],ctrl.render),this.reRender=function(){renderLater||(renderLater=!0,$scope.$evalAsync(function(){renderLater&&cachedCollection&&ctrl.render(cachedCollection)}))},this.register=function(comment,messageCtrl){var nextKey=latestKey.toString();messages[nextKey]={message:messageCtrl},insertMessageNode($element[0],comment,nextKey),comment.$$ngMessageNode=nextKey,latestKey++,ctrl.reRender()},this.deregister=function(comment){var key=comment.$$ngMessageNode;delete comment.$$ngMessageNode,removeMessageNode($element[0],comment,key),delete messages[key],ctrl.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function($templateRequest,$document,$compile){return{restrict:"AE",require:"^^ngMessages",link:function($scope,element,attrs){var src=attrs.ngMessagesInclude||attrs.src;$templateRequest(src).then(function(html){$compile(html)($scope,function(contents){element.after(contents);var anchor=jqLite($document[0].createComment(" ngMessagesInclude: "+src+" "));element.after(anchor),element.remove()})})}}}]).directive("ngMessage",ngMessageDirectiveFactory("AE")).directive("ngMessageExp",ngMessageDirectiveFactory("A"))}(window,window.angular),"function"==typeof define&&define.amd&&define(["bootbox"],function(bootbox){window.bootbox=bootbox}),angular.module("ngBootbox",[]).directive("ngBootboxAlert",function($ngBootbox){return{restrict:"A",scope:!1,link:function(scope,element,attr){var msg=attr.ngBootboxAlert||"Yo!";element.bind("click",function(){$ngBootbox.alert(msg)})}}}).directive("ngBootboxConfirm",function($ngBootbox){return{restrict:"A",scope:{actionOK:"&ngBootboxConfirmAction",actionCancel:"&ngBootboxConfirmActionCancel"},link:function(scope,element,attr){var msg=attr.ngBootboxConfirm||"Are you sure?";element.bind("click",function(){$ngBootbox.confirm(msg).then(function(){scope.actionOK()},function(){scope.actionCancel()})})}}}).directive("ngBootboxPrompt",function($ngBootbox){return{restrict:"A",scope:{actionOK:"&ngBootboxPromptAction",actionCancel:"&ngBootboxPromptActionCancel"},link:function(scope,element,attr){var msg=attr.ngBootboxPrompt||"Are you sure?";element.bind("click",function(){$ngBootbox.prompt(msg).then(function(result){scope.actionOK({result:result})},function(){scope.actionCancel()})})}}}).directive("ngBootboxCustomDialog",function($ngBootbox){return{restrict:"A",scope:{title:"@ngBootboxTitle",buttons:"=ngBootboxButtons",className:"@ngBootboxClassName",data:"=ngBootboxData",options:"=ngBootboxOptions"},link:function(scope,element,attr){var options={},templateUrl=attr.ngBootboxCustomDialogTemplate;scope.options&&(options=scope.options),scope.title&&(options.title=scope.title),scope.buttons&&(options.buttons=scope.buttons),scope.className&&(options.className=scope.className),scope.data&&(options.data=scope.data),templateUrl?options.templateUrl=templateUrl:options.message=attr.ngBootboxCustomDialog,element.bind("click",function(){$ngBootbox.customDialog(options)})}}}).factory("$ngBootbox",function($q,$templateCache,$compile,$rootScope,$http,$window){function getTemplate(templateId){var def=$q.defer(),template=$templateCache.get(templateId);return"undefined"==typeof template?$http.get(templateId).success(function(data){$templateCache.put(templateId,data),def.resolve(data)}):def.resolve(template),def.promise}return{alert:function(msg){var deferred=$q.defer();return $window.bootbox.alert(msg,function(){deferred.resolve()}),deferred.promise},confirm:function(msg){var deferred=$q.defer();return $window.bootbox.confirm(msg,function(result){result?deferred.resolve():deferred.reject()}),deferred.promise},prompt:function(msg){var deferred=$q.defer();return $window.bootbox.prompt(msg,function(result){null!==result?deferred.resolve(result):deferred.reject()}),deferred.promise},customDialog:function(options){options.templateUrl?getTemplate(options.templateUrl).then(function(template){options.scope=options.scope||$rootScope,options.message=$compile(template)(options.scope),$window.bootbox.dialog(options)})["catch"](function(){$window.bootbox.dialog(options)}):$window.bootbox.dialog(options)},setDefaults:function(options){$window.bootbox.setDefaults(options)},hideAll:function(){$window.bootbox.hideAll()},setLocale:function(name){$window.bootbox.setLocale(name)},addLocale:function(name,values){$window.bootbox.addLocale(name,values)},removeLocale:function(name){$window.bootbox.removeLocale(name)}}}),function(root,factory){"function"==typeof define&&define.amd?define(["angular","dropzone"],factory):factory(root.angular,root.Dropzone)}(this,function(angular,Dropzone){return angular.module("ngDropzone",[]).directive("ngDropzone",function(){return{restrict:"AE",template:"<div ng-transclude></div>",transclude:!0,scope:{dropzone:"=",dropzoneConfig:"=",eventHandlers:"="},link:function(scope,element,attrs,ctrls){try{}catch(error){throw new Error("Dropzone.js not loaded.")}var dropzone=new Dropzone(element[0],scope.dropzoneConfig);scope.eventHandlers&&Object.keys(scope.eventHandlers).forEach(function(eventName){dropzone.on(eventName,scope.eventHandlers[eventName])}),scope.dropzone=dropzone}}})}),angular.module("yaru22.angular-timeago",[]).directive("timeAgo",["timeAgo","nowTime",function(timeAgo,nowTime){return{restrict:"EA",link:function(scope,elem,attrs){var fromTime;attrs.$observe("fromTime",function(value){fromTime=timeAgo.parse(value)}),scope.$watch(function(){return nowTime()-fromTime},function(value){angular.element(elem).text(timeAgo.inWords(value))})}}}]).factory("nowTime",["$timeout",function($timeout){var nowTime=Date.now(),updateTime=function(){$timeout(function(){nowTime=Date.now(),updateTime()},1e3)};return updateTime(),function(){return nowTime}}]).factory("timeAgo",function(){var service={};return service.settings={refreshMillis:6e4,allowFuture:!1,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",numbers:[]}},service.inWords=function(distanceMillis){function substitute(stringOrFunction,number){var string=angular.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction,value=$l.numbers&&$l.numbers[number]||number;return string.replace(/%d/i,value)}var $l=service.settings.strings,prefix=$l.prefixAgo,suffix=$l.suffixAgo;service.settings.allowFuture&&0>distanceMillis&&(prefix=$l.prefixFromNow,suffix=$l.suffixFromNow);var seconds=Math.abs(distanceMillis)/1e3,minutes=seconds/60,hours=minutes/60,days=hours/24,years=days/365,words=45>seconds&&substitute($l.seconds,Math.round(seconds))||90>seconds&&substitute($l.minute,1)||45>minutes&&substitute($l.minutes,Math.round(minutes))||90>minutes&&substitute($l.hour,1)||24>hours&&substitute($l.hours,Math.round(hours))||42>hours&&substitute($l.day,1)||30>days&&substitute($l.days,Math.round(days))||45>days&&substitute($l.month,1)||365>days&&substitute($l.months,Math.round(days/30))||1.5>years&&substitute($l.year,1)||substitute($l.years,Math.round(years)),separator=void 0===$l.wordSeparator?" ":$l.wordSeparator;return[prefix,words,suffix].join(separator).trim()},service.parse=function(iso8601){if(angular.isNumber(iso8601))return parseInt(iso8601,10);var s=iso8601.trim();return s=s.replace(/\.\d+/,""),s=s.replace(/-/,"/").replace(/-/,"/"),s=s.replace(/T/," ").replace(/Z/," UTC"),s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(s)},service}).filter("timeAgo",["nowTime","timeAgo",function(nowTime,timeAgo){return function(value){var fromTime=timeAgo.parse(value),diff=nowTime()-fromTime;return timeAgo.inWords(diff)}}]),function(){angular.module("ui.tree",[]).constant("treeConfig",{treeClass:"angular-ui-tree",emptyTreeClass:"angular-ui-tree-empty",hiddenClass:"angular-ui-tree-hidden",nodesClass:"angular-ui-tree-nodes",nodeClass:"angular-ui-tree-node",handleClass:"angular-ui-tree-handle",placeholderClass:"angular-ui-tree-placeholder",dragClass:"angular-ui-tree-drag",dragThreshold:3,levelThreshold:30})}(),function(){angular.module("ui.tree").controller("TreeHandleController",["$scope","$element",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$nodeScope=null,$scope.$type="uiTreeHandle"}])}(),function(){angular.module("ui.tree").controller("TreeNodeController",["$scope","$element",function($scope,$element){function countSubDepth(scope){var i,childNodes,count=0,nodes=scope.childNodes();for(i=0;i<nodes.length;i++)childNodes=nodes[i].$childNodesScope,childNodes&&childNodes.childNodesCount()>0&&(count=1,countSubDepth(childNodes));subDepth+=count}this.scope=$scope,$scope.$element=$element,$scope.$modelValue=null,
$scope.$parentNodeScope=null,$scope.$childNodesScope=null,$scope.$parentNodesScope=null,$scope.$treeScope=null,$scope.$handleScope=null,$scope.$type="uiTreeNode",$scope.$$apply=!1,$scope.collapsed=!1,$scope.init=function(controllersArr){var treeNodesCtrl=controllersArr[0];$scope.$treeScope=controllersArr[1]?controllersArr[1].scope:null,$scope.$parentNodeScope=treeNodesCtrl.scope.$nodeScope,$scope.$modelValue=treeNodesCtrl.scope.$modelValue[$scope.$index],$scope.$parentNodesScope=treeNodesCtrl.scope,treeNodesCtrl.scope.initSubNode($scope),$element.on("$destroy",function(){treeNodesCtrl.scope.destroySubNode($scope)})},$scope.index=function(){return $scope.$parentNodesScope.$modelValue.indexOf($scope.$modelValue)},$scope.dragEnabled=function(){return!($scope.$treeScope&&!$scope.$treeScope.dragEnabled)},$scope.isSibling=function(targetNode){return $scope.$parentNodesScope==targetNode.$parentNodesScope},$scope.isChild=function(targetNode){var nodes=$scope.childNodes();return nodes&&nodes.indexOf(targetNode)>-1},$scope.prev=function(){var index=$scope.index();return index>0?$scope.siblings()[index-1]:null},$scope.siblings=function(){return $scope.$parentNodesScope.childNodes()},$scope.childNodesCount=function(){return $scope.childNodes()?$scope.childNodes().length:0},$scope.hasChild=function(){return $scope.childNodesCount()>0},$scope.childNodes=function(){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue?$scope.$childNodesScope.childNodes():null},$scope.accept=function(sourceNode,destIndex){return $scope.$childNodesScope&&$scope.$childNodesScope.$modelValue&&$scope.$childNodesScope.accept(sourceNode,destIndex)},$scope.removeNode=function(){var node=$scope.remove();return $scope.$callbacks.removed(node),node},$scope.remove=function(){return $scope.$parentNodesScope.removeNode($scope)},$scope.toggle=function(){$scope.collapsed=!$scope.collapsed},$scope.collapse=function(){$scope.collapsed=!0},$scope.expand=function(){$scope.collapsed=!1},$scope.depth=function(){var parentNode=$scope.$parentNodeScope;return parentNode?parentNode.depth()+1:1};var subDepth=0;$scope.maxSubDepth=function(){return subDepth=0,$scope.$childNodesScope&&countSubDepth($scope.$childNodesScope),subDepth}}])}(),function(){angular.module("ui.tree").controller("TreeNodesController",["$scope","$element",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$modelValue=null,$scope.$nodeScope=null,$scope.$treeScope=null,$scope.$type="uiTreeNodes",$scope.$nodesMap={},$scope.nodropEnabled=!1,$scope.maxDepth=0,$scope.cloneEnabled=!1,$scope.initSubNode=function(subNode){return subNode.$modelValue?void($scope.$nodesMap[subNode.$modelValue.$$hashKey]=subNode):null},$scope.destroySubNode=function(subNode){return subNode.$modelValue?void($scope.$nodesMap[subNode.$modelValue.$$hashKey]=null):null},$scope.accept=function(sourceNode,destIndex){return $scope.$treeScope.$callbacks.accept(sourceNode,$scope,destIndex)},$scope.beforeDrag=function(sourceNode){return $scope.$treeScope.$callbacks.beforeDrag(sourceNode)},$scope.isParent=function(node){return node.$parentNodesScope==$scope},$scope.hasChild=function(){return $scope.$modelValue.length>0},$scope.safeApply=function(fn){var phase=this.$root.$$phase;"$apply"==phase||"$digest"==phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)},$scope.removeNode=function(node){var index=$scope.$modelValue.indexOf(node.$modelValue);return index>-1?($scope.safeApply(function(){$scope.$modelValue.splice(index,1)[0]}),node):null},$scope.insertNode=function(index,nodeData){$scope.safeApply(function(){$scope.$modelValue.splice(index,0,nodeData)})},$scope.childNodes=function(){var i,nodes=[];if($scope.$modelValue)for(i=0;i<$scope.$modelValue.length;i++)nodes.push($scope.$nodesMap[$scope.$modelValue[i].$$hashKey]);return nodes},$scope.depth=function(){return $scope.$nodeScope?$scope.$nodeScope.depth():0},$scope.outOfDepth=function(sourceNode){var maxDepth=$scope.maxDepth||$scope.$treeScope.maxDepth;return maxDepth>0?$scope.depth()+sourceNode.maxSubDepth()+1>maxDepth:!1}}])}(),function(){angular.module("ui.tree").controller("TreeController",["$scope","$element",function($scope,$element){this.scope=$scope,$scope.$element=$element,$scope.$nodesScope=null,$scope.$type="uiTree",$scope.$emptyElm=null,$scope.$callbacks=null,$scope.dragEnabled=!0,$scope.emptyPlaceholderEnabled=!0,$scope.maxDepth=0,$scope.dragDelay=0,$scope.cloneEnabled=!1,$scope.nodropEnabled=!1,$scope.isEmpty=function(){return $scope.$nodesScope&&$scope.$nodesScope.$modelValue&&0===$scope.$nodesScope.$modelValue.length},$scope.place=function(placeElm){$scope.$nodesScope.$element.append(placeElm),$scope.$emptyElm.remove()},this.resetEmptyElement=function(){$scope.$nodesScope.$modelValue&&0!==$scope.$nodesScope.$modelValue.length||!$scope.emptyPlaceholderEnabled?$scope.$emptyElm.remove():$element.append($scope.$emptyElm)},$scope.resetEmptyElement=this.resetEmptyElement;var collapseOrExpand=function(scope,collapsed){var i,subScope,nodes=scope.childNodes();for(i=0;i<nodes.length;i++)collapsed?nodes[i].collapse():nodes[i].expand(),subScope=nodes[i].$childNodesScope,subScope&&collapseOrExpand(subScope,collapsed)};$scope.collapseAll=function(){collapseOrExpand($scope.$nodesScope,!0)},$scope.expandAll=function(){collapseOrExpand($scope.$nodesScope,!1)}}])}(),function(){angular.module("ui.tree").directive("uiTree",["treeConfig","$window",function(treeConfig,$window){return{restrict:"A",scope:!0,controller:"TreeController",link:function(scope,element,attrs,ctrl){var callbacks={accept:null,beforeDrag:null},config={};angular.extend(config,treeConfig),config.treeClass&&element.addClass(config.treeClass),scope.$emptyElm=angular.element($window.document.createElement("div")),config.emptyTreeClass&&scope.$emptyElm.addClass(config.emptyTreeClass),scope.$watch("$nodesScope.$modelValue.length",function(){scope.$nodesScope.$modelValue&&ctrl.resetEmptyElement()},!0),scope.$watch(attrs.dragEnabled,function(val){"boolean"==typeof val&&(scope.dragEnabled=val)}),scope.$watch(attrs.emptyPlaceholderEnabled,function(val){"boolean"==typeof val&&(scope.emptyPlaceholderEnabled=val,ctrl.resetEmptyElement())}),scope.$watch(attrs.nodropEnabled,function(val){"boolean"==typeof val&&(scope.nodropEnabled=val)}),scope.$watch(attrs.cloneEnabled,function(val){"boolean"==typeof val&&(scope.cloneEnabled=val)}),scope.$watch(attrs.maxDepth,function(val){"number"==typeof val&&(scope.maxDepth=val)}),scope.$watch(attrs.dragDelay,function(val){"number"==typeof val&&(scope.dragDelay=val)}),callbacks.accept=function(sourceNodeScope,destNodesScope,destIndex){return!(destNodesScope.nodropEnabled||destNodesScope.outOfDepth(sourceNodeScope))},callbacks.beforeDrag=function(sourceNodeScope){return!0},callbacks.removed=function(node){},callbacks.dropped=function(event){},callbacks.dragStart=function(event){},callbacks.dragMove=function(event){},callbacks.dragStop=function(event){},callbacks.beforeDrop=function(event){},scope.$watch(attrs.uiTree,function(newVal,oldVal){angular.forEach(newVal,function(value,key){callbacks[key]&&"function"==typeof value&&(callbacks[key]=value)}),scope.$callbacks=callbacks},!0)}}}])}(),function(){angular.module("ui.tree").directive("uiTreeHandle",["treeConfig",function(treeConfig){return{require:"^uiTreeNode",restrict:"A",scope:!0,controller:"TreeHandleController",link:function(scope,element,attrs,treeNodeCtrl){var config={};angular.extend(config,treeConfig),config.handleClass&&element.addClass(config.handleClass),scope!=treeNodeCtrl.scope&&(scope.$nodeScope=treeNodeCtrl.scope,treeNodeCtrl.scope.$handleScope=scope)}}}])}(),function(){angular.module("ui.tree").directive("uiTreeNode",["treeConfig","UiTreeHelper","$window","$document","$timeout",function(treeConfig,UiTreeHelper,$window,$document,$timeout){return{require:["^uiTreeNodes","^uiTree"],restrict:"A",controller:"TreeNodeController",link:function(scope,element,attrs,controllersArr){var firstMoving,dragInfo,pos,placeElm,hiddenPlaceElm,dragElm,elements,document_height,document_width,dragStart,dragMove,dragEnd,dragStartEvent,dragMoveEvent,dragEndEvent,dragCancelEvent,dragDelay,bindDrag,keydownHandler,config={},hasTouch="ontouchstart"in window,treeScope=null,body=document.body,html=document.documentElement;angular.extend(config,treeConfig),config.nodeClass&&element.addClass(config.nodeClass),scope.init(controllersArr),scope.collapsed=!!UiTreeHelper.getNodeAttribute(scope,"collapsed"),scope.sourceOnly=scope.nodropEnabled||scope.$treeScope.nodropEnabled,scope.$watch(attrs.collapsed,function(val){"boolean"==typeof val&&(scope.collapsed=val)}),scope.$watch("collapsed",function(val){UiTreeHelper.setNodeAttribute(scope,"collapsed",val),attrs.$set("collapsed",val)}),dragStart=function(e){if((hasTouch||2!=e.button&&3!=e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var eventElmTagName,tagName,eventObj,tdElm,hStyle,eventElm=angular.element(e.target),eventScope=eventElm.scope(),cloneElm=element.clone();if(eventScope&&eventScope.$type&&!("uiTreeNode"!=eventScope.$type&&"uiTreeHandle"!=eventScope.$type||"uiTreeNode"==eventScope.$type&&eventScope.$handleScope||(eventElmTagName=eventElm.prop("tagName").toLowerCase(),"input"==eventElmTagName||"textarea"==eventElmTagName||"button"==eventElmTagName||"select"==eventElmTagName))){for(;eventElm&&eventElm[0]&&eventElm[0]!=element;){if(UiTreeHelper.nodrag(eventElm))return;eventElm=eventElm.parent()}scope.beforeDrag(scope)&&(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),eventObj=UiTreeHelper.eventObj(e),firstMoving=!0,dragInfo=UiTreeHelper.dragInfo(scope),scope.$apply(function(){scope.$treeScope.$callbacks.dragStart(dragInfo.eventArgs(elements,pos))}),tagName=scope.$element.prop("tagName"),"tr"===tagName.toLowerCase()?(placeElm=angular.element($window.document.createElement(tagName)),tdElm=angular.element($window.document.createElement("td")).addClass(config.placeholderClass),placeElm.append(tdElm)):placeElm=angular.element($window.document.createElement(tagName)).addClass(config.placeholderClass),hiddenPlaceElm=angular.element($window.document.createElement(tagName)),config.hiddenClass&&hiddenPlaceElm.addClass(config.hiddenClass),pos=UiTreeHelper.positionStarted(eventObj,scope.$element),placeElm.css("height",UiTreeHelper.height(scope.$element)+"px"),placeElm.css("width",UiTreeHelper.width(scope.$element)+"px"),dragElm=angular.element($window.document.createElement(scope.$parentNodesScope.$element.prop("tagName"))).addClass(scope.$parentNodesScope.$element.attr("class")).addClass(config.dragClass),dragElm.css("width",UiTreeHelper.width(scope.$element)+"px"),dragElm.css("z-index",9999),hStyle=(scope.$element[0].querySelector(".angular-ui-tree-handle")||scope.$element[0]).currentStyle,hStyle&&(document.body.setAttribute("ui-tree-cursor",$document.find("body").css("cursor")||""),$document.find("body").css({cursor:hStyle.cursor+"!important"})),scope.sourceOnly&&placeElm.css("display","none"),scope.$element.after(placeElm),scope.$element.after(hiddenPlaceElm),dragInfo.isClone()&&scope.sourceOnly?dragElm.append(cloneElm):dragElm.append(scope.$element),$document.find("body").append(dragElm),dragElm.css({left:eventObj.pageX-pos.offsetX+"px",top:eventObj.pageY-pos.offsetY+"px"}),elements={placeholder:placeElm,dragging:dragElm},angular.element($document).bind("touchend",dragEndEvent),angular.element($document).bind("touchcancel",dragEndEvent),angular.element($document).bind("touchmove",dragMoveEvent),angular.element($document).bind("mouseup",dragEndEvent),angular.element($document).bind("mousemove",dragMoveEvent),angular.element($document).bind("mouseleave",dragCancelEvent),document_height=Math.max(body.scrollHeight,body.offsetHeight,html.clientHeight,html.scrollHeight,html.offsetHeight),document_width=Math.max(body.scrollWidth,body.offsetWidth,html.clientWidth,html.scrollWidth,html.offsetWidth))}}},dragMove=function(e){var prev,next,leftElmPos,topElmPos,top_scroll,bottom_scroll,target,decrease,targetX,targetY,displayElm,targetNode,targetElm,isEmpty,targetOffset,targetBefore,eventObj=UiTreeHelper.eventObj(e);if(dragElm){if(e.preventDefault(),$window.getSelection?$window.getSelection().removeAllRanges():$window.document.selection&&$window.document.selection.empty(),leftElmPos=eventObj.pageX-pos.offsetX,topElmPos=eventObj.pageY-pos.offsetY,0>leftElmPos&&(leftElmPos=0),0>topElmPos&&(topElmPos=0),topElmPos+10>document_height&&(topElmPos=document_height-10),leftElmPos+10>document_width&&(leftElmPos=document_width-10),dragElm.css({left:leftElmPos+"px",top:topElmPos+"px"}),top_scroll=window.pageYOffset||$window.document.documentElement.scrollTop,bottom_scroll=top_scroll+(window.innerHeight||$window.document.clientHeight||$window.document.clientHeight),bottom_scroll<eventObj.pageY&&document_height>=bottom_scroll&&window.scrollBy(0,10),top_scroll>eventObj.pageY&&window.scrollBy(0,-10),UiTreeHelper.positionMoved(e,pos,firstMoving),firstMoving)return void(firstMoving=!1);if(pos.dirAx&&pos.distAxX>=config.levelThreshold&&(pos.distAxX=0,pos.distX>0&&(prev=dragInfo.prev(),prev&&!prev.collapsed&&prev.accept(scope,prev.childNodesCount())&&(prev.$childNodesScope.$element.append(placeElm),dragInfo.moveTo(prev.$childNodesScope,prev.childNodes(),prev.childNodesCount()))),pos.distX<0&&(next=dragInfo.next(),next||(target=dragInfo.parentNode(),target&&target.$parentNodesScope.accept(scope,target.index()+1)&&(target.$element.after(placeElm),dragInfo.moveTo(target.$parentNodesScope,target.siblings(),target.index()+1))))),decrease=UiTreeHelper.offset(dragElm).left-UiTreeHelper.offset(placeElm).left>=config.threshold,targetX=eventObj.pageX-$window.document.body.scrollLeft,targetY=eventObj.pageY-(window.pageYOffset||$window.document.documentElement.scrollTop),angular.isFunction(dragElm.hide)?dragElm.hide():(displayElm=dragElm[0].style.display,dragElm[0].style.display="none"),$window.document.elementFromPoint(targetX,targetY),targetElm=angular.element($window.document.elementFromPoint(targetX,targetY)),angular.isFunction(dragElm.show)?dragElm.show():dragElm[0].style.display=displayElm,!pos.dirAx){if(targetNode=targetElm.scope(),isEmpty=!1,!targetNode)return;if(!targetNode.$treeScope||targetNode.$parent.nodropEnabled||targetNode.$treeScope.nodropEnabled||placeElm.css("display","block"),"uiTree"==targetNode.$type&&targetNode.dragEnabled&&(isEmpty=targetNode.isEmpty()),"uiTreeHandle"==targetNode.$type&&(targetNode=targetNode.$nodeScope),"uiTreeNode"!=targetNode.$type&&!isEmpty)return;treeScope&&placeElm.parent()[0]!=treeScope.$element[0]&&(treeScope.resetEmptyElement(),treeScope=null),isEmpty?(treeScope=targetNode,targetNode.$nodesScope.accept(scope,0)&&(targetNode.place(placeElm),dragInfo.moveTo(targetNode.$nodesScope,targetNode.$nodesScope.childNodes(),0))):targetNode.dragEnabled()&&(targetElm=targetNode.$element,targetOffset=UiTreeHelper.offset(targetElm),targetBefore=targetNode.horizontal?eventObj.pageX<targetOffset.left+UiTreeHelper.width(targetElm)/2:eventObj.pageY<targetOffset.top+UiTreeHelper.height(targetElm)/2,targetNode.$parentNodesScope.accept(scope,targetNode.index())?targetBefore?(targetElm[0].parentNode.insertBefore(placeElm[0],targetElm[0]),dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index())):(targetElm.after(placeElm),dragInfo.moveTo(targetNode.$parentNodesScope,targetNode.siblings(),targetNode.index()+1)):!targetBefore&&targetNode.accept(scope,targetNode.childNodesCount())&&(targetNode.$childNodesScope.$element.append(placeElm),dragInfo.moveTo(targetNode.$childNodesScope,targetNode.childNodes(),targetNode.childNodesCount())))}scope.$apply(function(){scope.$treeScope.$callbacks.dragMove(dragInfo.eventArgs(elements,pos))})}},dragEnd=function(e){e.preventDefault(),dragElm&&(scope.$treeScope.$apply(function(){scope.$treeScope.$callbacks.beforeDrop(dragInfo.eventArgs(elements,pos))}),hiddenPlaceElm.replaceWith(scope.$element),placeElm.remove(),dragElm.remove(),dragElm=null,scope.$$apply?scope.$treeScope.$apply(function(){dragInfo.apply(),scope.$treeScope.$callbacks.dropped(dragInfo.eventArgs(elements,pos))}):bindDrag(),scope.$treeScope.$apply(function(){scope.$treeScope.$callbacks.dragStop(dragInfo.eventArgs(elements,pos))}),scope.$$apply=!1,dragInfo=null);var oldCur=document.body.getAttribute("ui-tree-cursor");null!==oldCur&&($document.find("body").css({cursor:oldCur}),document.body.removeAttribute("ui-tree-cursor")),angular.element($document).unbind("touchend",dragEndEvent),angular.element($document).unbind("touchcancel",dragEndEvent),angular.element($document).unbind("touchmove",dragMoveEvent),angular.element($document).unbind("mouseup",dragEndEvent),angular.element($document).unbind("mousemove",dragMoveEvent),angular.element($window.document.body).unbind("mouseleave",dragCancelEvent)},dragStartEvent=function(e){scope.dragEnabled()&&dragStart(e)},dragMoveEvent=function(e){dragMove(e)},dragEndEvent=function(e){scope.$$apply=!0,dragEnd(e)},dragCancelEvent=function(e){dragEnd(e)},dragDelay=function(){var to;return{exec:function(fn,ms){ms||(ms=0),this.cancel(),to=$timeout(fn,ms)},cancel:function(){$timeout.cancel(to)}}}(),bindDrag=function(){element.bind("touchstart mousedown",function(e){dragDelay.exec(function(){dragStartEvent(e)},scope.dragDelay||0)}),element.bind("touchend touchcancel mouseup",function(){dragDelay.cancel()})},bindDrag(),keydownHandler=function(e){27==e.keyCode&&(scope.$$apply=!1,dragEnd(e))},angular.element($window.document.body).bind("keydown",keydownHandler),scope.$on("$destroy",function(){angular.element($window.document.body).unbind("keydown",keydownHandler)})}}}])}(),function(){angular.module("ui.tree").directive("uiTreeNodes",["treeConfig","$window",function(treeConfig){return{require:["ngModel","?^uiTreeNode","^uiTree"],restrict:"A",scope:!0,controller:"TreeNodesController",link:function(scope,element,attrs,controllersArr){var config={},ngModel=controllersArr[0],treeNodeCtrl=controllersArr[1],treeCtrl=controllersArr[2];angular.extend(config,treeConfig),config.nodesClass&&element.addClass(config.nodesClass),treeNodeCtrl?(treeNodeCtrl.scope.$childNodesScope=scope,scope.$nodeScope=treeNodeCtrl.scope):treeCtrl.scope.$nodesScope=scope,scope.$treeScope=treeCtrl.scope,ngModel&&(ngModel.$render=function(){ngModel.$modelValue&&angular.isArray(ngModel.$modelValue)||(scope.$modelValue=[]),scope.$modelValue=ngModel.$modelValue}),scope.$watch(attrs.maxDepth,function(val){"number"==typeof val&&(scope.maxDepth=val)}),scope.$watch(function(){return attrs.nodropEnabled},function(newVal){"undefined"!=typeof newVal&&(scope.nodropEnabled=!0)},!0),attrs.$observe("horizontal",function(val){scope.horizontal="undefined"!=typeof val})}}}])}(),function(){angular.module("ui.tree").factory("UiTreeHelper",["$document","$window",function($document,$window){return{nodesData:{},setNodeAttribute:function(scope,attrName,val){if(!scope.$modelValue)return null;var data=this.nodesData[scope.$modelValue.$$hashKey];data||(data={},this.nodesData[scope.$modelValue.$$hashKey]=data),data[attrName]=val},getNodeAttribute:function(scope,attrName){if(!scope.$modelValue)return null;var data=this.nodesData[scope.$modelValue.$$hashKey];return data?data[attrName]:null},nodrag:function(targetElm){return"undefined"!=typeof targetElm.attr("data-nodrag")?"false"!==targetElm.attr("data-nodrag"):!1},eventObj:function(e){var obj=e;return void 0!==e.targetTouches?obj=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(obj=e.originalEvent.targetTouches.item(0)),obj},dragInfo:function(node){return{source:node,sourceInfo:{cloneModel:node.$treeScope.cloneEnabled===!0?angular.copy(node.$modelValue):void 0,nodeScope:node,index:node.index(),nodesScope:node.$parentNodesScope},index:node.index(),siblings:node.siblings().slice(0),parent:node.$parentNodesScope,moveTo:function(parent,siblings,index){this.parent=parent,this.siblings=siblings.slice(0);var i=this.siblings.indexOf(this.source);i>-1&&(this.siblings.splice(i,1),this.source.index()<index&&index--),this.siblings.splice(index,0,this.source),this.index=index},parentNode:function(){return this.parent.$nodeScope},prev:function(){return this.index>0?this.siblings[this.index-1]:null},next:function(){return this.index<this.siblings.length-1?this.siblings[this.index+1]:null},isClone:function(){return this.source.$treeScope.cloneEnabled===!0},clonedNode:function(node){return angular.copy(node)},isDirty:function(){return this.source.$parentNodesScope!=this.parent||this.source.index()!=this.index},isForeign:function(){return this.source.$treeScope!==this.parent.$treeScope},eventArgs:function(elements,pos){return{source:this.sourceInfo,dest:{index:this.index,nodesScope:this.parent},elements:elements,pos:pos}},apply:function(){var nodeData=this.source.$modelValue;this.parent.nodropEnabled||this.parent.$treeScope.nodropEnabled||this.isDirty()&&(this.isClone()&&this.isForeign()?this.parent.insertNode(this.index,angular.copy(nodeData)):(this.source.remove(),this.parent.insertNode(this.index,nodeData)))}}},height:function(element){return element.prop("scrollHeight")},width:function(element){return element.prop("scrollWidth")},offset:function(element){var boundingClientRect=element[0].getBoundingClientRect();return{width:element.prop("offsetWidth"),height:element.prop("offsetHeight"),top:boundingClientRect.top+($window.pageYOffset||$document[0].body.scrollTop||$document[0].documentElement.scrollTop),left:boundingClientRect.left+($window.pageXOffset||$document[0].body.scrollLeft||$document[0].documentElement.scrollLeft)}},positionStarted:function(e,target){var pos={};return pos.offsetX=e.pageX-this.offset(target).left,pos.offsetY=e.pageY-this.offset(target).top,pos.startX=pos.lastX=e.pageX,pos.startY=pos.lastY=e.pageY,pos.nowX=pos.nowY=pos.distX=pos.distY=pos.dirAx=0,pos.dirX=pos.dirY=pos.lastDirX=pos.lastDirY=pos.distAxX=pos.distAxY=0,pos},positionMoved:function(e,pos,firstMoving){pos.lastX=pos.nowX,pos.lastY=pos.nowY,pos.nowX=e.pageX,pos.nowY=e.pageY,pos.distX=pos.nowX-pos.lastX,pos.distY=pos.nowY-pos.lastY,pos.lastDirX=pos.dirX,pos.lastDirY=pos.dirY,pos.dirX=0===pos.distX?0:pos.distX>0?1:-1,pos.dirY=0===pos.distY?0:pos.distY>0?1:-1;var newAx=Math.abs(pos.distX)>Math.abs(pos.distY)?1:0;return firstMoving?(pos.dirAx=newAx,void(pos.moving=!0)):(pos.dirAx!==newAx?(pos.distAxX=0,pos.distAxY=0):(pos.distAxX+=Math.abs(pos.distX),0!==pos.dirX&&pos.dirX!==pos.lastDirX&&(pos.distAxX=0),pos.distAxY+=Math.abs(pos.distY),0!==pos.dirY&&pos.dirY!==pos.lastDirY&&(pos.distAxY=0)),void(pos.dirAx=newAx))}}}])}();