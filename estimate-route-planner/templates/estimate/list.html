<div id="list-estimate" ng-controller="ListEstimateCtrl">
  <div class="row header-estimate" style="margin-bottom:10px">
      <div class="col-md-6">
        <a href="#/new-estimate" class="btn btn-success">Add new</a>
      </div>
      <div class="col-sm-6 text-right">
        <div class="row">
          <label class="control-label col-sm-6" for="status">Filter by status: </label>
          <div class="col-sm-6">
              <select ng-model="selectedStatus" class="form-control"
                ng-options="status.value as status.label for status in filterStatuses">
              </select>
          </div>
        </div>
      </div>
  </div>

<table class="table table-bordered table-hover table-fixed header-fixed">
    <thead>
      <tr>
        <th style="width: 130px;">Estimate Date</th>
        <th>Customer</th>
        <th style="width: 100;">Number</th>
        <th style="width: 120px;">Source</th>
        <th style="width: 130px;">Due Date</th>
        <th>Total</th>
        <th style="width: 100px;">Status</th>
        <th style="width: 60px;">Action</th>
      </tr>
    </thead>
    <tbody>
        <tr ng-repeat="est in (estimates | filter:selectedStatus)">
            <td><a href="#/edit-estimate/{{::est.id}}"><span>{{est.txn_date}}</span></a></td>
            <td><a href="#/edit-estimate/{{::est.id}}"><span>{{est.customer_display_name}}</span></a></td>
            <td><a href="#/edit-estimate/{{::est.id}}"><span>{{est.doc_number}}</span></a></td>
            <td><span>{{est.source}}</span></td>
            <td><span>{{est.due_date}}</span></td>
            <td><span>${{est.total}}</span></td>
            <td><span>{{est.status}}</span></td>
            <td>
                <div class="dropdown">
                  <button class="btn btn-default dropdown-toggle btn-sm" type="button" data-toggle="dropdown">View
                  <span class="caret"></span></button>
                  <ul class="dropdown-menu">
                    <li><a href="#/edit-estimate/{{est.id}}">Edit</a></li>
                    <li><a target="_blank" href="{{$root.baseAPIPath}}&_do=printEstimate&id={{est.id}}">Print</a></li>
                    <li><a
                      ng-click="openSendMailModal(est)">Send</a></li>
                  </ul>
                </div>
            </td>
        </tr>
    </tbody>
</table>
<div class="modal fade" ng-class="{'in': showModal}" ng-style="{'display': showModal ? 'block' : 'none'}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4>Send estimate</h4>
            </div>
            <form role="form" name="sendEmailForm">
                <div class="modal-body">
                  <div class="form-group">
                    <label for="email">To</label>
                    <input type="email" class="form-control" placeholder="Email to receive"
                        ng-required="true"
                        ng-model="sendMailData.to">
                  </div>
                  <div class="form-group">
                    <label for="subject">Subject</label>
                    <input type="text" class="form-control" placeholder="Subject"
                        ng-required="true"
                        ng-model="sendMailData.subject">
                  </div>
                  <div class="form-group">
                    <label for="message">Message</label>
                    <textarea class="form-control" rows="5" placeholder="Content"
                        ng-required="true"
                        ng-model="sendMailData.body"></textarea>
                  </div>
                </div>
                <div class="modal-footer">
                  <button class="btn btn-primary" ng-click="sendMailEstimate()" ng-disabled="sendEmailForm.$invalid || $root.isBusy">Send</button>
                  <button class="btn" type="button" ng-click="showModal = false">Cancel</button>
                </div>
            </form>
        </div>
    </div>
  </div>
  <div class="html-pagination hide">
    <!-- {{estimates.length}} -->
    <ul class="pagination" style="display: none;">
      <li><a href="#" rel="prev">Previous</a></li>
      <li><a href="#">1</a></li>
      <li><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
      <li><a href="#" rel="next">Next</a></li>
    </ul>
  </div>
</div>
